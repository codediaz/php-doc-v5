<div id="mongo.connecting.auth" class="section"><hr />
    <h2 class="title">Authentication</h2>
    <p class="para">
     If MongoDB is started with the <code class="literal">--auth</code> or
     <code class="literal">--keyFile</code> options, you must authenticate before you can do
     any operations with the driver. You may authenticate a connection by
     specifying the username and password in either the connection URI or the
     <code class="literal">&quot;username&quot;</code> and <code class="literal">&quot;password&quot;</code> options for
     <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span>.
    </p>
    <div class="example" id="mongo.tutorial.multi.query-example">
     <p><strong>Example #1 Authenticating against the &quot;admin&quot; database</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Specifying&nbsp;the&nbsp;username&nbsp;and&nbsp;password&nbsp;in&nbsp;the&nbsp;connection&nbsp;URI&nbsp;(preferred)<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://</span><span style="color: #007700">${</span><span style="color: #0000BB">username</span><span style="color: #007700">}</span><span style="color: #DD0000">:</span><span style="color: #007700">${</span><span style="color: #0000BB">password</span><span style="color: #007700">}</span><span style="color: #DD0000">@localhost"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Specifying&nbsp;the&nbsp;username&nbsp;and&nbsp;password&nbsp;via&nbsp;the&nbsp;options&nbsp;array&nbsp;(alternative)<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"username"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <p class="para">
     By default, the driver will authenticate against the <code class="literal">admin</code>
     database. You may authenticate against a different database by specifying it
     in either the connection URI or the <code class="literal">&quot;db&quot;</code> option for
     <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span>.
    </p>
    <div class="example" id="mongo.tutorial.indexes-example">
     <p><strong>Example #2 Authenticating against normal databases</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Specifying&nbsp;the&nbsp;authentication&nbsp;database&nbsp;in&nbsp;the&nbsp;connection&nbsp;URI&nbsp;(preferred)<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://</span><span style="color: #007700">${</span><span style="color: #0000BB">username</span><span style="color: #007700">}</span><span style="color: #DD0000">:</span><span style="color: #007700">${</span><span style="color: #0000BB">password</span><span style="color: #007700">}</span><span style="color: #DD0000">@localhost/myDatabase"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Specifying&nbsp;the&nbsp;authentication&nbsp;database&nbsp;via&nbsp;the&nbsp;options&nbsp;array&nbsp;(alternative)<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://</span><span style="color: #007700">${</span><span style="color: #0000BB">username</span><span style="color: #007700">}</span><span style="color: #DD0000">:</span><span style="color: #007700">${</span><span style="color: #0000BB">password</span><span style="color: #007700">}</span><span style="color: #DD0000">@localhost"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"db"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"myDatabase"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <p class="para">
     If your connection is dropped, the driver will automatically attempt to
     reconnect and reauthenticate you.
    </p>
   </div>
  <hr />
  
  
   <div id="mongo.connecting.rs" class="section"><hr />
    <h2 class="title">Replica Sets</h2>
    <p class="para">
     To connect to a replica set, specify one or more members of the set and use
     the <code class="literal">&quot;replicaSet&quot;</code> option. Multiple servers may be delimited
     by a comma.
    </p>
    <div class="example" id="example-1556">
     <p><strong>Example #1 ReplicaSet seed list</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Using&nbsp;multiple&nbsp;servers&nbsp;as&nbsp;the&nbsp;seed&nbsp;list&nbsp;(prefered)<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com:27017,rs2.example.com:27017/?replicaSet=myReplSetName"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Using&nbsp;one&nbsp;server&nbsp;as&nbsp;the&nbsp;seed&nbsp;list<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com:27017"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"replicaSet"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"myReplSetName"</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;Using&nbsp;multiple&nbsp;servers&nbsp;as&nbsp;the&nbsp;seed&nbsp;list<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com:27017,rs2.example.com:27017"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"replicaSet"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"myReplSetName"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <p class="para">
     The PHP driver will query the database server(s) listed to determine the
     primary. So long as it can connect to at least one host listed and find a
     primary, the connection will succeed. If it cannot make a connection to any
     servers listed or cannot find a primary, a
     <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> will be thrown.
    </p>
    <div class="tip"><strong class="tip">Tip</strong>
     <p class="para">
      You should always provide a seed list with more than one member of the
      ReplicaSet. For highest availability you should seed with at least one
      server from each of your datacenters.
     </p>
    </div>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      The host names that you specify in the seed list <em class="emphasis">must</em>
      match the host names in the replica set configuration. This is because the
      driver only uses the host names in the replica set configuration to create
      the hash for its persistent connections.
     </p>
     <p class="para">
      For example, if an IP address is used in the seed list and the replica set
      is configured with host names, the driver will discard any seed list
      connection(s) that differ from the canonical host names reported by the
      replica set. Effectively, these non-canonical seed list connections will be
      recreated on each request, greatly reducing the benefit of using persistent
      connections.
     </p>
    </div>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      The driver does <em class="emphasis">not</em> support connecting to different
      replica sets with the same name. This extends beyond one script so make
      sure to have separate names for each of your replica sets. That also means
      that you can <em class="emphasis">not</em> do this:
     </p>
     <div class="example" id="example-1557">
      <p><strong>Example #2 Wrong replica set name duplication</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://devserver1,devserver2,devserver3/?replicaSet=repset"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://prodserver1,prodserver2,prodserver3/?replicaSet=repset"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
     <p class="para">
      Instead, you need to have two different names for your replica sets:
     </p>
     <div class="example" id="example-1558">
      <p><strong>Example #3 Correct use of two replica set names</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://devserver1,devserver2,devserver3/?replicaSet=devset"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://prodserver1,prodserver2,prodserver3/?replicaSet=prodset"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </div>
    <p class="para">
     If the primary becomes unavailable, an election will take place and a
     secondary will be promoted to the role of primary (unless a majority vote
     cannot be established). During this time
     (<a href="https://docs.mongodb.com/manual/faq/replica-sets/#how-long-does-replica-set-failover-take" class="link external">&raquo;&nbsp;20-60 seconds</a>), the
     connection will not be able to perform any write operations and attempts to
     do so will result in an exception. Connections to secondaries will still be
     able to perform reads.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      The default <a href="#mongo.readpreferences" class="link">Read Preference</a>
      is to only read from the primary. During the election process there is no
      primary, and all read will therefore fail.
     </p>
     <p class="para">
      It is recommended to use
      <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong> Read Preference for
      applications that require high availability for reads, as reads will only
      be executed on the secondaries when there simply isn&#039;t a primary
      available.
     </p>
    </p></blockquote>
    <p class="para">
     Once a primary is elected, attempting to perform a read or write will allow
     the driver to detect the new primary. The driver will make this its primary
     database connection and continue operating normally.
    </p>
    <p class="para">
     The health and state of a secondary is checked every 5 seconds
     (configurable with
     <a href="#ini.mongo.ping-interval" class="link">mongo.ping_interval</a>)
     or when the next operation occurs after 5 seconds.  It will also recheck
     the configuration when the driver has a problem reaching a server.
    </p>
    <p class="para">
     Replica set failovers are checked every 60 seconds (configurable with
     <a href="#ini.mongo.is-master-interval" class="link">mongo.is_master_interval</a>),
     and whenever a write operation fails when using acknowledged writes.
    </p>
  
    <div class="caution"><strong class="caution">Caution</strong>
     <p class="para">
      Secondaries may be behind the primary in operations, so
      your application must be able to handle out-of-date data when using
      Read Preferences other then <strong><code>MongoClient::RP_PRIMARY</code></strong>.
     </p>
    </div>
  
    <p class="para">
     For more information on replica sets, see the
     <a href="https://docs.mongodb.com/manual/replication/" class="link external">&raquo;&nbsp;core documentation</a>.
    </p>
  
    <div class="simplesect">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
      <li class="member"><a href="#mongo.writeconcerns" class="xref">Write Concerns</a></li>
     </ul>
    </div>
  
    <div class="simplesect">
     <h3 class="title">Changelog</h3>
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.0.9</td>
         <td>
          Added support for connecting to ReplicaSet and automatic failover.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </div>
  
   </div>
  <hr />
  
  
   <div id="mongo.connecting.mongos" class="section"><hr />
    <h2 class="title">Sharding</h2>
    <p class="para">
     To connect to a shard cluster, specify the address of one or more
     <code class="literal">mongos</code> instances in the connection string. Multiple
     servers may be delimited by a comma.
    </p>
    <div class="example" id="example-1559">
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Using&nbsp;one&nbsp;server&nbsp;as&nbsp;the&nbsp;seed&nbsp;list<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://mongos1.example.com:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Using&nbsp;multiple&nbsp;servers&nbsp;as&nbsp;the&nbsp;seed&nbsp;list<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://mongos1.example.com:27017,mongos2.example.com:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <p class="para">
     Regardless of whether each shard is a stand-alone <code class="literal">mongod</code>
     server or a full replica set, the driver&#039;s connection process is the same.
     All database communication will be routed through <code class="literal">mongos</code>.
    </p>
    <p class="para">
     For more information on sharding with MongoDB, see the
     <a href="https://docs.mongodb.com/manual/sharding/" class="link external">&raquo;&nbsp;sharding documentation</a>.
    </p>
   </div>
  <hr />
  
  
   <div id="mongo.connecting.uds" class="section"><hr />
    <h2 class="title">Domain Socket Support</h2>
  
    <p class="para">
     MongoDB has built-in support for connecting via Unix Domain Sockets and will
     open the socket on startup. By default, the socket is located in
     <var class="filename">/tmp/mongodb-&lt;port&gt;.sock</var>.
    </p>
  
    <p class="para">
     To connect to the socket file, specify the path in your MongoDB connection
     string:
    </p>
  
    <div class="example" id="example-1560">
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb:///tmp/mongo-27017.sock"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <p class="para">
     If you would like to authenticate against a database (as described above)
     with a socket file, you must specify a port of <code class="literal">0</code> so that
     the connection string parser can detect the end of the socket path.
     Alternatively, you can use the constructor options.
    </p>
  
     <div class="example" id="mongo.writeconcerns.unacknowledged-example">
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://username:password@/tmp/mongo-27017.sock:0/foo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <div class="simplesect">
     <h3 class="title">Changelog</h3>
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.0.9</td>
         <td>
          Added support for Unix Domain Sockets.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </div>
  
   </div>
  <hr />
  
  
   <div id="mongo.connecting.persistent" class="section"><hr />
    <h2 class="title">Persistent Connections (version 1.3.0+)</h2>
  
    <p class="para">
     All versions of the driver since 1.3.0 utilize persistent connections to
     minimize the number of connections made to each database server. These
     connections are saved by the PHP worker process and may be reused between
     multiple requests.
    </p>
  
    <p class="para">
     Before connecting to a database server, the driver will create a hash for the
     connection based on its host, port, replica set name (if any), any
     authentication credentials (e.g. username, password, database), and the
     process ID. If a connection already exists for that hash, it will be used in
     lieu of creating a new connection associated with that hash.
     <span class="function"><a href="#mongoclient.getconnections" class="function">MongoClient::getConnections()</a></span> may be used to retrieve info
     about each persistent connection. Consider the following program:
    </p>
  
    <div class="example" id="mongo.writeconcerns.acknowledged-example">
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m3&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://user:pw@localhost'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m4&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m5&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://rs1.local:30017,rs2.local:30018/?replicaSet=rs'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m6&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://sharding.local:40017'</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">getConnections</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">[</span><span style="color: #DD0000">'hash'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  localhost:27017;-;X;15487
  localhost:27017;-;admin/user/c56c…8bbc;15487
  127.0.0.1:27017;-;X;15487
  rs1.local:30017;rs;X;15487
  rs2.local:30018;rs;X;15487
  sharding.local:40017;-;X;15487
  </pre></div>
     </div>
    </div>
  
    <p class="para">
     In this example <code class="literal">$m1</code> and <code class="literal">$m2</code> have the
     same hash and share a persistent connection. Connections for each other
     MongoClient instance hash to unique values and use their own sockets. Note
     that &quot;localhost&quot; and &quot;127.0.0.1&quot; do not share the same hash; DNS resolution
     is not taken into account.
    </p>
   </div>
  <hr />
  
  
   <div id="mongo.connecting.pools" class="section"><hr />
    <h2 class="title">Connection Pooling (version 1.2.0-1.2.12 *only*)</h2>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This section is no longer relevant as of the 1.3.0 release of the driver
      and only serves as a historical information on how the pooling used to
      work.
     </p>
     <p class="para">
      The latest versions of the driver have no concept of pooling anymore and
      will maintain only one connection per process, for each connection type
      (ReplicaSet/standalone/mongos), for each credentials combination.
      </p>
     </p></blockquote>
    <p class="para">
     Creating connections is one of the most heavyweight things that the driver
     does. It can take hundreds of milliseconds to set up a connection correctly,
     even on a fast network. Thus, the driver tries to minimize the number of new
     connections created by reusing connections from a pool.
    </p>
    <p class="para">
     When a user creates a new instance of <a href="#class.mongoclient" class="classname">MongoClient</a>, all
     necessary connections will be taken from their pools (replica sets may
     require multiple connections, one for each member of the set). When the
     <a href="#class.mongoclient" class="classname">MongoClient</a> instance goes out of scope, the
     connections will be returned to the pool. When the PHP process exits, all
     connections in the pools will be closed.
    </p>
    <div class="section">
     <h2 class="title">&quot;Why do I have so many open connections?&quot;</h2>
     <p class="para">
      Connection pools can generate a large number of connections. This is
      expected and, using a little arithmetic, you can figure out how many
      connections will be created. There are three factors in determining the
      total number of connections:
     </p>
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <code class="literal">
         connections_per_pool
        </code>
       </p>
       <p class="para">
        Each connection pool will create, by default, an unlimited number of
        connections. One might assume that this is a problem: if it can create an
        unlimited number of connections, couldn&#039;t it create thousands and the
        server would run out of file descriptors? In practice, this is unlikely,
        as unused connections are returned to the pool to be used later, so future
        connections will use the same connection instead of creating a new one.
        Unless you create thousands of connections at once without letting any go
        out of scope, the number of connections open should stay at a reasonable
        number.
       </p>
       <p class="para">
        You can see how many connections you have in a pool using the
        <span class="function"><a href="#mongopool.info" class="function">MongoPool::info()</a></span> function. Add up the &quot;in use&quot; and
        &quot;in pool&quot; fields for a given server. That is the total number of
        connections for that pool.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">
         pools_per_process
        </code>
       </p>
       <p class="para">
        Each MongoDB server address you&#039;re connecting to gets its own connection
        pool. For example, if your local hostname is &quot;example.net&quot;, connecting
        to &quot;example.net:27017&quot;, &quot;localhost:27017&quot;, and &quot;/tmp/mongodb-27017.sock&quot;
        will create three connection pools. You can see how many connection pools
        you have open using <span class="function"><a href="#mongopool.info" class="function">MongoPool::info()</a></span>.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">
         processes
        </code>
       </p>
       <p class="para">
        Each PHP process has a separate set of pools. PHP-FPM and Apache
        generally create between 6 and a couple of dozen PHP worker children.
        Check your settings to see what the max number of PHP processes is that
        can be spawned.
       </p>
       <p class="para">
        If you are using PHP-FPM, estimating the number of connections can be
        tricky because it will spawn more PHP-FPM workers under heavy load. To be
        on the safe side, look at the <code class="literal">max_children</code> parameter or
        add up <code class="literal">spare_servers</code> + <code class="literal">start_servers</code>
        (choose whichever number is higher). That will indicate how many PHP
        processes (i.e. sets of pools) you should plan for.
       </p>
      </li>
     </ul>
     <p class="para">
      The three variables above can be multiplied together to give the max
      number of connections expected:
      <code class="literal">connections_per_pool</code> *
      <code class="literal">pools_per_process</code> *
      <code class="literal">processes</code>. Note that
      <code class="literal">connections_per_pool</code> can be different for different
      pools, so <code class="literal">connections_per_pool</code> should be the max.
     </p>
     <p class="para">
      For example, suppose we&#039;re getting 30 connections per pool, 10 pools per PHP
      process, and 128 PHP processes. Then we can expect 38400 connections from
      this machine. Thus, we should set this machine&#039;s file descriptor limit to
      be high enough to handle all of these connections or it may run out of file
      descriptors.
     </p>
     <p class="para">
      See <a href="#class.mongopool" class="classname">MongoPool</a> for more information on connection
      pooling.
     </p>
    </div>
   </div>
  <hr />
  
  
   <div id="mongo.connecting.persistent.manual" class="section"><hr />
    <h2 class="title">Manually Persistent Connections (version up to 1.1.4 *only*)</h2>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This section is not relevant for 1.2.0+. In 1.2.0+, connections are always
      persistent and managed automatically by the driver. If you are using a
      1.2.x release (but not 1.3.x or later), see
      <a href="#class.mongopool" class="classname">MongoPool</a> for more information on pooling.
     </p>
    </p></blockquote>
  
    <p class="para">
     Creating new connection to the database is very slow. To minimize the number
     of connections that you need to make, you can use persistent connections. A
     persistent connection is saved by PHP, so you can use the same connection for
     multiple requests.
    </p>
  
    <p class="para">
     For example, this simple program connects to the database 1000 times:
    </p>
  
    <div class="example" id="mongo.writeconcerns.majority.acknowledged-example">
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">1000</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <p class="para">
     It takes approximately 18 seconds to execute. If we change it to use a
     persistent connection:
    </p>
  
    <div class="example" id="mongo.writeconcerns.journalled">
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">1000</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost:27017"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"persist"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"x"</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <p class="para">
     ...it takes less than .02 seconds to execute, as it only makes one database
     connection.
    </p>
  
    <p class="para">
     Persistent connections need an identifier string (which is &quot;x&quot; in the above
     example) to uniquely identify them. For a persistent connection to be used,
     the hostname, port, persist string, and authentication credentials (username,
     password and database, if given) must match an existing persistent
     connection. Otherwise, a new connection will be created with this identifying
     information.
    </p>
    <p class="para">
     Persistent connections are <em class="emphasis">highly recommended</em> and should
     always be used in production unless there is a compelling reason not to.
     Most of the reasons that they are not recommended for relational databases
     are irrelevant to MongoDB.
    </p>
   </div>
  <hr />
  
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="mongo.context" class="reference"><hr />
   <h1 class="title">Stream Context Options</h1>
  
   <div class="partintro">
    <p class="para" id="mongo.context.options">
     The PHP MongoDB extension provides <a href="#context" class="link">Stream Context Support</a>
     using the <a href="#context.mongodb" class="link">mongodb</a> context.
    </p>
  
    <p class="para">
     A stream context must be created with <span class="function"><a href="#function.stream-context-create" class="function">stream_context_create()</a></span> and passed to the <span class="methodname"><a href="#mongoclient.construct" class="methodname">MongoClient::__construct()</a></span> before the actual connection to MongoDB is made.
     It is not possible to apply a stream context to already created streams.
    </p>
  
    <p class="para">
     Additional context options and parameters, such as <a href="#context.ssl" class="link">ssl</a>
     and <a href="#context.params" class="link">notification parameters</a>, are also supported.
    </p>
  
    <p class="para">
     The MongoDB context options provide a rich interface to log network traffic between the driver and the MongoDB servers.
     This interface can be used to provide query logging, profiler, debuggers, or anything that would need to inspect the underlaying
     commands and protocol options.
    </p>
  
    <div class="simplesect">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#context.ssl" class="xref">SSL context options</a></li>
      <li class="member"><a href="#context.socket" class="xref">Socket context options</a></li>
      <li class="member"><a href="#context.params" class="xref">Context parameters</a></li>
     </ul>
    </div>
  
   </div>
  
   
  
  
  <div id="function.log-cmd-delete" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">log_cmd_delete</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">log_cmd_delete</span> &mdash; <span class="dc-title">Callback When Deleting Documents</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.log-cmd-delete-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>log_cmd_delete</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$server</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$writeOptions</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$deleteOptions</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$protocolOptions</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> function, used by the
     <a href="#context.mongodb.log-cmd-delete" class="link">log_cmd_delete context option</a>,
     when deleteing a document
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is <em class="emphasis">not</em> a real function, only a prototype of how the function should
      be.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.log-cmd-delete-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
       <dt>
   <code class="parameter">server</code> </dt>
   <dd>
   <p class="para"> An array containing the basic information about the server that was picked. <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>hash</td> <td>server hash, example: <code class="literal">localhost:27017;-;X;56052</code></td> </tr>
   <tr> <td>type</td> <td>Node type (primary/secondary/mongos/arbiter): <code class="literal">2</code></td> </tr>
   <tr> <td>max_bson_size</td> <td>The maximum BSON Size over the wire this node accepts: <code class="literal">16777216</code></td> </tr>
   <tr> <td>max_message_size</td> <td>The maximum Message Size over the wire this node accepts: <code class="literal">48000000</code></td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
      <dt>
   <code class="parameter">writeOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>ordered</td> <td>boolean, if the operation (in case of batch operation) must be executed sequentually (ordered=true)</td> </tr>
   <tr> <td>writeConcern</td> <td>An array of writeConcern options (see below)</td> </tr>
   </tbody>  </table>
   <table class="doctable table"> <caption><strong>writeConcern array values</strong></caption>  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>fsync</td> <td>boolean, force flushing to disk before returning</td> </tr>
   <tr> <td>j</td> <td>boolean, force journal write before returning</td> </tr>
   <tr> <td>wtimeout</td> <td>integer, milliseconds, maximum time the primary is allowed to wait to verify replication</td> </tr>
   <tr> <td>w</td> <td>integer=server count, or string=replication-tag</td> </tr>
   </tbody>  </table>
   </p> </dd>
   
     
      <dt>
  
       <code class="parameter">deleteOptions</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable informaltable">
         
          <thead>
           <tr>
            <th>key</th>
            <th>value</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>limit</td>
            <td>integer, 1 or 0. If 0, delete all matching documents.</td>
           </tr>
  
           <tr>
            <td>q</td>
            <td>Array, the search criteria</td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
       <dt>
   <code class="parameter">protocolOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>message_length</td> <td>The total size (in bytes) of the encoded message being sent over the wire</td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   <tr> <td>namespace</td> <td>The MongoDB namespace used for the protocol message <code class="literal">dbname.collectionname</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
    </dl>
  
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-function.log-cmd-delete-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.5.0</td>
        <td>
         Only available when connected to MongoDB 2.6.0+
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="function.log-cmd-insert" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">log_cmd_insert</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">log_cmd_insert</span> &mdash; <span class="dc-title">Callback When Inserting Documents</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.log-cmd-insert-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>log_cmd_insert</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$server</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$document</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$writeOptions</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$protocolOptions</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> function, used by the
     <a href="#context.mongodb.log-cmd-insert" class="link">log_cmd_insert context option</a>,
     when inserting a document
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is <em class="emphasis">not</em> a real function, only a prototype of how the function should
      be.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.log-cmd-insert-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
       <dt>
   <code class="parameter">server</code> </dt>
   <dd>
   <p class="para"> An array containing the basic information about the server that was picked. <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>hash</td> <td>server hash, example: <code class="literal">localhost:27017;-;X;56052</code></td> </tr>
   <tr> <td>type</td> <td>Node type (primary/secondary/mongos/arbiter): <code class="literal">2</code></td> </tr>
   <tr> <td>max_bson_size</td> <td>The maximum BSON Size over the wire this node accepts: <code class="literal">16777216</code></td> </tr>
   <tr> <td>max_message_size</td> <td>The maximum Message Size over the wire this node accepts: <code class="literal">48000000</code></td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
     
      <dt>
  
       <code class="parameter">document</code>
      </dt>
  
      <dd>
  
       <p class="para">
        The document that has been prepared to be inserted
       </p>
      </dd>
  
     
      <dt>
   <code class="parameter">writeOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>ordered</td> <td>boolean, if the operation (in case of batch operation) must be executed sequentually (ordered=true)</td> </tr>
   <tr> <td>writeConcern</td> <td>An array of writeConcern options (see below)</td> </tr>
   </tbody>  </table>
   <table class="doctable table"> <caption><strong>writeConcern array values</strong></caption>  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>fsync</td> <td>boolean, force flushing to disk before returning</td> </tr>
   <tr> <td>j</td> <td>boolean, force journal write before returning</td> </tr>
   <tr> <td>wtimeout</td> <td>integer, milliseconds, maximum time the primary is allowed to wait to verify replication</td> </tr>
   <tr> <td>w</td> <td>integer=server count, or string=replication-tag</td> </tr>
   </tbody>  </table>
   </p> </dd>
   
       <dt>
   <code class="parameter">protocolOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>message_length</td> <td>The total size (in bytes) of the encoded message being sent over the wire</td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   <tr> <td>namespace</td> <td>The MongoDB namespace used for the protocol message <code class="literal">dbname.collectionname</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
    </dl>
  
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-function.log-cmd-insert-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.5.0</td>
        <td>
         Only available when connected to MongoDB 2.6.0+
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="function.log-cmd-update" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">log_cmd_update</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">log_cmd_update</span> &mdash; <span class="dc-title">Callback When Updating Documents</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.log-cmd-update-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>log_cmd_update</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$server</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$writeOptions</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$updateOptions</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$protocolOptions</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> function, used by the
     <a href="#context.mongodb.log-cmd-update" class="link">log_cmd_update context option</a>,
     when updateing a document
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is <em class="emphasis">not</em> a real function, only a prototype of how the function should
      be.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.log-cmd-update-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
       <dt>
   <code class="parameter">server</code> </dt>
   <dd>
   <p class="para"> An array containing the basic information about the server that was picked. <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>hash</td> <td>server hash, example: <code class="literal">localhost:27017;-;X;56052</code></td> </tr>
   <tr> <td>type</td> <td>Node type (primary/secondary/mongos/arbiter): <code class="literal">2</code></td> </tr>
   <tr> <td>max_bson_size</td> <td>The maximum BSON Size over the wire this node accepts: <code class="literal">16777216</code></td> </tr>
   <tr> <td>max_message_size</td> <td>The maximum Message Size over the wire this node accepts: <code class="literal">48000000</code></td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
      <dt>
   <code class="parameter">writeOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>ordered</td> <td>boolean, if the operation (in case of batch operation) must be executed sequentually (ordered=true)</td> </tr>
   <tr> <td>writeConcern</td> <td>An array of writeConcern options (see below)</td> </tr>
   </tbody>  </table>
   <table class="doctable table"> <caption><strong>writeConcern array values</strong></caption>  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>fsync</td> <td>boolean, force flushing to disk before returning</td> </tr>
   <tr> <td>j</td> <td>boolean, force journal write before returning</td> </tr>
   <tr> <td>wtimeout</td> <td>integer, milliseconds, maximum time the primary is allowed to wait to verify replication</td> </tr>
   <tr> <td>w</td> <td>integer=server count, or string=replication-tag</td> </tr>
   </tbody>  </table>
   </p> </dd>
   
     
      <dt>
  
       <code class="parameter">updateOptions</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable informaltable">
         
          <thead>
           <tr>
            <th>key</th>
            <th>value</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>multi</td>
            <td>Boolean, true if this update is allowed to update all matched criteria</td>
           </tr>
  
           <tr>
            <td>upsert</td>
            <td>Boolean, true if the document should be created if criteria does not match</td>
           </tr>
  
           <tr>
            <td>q</td>
            <td>Array, the search criteria</td>
           </tr>
  
           <tr>
            <td>u</td>
            <td>Array, the new object/modifications</td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
       <dt>
   <code class="parameter">protocolOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>message_length</td> <td>The total size (in bytes) of the encoded message being sent over the wire</td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   <tr> <td>namespace</td> <td>The MongoDB namespace used for the protocol message <code class="literal">dbname.collectionname</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
    </dl>
  
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-function.log-cmd-update-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.5.0</td>
        <td>
         Only available when connected to MongoDB 2.6.0+
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="function.log-getmore" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">log_getmore</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">log_getmore</span> &mdash; <span class="dc-title">Callback When Retrieving Next Cursor Batch</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.log-getmore-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>log_getmore</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$server</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$info</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> function, used by the
     <a href="#context.mongodb.log-getmore" class="link">log_getmore context option</a>,
     when executing a GET_MORE operation.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is <em class="emphasis">not</em> a real function, only a prototype of how the function should
      be.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.log-getmore-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
       <dt>
   <code class="parameter">server</code> </dt>
   <dd>
   <p class="para"> An array containing the basic information about the server that was picked. <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>hash</td> <td>server hash, example: <code class="literal">localhost:27017;-;X;56052</code></td> </tr>
   <tr> <td>type</td> <td>Node type (primary/secondary/mongos/arbiter): <code class="literal">2</code></td> </tr>
   <tr> <td>max_bson_size</td> <td>The maximum BSON Size over the wire this node accepts: <code class="literal">16777216</code></td> </tr>
   <tr> <td>max_message_size</td> <td>The maximum Message Size over the wire this node accepts: <code class="literal">48000000</code></td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
     
      <dt>
  
       <code class="parameter">info</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable informaltable">
         
          <thead>
           <tr>
            <th>key</th>
            <th>value</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>request_id</td>
            <td>integer, the driver request identifier</td>
           </tr>
  
           <tr>
            <td>cursor_id</td>
            <td>integer, the cursor identifier being used to fetch more data</td>
           </tr>
  
           <tr>
            <td>batch_size</td>
            <td>integer, maximum number of documents being requested</td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="function.log-killcursor" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">log_killcursor</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">log_killcursor</span> &mdash; <span class="dc-title">Callback When Executing KILLCURSOR operations</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.log-killcursor-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>log_killcursor</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$server</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$info</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> function, used by the
     <a href="#context.mongodb.log-killcursor" class="link">log_killcursor context option</a>,
     when reading a killcursor from MongoDB.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is <em class="emphasis">not</em> a real function, only a prototype of how the function should
      be.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.log-killcursor-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
       <dt>
   <code class="parameter">server</code> </dt>
   <dd>
   <p class="para"> An array containing the basic information about the server that was picked. <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>hash</td> <td>server hash, example: <code class="literal">localhost:27017;-;X;56052</code></td> </tr>
   <tr> <td>type</td> <td>Node type (primary/secondary/mongos/arbiter): <code class="literal">2</code></td> </tr>
   <tr> <td>max_bson_size</td> <td>The maximum BSON Size over the wire this node accepts: <code class="literal">16777216</code></td> </tr>
   <tr> <td>max_message_size</td> <td>The maximum Message Size over the wire this node accepts: <code class="literal">48000000</code></td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
     
      <dt>
  
       <code class="parameter">info</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable informaltable">
         
          <thead>
           <tr>
            <th>key</th>
            <th>value</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>cursor_id</td>
            <td>integer, the cursor identifier to kill</td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="function.log-reply" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">log_reply</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">log_reply</span> &mdash; <span class="dc-title">Callback When Reading the MongoDB reply</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.log-reply-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>log_reply</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$server</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$messageHeaders</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$operationHeaders</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> function, used by the
     <a href="#context.mongodb.log-reply" class="link">log_reply context option</a>,
     when reading a reply from MongoDB.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is <em class="emphasis">not</em> a real function, only a prototype of how the function should
      be.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.log-reply-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
       <dt>
   <code class="parameter">server</code> </dt>
   <dd>
   <p class="para"> An array containing the basic information about the server that was picked. <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>hash</td> <td>server hash, example: <code class="literal">localhost:27017;-;X;56052</code></td> </tr>
   <tr> <td>type</td> <td>Node type (primary/secondary/mongos/arbiter): <code class="literal">2</code></td> </tr>
   <tr> <td>max_bson_size</td> <td>The maximum BSON Size over the wire this node accepts: <code class="literal">16777216</code></td> </tr>
   <tr> <td>max_message_size</td> <td>The maximum Message Size over the wire this node accepts: <code class="literal">48000000</code></td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
     
      <dt>
  
       <code class="parameter">messageHeaders</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable informaltable">
         
          <thead>
           <tr>
            <th>key</th>
            <th>value</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>length</td>
            <td>integer, bytes, message reply length</td>
           </tr>
  
           <tr>
            <td>request_id</td>
            <td>integer, the server request identifier</td>
           </tr>
  
           <tr>
            <td>response_id</td>
            <td>integer, the driver request identifier this message is a response of</td>
           </tr>
  
           <tr>
            <td>opcode</td>
            <td>integer, the opcode id</td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
     
      <dt>
  
       <code class="parameter">operationHeaders</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable informaltable">
         
          <thead>
           <tr>
            <th>key</th>
            <th>value</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>flags</td>
            <td>integer, bitmask of protocol flags</td>
           </tr>
  
           <tr>
            <td>cursor_id</td>
            <td>integer, ID of the cursor created on the server (0 if none created, or its been exhausted)</td>
           </tr>
  
           <tr>
            <td>start</td>
            <td>The starting offset of this cursor</td>
           </tr>
  
           <tr>
            <td>returned</td>
            <td>integer, how many documents are returned in this trip</td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-function.log-reply-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="https://docs.mongodb.com/meta-driver/latest/legacy/mongodb-wire-protocol/" class="link external">&raquo;&nbsp;OP_REPLY definition in the Wire Protocol</a></li>
    </ul>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="function.log-write-batch" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">log_write_batch</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">log_write_batch</span> &mdash; <span class="dc-title">Callback When Writing Batches</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.log-write-batch-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>log_write_batch</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$server</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$writeOptions</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$batch</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$protocolOptions</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> function, used by the
     <a href="#context.mongodb.log-write-batch" class="link">log_write_batch context option</a>,
     when executing a batch operation.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is <em class="emphasis">not</em> a real function, only a prototype of how the function should
      be.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.log-write-batch-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
       <dt>
   <code class="parameter">server</code> </dt>
   <dd>
   <p class="para"> An array containing the basic information about the server that was picked. <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>hash</td> <td>server hash, example: <code class="literal">localhost:27017;-;X;56052</code></td> </tr>
   <tr> <td>type</td> <td>Node type (primary/secondary/mongos/arbiter): <code class="literal">2</code></td> </tr>
   <tr> <td>max_bson_size</td> <td>The maximum BSON Size over the wire this node accepts: <code class="literal">16777216</code></td> </tr>
   <tr> <td>max_message_size</td> <td>The maximum Message Size over the wire this node accepts: <code class="literal">48000000</code></td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
      <dt>
   <code class="parameter">writeOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>ordered</td> <td>boolean, if the operation (in case of batch operation) must be executed sequentually (ordered=true)</td> </tr>
   <tr> <td>writeConcern</td> <td>An array of writeConcern options (see below)</td> </tr>
   </tbody>  </table>
   <table class="doctable table"> <caption><strong>writeConcern array values</strong></caption>  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>fsync</td> <td>boolean, force flushing to disk before returning</td> </tr>
   <tr> <td>j</td> <td>boolean, force journal write before returning</td> </tr>
   <tr> <td>wtimeout</td> <td>integer, milliseconds, maximum time the primary is allowed to wait to verify replication</td> </tr>
   <tr> <td>w</td> <td>integer=server count, or string=replication-tag</td> </tr>
   </tbody>  </table>
   </p> </dd>
   
     
      <dt>
  
       <code class="parameter">batch</code>
      </dt>
  
      <dd>
  
       <p class="para">
        Array, the actual batch operation.
       </p>
      </dd>
  
     
       <dt>
   <code class="parameter">protocolOptions</code> </dt>
   <dd>
   <p class="para"> <table class="doctable informaltable">  <thead> <tr> <th>key</th> <th>value</th> </tr>
   </thead>
   <tbody class="tbody"> <tr> <td>message_length</td> <td>The total size (in bytes) of the encoded message being sent over the wire</td> </tr>
   <tr> <td>request_id</td> <td>The request identifier for this message: <code class="literal">42</code></td> </tr>
   <tr> <td>namespace</td> <td>The MongoDB namespace used for the protocol message <code class="literal">dbname.collectionname</code></td> </tr>
   </tbody>  </table>
   </p> </dd>
   
    </dl>
  
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-function.log-write-batch-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.5.0</td>
        <td>
         Only available when connected to MongoDB 2.6.0+
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
   
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#function.log-cmd-delete">log_cmd_delete</a> — Callback When Deleting Documents</li><li><a href="#function.log-cmd-insert">log_cmd_insert</a> — Callback When Inserting Documents</li><li><a href="#function.log-cmd-update">log_cmd_update</a> — Callback When Updating Documents</li><li><a href="#function.log-getmore">log_getmore</a> — Callback When Retrieving Next Cursor Batch</li><li><a href="#function.log-killcursor">log_killcursor</a> — Callback When Executing KILLCURSOR operations</li><li><a href="#function.log-reply">log_reply</a> — Callback When Reading the MongoDB reply</li><li><a href="#function.log-write-batch">log_write_batch</a> — Callback When Writing Batches</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongo.writes" class="chapter"><hr />
   <h1>Writes</h1>
  
   <div class="section">
    <h2 class="title">Updating Nested Objects</h2>
  
    <p class="para">
     Suppose we wish to change the name of a comment&#039;s author in this document:
  
     <div class="example-contents">
  <div class="javascriptcode"><pre class="javascriptcode">{ 
      &quot;_id&quot; : ObjectId(&quot;4b06c282edb87a281e09dad9&quot;), 
      &quot;content&quot; : &quot;this is a blog post.&quot;,
      &quot;comments&quot; : 
      [
          {
              &quot;author&quot; : &quot;Mike&quot;,
              &quot;comment&quot; : &quot;I think that blah blah blah...&quot;,
          },
          {
              &quot;author&quot; : &quot;John&quot;,
              &quot;comment&quot; : &quot;I disagree.&quot;
          }
      ]
  }</pre>
  </div>
     </div>
  
  
     In order to change an inner field, we use $set (so that all of the other 
     fields are not removed!) with the index of comment to change:
  
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"comments.1"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"author"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Jim"</span><span style="color: #007700">))));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
   <div class="section">
    <h2 class="title">The Positional Operator</h2>
    <p class="para">
     The positional operator <code class="literal">$</code> is useful for updating objects 
     that are in arrays.  In the example above, for instance, suppose that we did
     not know the index of the comment that we needed to change, merely that we
     needed to change &quot;John&quot; to &quot;Jim&quot;.  We can use <code class="literal">$</code> to do so.
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'comments.author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'John'</span><span style="color: #007700">),&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'comments.$.author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Jim'</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
  
   
  
  <div id="mongo.queries" class="chapter"><hr />
   <h1>Querying</h1>
  
  
   <div class="simplesect" id="mongo.queries.secondaries">
    <h3 class="title">Distributing queries to secondaries</h3>
  
    <p class="para">
     All queries (reads and writes) are only sent to the primary member of a
     replica set by default. This is however easily configurable by using the
     <a href="#mongo.readpreferences" class="link">Read Preferences</a> which allow
     you to set some generic read preferences (such as allowing secondary reads
     of the nearest server), and also provide ways to specifically target a
     server in a specific country, datacenter, or even hardware, by the use of
     <a href="#mongo.readpreferences.tagsets" class="link">replica set tag sets</a>.
    </p>
    <p class="para">
     Read preferences can be configured at every level of the driver:
     <ul class="simplelist">
      <li class="member">As a query parameter or option to <span class="methodname"><a href="#mongoclient.construct" class="methodname">MongoClient::__construct()</a></span></li>
      <li class="member">Specifically by calling <span class="methodname"><a href="#mongoclient.setreadpreference" class="methodname">MongoClient::setReadPreference()</a></span></li>
      <li class="member">At the database level with <span class="methodname"><a href="#mongodb.setreadpreference" class="methodname">MongoDB::setReadPreference()</a></span></li>
      <li class="member">At the collection level with <span class="methodname"><a href="#mongocollection.setreadpreference" class="methodname">MongoCollection::setReadPreference()</a></span></li>
      <li class="member">At the cursor level with <span class="methodname"><a href="#mongocursor.setreadpreference" class="methodname">MongoCursor::setReadPreference()</a></span> or <span class="methodname"><a href="#mongocommandcursor.setreadpreference" class="methodname">MongoCommandCursor::setReadPreference()</a></span></li>
     </ul>
     Each class inherits its read preference setting from the &quot;parent&quot; context.
    </p>
    <div class="example" id="mongo.connecting.context.ssl">
     <p><strong>Example #1 Inheriting read preferences from the database level down to the cursor</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY_PREFERRED</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">myCollection</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <p class="para">
     In this example, the query will be executed against a secondary. The
     collection inherits <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong>
     from the database and the cursor inherits it from the collection.
    </p>
   </div>
  
    <div class="simplesect" id="mongo.queries.choosing.secondary">
     <h3 class="title">How secondaries are chosen</h3>
  
     <p class="para">
      Each instance of <a href="#class.mongoclient" class="classname">MongoClient</a> chooses its own
      secondary using the available secondary with the lowest ping time. So, if we
      had a PHP client in Europe and one in Australia and we had one secondary in
      each of these data centers, we could do:
     </p>
     <div class="example" id="mongo.connecting.context.ssl.verify">
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"replicaSet"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"setName"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"readPreference"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY_PREFERRED</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;on&nbsp;the&nbsp;Australian&nbsp;client<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://primary,australianhost.secondary,europeanhost.secondary"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #DD0000">"Reading&nbsp;from:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">info</span><span style="color: #007700">()[</span><span style="color: #DD0000">"server"</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;on&nbsp;the&nbsp;European&nbsp;client<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://primary,australianhost.secondary,europeanhost.secondary"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #DD0000">"Reading&nbsp;from:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">info</span><span style="color: #007700">()[</span><span style="color: #DD0000">"server"</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  Reading from: australianHost
  Reading from: europeanHost
  </pre></div>
      </div>
      <div class="example-contents"><p>
       Note that we have to do a query before a secondary is chosen: secondaries
       are chosen lazily by the driver, and for each query separately.
      </p></div>
     </div>
  
     <p class="para">
      You can see what the driver thinks is the current status of the set
      members by running <span class="methodname"><a href="#mongoclient.gethosts" class="methodname">MongoClient::getHosts()</a></span> or
      <span class="methodname"><a href="#mongoclient.getconnections" class="methodname">MongoClient::getConnections()</a></span>.
     </p>
  
     <p class="para">
      If no secondary is readable, the driver will send reads to the
      primary as we specified
      <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong> which will
      fallback to execute a query on a primary if no secondaries are available.
      A server is considered readable if its state is 2 (SECONDARY) and its
      health is 1.  You can check this with
      <span class="methodname"><a href="#mongoclient.gethosts" class="methodname">MongoClient::getHosts()</a></span> and
      <span class="methodname"><a href="#mongoclient.getconnections" class="methodname">MongoClient::getConnections()</a></span>.
     </p>
  
    </div>
    <div class="simplesect" id="mongo.queries.notes">
     <h3 class="title">Random notes</h3>
  
     <p class="para">
      Writes are always sent to the primary—and by default all reads are sent
      to the primary too.
     </p>
  
    </div>
  
   <div class="simplesect" id="mongo.queries.querying">
    <h3 class="title">Querying by _id</h3>
    <p class="para">
     Every object inserted is automatically assigned a unique
     <code class="literal">_id</code> field, which is often a useful field to use in
     queries. This works similarly to &quot;get last insert ID&quot; functionality, except
     that the <code class="literal">_id</code> is chosen by the <em class="emphasis">client</em>.
    </p>
    <p class="para">
     Suppose that we wish to find the document we just inserted.  Inserting adds
     an <code class="literal">_id</code> field to the document, so we can query by that:
  
     <div class="example" id="mongo.connecting.context.ssl.certificate">
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$person&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"joe"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$person</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;now&nbsp;$joe&nbsp;has&nbsp;an&nbsp;_id&nbsp;field<br /></span><span style="color: #0000BB">$joe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
    <p class="para">
     Unless the user has specified otherwise, the <code class="literal">_id</code> field is a
     <a href="#class.mongoid" class="classname">MongoId</a>.  The most common mistake is attempting to use
     a string to match a <a href="#class.mongoid" class="classname">MongoId</a>.  Keep in mind that these
     are two different datatypes, and will not match each other in the same way
     that the string &quot;array()&quot; is not the same as an empty array.  For example:
  
     <div class="example" id="mongo.connecting.authenticate.ssl.x509">
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$person&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"joe"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$person</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;convert&nbsp;the&nbsp;_id&nbsp;to&nbsp;a&nbsp;string<br /></span><span style="color: #0000BB">$pid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;FAILS&nbsp;-&nbsp;$pid&nbsp;is&nbsp;a&nbsp;string,&nbsp;not&nbsp;a&nbsp;MongoId<br /></span><span style="color: #0000BB">$joe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$pid</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
   </div>
  
   <div class="simplesect" id="mongo.queries.arrays">
    <h3 class="title">Arrays</h3>
  
    <p class="para">
     Arrays are special in a couple ways.  First, there are two types that
     MongoDB uses: &quot;normal&quot; arrays and associative arrays.  Associative arrays can
     have any mix of key types and values.  &quot;Normal&quot; arrays are defined as arrays
     with ascending numeric indexes starting at 0 and increasing by one for each
     element.  These are, typically, just your usual PHP array.
    </p>
  
    <p class="para">
     For instance, if you want to save a list of awards in a document, you could
     say:
    </p>
  
    <div class="example" id="mongo.connecting.auth-example">
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"awards"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"gold"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"silver"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"bronze"</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <p class="para">
     Queries can reach into arrays to search for elements.  Suppose that we wish
     to find all documents with an array element of a given value. For example,
     documents with a &quot;gold&quot; award, such as:
    </p>
  
    <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;_id&quot; : ObjectId(&quot;4b06c282edb87a281e09dad9&quot;), &quot;awards&quot; : [&quot;gold&quot;, &quot;silver&quot;, &quot;bronze&quot;]}
  </pre></div>
    </div>
  
    <p class="para">
     This can be done with a simple query, ignoring the fact that &quot;awards&quot; is an
     array:
    </p>
  
     <div class="example" id="mongo.connecting.auth-db-example">
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />&nbsp;&nbsp;$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"awards"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"gold"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <p class="para">
     Suppose we are querying for a more complex object, if each element of the
     array were an object itself, such as:
    </p>
  
    <div class="example-contents screen">
  <div class="cdata"><pre>
  {
       &quot;_id&quot; : ObjectId(&quot;4b06c282edb87a281e09dad9&quot;),
       &quot;awards&quot; :
       [
          {
              &quot;first place&quot; : &quot;gold&quot;
          },
          {
              &quot;second place&quot; : &quot;silver&quot;
          },
          {
              &quot;third place&quot; :  &quot;bronze&quot;
          }
       ]
  }
  </pre></div>
    </div>
  
    <p class="para">
     Still ignoring that this is an array, we can use dot notation to query the
     subobject:
    </p>
  
     <div class="example" id="mongo.connecting.rs-example">
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"awards.first&nbsp;place"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"gold"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <p class="para">
     Notice that it doesn&#039;t matter that there is a space in the field name
     (although it may be best not to use spaces, just to make things more
     readable).
    </p>
  
    <p class="para">
     You can also use an array to query for a number of possible values.  For
     instance, if we were looking for documents &quot;gold&quot; or &quot;copper&quot;, we could do:
    </p>
  
    <div class="example" id="mongo.connecting.rs-example-wrong-replset">
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"awards"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$in'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"gold"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"copper"</span><span style="color: #007700">))));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
   <div class="simplesect">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
  
       <tr>
        <td>1.3.0</td>
        <td>
         Introduced the <a href="#mongo.readpreferences" class="link">Read
         Preferences</a> framework to allow more fine grained control over
         secondary reads.
        </td>
       </tr>
  
       <tr>
        <td>1.3.0</td>
        <td>
         Deprecated <code class="literal">slaveOkay</code> usage, the alternative is <a href="#mongo.readpreferences" class="link">Read Preferences</a>.
        </td>
       </tr>
  
       <tr>
        <td>1.1.0</td>
        <td>
         Introduced the possiblity of routing reads to secondaries of replica set
         members using <span class="methodname"><a href="#mongo.setslaveokay" class="methodname">Mongo::setSlaveOkay()</a></span>
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongo.updates" class="chapter"><hr />
   <h1>Updates</h1>
  
  
   <p class="para">
    Updates can be one of the most complicated operation available with 
    MongoDB.  They combine a query with an action, modifying documents that match
    the criteria.  They are also extremely powerful, allowing you to change 
    documents quickly and replace them altogether.  They are done in-place (when 
    possible) with little overhead. 
   </p>
  
   <div class="section">
    <h2 class="title">Modifying vs. replacing documents</h2>
  
    <p class="para">
     There are two types of updates you can use: modifying updates and replacing
     updates.  Modifying updates contain $-operators and change fields in a 
     document: they might increment counters, push new elements onto an array, 
     or change the type of a field.
    </p>
  
    <p class="para">
     For example, a modifying update could add a new field to a document.
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**&nbsp;suppose&nbsp;documents&nbsp;look&nbsp;like:<br />&nbsp;*&nbsp;{"username"&nbsp;:&nbsp;"...",&nbsp;"password"&nbsp;:&nbsp;"...",&nbsp;"email"&nbsp;:&nbsp;"..."}<br />&nbsp;*/<br /></span><span style="color: #0000BB">$coll</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"username"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"joe"</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"twitter"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"@joe4153"</span><span style="color: #007700">)));<br /><br /></span><span style="color: #FF8000">/**&nbsp;now&nbsp;the&nbsp;document&nbsp;will&nbsp;look&nbsp;like:<br />&nbsp;*&nbsp;{"username"&nbsp;:&nbsp;"joe",&nbsp;"password"&nbsp;:&nbsp;"...",&nbsp;"email"&nbsp;:&nbsp;"...",&nbsp;"twitter"&nbsp;:&nbsp;"@joe4153"}<br />&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
  
    <p class="para">
     Replacing updates replace the entire matching document with a new document.
     They are generally not as efficient as using $-modifiers, but can be very
     usefully for complex operations or updates that can&#039;t be expressed in terms
     of $-operators.
    </p>
  
    <p class="para">
     For example, a replacing update can completely change the structure of a
     document.
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**&nbsp;suppose&nbsp;documents&nbsp;look&nbsp;like:<br />&nbsp;*&nbsp;{"username"&nbsp;:&nbsp;"...",&nbsp;"password"&nbsp;:&nbsp;"...",&nbsp;"email"&nbsp;:&nbsp;"..."}<br />&nbsp;*/<br /></span><span style="color: #0000BB">$coll</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"username"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"joe"</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"userId"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">12345</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"info"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"twitter"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"@joe4153"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"email"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"..."</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"likes"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array()));<br /><br /></span><span style="color: #FF8000">/**&nbsp;now&nbsp;the&nbsp;document&nbsp;will&nbsp;look&nbsp;like:<br />&nbsp;*&nbsp;{<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"userId"&nbsp;:&nbsp;12345,&nbsp;<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"info"&nbsp;:&nbsp;{<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name"&nbsp;:&nbsp;"joe",&nbsp;<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"twitter"&nbsp;:&nbsp;"@joe4153",&nbsp;<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"email"&nbsp;:&nbsp;"..."<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"likes"&nbsp;:&nbsp;[]<br />&nbsp;*&nbsp;}<br />&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
  
   </div>
  
   <div class="section">
    <h2 class="title">Updating Nested Objects</h2>
  
    <p class="para">
     Suppose we wish to change the name of a comment&#039;s author in this document:
  
     <div class="example-contents">
  <div class="javascriptcode"><pre class="javascriptcode">{ 
      &quot;_id&quot; : ObjectId(&quot;4b06c282edb87a281e09dad9&quot;), 
      &quot;content&quot; : &quot;this is a blog post.&quot;,
      &quot;comments&quot; : 
      [
          {
              &quot;author&quot; : &quot;Mike&quot;,
              &quot;comment&quot; : &quot;I think that blah blah blah...&quot;,
          },
          {
              &quot;author&quot; : &quot;John&quot;,
              &quot;comment&quot; : &quot;I disagree.&quot;
          }
      ]
  }</pre>
  </div>
     </div>
  
  
     In order to change an inner field, we use $set (so that all of the other 
     fields are not removed!) with the index of comment to change:
  
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"comments.1"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"author"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Jim"</span><span style="color: #007700">))));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
   <div class="section">
    <h2 class="title">The Positional Operator</h2>
    <p class="para">
     The positional operator <code class="literal">$</code> is useful for updating objects 
     that are in arrays.  In the example above, for instance, suppose that we did
     not know the index of the comment that we needed to change, merely that we
     needed to change &quot;John&quot; to &quot;Jim&quot;.  We can use <code class="literal">$</code> to do so.
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"comments.author"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"John"</span><span style="color: #007700">),&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'comments.$.author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Jim"</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongo.security" class="chapter"><hr />
   <h1>Security</h1>
  
  
   <div class="section">
    <h2 class="title">Request Injection Attacks</h2>
    <p class="para">
     If you are passing <code class="literal">$_GET</code> (or <code class="literal">$_POST</code>)
     parameters to your queries, make sure that they are cast to strings first.
     Users can insert associative arrays in GET and POST requests, which could
     then become unwanted $-queries.
    </p>
  
    <p class="para">
     A fairly innocuous example: suppose you are looking up a user&#039;s information
     with the request <em class="emphasis">http://www.example.com?username=bob</em>.
     Your application does the query
     <code class="literal">$collection-&gt;find(array(&quot;username&quot; =&gt; $_GET[&#039;username&#039;]))</code>.
    </p>
  
    <p class="para">
     Someone could subvert this by getting
     <em class="emphasis">http://www.example.com?username[$ne]=foo</em>, which PHP
     will magically turn into an associative array, turning your query into
     <code class="literal">$collection-&gt;find(array(&quot;username&quot; =&gt; array(&#039;$ne&#039; =&gt; &quot;foo&quot;)))</code>,
     which will return all users not named &quot;foo&quot; (all of your users, probably).
    </p>
  
    <p class="para">
     This is a fairly easy attack to defend against: make sure $_GET and $_POST
     parameters are the type you expect before you send them to the database
     (cast them to strings, in this case).
    </p>
  
    <p class="para">
     Note that this type of attack can be used with any databases interation that
     locates a document, including updates, upserts, find-and-modifies, and
     removes.
    </p>
  
    <p class="para">
     Thanks to <a href="https://www.idontplaydarts.com/2010/07/mongodb-is-vulnerable-to-sql-injection-in-php-at-least/" class="link external">&raquo;&nbsp;Phil</a> for pointing this out.
    </p>
  
    <p class="para">
     See <a href="https://docs.mongodb.com/manual/security/" class="link external">&raquo;&nbsp;the main documentation</a>
     for more information about SQL-injection-like issues with MongoDB.
    </p>
   </div>
  
   <div class="section">
    <h2 class="title">Script Injection Attacks</h2>
    <p class="para">
     If you are using JavaScript, make sure that any variables that cross the PHP-
     to-JavaScript boundry are passed in the <code class="literal">scope</code> field of
     <a href="#class.mongocode" class="classname">MongoCode</a>, not interpolated into the JavaScript
     string. This can come up when using <span class="function"><a href="#mongodb.execute" class="function">MongoDB::execute()</a></span>,
     <code class="literal">$where</code> clauses, MapReduces, group-bys, and any other time
     you may pass JavaScript into the database.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      MapReduce ignore the <code class="literal">scope</code> field of
      <a href="#class.mongocode" class="classname">MongoCode</a>, but there is a <code class="literal">scope</code>
      option on the command that can be used instead.
     </p>
    </p></blockquote>
    <p class="para">
     For example, suppose we have some JavaScript to greet a user in the database
     logs.  We could do:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;don't&nbsp;do&nbsp;this!<br /><br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">"print('Hello,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">!');"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     However, what if a malicious user passes in some JavaScript?
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;don't&nbsp;do&nbsp;this!<br /><br />//&nbsp;$username&nbsp;is&nbsp;set&nbsp;to&nbsp;"');&nbsp;db.users.drop();&nbsp;print('"<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">"print('Hello,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">!');"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     Now MongoDB executes the JavaScript string
     <code class="literal">&quot;print(&#039;Hello, &#039;); db.users.drop(); print(&#039;!&#039;);&quot;</code>.
     This attack is easy to avoid: use <code class="literal">scope</code> to pass
     variables from PHP to JavaScript:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$scope&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">"print('Hello,&nbsp;'+user+'!');"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$scope</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     This adds a variable <code class="literal">user</code> to the JavaScript scope. Now if
     someone tries to send malicious code, MongoDB will harmlessly print
     <code class="literal">Hello, &#039;); db.dropDatabase(); print(&#039;!</code>.
    </p>
  
    <p class="para">
     Using <code class="literal">scope</code> helps prevent malicious input from being
     executed by the database.  However, you must make sure that your code does
     not turn around and execute the input anyway! For example, never use the
     JavaScript <code class="literal">eval</code> function on user input:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;don't&nbsp;do&nbsp;this!<br /><br />//&nbsp;$jsShellInput&nbsp;is&nbsp;"db.users.drop();"<br /></span><span style="color: #0000BB">$scope&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"input"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$jsShellInput</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">"eval(input);"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$scope</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     Always use <code class="literal">scope</code> and never allow the database to execute
     user input as code.
    </p>
   </div>
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongo.trouble" class="chapter"><hr />
   <h1>Troubleshooting</h1>
  
  
   <p class="para">
    If you&#039;re having trouble, there are lots of resources you can turn to.
   </p>
  
   <ul class="itemizedlist">
    <li class="listitem">
     <p class="para">IRC</p>
     <p class="para">
      The official MongoDB IRC room is irc.freenode.net/#mongodb.  This is the
      fastest way to get help.
     </p>
    </li>
    <li class="listitem">
     <p class="para">Mailing List</p>
     <p class="para">
      <a href="https://groups.google.com/group/mongodb-user/" class="link external">&raquo;&nbsp;MongoDB&#039;s mailing list</a>
      is a good (and usually very fast) way to get answers to questions. 
     </p>
    </li>
    <li class="listitem">
     <p class="para">Bug Tracker</p>
     <p class="para">
      Found a bug?  Want a feature?  Have a question?  File it in the 
      <a href="https://jira.mongodb.org/browse/PHP" class="link external">&raquo;&nbsp;PHP driver&#039;s bug tracker</a>.
     </p>
    </li>
   </ul>
  
   <p class="para">
    You can make the driver log all kinds of error messages as
    <strong><code>E_NOTICE</code></strong> level PHP error messages. Have a look at 
    the <a href="#class.mongolog" class="classname">MongoLog</a> for an example.
   </p>
  
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongo.testing" class="chapter"><hr />
   <h1>Running the Driver&#039;s Tests</h1>
  
  
   <p class="para">
    The PECL package does not come with the tests, but they are available at 
    <a href="https://github.com/mongodb/mongo-php-driver-legacy" class="link external">&raquo;&nbsp;Github</a>.
   </p>
  
   <div class="section">
    <h2 class="title">.phpt Tests</h2>
    <p class="para">
     .phpt tests are the standard way of testing PHP extensions. After compiling
     the MongoDB driver with &quot;make&quot; you can then issue &quot;make test&quot; to run the
     tests. These tests require MongoDB to be working, and hence, you need to
     configure the test suite itself.
    </p>
    <p class="para">
     There is more information on running the tests in the contributing
     guidelines on 
     <a href="https://github.com/mongodb/mongo-php-driver/blob/master/CONTRIBUTING.md#running-the-tests" class="link external">&raquo;&nbsp;GitHub</a>.
    </p>
   </div>
  
   <div class="section">
    <h2 class="title">Reporting Errors</h2>
    <p class="para">
     Please report any failures or errors in the 
     <a href="https://jira.mongodb.org/browse/PHP" class="link external">&raquo;&nbsp;bugtracker</a>.  There may be skipped 
     tests, these are normal and can be ignored.
    </p>
    <p class="para">
     New tests are always welcome!  Please feel free to contribute new tests of any
     type testing any functionality.
    </p>
   </div>
  </div>
  
  <hr />
  
  
  
  
  
  
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongo.core" class="part"><hr />
  
   <h1>Core Classes</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_part"><li><a href="#class.mongoclient">MongoClient</a></li><li><a href="#class.mongodb">MongoDB</a></li><li><a href="#class.mongocollection">MongoCollection</a></li><li><a href="#class.mongocursor">MongoCursor</a></li><li><a href="#class.mongocursorinterface">MongoCursorInterface</a></li><li><a href="#class.mongocommandcursor">MongoCommandCursor</a></li></ul>
  
   <div class="partintro">
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension is deprecated. Instead,
  the <a href="#set.mongodb" class="link">MongoDB</a> extension should be
  used.</p>
    </div>
    <p class="para">
     The core classes are the most important part of the driver.
    </p>
   </div>
  
   
  
  
  <div id="class.mongoclient" class="reference"><hr />
  
   <h1 class="title">The MongoClient class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.3.0)</p>
    
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a></li>
     </ul>
    </div>
  
    <div class="section" id="mongoclient.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      A connection manager for PHP and MongoDB.
     </p>
     <p class="para">
      This class is used to create and manage connections. A typical use is:
      <div class="example" id="mongo.connecting.rs-example-correct-replset">
       <p><strong>Example #1 <strong class="classname">MongoClient</strong> basic usage</strong></p>
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;connect<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;the&nbsp;database&nbsp;named&nbsp;"foo"<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
     <p class="para">
      See <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span> and the section on
      <a href="#mongo.connecting" class="link">connecting</a> for more information
      about creating connections.
     </p>
    </div>
    
  
    <div class="section" id="mongoclient.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoClient</strong>
       </span>
       {</div>
      
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">VERSION</var>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">DEFAULT_HOST</var>
       <span class="initializer"> = &quot;localhost&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">DEFAULT_PORT</var>
       <span class="initializer"> = 27017</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">RP_PRIMARY</var>
       <span class="initializer"> = &quot;primary&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">RP_PRIMARY_PREFERRED</var>
       <span class="initializer"> = &quot;primaryPreferred&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">RP_SECONDARY</var>
       <span class="initializer"> = &quot;secondary&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">RP_SECONDARY_PREFERRED</var>
       <span class="initializer"> = &quot;secondaryPreferred&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">RP_NEAREST</var>
       <span class="initializer"> = &quot;nearest&quot;</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">boolean</span>
       <var class="varname">connected</var>
       <span class="initializer"> = <strong><code>FALSE</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">string</span>
       <var class="varname">status</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">server</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">boolean</span>
       <var class="varname">persistent</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="constructorsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$server</code><span class="initializer"> = &quot;mongodb://localhost:27017&quot;</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array(&quot;connect&quot; =&gt; <strong><code>TRUE</code></strong>)</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$driver_options</code></span>
    ]]] )</div>
  
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.close" class="methodname">close</a></span>
      ([ <span class="methodparam"><span class="type"><span class="type boolean|string">boolean|string</span></span> <code class="parameter">$connection</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.connect" class="methodname">connect</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.dropdb" class="methodname">dropDB</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$db</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.get" class="methodname">__get</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$dbname</code></span>
     ) : <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongoclient.getconnections" class="methodname">getConnections</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.gethosts" class="methodname">getHosts</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.getreadpreference" class="methodname">getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.getwriteconcern" class="methodname">getWriteConcern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.killcursor" class="methodname">killCursor</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$server_hash</code></span>
     , <span class="methodparam"><span class="type"><span class="type int|MongoInt64">int|MongoInt64</span></span> <code class="parameter">$id</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.listdbs" class="methodname">listDBs</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.selectcollection" class="methodname">selectCollection</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.selectdb" class="methodname">selectDB</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.setreadpreference" class="methodname">setReadPreference</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.setwriteconcern" class="methodname">setWriteConcern</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
     
  
    </div>
  
  
    <div class="section" id="mongoclient.constants">
     <h2 class="title">Predefined Constants</h2>
     <div class="section" id="mongoclient.constants.types">
      <h2 class="title">MongoClient Constants</h2>
      <dl>
  
       
        <dt id="mongoclient.constants.version"><strong><code>MongoClient::VERSION</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          PHP driver version. May be suffixed with &quot;dev&quot;, &quot;+&quot; or &quot;-&quot; if it is
          in-between versions.
         </span>
        </dd>
  
       
       
        <dt id="mongoclient.constants.defaulthost"><strong><code>MongoClient::DEFAULT_HOST</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Host to connect to if no host is given.
         </span>
        </dd>
  
       
       
        <dt id="mongoclient.constants.defaultport"><strong><code>MongoClient::DEFAULT_PORT</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Port to connect to if no port is given.
         </span>
        </dd>
  
       
       
        <dt id="mongoclient.constants.rpprimary"><strong><code>MongoClient::RP_PRIMARY</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          <a href="#mongo.readpreferences" class="link">Read preference</a> for the
          primary replica set member.
         </span>
        </dd>
  
       
       
        <dt id="mongoclient.constants.rpprimarypreferred"><strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          <a href="#mongo.readpreferences" class="link">Read preference</a> for
          preferring the primary replica set member.
         </span>
        </dd>
  
       
       
        <dt id="mongoclient.constants.rpsecondary"><strong><code>MongoClient::RP_SECONDARY</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          <a href="#mongo.readpreferences" class="link">Read preference</a> for a
          secondary replica set member.
         </span>
        </dd>
  
       
       
        <dt id="mongoclient.constants.rpsecondarypreferred"><strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          <a href="#mongo.readpreferences" class="link">Read preference</a> for
          preferring a secondary replica set member.
         </span>
        </dd>
  
       
       
        <dt id="mongoclient.constants.rpnearest"><strong><code>MongoClient::RP_NEAREST</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          <a href="#mongo.readpreferences" class="link">Read preference</a> for the
          nearest replica set member.
         </span>
        </dd>
  
       
      </dl>
  
     </div>
    </div>
  
    <div class="section" id="mongoclient.fields">
     <h2 class="title">Fields</h2>
     <dl>
  
      
       <dt id="mongoclient.props.connected"><var class="varname">connected</var></dt>
  
       <dd>
  
        <p class="para">
         This property will be set to <strong><code>TRUE</code></strong> if we have a open connection to
         the database, <strong><code>FALSE</code></strong> otherwise. If the connection is to a replica set,
         this property will only be <strong><code>TRUE</code></strong> if the driver has a connection to a
         node matching the current read preference. This property does not take
         authentication into account.
        </p>
        <p class="para">
         This property is <em class="emphasis">deprecated</em> since version 1.5.0.
        </p>
       </dd>
  
      
      
       <dt id="mongoclient.props.status"><var class="varname">status</var></dt>
  
       <dd>
  
        <p class="para">
         This property is no longer used and will be set to <strong><code>NULL</code></strong> In driver
         versions 1.1.x and earlier, this may be set to a string value (e.g.
         <code class="literal">&quot;recycled&quot;</code>, <code class="literal">&quot;new&quot;</code>) when persistent
         connections are used.
        </p>
        <p class="para">
         This property is <em class="emphasis">deprecated</em> since version 1.5.0.
        </p>
       </dd>
  
      
     </dl>
  
    </div>
  
    <div class="section" id="mongoclient.seealso">
     <h2 class="title">See Also</h2>
     <ul class="simplelist">
      <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
      <li class="member"><a href="#mongo.writeconcerns" class="xref">Write Concerns</a></li>
      <li class="member"><a href="#mongo.connecting" class="xref">Connecting</a></li>
      <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/connection-string/" class="link external">&raquo;&nbsp;connecting</a></li>
     </ul>
    </div>
  
  
   </div>
  
   
  
  
  <div id="mongoclient.close" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::close</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::close</span> &mdash; <span class="dc-title">Closes this connection</span></p>
  
   </div>
  
   <div id="mongoclient.close-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.close-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::close</strong></span>
      ([ <span class="methodparam"><span class="type"><span class="type boolean|string">boolean|string</span></span> <code class="parameter">$connection</code></span>
    ] ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     The <span class="function"><strong>MongoClient::close()</strong></span> method forcefully closes a
     connection to the database, even if persistent connections are being used.
     You should <em class="emphasis">never</em> have to do this under normal
     circumstances.
    </p>
    <p class="para">
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.close-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">connection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If connection is not given, or <strong><code>FALSE</code></strong> then connection that would be
         selected for writes would be closed. In a single-node configuration,
         that is then the whole connection, but if you are connected to a
         replica set, close() will <em class="emphasis">only</em> close the
         connection to the primary server.
        </p>
        <p class="para">
         If connection is <strong><code>TRUE</code></strong> then all connections as known by the connection
         manager will be closed. This can include connections that are not
         referenced in the connection string used to create the object that
         you are calling close on.
        </p>
        <p class="para">
         If connection is a string argument, then it will only close the
         connection identified by this hash. Hashes are identifiers for a
         connection and can be obtained by calling
         <span class="function"><a href="#mongoclient.getconnections" class="function">MongoClient::getConnections()</a></span>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.close-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns if the connection was successfully closed.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.close-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.connecting.mongos-example">
     <p><strong>Example #1 <span class="function"><strong>MongoClient::close()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates how to selectively close all connections
     for secondaries only.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Connect&nbsp;to&nbsp;a&nbsp;replicaset<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://whisky:13000/?replicaset=seta"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$connections&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getConnections</span><span style="color: #007700">();<br /><br />foreach&nbsp;(&nbsp;</span><span style="color: #0000BB">$connections&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$con&nbsp;</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Loop&nbsp;over&nbsp;all&nbsp;the&nbsp;connections,&nbsp;and&nbsp;when&nbsp;the&nbsp;type&nbsp;is&nbsp;"SECONDARY"<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;we&nbsp;close&nbsp;the&nbsp;connection<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">[</span><span style="color: #DD0000">'connection'</span><span style="color: #007700">][</span><span style="color: #DD0000">'connection_type_desc'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #DD0000">"SECONDARY"&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Closing&nbsp;'</span><span style="color: #007700">{</span><span style="color: #0000BB">$con</span><span style="color: #007700">[</span><span style="color: #DD0000">'hash'</span><span style="color: #007700">]}</span><span style="color: #DD0000">':&nbsp;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$closed&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">[</span><span style="color: #DD0000">'hash'</span><span style="color: #007700">]&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$closed&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"ok"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"failed"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Closing &#039;whisky:13001;X;4948&#039;: ok
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongoclient.close-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">
           The <code class="parameter">connection</code> parameter to this function was
           added in 1.3.0. Before that, only the write connection would be
           closed by this method.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           Before version 1.2.0 the driver would not use persistent connections
           by default, and all connections would be closed as soon as a MongoDB
           connection went out if scope. Since version 1.2.0 this is no longer
           the case and it is a bad idea to call close as you might end up
           overloading the server with connections under high load.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoclient.close-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongoclient.getconnections" class="function" rel="rdfs-seeAlso">MongoClient::getConnections()</a> - Return info about all open connections</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.connect" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::connect</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::connect</span> &mdash; <span class="dc-title">Connects to a database server</span></p>
  
   </div>
  
   <div id="mongoclient.connect-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.connect-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::connect</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.connect-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.connect-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     If the connection was successful.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.connect-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it fails to connect
     to the database.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::__construct</span> &mdash; <span class="dc-title">Creates a new database connection object</span></p>
  
   </div>
  
   <div id="mongoclient.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.construct" class="methodname">MongoDB\Driver\Manager::__construct()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.construct-description">
    <h3 class="title">Description</h3>
    <div class="constructorsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$server</code><span class="initializer"> = &quot;mongodb://localhost:27017&quot;</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array(&quot;connect&quot; =&gt; <strong><code>TRUE</code></strong>)</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$driver_options</code></span>
    ]]] )</div>
  
    <p class="para rdfs-comment">
     If no parameters are passed, this connects to &quot;localhost:27017&quot; (or whatever
     was specified in php.ini for
     <a href="#ini.mongo.default-host" class="link">mongo.default_host</a> and
     <a href="#ini.mongo.default-port" class="link">mongo.default_port</a>).
    </p>
    <p class="para">
     <code class="parameter">server</code> should have the form:
     <div class="example-contents">
  <div class="txtcode"><pre class="txtcode">mongodb://[username:password@]host1[:port1][,host2[:port2:],...]/db</pre>
  </div>
     </div>
  
    </p>
    <p class="para">
     The connection string always starts with <code class="literal">mongodb://</code>, to
     indicate it is a connection string in this form.
    </p>
    <p class="para">If <code class="literal">username</code> and <code class="literal">password</code>
     are specified, the constructor will attempt to authenticate the connection
     with the database before returning.  Username and password are optional
     and must be followed by an <code class="literal">@</code>, if specified.
    </p>
    <p class="para">
     At least one host must be given (port optional, always defaulting to 27017)
     and as many hosts as desired may be connected to. Host names are
     comma-separated and the constructor will return successfully if it connected
     to at least one host. If it could not connect to any of the hosts, it will
     throw a <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a>. Please see the
     <a href="#mongo.connecting.rs" class="link">Replica Sets</a> section for
     information on how to connect to Replica Sets.
    </p>
    <p class="para">
     If you specified a username and password, you may specify a database to
     authenticate with.  If <code class="literal">db</code> is not specified, &quot;admin&quot; will
     be used.
    </p>
    <p class="para">
     An optional query string may be used to specify extra options. The same
     options are supported through the <code class="parameter">options</code> array as
     well, and are therefore redescribed there. See the <a href="#mongo.mongoclient.construct.examples" class="link">examples below</a> on
     how to set those options.
    </p>
    <p class="para">
     One part of the options governs how the driver reads from secondary nodes
     in a replica set environment. Extra information on how these read
     preferences work is available as well through the <a href="#mongo.readpreferences" class="link">read preferences</a> documentation page.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="mongo.mongoclient.construct.parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">server</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The server name.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the connection. Currently available options
         include:
         <ul class="itemizedlist">
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;authMechanism&quot;</code>
           </p>
           <p class="para">
            Available mechanisms are:
            <table class="doctable informaltable">
             
              <thead>
               <tr>
                <th>authMechanism</th>
                <th>Description</th>
                <th>Availability</th>
               </tr>
  
              </thead>
  
              <tbody class="tbody">
               <tr>
                <td>MONGODB-CR</td>
                <td>Authenticate using Challenge Response mechanism. This is the default value.</td>
                <td>All MongoDB versions</td>
               </tr>
  
               <tr>
                <td>MONGODB-X509</td>
                <td>Authenticates using X509 certificates</td>
                <td>MongoDB 2.6. Only available when <a href="#book.openssl" class="xref">OpenSSL</a> is enabled</td>
               </tr>
  
               <tr>
                <td>PLAIN</td>
                <td>Authenticates using unencrypted plain username+password. Must be used over SSL connections. Generally used by MongoDB to login via 3rd party LDAP server</td>
                <td>MongoDB Enterprise 2.4. The Driver must be compiled against CyrusSASL2</td>
               </tr>
  
               <tr>
                <td>GSSAPI</td>
                <td>Authenticates via kerberos systems</td>
                <td>MongoDB Enterprise 2.4. The Driver must be compiled against CyrusSASL2</td>
               </tr>
  
               <tr>
                <td>SCRAM-SHA-1</td>
                <td>Authenticates using SCRAM-SHA-1</td>
                <td>MongoDB 3.0.</td>
               </tr>
  
              </tbody>
             
            </table>
  
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;authSource&quot;</code>
           </p>
           <p class="para">
            Should be set to the database name where the user is defined it.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;connect&quot;</code>
           </p>
           <p class="para">
            If the constructor should connect before returning.  Default is
            <strong><code>TRUE</code></strong>. When set to <strong><code>FALSE</code></strong> the driver will
            <em class="emphasis">automatically</em> connect to the server whenever
            it is necessary to do a query. Alternatively, you can run
            <span class="function"><a href="#mongoclient.connect" class="function">MongoClient::connect()</a></span> manually.
           </p>
           <div class="warning"><strong class="warning">Warning</strong>
            <p class="para">
             This option is not supported through the connection string.
            </p>
           </div>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;connectTimeoutMS&quot;</code>
           </p>
           <p class="para">
            How long a connection can take to be opened before timing out in
            milliseconds. Defaults to <code class="literal">60000</code> (60 seconds).
           </p>
           <p class="para">
            If <code class="literal">-1</code> is specified, no connection timeout will be
            applied and PHP will use
            <a href="#ini.default-socket-timeout" class="link">default_socket_timeout</a>.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;db&quot;</code>
           </p>
           <p class="para">
            The database to authenticate against can be specified here, instead of
            including it in the host list.  This overrides a database given in the
            host list.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;fsync&quot;</code>
           </p>
           <p class="para">
            When <code class="literal">&quot;fsync&quot;</code> is set, all write operations will
            block until the database has flushed the changes to disk. This makes
            the write operations slower, but it guarantees that writes have
            succeeded and that the operations can be recovered in case of total
            system failure.
           </p>
           <p class="para">
            If the MongoDB server has journaling enabled, this option is identical
            to <em class="emphasis">&quot;journal&quot;</em>. If journaling is not enabled, this
            option ensures that write operations will be synced to database files
            on disk.
           </p>
           <blockquote class="note"><p><strong class="note">Note</strong>: 
            <span class="simpara">
             If journaling is enabled, users are strongly encouraged to use the
             <code class="literal">&quot;journal&quot;</code> option instead of
             <code class="literal">&quot;fsync&quot;</code>. Do not use <code class="literal">&quot;fsync&quot;</code> and
             <code class="literal">&quot;journal&quot;</code> simultaneously, as that will result in
             an error.
            </span>
           </p></blockquote>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;journal&quot;</code>
           </p>
           <p class="para">
            When <code class="literal">&quot;journal&quot;</code> is set, all write operations will
            block until the database has flushed the changes to the journal on
            disk. This makes the write operations slower, but it guarantees that
            writes have succeeded and that the operations can be recovered in case
            of total system failure.
           </p>
           <blockquote class="note"><p><strong class="note">Note</strong>: 
            <span class="simpara">
             If this option is used and journaling is disabled, MongoDB 2.6+ will
             raise an error and the write will fail; older server versions will
             simply ignore the option.
            </span>
           </p></blockquote>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;gssapiServiceName&quot;</code>
           </p>
           <p class="para">
            Sets the <a href="https://docs.mongodb.com/manual/core/kerberos/#kerberos-service-principal" class="link external">&raquo;&nbsp;Kerberos service principal</a>. Only applicable when authMechanism=GSSAPI. Defaults to &quot;mongodb&quot;.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;password&quot;</code>
           </p>
           <p class="para">
            The password can be specified here, instead of including it in the
            host list.  This is especially useful if a password has a &quot;@&quot; in it.
            This overrides a password set in the host list.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;readPreference&quot;</code>
           </p>
           <p class="para">
            Specifies the read preference type. Read preferences provide you
            with control from which secondaries data can be read from.
           </p>
           <p class="para">
            Allowed values are: <strong><code>MongoClient::RP_PRIMARY</code></strong>,
            <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>,
            <strong><code>MongoClient::RP_SECONDARY</code></strong>,
            <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong> and
            <strong><code>MongoClient::RP_NEAREST</code></strong>.
           </p>
           <p class="para">
            See the documentation on <a href="#mongo.readpreferences" class="link">read
            preferences</a> for more information.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;readPreferenceTags&quot;</code>
           </p>
           <p class="para">
            Specifies the read preference tags as an array of strings. Tags can be
            used in combination with the <code class="literal">readPreference</code> option
            to further control which secondaries data might be read from.
           </p>
           <p class="para">
            See the documentation on <a href="#mongo.readpreferences" class="link">read
            preferences</a> for more information.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;replicaSet&quot;</code>
           </p>
           <p class="para">
            The name of the replica set to connect to.  If this is given, the
            primary will be automatically be determined. This means that the
            driver may end up connecting to a server that was not even listed.
            See the replica set example below for details.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;secondaryAcceptableLatencyMS&quot;</code>
           </p>
           <p class="para">
            When reading from a secondary (using ReadPreferences), do not read from secondaries known to be more then
            <code class="literal">secondaryAcceptableLatencyMS</code> away from us. Defaults to <code class="literal">15</code>
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;socketTimeoutMS&quot;</code>
           </p>
           <p class="para">
            How long a socket operation (read or write) can take before timing out
            in milliseconds. Defaults to <code class="literal">30000</code> (30 seconds).
           </p>
           <p class="para">
            If <code class="literal">-1</code> is specified, socket operations may block
            indefinitely. This option may also be set on a per-operation basis
            using <span class="methodname"><a href="#mongocursor.timeout" class="methodname">MongoCursor::timeout()</a></span> for queries or the
            <code class="literal">&quot;socketTimeoutMS&quot;</code> option for write methods.
           </p>
           <blockquote class="note"><p><strong class="note">Note</strong>: 
            <span class="simpara">
             This is a client-side timeout. If a write operation times out, there
             is no way to know if the server actually handled the write or not, as
             a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown
             in lieu of returning a write result.
            </span>
           </p></blockquote>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;ssl&quot;</code>
           </p>
           <p class="para">
            A boolean to specify whether you want to enable SSL for the
            connections to MongoDB. Extra options such as certificates
            can be set with <a href="#context.ssl" class="xref">SSL context options</a>.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;username&quot;</code>
           </p>
           <p class="para">
            The username can be specified here, instead of including it in the
            host list.  This is especially useful if a username has a &quot;:&quot; in it.
            This overrides a username set in the host list.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;w&quot;</code>
           </p>
           <p class="para">
            The <code class="literal">w</code> option specifies the
            <a href="#mongo.writeconcerns" class="link">Write Concern</a> for the driver,
            which determines how long the driver blocks when writing. The
            default value is <code class="literal">1</code>.
           </p>
           <p class="para">
            This option is applicable when connecting to both single servers and
            replica sets. A positive value controls how <em class="emphasis">many</em>
            nodes must acknowledge the write instruction before the driver
            continues. A value of <code class="literal">1</code> would require the single
            server or primary (in a replica set) to acknowledge the write
            operation. A value of <code class="literal">3</code> would cause the driver to
            block until the write has been applied to the primary as well as two
            secondary servers (in a replica set).
           </p>
           <p class="para">
            A string value is used to control which tag sets are taken into
            account for write concerns. <code class="literal">&quot;majority&quot;</code> is special
            and ensures that the write operation has been applied to the majority
            (more than 50%) of the participating nodes.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;wTimeoutMS&quot;</code>
           </p>
           <p class="para">
            This option specifies the time limit, in milliseconds, for
            <a href="#mongo.writeconcerns" class="link">write concern</a>
            acknowledgement. It is only applicable for write operations where
            <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the
            timeout pertains to replication. If the write concern is not satisfied
            within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a>
            will be thrown. A value of <code class="literal">0</code> may be specified to
            block indefinitely. The default value is <code class="literal">10000</code>
            (ten seconds).
           </p>
          </li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;slaveOkay&quot;</code>
           </p>
           <p class="para">
            Deprecated. Please use the <a href="#mongo.readpreferences" class="link">read
            preference</a> options.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;timeout&quot;</code>
           </p>
           <p class="para">
            Deprecated alias for <code class="literal">&quot;connectTimeoutMS&quot;</code>.
           </p>
          </li>
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;wTimeout&quot;</code>
           </p>
           <p class="para">
            Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.
           </p>
          </li>
         </ul>
        </p>
       </dd>
  
      
  
      
       <dt>
  
        <code class="parameter">driver_options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the MongoDB driver. Options include setting
         connection <a href="#mongo.connecting.context.ssl" class="link">context options for SSL</a>
         or <a href="#context.mongodb" class="link">logging callbacks</a>.
         <ul class="itemizedlist">
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;context&quot;</code>
           </p>
           <p class="para">
            The Stream Context to attach to all new connections. This allows you 
            for example to configure SSL certificates and are described at
            <a href="#context.ssl" class="link">SSL context options</a>. See the 
            <a href="#mongo.connecting.context.ssl" class="link">Connecting over SSL</a> tutorial.
           </p>
          </li>
         </ul>
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new database connection object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it tries and fails
     to connect to the database for all hostnames given.  It will also throw a
     <strong class="classname">MongoConnnectionException</strong> if an invalid username or
     password is given.  See <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a>
     documentation for common exceptions and their causes.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="mongo.mongoclient.construct.examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.connecting.uds-example">
     <p><strong>Example #1 <span class="function"><strong>MongoClient::__construct()</strong></span> replica set example</strong></p>
     <div class="example-contents"><p>
      This example shows how to connect the driver to a replica set. It assumes
      that there is a set of three servers: sf1.example.com, sf2.example.com, and
      ny1.example.com. The primary could be any one of these servers.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;pass&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;server&nbsp;names&nbsp;to&nbsp;the&nbsp;constructor<br />//&nbsp;Note&nbsp;that&nbsp;we&nbsp;don't&nbsp;need&nbsp;to&nbsp;pass&nbsp;in&nbsp;all&nbsp;the&nbsp;members&nbsp;of&nbsp;the&nbsp;replicaset,&nbsp;the&nbsp;driver&nbsp;<br />//&nbsp;will&nbsp;derive&nbsp;the&nbsp;full&nbsp;list.<br /></span><span style="color: #0000BB">$m1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://sf2.example.com,ny1.example.com"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"replicaSet"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"myReplSet"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      If the current primary fails, the driver will figure out which secondary
      server became the new primary and automatically start using that connection.
      Automatic failover will not work correctly if <code class="literal">replicaSet</code>
      is not specified.
     </p></div>
     <div class="example-contents"><p>
      At least one seed in the seed list must be up for the driver to connect to
      the replica set.
     </p></div>
     <div class="example-contents"><p>
      If you include seeds from two separate replica sets, behavior is undefined.
     </p></div>
     <div class="example-contents"><p>See the
      <a href="https://docs.mongodb.com/manual/replication/" class="link external">&raquo;&nbsp;core documentation</a> on
      replica sets for more information.
     </p></div>
    </div>
    <div class="example" id="mongo.connecting.uds-auth-example">
     <p><strong>Example #2 Connecting to a domain socket</strong></p>
     <div class="example-contents"><p>
      In version 1.0.9+, you can use a UNIX domain socket to connect to an
      instance of MongoDB running locally.  This should be slightly faster than
      using a network connection.
     </p></div>
     <div class="example-contents"><p>
      In version 1.5.0, the MongoDB server automatically opens a socket at
      /tmp/mongodb-&lt;port&gt;.sock.  You can connect to this by specifying the
      path in your connection string:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;MongoDB&nbsp;server&nbsp;running&nbsp;locally&nbsp;on&nbsp;port&nbsp;20000<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb:///tmp/mongodb-20000.sock"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      You can combine this with any other connections you&#039;d like:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;domain&nbsp;socket,&nbsp;fall&nbsp;back&nbsp;to&nbsp;localhost&nbsp;connection<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb:///tmp/mongodb-27017.sock,localhost:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <div class="example" id="mongo.connecting.persistent-example">
     <p><strong>Example #3 <span class="function"><strong>MongoClient::__construct()</strong></span> authentication example</strong></p>
     <div class="example-contents"><p>
      A user must exist in the admin database before attempting to use
      authentication.  You can create one with the Mongo shell by running:
     </p></div>
     <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">&gt; use admin
  switched to db admin
  &gt; db.addUser(&quot;testUser&quot;, &quot;testPass&quot;);
  {
          &quot;_id&quot; : ObjectId(&quot;4b21272fd9ab21611d19095c&quot;),
          &quot;user&quot; : &quot;testUser&quot;,
          &quot;pwd&quot; : &quot;03b9b27e0abf1865e2f6fcbd9845dd59&quot;
  }
  &gt;</pre>
  </div>
     </div>
  
     <div class="example-contents"><p>
      After creating a user with, in this case, username &quot;testUser&quot; and password
      &quot;testPass&quot;, you can create an authenticated connection:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://testUser:testPass@localhost"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <div class="example" id="mongo.connecting.no-manual-persist-example">
     <p><strong>Example #4 <span class="function"><strong>MongoClient::__construct()</strong></span> read preference example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center<br /></span><span style="color: #0000BB">$uri&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com/'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'?readPreference=nearest'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&amp;readPreferenceTags=dc:east'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'replicaSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'rs'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      See the <a href="#mongo.readpreferences" class="link">read preferences</a>
      section of this manual for further information.
     </p></div>
    </div>
  
    <div class="example" id="mongo.connecting.manual-persist-example">
     <p><strong>Example #5 <span class="function"><strong>MongoClient::__construct()</strong></span> options example</strong></p>
     <div class="example-contents"><p>
      Options can be passed both through the query string in the connection
      string, or as an array passed as second argument to the constructor.
     </p></div>
     <div class="example-contents"><p>
      Here we set the journal option to true and readPreference to secondary
      preferred as default for all write operations:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost/?journal=true&amp;readPreference=secondary"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      And now we do the same, but as an options array:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$options&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'journal'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'readPreference'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'secondary'</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <div class="example" id="mongo.queries.secondaries.inheritence-example">
     <p><strong>Example #6 <span class="function"><strong>MongoClient::__construct()</strong></span> read preference example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center<br /></span><span style="color: #0000BB">$uri&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com/'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'?readPreference=nearest'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&amp;readPreferenceTags=dc:east'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'replicaSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'rs'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      See the <a href="#mongo.readpreferences" class="link">read preferences</a>
      section of this manual for further information.
     </p></div>
    </div>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongoclient.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.6.0</td>
         <td>
          <p class="para">
           Added support for <code class="literal">&quot;SCRAM-SHA-1&quot;</code> in
           <code class="literal">&quot;authMechanism&quot;</code> option.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;authMechanism&quot;</code>, <code class="literal">&quot;gssapiServiceName&quot;</code>, and <code class="literal">&quot;secondaryAcceptableLatencyMS&quot;</code>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.4.0</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;ssl&quot;</code> option and support for
           <a href="#mongo.connecting.ssl" class="link">connecting over SSL</a>.
          </p>
          <p class="para">
           Added <code class="literal">&quot;wTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;wTimeout&quot;</code>.
          </p>
          <p class="para">
           Emits <strong><code>E_DEPRECATED</code></strong> when
           <code class="literal">&quot;slaveOkay&quot;</code> or <code class="literal">&quot;timeout&quot;</code> is used.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;authSource&quot;</code>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.4</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;connectTimeoutMS&quot;</code> and
           <code class="literal">&quot;socketTimeoutMS&quot;</code> options.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;readPreference&quot;</code>,
           <code class="literal">&quot;readPreferenceTags&quot;</code>, <code class="literal">&quot;w&quot;</code>, and
           <code class="literal">&quot;wTimeout&quot;</code> options.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;username&quot;</code> and <code class="literal">&quot;password&quot;</code>
           options.
          </p>
          <p class="para">
           Removed <code class="literal">&quot;persist&quot;</code> option, as all connections are
           now persistent. It can still be used, but it doesn&#039;t affect anything.
          </p>
          <dl>
  
           
            <dt>
  
             <code class="parameter">&quot;persist&quot;</code>
            </dt>
  
            <dd>
  
             <p class="para">
              If the connection should be persistent. If set, the connection will
              be persistent. The string representation of the value is used as an
              ID for the connection, so two instances of
              <a href="#class.mongoclient" class="classname">MongoClient</a> that are initialized with
              <code class="literal">array(&quot;persist&quot; =&gt; &quot;foobar&quot;)</code> will share the same
              database connection, whereas an instance initialized with
              <code class="literal">array(&quot;persist&quot; =&gt; &quot;barbaz&quot;)</code> will use a different
              database connection.
             </p>
            </dd>
  
           
          </dl>
  
          <p class="para">
           The <code class="literal">&quot;replicaSet&quot;</code> option now takes a string, not a
           boolean.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.0.9</td>
         <td>Added <code class="literal">&quot;replicaSet&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.2</td>
         <td>
          <p class="para">
           Changed constructor to take an array of options. Pre-1.0.2, the
           constructor took the following parameters:
          </p>
          <dl>
  
           
            <dt>
  
             <code class="parameter">server</code>
            </dt>
  
            <dd>
  
             <p class="para">
              The server name.
             </p>
            </dd>
  
           
           
            <dt>
  
             <code class="parameter">connect</code>
            </dt>
  
            <dd>
  
             <p class="para">
              Optional boolean parameter specifying if the constructor should
              connect to the database before returning.  Defaults to <strong><code>TRUE</code></strong>.
             </p>
            </dd>
  
           
           
            <dt>
  
             <code class="parameter">persistent</code>
            </dt>
  
            <dd>
  
             <p class="para">
              If the connection should be persistent.
             </p>
            </dd>
  
           
           
            <dt>
  
             <code class="parameter">paired</code>
            </dt>
  
            <dd>
  
             <p class="para">
              If the connection should be paired.
             </p>
            </dd>
  
           
          </dl>
  
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongoclient.dropdb" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::dropDB</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::dropDB</span> &mdash; <span class="dc-title">Drops a database [deprecated]</span></p>
  
   </div>
  
   <div id="mongoclient.dropdb-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension, but there is an
  alternative in the <a href="#mongodb.overview" class="link">PHP library</a>:</p>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/php-library/master/reference/method/MongoDBClient-dropDatabase/" class="link external">&raquo;&nbsp;MongoDB\Client::dropDatabase()</a></li>
    </ul>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.dropdb-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::dropDB</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$db</code></span>
     ) : <span class="type">array</span></div>
  
  
    <div class="warning"><strong class="warning">Warning</strong>
     <h1 class="title">Deprecated</h1>
     <p class="para">
      Use <span class="function"><a href="#mongodb.drop" class="function">MongoDB::drop()</a></span> instead.
     </p>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.dropdb-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">db</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The database to drop. Can be a MongoDB object or the name of the database.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.dropdb-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.get" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::__get</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::__get</span> &mdash; <span class="dc-title">Gets a database</span></p>
  
   </div>
  
   <div id="mongoclient.get-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension, but there is an
  alternative in the <a href="#mongodb.overview" class="link">PHP library</a>:</p>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/php-library/master/reference/method/MongoDBClient__get/" class="link external">&raquo;&nbsp;MongoDB\Client::__get()</a></li>
    </ul>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.get-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::__get</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$dbname</code></span>
     ) : <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span></div>
  
    <p class="para rdfs-comment">
     This is the cleanest way of getting a database. If the database name has any
     special characters, <span class="function"><a href="#mongoclient.selectdb" class="function">MongoClient::selectDB()</a></span> will need to
     be used; however, this should be sufficient for most cases.
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mongo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;the&nbsp;following&nbsp;two&nbsp;lines&nbsp;are&nbsp;equivalent<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.get-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">dbname</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The database name.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.get-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new db object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.get-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws a generic exception if the database name is invalid.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.getconnections" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::getConnections</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::getConnections</span> &mdash; <span class="dc-title">Return info about all open connections</span></p>
  
   </div>
  
   <div id="mongoclient.getconnections-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.getconnections-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoClient::getConnections</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
    Returns an array of all open connections, and information about each of the
    servers 
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.getconnections-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.getconnections-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
    An <span class="type"><a href="#language.types.array" class="type array">array</a></span> of open connections.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.getconnections-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.queries.choosing.secondary-example">
     <p><strong>Example #1 <span class="methodname"><strong>MongoClient::getConnections()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getConnections</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(1) {
    [0]=&gt;
    array(3) {
      [&quot;hash&quot;]=&gt;
      string(26) &quot;localhost:27017;-;X;56052&quot;
      [&quot;server&quot;]=&gt;
      array(3) {
        [&quot;host&quot;]=&gt;
        string(10) &quot;localhost&quot;
        [&quot;port&quot;]=&gt;
        int(27017)
        [&quot;pid&quot;]=&gt;
        int(56052)
      }
      [&quot;connection&quot;]=&gt;
      array(8) {
        [&quot;last_ping&quot;]=&gt;
        int(1354076401)
        [&quot;last_ismaster&quot;]=&gt;
        int(0)
        [&quot;ping_ms&quot;]=&gt;
        int(0)
        [&quot;connection_type&quot;]=&gt;
        int(1)
        [&quot;connection_type_desc&quot;]=&gt;
        string(10) &quot;STANDALONE&quot;
        [&quot;max_bson_size&quot;]=&gt;
        int(16777216)
        [&quot;tag_count&quot;]=&gt;
        int(0)
        [&quot;tags&quot;]=&gt;
        array(0) {
        }
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoclient.gethosts" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::getHosts</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::getHosts</span> &mdash; <span class="dc-title">Updates status for all associated hosts</span></p>
  
   </div>
  
   <div id="mongoclient.gethosts-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.getservers" class="methodname">MongoDB\Driver\Manager::getServers()</a></span></li>
    </ul>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.gethosts-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::getHosts</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
  
    <p class="para rdfs-comment">
     This method is only useful with a connection to a replica set. It returns
     the status of all of the hosts in the set. Without a replica set, it will
     just return an array with one element containing the host that you are
     connected to.
    </p>
  
    <p class="para">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.gethosts-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.gethosts-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array of information about the hosts in the set. Includes each
     host&#039;s hostname, its health (1 is healthy), its state (1 is primary, 2 is
     secondary, 0 is anything else), the amount of time it took to ping the
     server, and when the last ping occurred. For example, on a three-member
     replica set, it might look something like:
    </p>
    <div class="example-contents screen">
  <div class="returnvaluescode"><pre class="returnvaluescode">array(3) {
    [&quot;A:27017&quot;]=&gt;
    array(4) {
      [&quot;host&quot;]=&gt;
      &quot;A&quot;
      [&quot;port&quot;]=&gt;
      27017
      [&quot;health&quot;]=&gt;
      int(1)
      [&quot;state&quot;]=&gt;
      int(2)
      [&quot;ping&quot;]=&gt;
      int(369)
      [&quot;lastPing&quot;]=&gt;
      int(1309470644)
    }
    [&quot;B:27017&quot;]=&gt;
    array(4) {
      [&quot;host&quot;]=&gt;
      &quot;B&quot;
      [&quot;port&quot;]=&gt;
      27017
      [&quot;health&quot;]=&gt;
      int(1)
      [&quot;state&quot;]=&gt;
      int(1)
      [&quot;ping&quot;]=&gt;
      int(139)
      [&quot;lastPing&quot;]=&gt;
      int(1309470644)
    }
    [&quot;C:27017&quot;]=&gt;
    array(4) {
      [&quot;host&quot;]=&gt;
      &quot;C&quot;
      [&quot;port&quot;]=&gt;
      27017
      [&quot;health&quot;]=&gt;
      int(1)
      [&quot;state&quot;]=&gt;
      int(2)
      [&quot;ping&quot;]=&gt;
      int(1012)
      [&quot;lastPing&quot;]=&gt;
      int(1309470644)
    }
  }</pre>
  </div>
    </div>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongoclient.gethosts-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.10</td>
         <td>
          <p class="para">
           Support for non-replicasets was added.
          </p>
          <p class="para">
           The returned array elements now also include the
           <code class="literal">hostname</code> and <code class="literal">port</code>.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoclient.gethosts-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongoclient.getconnections" class="function" rel="rdfs-seeAlso">MongoClient::getConnections()</a> - Return info about all open connections</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongoclient.getreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::getReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::getReadPreference</span> &mdash; <span class="dc-title">Get the read preference for this connection</span></p>
  
   </div>
  
   <div id="mongoclient.getreadpreference-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.getreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::getReadPreference</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.getreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.getreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the read preference. The array contains the values <code class="literal">type</code> for the string read preference mode (corresponding to the <a href="#class.mongoclient" class="classname">MongoClient</a> constants), and <code class="literal">tagsets</code> containing a list of all tag set criteria. If no tag sets were specified, <code class="literal">tagsets</code> will not be present in the array.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongoclient.getreadpreference-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.3.3</td>
         <td>
          The return value has changed to be consistent with
          <span class="methodname"><a href="#mongoclient.setreadpreference" class="methodname">MongoClient::setReadPreference()</a></span>. The
          <code class="literal">type</code> value was changed from a number to a string,
          <code class="literal">type_string</code> was removed, and
          <code class="literal">tagsets</code> now expresses tags as key/value pairs instead
          of colon-delimited strings.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.getreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.queries.querying-example">
     <p><strong>Example #1 <span class="methodname"><strong>MongoClient::getReadPreference()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(),<br />));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadPreference</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;type&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;tagsets&quot;]=&gt;
    array(3) {
      [0]=&gt;
      array(2) {
        [&quot;dc&quot;]=&gt;
        string(4) &quot;east&quot;
        [&quot;use&quot;]=&gt;
        string(9) &quot;reporting&quot;
      }
      [1]=&gt;
      array(1) {
        [&quot;dc&quot;]=&gt;
        string(7) &quot;west&quot;
      }
      [2]=&gt;
      array(0) {
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoclient.getreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongoclient.setreadpreference" class="function" rel="rdfs-seeAlso">MongoClient::setReadPreference()</a> - Set the read preference for this connection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoclient.getwriteconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::getWriteConcern</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoClient::getWriteConcern</span> &mdash; <span class="dc-title">Get the write concern for this connection</span></p>
  
   </div>
  
   <div id="mongoclient.getwriteconcern-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.getwriteconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::getWriteConcern</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.getwriteconcern-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.getwriteconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the write concern. The array contains the values <code class="literal">w</code> for an integer acknowledgement level or string mode, and <code class="literal">wtimeout</code> denoting the maximum number of milliseconds to wait for the server to satisfy the write concern.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.getwriteconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.queries.querying.wrong">
     <p><strong>Example #1 <span class="methodname"><strong>MongoClient::getWriteConcern()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'wTimeoutMS'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">500</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setWriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;w&quot;]=&gt;
    int(1)
    [&quot;wtimeout&quot;]=&gt;
    int(500)
  }
  array(2) {
    [&quot;w&quot;]=&gt;
    int(1)
    [&quot;wtimeout&quot;]=&gt;
    int(1000)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoclient.getwriteconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.writeconcerns" class="link">write concern</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongoclient.setwriteconcern" class="function" rel="rdfs-seeAlso">MongoClient::setWriteConcern()</a> - Set the write concern for this connection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoclient.killcursor" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::killCursor</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoClient::killCursor</span> &mdash; <span class="dc-title">Kills a specific cursor on the server</span></p>
  
   </div>
  
   <div id="mongoclient.killcursor-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.killcursor-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::killCursor</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$server_hash</code></span>
     , <span class="methodparam"><span class="type"><span class="type int|MongoInt64">int|MongoInt64</span></span> <code class="parameter">$id</code></span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     In certain situations it might be needed to kill a cursor on the server.
     Usually cursors time out after 10 minutes of inactivity, but it is possible
     to create an immortal cursor with
     <span class="methodname"><a href="#mongocursor.immortal" class="methodname">MongoCursor::immortal()</a></span> that never times out. In
     order to be able to kill such an immortal cursor, you can call this
     method with the information supplied by
     <span class="methodname"><a href="#mongocursor.info" class="methodname">MongoCursor::info()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.killcursor-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">server_hash</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The server hash that has the cursor. This can be obtained through
         <span class="methodname"><a href="#mongocursor.info" class="methodname">MongoCursor::info()</a></span>.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">id</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The ID of the cursor to kill. You can either supply an <span class="type"><a href="#language.types.integer" class="type int">int</a></span>
         containing the 64 bit cursor ID, or an object of the
         <a href="#class.mongoint64" class="classname">MongoInt64</a> class. The latter is necessary on 32
         bit platforms (and Windows).
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.killcursor-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if the method attempted to kill a cursor, and <strong><code>FALSE</code></strong> if
     there was something wrong with the arguments (such as a wrong
     <code class="parameter">server_hash</code>). The return status does <em class="emphasis">not
     reflect</em> where the cursor was actually killed as the server does
     not provide that information.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.killcursor-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     This method displays a warning if the supplied
     <code class="parameter">server_hash</code> does not match up with an existing
     connection. No attempt to kill a cursor is attempted in that case either.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="mongo.mongoclient.killcursor.examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.queries.arrays-example">
     <p><strong>Example #1 <span class="function"><strong>MongoClient::killCursor()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      This example shows how to connect, do a query, obtain the cursor
      information and then kill the cursor.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">testdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">collection</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Now&nbsp;the&nbsp;cursor&nbsp;is&nbsp;valid,&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;the&nbsp;hash&nbsp;and&nbsp;ID&nbsp;out:<br /></span><span style="color: #0000BB">$info&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">info</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Kill&nbsp;the&nbsp;cursor<br /></span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">killCursor</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">'server'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]&nbsp;);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.listdbs" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::listDBs</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::listDBs</span> &mdash; <span class="dc-title">Lists all of the databases available</span></p>
  
   </div>
  
   <div id="mongoclient.listdbs-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension, but there is an
  alternative in the <a href="#mongodb.overview" class="link">PHP library</a>:</p>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/php-library/master/reference/method/MongoDBClient-listDatabases/" class="link external">&raquo;&nbsp;MongoDB\Client::listDatabases()</a></li>
    </ul>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.listdbs-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::listDBs</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.listdbs-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.listdbs-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an associative array containing three fields.  The first field is
     <code class="literal">databases</code>, which in turn contains an array.  Each element
     of the array is an associative array corresponding to a database, giving th
     database&#039;s name, size, and if it&#039;s empty.  The other two fields are
     <code class="literal">totalSize</code> (in bytes) and <code class="literal">ok</code>, which is 1
     if this method ran successfully.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.listdbs-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.queries.arrays-example-2">
     <p><strong>Example #1 <span class="methodname"><strong>MongoClient::listDBs()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Example demonstrating how to use listDBs and the returned data structure.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mongo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$dbs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">listDBs</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbs</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Array
  (
      [databases] =&gt; Array
          (
              [0] =&gt; Array
                  (
                      [name] =&gt; doctrine
                      [sizeOnDisk] =&gt; 218103808
                      [empty] =&gt;
                  )
          )
  
      [totalSize] =&gt; 218103808
      [ok] =&gt; 1
  )
  
  </pre></div>
     </div>
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.selectcollection" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::selectCollection</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::selectCollection</span> &mdash; <span class="dc-title">Gets a database collection</span></p>
  
   </div>
  
   <div id="mongoclient.selectcollection-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension, but there is an
  alternative in the <a href="#mongodb.overview" class="link">PHP library</a>:</p>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/php-library/master/reference/method/MongoDBClient-selectCollection/" class="link external">&raquo;&nbsp;MongoDB\Client::selectCollection()</a></li>
    </ul>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.selectcollection-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::selectCollection</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.selectcollection-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">db</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The database name.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">collection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The collection name.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.selectcollection-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new collection object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.selectcollection-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.exception" class="classname">Exception</a> if the database or collection name is invalid.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.selectcollection-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.queries.querying-arrays-nested">
     <p><strong>Example #1 <span class="function"><strong>MongoClient::selectCollection()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$c1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"bar.baz"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;which&nbsp;is&nbsp;equivalent&nbsp;to<br /></span><span style="color: #0000BB">$c2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"bar.baz"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;$c1&nbsp;and&nbsp;$c2&nbsp;now&nbsp;represent&nbsp;the&nbsp;same&nbsp;collection<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.selectdb" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::selectDB</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::selectDB</span> &mdash; <span class="dc-title">Gets a database</span></p>
  
   </div>
  
   <div id="mongoclient.selectdb-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension, but there is an
  alternative in the <a href="#mongodb.overview" class="link">PHP library</a>:</p>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/php-library/master/reference/method/MongoDBClient-selectDatabase/" class="link external">&raquo;&nbsp;MongoDB\Client::selectDatabase()</a></li>
    </ul>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.selectdb-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::selectDB</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.selectdb-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The database name.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.selectdb-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new database object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.selectdb-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.exception" class="classname">Exception</a> if the database name is invalid.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongoclient.setreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::setReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::setReadPreference</span> &mdash; <span class="dc-title">Set the read preference for this connection</span></p>
  
   </div>
  
   <div id="mongoclient.setreadpreference-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.setreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::setReadPreference</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.setreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">read_preference</code></dt>
  <dd>
  <p class="para">The read preference mode: <strong><code>MongoClient::RP_PRIMARY</code></strong>, <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>, <strong><code>MongoClient::RP_SECONDARY</code></strong>, <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong>, or <strong><code>MongoClient::RP_NEAREST</code></strong>.</p></dd>
  <dt>
  <code class="parameter">tags</code></dt>
  <dd>
  <p class="para">An array of zero or more tag sets, where each tag set is itself an array of criteria used to match tags on replica set members.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.setreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <strong><code>TRUE</code></strong> on success, or <strong><code>FALSE</code></strong> otherwise.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.setreadpreference-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if either parameter is invalid, or if one or more tag sets are provided with the <strong><code>MongoClient::RP_PRIMARY</code></strong> read preference mode.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.setreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.queries.querying-arrays-in">
     <p><strong>Example #1 <span class="methodname"><strong>MongoClient::setReadPreference()</strong></span> tag set array syntax example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center&nbsp;also&nbsp;used&nbsp;for&nbsp;reporting,<br />//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;server&nbsp;in&nbsp;the&nbsp;"west"&nbsp;data&nbsp;center<br /></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_NEAREST</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoclient.setreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongoclient.getreadpreference" class="function" rel="rdfs-seeAlso">MongoClient::getReadPreference()</a> - Get the read preference for this connection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoclient.setwriteconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::setWriteConcern</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoClient::setWriteConcern</span> &mdash; <span class="dc-title">Set the write concern for this connection</span></p>
  
   </div>
  
   <div id="mongoclient.setwriteconcern-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.setwriteconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::setWriteConcern</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
    ] ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.setwriteconcern-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">w</code></dt>
  <dd>
  <p class="para">The write concern. This may be an integer denoting the number of servers required to acknowledge the write, or a string mode (e.g. &quot;majority&quot;).</p></dd>
  <dt>
  <code class="parameter">wtimeout</code></dt>
  <dd>
  <p class="para">The maximum number of milliseconds to wait for the server to satisfy the write concern.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.setwriteconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <strong><code>TRUE</code></strong> on success, or <strong><code>FALSE</code></strong> otherwise.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongoclient.setwriteconcern-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if the <code class="literal">w</code> parameter is not an integer or string value.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoclient.setwriteconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongoclient.intro-example">
     <p><strong>Example #1 <span class="methodname"><strong>MongoClient::setWriteConcern()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Require&nbsp;that&nbsp;the&nbsp;majority&nbsp;of&nbsp;servers&nbsp;in&nbsp;the&nbsp;replica&nbsp;set&nbsp;acknowledge&nbsp;writes<br />//&nbsp;within&nbsp;three&nbsp;seconds.<br /></span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setWriteConcern</span><span style="color: #007700">(</span><span style="color: #DD0000">'majority'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoclient.setwriteconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.writeconcerns" class="link">write concern</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongoclient.getwriteconcern" class="function" rel="rdfs-seeAlso">MongoClient::getWriteConcern()</a> - Get the write concern for this connection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoclient.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoClient::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::__toString</span> &mdash; <span class="dc-title">String representation of this connection</span></p>
  
   </div>
  
   <div id="mongoclient.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoclient.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoclient.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoclient.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns hostname and port for this connection.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoclient.close">MongoClient::close</a> — Closes this connection</li><li><a href="#mongoclient.connect">MongoClient::connect</a> — Connects to a database server</li><li><a href="#mongoclient.construct">MongoClient::__construct</a> — Creates a new database connection object</li><li><a href="#mongoclient.dropdb">MongoClient::dropDB</a> — Drops a database [deprecated]</li><li><a href="#mongoclient.get">MongoClient::__get</a> — Gets a database</li><li><a href="#mongoclient.getconnections">MongoClient::getConnections</a> — Return info about all open connections</li><li><a href="#mongoclient.gethosts">MongoClient::getHosts</a> — Updates status for all associated hosts</li><li><a href="#mongoclient.getreadpreference">MongoClient::getReadPreference</a> — Get the read preference for this connection</li><li><a href="#mongoclient.getwriteconcern">MongoClient::getWriteConcern</a> — Get the write concern for this connection</li><li><a href="#mongoclient.killcursor">MongoClient::killCursor</a> — Kills a specific cursor on the server</li><li><a href="#mongoclient.listdbs">MongoClient::listDBs</a> — Lists all of the databases available</li><li><a href="#mongoclient.selectcollection">MongoClient::selectCollection</a> — Gets a database collection</li><li><a href="#mongoclient.selectdb">MongoClient::selectDB</a> — Gets a database</li><li><a href="#mongoclient.setreadpreference">MongoClient::setReadPreference</a> — Set the read preference for this connection</li><li><a href="#mongoclient.setwriteconcern">MongoClient::setWriteConcern</a> — Set the write concern for this connection</li><li><a href="#mongoclient.tostring">MongoClient::__toString</a> — String representation of this connection</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongodb" class="reference"><hr />
  
   <h1 class="title">The MongoDB class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
  
    <div class="section" id="mongodb.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Instances of this class are used to interact with a database.  To get a
      database:
      <div class="example" id="example-1589">
       <p><strong>Example #1 Selecting a database</strong></p>
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;connect<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"example"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
      Database names can use almost any character in the ASCII range.  However,
      they cannot contain &quot; &quot;, &quot;.&quot; or be the empty string.
      The name &quot;system&quot; is also reserved.
     </p>
     <p class="para">
      A few unusual, but valid, database names: &quot;null&quot;, &quot;[x,y]&quot;, &quot;3&quot;, &quot;\&quot;&quot;, &quot;/&quot;.
     </p>
     <p class="para">
      Unlike collection names, database names may contain &quot;$&quot;.
     </p>
    </div>
  
  
    <div class="section" id="mongodb.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">PROFILING_OFF</var>
       <span class="initializer"> = 0</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">PROFILING_SLOW</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">PROFILING_ON</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">integer</span>
       <var class="varname">w</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">integer</span>
       <var class="varname">wtimeout</var>
       <span class="initializer"> = 10000</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.authenticate" class="methodname">authenticate</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.command" class="methodname">command</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter reference">&$hash</code></span>
    ]] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$conn</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.createcollection" class="methodname">createCollection</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.createdbref" class="methodname">createDBRef</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$document_or_id</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.drop" class="methodname">drop</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.dropcollection" class="methodname">dropCollection</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$coll</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.execute" class="methodname">execute</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$code</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$args</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.forceerror" class="methodname">forceError</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.get" class="methodname">__get</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getcollectioninfo" class="methodname">getCollectionInfo</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getcollectionnames" class="methodname">getCollectionNames</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getdbref" class="methodname">getDBRef</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getgridfs" class="methodname">getGridFS</a></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = &quot;fs&quot;</span></span>
    ] ) : <span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getprofilinglevel" class="methodname">getProfilingLevel</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getreadpreference" class="methodname">getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getslaveokay" class="methodname">getSlaveOkay</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.getwriteconcern" class="methodname">getWriteConcern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.lasterror" class="methodname">lastError</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.listcollections" class="methodname">listCollections</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.preverror" class="methodname">prevError</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.repair" class="methodname">repair</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$preserve_cloned_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$backup_original_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
    ]] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.reseterror" class="methodname">resetError</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.selectcollection" class="methodname">selectCollection</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.setprofilinglevel" class="methodname">setProfilingLevel</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code></span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.setreadpreference" class="methodname">setReadPreference</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.setslaveokay" class="methodname">setSlaveOkay</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.setwriteconcern" class="methodname">setWriteConcern</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb.--tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Predefined Constants</h2>
     <div class="section" id="mongodb.constants.types">
      <h2 class="title">MongoDB Log Levels</h2>
      <dl>
  
  
       
        <dt id="mongodb.constants.profilingoff"><strong><code>MongoDB::PROFILING_OFF</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Profiling is off.
         </span>
        </dd>
  
       
       
        <dt id="mongodb.constants.profilingslow"><strong><code>MongoDB::PROFILING_SLOW</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Profiling is on for slow operations (&gt;100 ms).
         </span>
        </dd>
  
       
       
        <dt id="mongodb.constants.profilingon"><strong><code>MongoDB::PROFILING_ON</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Profiling is on for all operations.
         </span>
        </dd>
  
       
      </dl>
  
     </div>
    </div>
  
    <div class="section">
     <h2 class="title">Fields</h2>
     <dl>
  
      
       <dt id="mongodb.props.w"><var class="varname">w</var></dt>
  
       <dt>
  1</dt>
  
       <dd>
  
        <p class="para">
         The number of servers to replicate a change to before returning success.
         Inherited by instances of <a href="#class.mongocollection" class="classname">MongoCollection</a> derived
         from this.  <code class="literal">w</code> functionality is only available in 
         version 1.5.1+ of the MongoDB server and 1.0.8+ of the driver.
        </p>
        <p class="para">
         <code class="literal">w</code> is used whenever you need to adjust the
         acknowledgement level
         (<span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span>, 
         <span class="function"><a href="#mongocollection.update" class="function">MongoCollection::update()</a></span>, 
         <span class="function"><a href="#mongocollection.remove" class="function">MongoCollection::remove()</a></span>, 
         <span class="function"><a href="#mongocollection.save" class="function">MongoCollection::save()</a></span>, and
         <span class="function"><a href="#mongocollection.ensureindex" class="function">MongoCollection::ensureIndex()</a></span> all support this
         option). With the default value (1), an acknowledged operation will return once
         the database server has the operation. If the server goes down before
         the operation has been replicated to a secondary, it is possible to lose
         the operation forever. Thus, you can specify <code class="literal">w</code> to be
         higher than one and guarantee that at least one secondary has the
         operation before it is considered successful.
        </p>
        <p class="para">
         For example, if <code class="literal">w</code> is 2, the primary and one secondary
         must have a record of the operation or the driver will throw a
         <a href="#class.mongocursorexception" class="classname">MongoCursorException</a>. It is tempting to set
         <code class="literal">w</code> to the total number of secondaries + primary, but
         then if one secondary is down the operation will fail and an exception
         will be thrown, so usually <code class="literal">w=2</code> is safest (primary and
         one secondary).
        </p>
       </dd>
  
      
      
       <dt id="mongodb.props.wtimeout"><var class="varname">wtimeout</var></dt>
  
       <dt>
  10000</dt>
  
       <dd>
  
        <p class="para">
         The number of milliseconds to wait for <code class="literal">MongoDB::$w</code> 
         replications to take place.  Inherited by instances of
         <a href="#class.mongocollection" class="classname">MongoCollection</a> derived from this. 
         <code class="literal">w</code> functionality is only available in version 1.5.1+ of
         the MongoDB server and 1.0.8+ of the driver.
        </p>
        <p class="para">
         Unless <code class="literal">wtimeout</code> is set, the server waits forever for 
         replicating to <code class="literal">w</code> servers to finish.  The driver 
         defaults to waiting for 10 seconds, you can change this value to alter
         its behavior.
        </p>
       </dd>
  
      
     </dl>
  
    </div>
  
    <div class="section">
     <h2 class="title">See Also</h2>
     <p class="para">
      MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/glossary/#term-database" class="link external">&raquo;&nbsp;databases</a>.
     </p>
    </div>
   </div>
  
   
  
  
  <div id="mongodb.authenticate" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::authenticate</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.1)</p><p class="refpurpose"><span class="refname">MongoDB::authenticate</span> &mdash; <span class="dc-title">Log in to this database</span></p>
  
   </div>
  
   <div id="mongodb.authenticate-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
     <p class="para">Instead, you need to provide credentials through the connection
     string.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.authenticate-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::authenticate</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This method causes its connection to be authenticated.  If authentication is
     enabled for the database server (it&#039;s not, by default), you need to log in
     before the database will allow you to do anything.
    </p>
    <p class="para">
     In general, you should use the authenticate built into
     <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span> in preference to this method.
     If you authenticate on connection and the connection drops and reconnects
     during your session, you&#039;ll be reauthenticated.  If you manually
     authenticated using this method and the connection drops, you&#039;ll have to call
     this method again once you&#039;re reconnected.
    </p>
    <p class="para">
     This method is identical to running:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$salted&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">${</span><span style="color: #0000BB">username</span><span style="color: #007700">}</span><span style="color: #DD0000">:mongo:</span><span style="color: #007700">${</span><span style="color: #0000BB">password</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hash&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #0000BB">$salted</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$nonce&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"getnonce"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$saltedHash&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #0000BB">$nonce</span><span style="color: #007700">[</span><span style="color: #DD0000">"nonce"</span><span style="color: #007700">].</span><span style="color: #DD0000">"</span><span style="color: #007700">${</span><span style="color: #0000BB">username</span><span style="color: #007700">}${</span><span style="color: #0000BB">hash</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"authenticate"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"nonce"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$nonce</span><span style="color: #007700">[</span><span style="color: #DD0000">"nonce"</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"key"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$saltedHash<br /></span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
    <p class="para">
     Once a connection has been authenticated, it can only be un-authenticated by
     using the &quot;logout&quot; database command:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"logout"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongodb.authenticate-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">username</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The username.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">password</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The password (in plaintext).
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.authenticate-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns database response.  If the login was successful, it will return
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array(</span><span style="color: #DD0000">"ok"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    If something went wrong, it will return
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array(</span><span style="color: #DD0000">"ok"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"errmsg"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"auth&nbsp;fails"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    (&quot;auth fails&quot; could be another message, depending on database version and what
    when wrong).
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.authenticate-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/command/authenticate" class="link external">&raquo;&nbsp;authenticate</a>.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.authenticate-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>
          Emits <strong><code>E_DEPRECATED</code></strong> when used. Please pass in the
          authentication details to the constructor.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongodb.command" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::command</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.2)</p><p class="refpurpose"><span class="refname">MongoDB::command</span> &mdash; <span class="dc-title">Execute a database command</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongodb.command-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::command</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter reference">&$hash</code></span>
    ]] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Almost everything that is not a CRUD operation can be done with a database
     command.  Need to know the database version?  There&#039;s a command for that.
     Need to do aggregation?  There&#039;s a command for that.  Need to turn up
     logging?  You get the idea.
    </p>
    <p class="para">
     This method is identical to:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">command</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'$cmd'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongodb.command-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">command</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The query to send.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the index creation. Currently available options
         include:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">hash</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Set to the connection hash of the server that executed the command. When
         the command result is suitable for creating a
         <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a>, the hash is intended to be
         passed to <span class="function"><a href="#mongocommandcursor.createfromdocument" class="function">MongoCommandCursor::createFromDocument()</a></span>.
        </p>
        <p class="para">
         The hash will also correspond to a connection returned from
         <span class="function"><a href="#mongoclient.getconnections" class="function">MongoClient::getConnections()</a></span>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.command-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Renamed the <code class="literal">&quot;timeout&quot;</code> option to
           <code class="literal">&quot;socketTimeoutMS&quot;</code>. Emits
           <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;timeout&quot;</code> is
           used.
          </p>
          <p class="para">
           Added <code class="literal">hash</code> by-reference parameter.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          Added <code class="literal">options</code> parameter with a single option: 
          <code class="literal">&quot;timeout&quot;</code>.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.command-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns database response. Every database response is always maximum one
     document, which means that the result of a database command can never
     exceed 16MB. The resulting document&#039;s structure depends on the command, but
     most results will have the <code class="literal">ok</code> field to indicate success
     or failure and <code class="literal">results</code> containing an array of each of
     the resulting documents.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.command-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1590">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::command()</strong></span> &quot;distinct&quot; example</strong></p>
     <div class="example-contents"><p>
      Finding all of the distinct values for a key.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$people&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">people</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Sally"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Dave"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Molly"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">87</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$ages&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"distinct"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"people"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"key"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"age"</span><span style="color: #007700">));<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$ages</span><span style="color: #007700">[</span><span style="color: #DD0000">'values'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$age</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$age</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  4<br />
  22<br />
  87<br />
     </div>
    </div>
  
    <div class="example" id="example-1591">
     <p><strong>Example #2 <span class="function"><strong>MongoDB::command()</strong></span> &quot;distinct&quot; example</strong></p>
     <div class="example-contents"><p>
      Finding all of the distinct values for a key, where the value is larger
      than or equal to 18.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$people&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">people</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Sally"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Dave"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Molly"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">87</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$ages&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"distinct"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"people"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"key"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"age"</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"query"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$gte'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">18</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;)<br />);&nbsp;&nbsp;<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$ages</span><span style="color: #007700">[</span><span style="color: #DD0000">'values'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$age</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$age</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  22<br />
  87<br />
     </div>
    </div>
  
    <div class="example" id="example-1592">
     <p><strong>Example #3 <span class="function"><strong>MongoDB::command()</strong></span> MapReduce example</strong></p>
     <div class="example-contents"><p>
      Get all users with at least on &quot;sale&quot; event, and how many times each
      of these users has had a sale.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;sample&nbsp;event&nbsp;document<br /></span><span style="color: #0000BB">$events</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"user_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"type"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"time"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(),&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"desc"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$description</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;construct&nbsp;map&nbsp;and&nbsp;reduce&nbsp;functions<br /></span><span style="color: #0000BB">$map&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">"function()&nbsp;{&nbsp;emit(this.user_id,1);&nbsp;}"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$reduce&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">"function(k,&nbsp;vals)&nbsp;{&nbsp;"</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"var&nbsp;sum&nbsp;=&nbsp;0;"</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"for&nbsp;(var&nbsp;i&nbsp;in&nbsp;vals)&nbsp;{"</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"sum&nbsp;+=&nbsp;vals[i];"</span><span style="color: #007700">.&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"}"</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"return&nbsp;sum;&nbsp;}"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$sales&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"mapreduce"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"events"</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"map"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$map</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"reduce"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$reduce</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"query"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"type"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"sale"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"out"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"merge"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"eventCounts"</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">$users&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$sales</span><span style="color: #007700">[</span><span style="color: #DD0000">'result'</span><span style="color: #007700">])-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$users&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$user</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]}</span><span style="color: #DD0000">&nbsp;had&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$user</span><span style="color: #007700">[</span><span style="color: #DD0000">'value'</span><span style="color: #007700">]}</span><span style="color: #DD0000">&nbsp;sale(s).\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  User 47cc67093475061e3d9536d2 had 3 sale(s).<br />
  User 49902cde5162504500b45c2c had 14 sale(s).<br />
  User 4af467e4fd543cce7b0ea8e2 had 1 sale(s).<br />
     </div>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>Using <a href="#class.mongocode" class="classname">MongoCode</a></strong><br />
      <p class="para">
       This example uses <a href="#class.mongocode" class="classname">MongoCode</a>, which can also take a 
       scope argument.  However, at the moment, MongoDB does not support using
       scopes in MapReduce.  If you would like to use client-side variables in the
       MapReduce functions, you can add them to the global scope by using the 
       optional scope field with the database command.  See the
       <a href="https://docs.mongodb.com/manual/core/map-reduce/" class="link external">&raquo;&nbsp;MapReduce documentation</a> 
       for more information.
      </p>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>The <code class="literal">out</code> argument</strong><br />
      <p class="para">
       Before 1.8.0, the <code class="literal">out</code> argument was optional. If you did
       not use it, MapReduce results would be written to a temporary collection,
       which would be deleted when your connection was closed. In 1.8.0+, the 
       <code class="literal">out</code> argument is required. See the
       <a href="https://docs.mongodb.com/manual/core/map-reduce/" class="link external">&raquo;&nbsp;MapReduce documentation</a> 
       for more information.
      </p>
     </p></blockquote>
    </div>
  
    <div class="example" id="example-1593">
     <p><strong>Example #4 <span class="function"><strong>MongoDB::command()</strong></span> &quot;geoNear&quot; example</strong></p>
     <div class="example-contents"><p>
      This example shows how to use the geoNear command.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">poiConcat</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'geoNear'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"poiConcat"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Search&nbsp;in&nbsp;the&nbsp;poiConcat&nbsp;collection<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'near'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(-</span><span style="color: #0000BB">0.08</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">51.48</span><span style="color: #007700">),&nbsp;</span><span style="color: #FF8000">//&nbsp;Search&nbsp;near&nbsp;51.48°N,&nbsp;0.08°E<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'spherical'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Enable&nbsp;spherical&nbsp;search<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'num'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Maximum&nbsp;5&nbsp;returned&nbsp;documents<br /></span><span style="color: #007700">));<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$r</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.command-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongocollection.aggregate" class="methodname" rel="rdfs-seeAlso">MongoCollection::aggregate()</a> - Perform an aggregation using the aggregation framework</span></li>
      <li class="member"><span class="methodname"><a href="#mongocollection.findandmodify" class="methodname" rel="rdfs-seeAlso">MongoCollection::findAndModify()</a> - Update a document and return it</span></li>
      <li class="member"><span class="methodname"><a href="#mongocollection.group" class="methodname" rel="rdfs-seeAlso">MongoCollection::group()</a> - Performs an operation similar to SQL's GROUP BY command</span></li>
     </ul>
    </p>
    <p class="para">
     MongoDB core docs on 
     <a href="https://docs.mongodb.com/manual/reference/command/" class="link external">&raquo;&nbsp;database commands</a>.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::__construct</span> &mdash; <span class="dc-title">Creates a new database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$conn</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     This method is not meant to be called directly.  The preferred way to create
     an instance of MongoDB is through <span class="function"><a href="#mongoclient.get" class="function">MongoClient::__get()</a></span> or
     <span class="function"><a href="#mongoclient.selectdb" class="function">MongoClient::selectDB()</a></span>.
    </p>
    <p class="para">
     If you&#039;re ignoring the previous paragraph and want to call it directly you
     can do so:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'mydbname'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     But don&#039;t.  Isn&#039;t this much nicer:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mydbname</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;or,&nbsp;if&nbsp;the&nbsp;name&nbsp;contains&nbsp;weird&nbsp;characters:<br /><br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'my,db:name'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span>
        <code class="parameter">conn</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database connection.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database name.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws default exception if the database name is invalid.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.createcollection" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::createCollection</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::createCollection</span> &mdash; <span class="dc-title">Creates a collection</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongodb.createcollection-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::createCollection</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  
    
    <p class="para rdfs-comment">
     This method is used to create capped collections and other collections 
     requiring special options.  It is identical to running:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"create"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"capped"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"capped"</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"size"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"size"</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"max"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"max"</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"autoIndexId"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"autoIndexId"</span><span style="color: #007700">],<br />));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     See <span class="function"><a href="#mongodb.command" class="function">MongoDB::command()</a></span> for more information about database commands.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.createcollection-parameters">
    <h3 class="title">Parameters</h3>
  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The name of the collection.
        </p>
       </dd>
  
         
  
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array containing options for the collections. Each option is its own
         element in the options array, with the option name listed below being
         the key of the element. The supported options depend on the MongoDB
         server version and storage engine, and the driver passes any option
         that you give it straight to the server. A few of the supported options
         are, but you can find a full list in the MongoDB core docs on <a href="https://docs.mongodb.com/manual/method/db.createCollection/" class="link external">&raquo;&nbsp;createCollection</a>:
        </p>
        <p class="para">
         <dl>
  
          
           <dt>
  
            <code class="parameter">capped</code>
           </dt>
  
           <dd>
  
            <p class="para">
             If the collection should be a fixed size.
            </p>
           </dd>
  
             
          
           <dt>
  
            <code class="parameter">size</code>
           </dt>
  
           <dd>
  
            <p class="para">
             If the collection is fixed size, its size in bytes.
            </p>
           </dd>
  
             
          
           <dt>
  
            <code class="parameter">max</code>
           </dt>
  
           <dd>
  
            <p class="para">
             If the collection is fixed size, the maximum number of elements to
             store in the collection.
            </p>
           </dd>
  
             
          
           <dt>
  
            <code class="parameter">autoIndexId</code>
           </dt>
  
           <dd>
  
            <p class="para">
             If capped is <strong><code>TRUE</code></strong> you can specify <strong><code>FALSE</code></strong> to disable the
             automatic index created on the <code class="literal">_id</code> field.
             Before MongoDB 2.2, the default value for
             <code class="literal">autoIndexId</code> was <strong><code>FALSE</code></strong>.
            </p>
           </dd>
  
             
         </dl>
  
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.createcollection-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a collection object representing the new collection.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-mongodb.createcollection-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1594">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::createCollection()</strong></span> capped collection example</strong></p>
     <div class="example-contents"><p>
      A capped collection is a special type of collection that has either a fixed
      or a fixed number of elements. Once the collection is &quot;full,&quot; the oldest
      elements will be removed when new elements are added.  Capped collections
      can be very useful for applications like logging, where you may want to
      reserve a certain amount of space for logs and not worry about them
      getting too big.
     </p></div>
     <div class="example-contents"><p>
      This example creates a very tiny log collection that will keep a maximum of
      10 documents.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$log&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCollection</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"logger"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'capped'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">*</span><span style="color: #0000BB">1024</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'max'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br />for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$log</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"level"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">WARN</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"msg"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"sample&nbsp;log&nbsp;message&nbsp;#</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ts"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">()));<br />}<br /><br /></span><span style="color: #0000BB">$msgs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$log</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$msgs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$msg</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$msg</span><span style="color: #007700">[</span><span style="color: #DD0000">'msg'</span><span style="color: #007700">].</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  sample log message #90<br />
  sample log message #91<br />
  sample log message #92<br />
  sample log message #93<br />
  sample log message #94<br />
  sample log message #95<br />
  sample log message #96<br />
  sample log message #97<br />
  sample log message #98<br />
  sample log message #99<br />
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.createcollection-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.0</td>
         <td>
          <p class="para">
           In versions before 1.4.0, the options were all arguments to the method. The
           function synopsis in those older versions is:
          </p>
          <p class="para">
           <div class="methodsynopsis dc-description">
            <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::createCollection</strong></span>
             ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
            [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$capped</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
            [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code><span class="initializer"> = 0</span></span>
            [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$max</code><span class="initializer"> = 0</span></span>
           ]]] ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  
          </p>
          <p class="para">
           The meaning of the options is the same as described under the
           <code class="parameter">options</code> argument above.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.createdbref" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::createDBRef</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::createDBRef</span> &mdash; <span class="dc-title">Creates a database reference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.createdbref-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::createDBRef</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$document_or_id</code></span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This method is a flexible interface for creating database refrences (see
     <a href="#class.mongodbref" class="classname">MongoDBRef</a>).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.createdbref-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">collection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The collection to which the database reference will point.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">document_or_id</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If an array or object is given, its <code class="literal">_id</code> field will be
         used as the reference ID. If a <a href="#class.mongoid" class="classname">MongoId</a> or scalar
         is given, it will be used as the reference ID.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.createdbref-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a database reference array.
    </p>
    <p class="para">
     If an array without an <code class="literal">_id</code> field was provided as the
     <code class="literal">document_or_id</code> parameter, <strong><code>NULL</code></strong> will be returned.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-mongodb.createdbref-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1595">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::createDBRef()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Example demonstrating how to programatically create a DB reference array from
      a document.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$articles&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">articles</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$article&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Test&nbsp;article'</span><span style="color: #007700">,<br />&nbsp;</span><span style="color: #DD0000">'description'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Test&nbsp;article&nbsp;description'<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$articles</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$article</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ref&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDBRef</span><span style="color: #007700">(</span><span style="color: #DD0000">'articles'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$article</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$article</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$ref</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
       <div class="cdata"><pre>
       Array
       (
           [title] =&gt; Test article
           [description] =&gt; Test article description
           [_id] =&gt; MongoId Object
               (
               )
  
       )
       Array
       (
           [$ref] =&gt; articles
           [$id] =&gt; MongoId Object
               (
               )
  
       )
       </pre></div>
     </div>
     <div class="example-contents"><p>
       Now the $ref can be stored on another document and retrieved later with
       <span class="methodname"><a href="#mongodb.getdbref" class="methodname">MongoDB::getDBRef()</a></span> or <span class="methodname"><a href="#mongocollection.getdbref" class="methodname">MongoCollection::getDBRef()</a></span>.
     </p></div>
    </div>
    <div class="example" id="mongoclient-getconnections.example.basic">
     <p><strong>Example #2 <span class="function"><strong>MongoDB::createDBRef()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Example demonstrating how to programatically create a DB reference from just an id.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$id&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">'47cc67093475061e3d9536d2'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ref&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDBRef</span><span style="color: #007700">(</span><span style="color: #DD0000">'articles'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.drop" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::drop</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::drop</span> &mdash; <span class="dc-title">Drops this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.drop-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::drop</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This drops the database currently being used.
    </p>
    <p class="para">
     This is identical to running:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">drop</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"dropDatabase"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.drop-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.drop-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.drop-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1597">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::drop()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates how to drop a mongo database and the response to expect.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drop</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Array
  (
      [dropped] =&gt; foo.$cmd
      [ok] =&gt; 1
  )
  </pre></div>
     </div>
    </div>  
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.dropcollection" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::dropCollection</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::dropCollection</span> &mdash; <span class="dc-title">Drops a collection [deprecated]</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongodb.dropcollection-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::dropCollection</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$coll</code></span>
     ) : <span class="type">array</span></div>
  
  
    <div class="warning"><strong class="warning">Warning</strong>
     <h1 class="title">Deprecated</h1>
     <p class="para">
      Use <span class="function"><a href="#mongocollection.drop" class="function">MongoCollection::drop()</a></span> instead.
     </p>
     <p class="para">
      <em class="emphasis">
       This function leaks memory in version 1.0.7 and earlier!
      </em>
     </p>
    </div>
  
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongodb.dropcollection-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">coll</code>
       </dt>
  
       <dd>
  
        <p class="para">
         MongoCollection or name of collection to drop.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.dropcollection-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.execute" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::execute</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.3)</p><p class="refpurpose"><span class="refname">MongoDB::execute</span> &mdash; <span class="dc-title">Runs JavaScript code on the database server [deprecated]</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.execute-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::execute</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$code</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$args</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      The <a href="https://docs.mongodb.com/manual/reference/command/eval/" class="link external">&raquo;&nbsp;eval</a> command,
      which this method invokes, is deprecated in MongoDB 3.0+.
     </p>
    </div>
    <p class="para">
     The Mongo database server runs a JavaScript engine.  This method allows you
     to run arbitary JavaScript on the database.  This can be useful if you want
     touch a number of collections lightly, or process some results on the
     database side to reduce the amount that has to be sent to the client.
    </p>
    <p class="para">
     Running JavaScript in the database takes a write lock, meaning it blocks 
     other operations.  Make sure you consider this before running a long script.
    </p>
    <p class="para">
     This is a wrapper for the
     <a href="https://docs.mongodb.com/manual/reference/command/eval/" class="link external">&raquo;&nbsp;eval</a> database
     command. This method is basically:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$code</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$args</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'eval'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'args'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$args</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
    <p class="para">
     MongoDB implies a return statement if you have a single statement on a single
     line. This can cause some unintuitive behavior.  For example, this returns 
     &quot;foo&quot;:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">'"foo";'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     However, these return <strong><code>NULL</code></strong>:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">'"bar";&nbsp;"foo";'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;more&nbsp;than&nbsp;one&nbsp;statement<br /><br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.foo.count(<br />);'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;more&nbsp;than&nbsp;one&nbsp;line<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     To avoid surprising behavior, it is best not to depend on MongoDB to decide 
     what to return, but to explicitly state a return value. In the examples 
     above, we can change them to:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">'"bar";&nbsp;return&nbsp;"foo";'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">'return&nbsp;db.foo.count(<br />);'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     Now the first statement will return &quot;foo&quot; and the second statement will 
     return a count of the &quot;foo&quot; collection.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.execute-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">code</code>
       </dt>
  
       <dd>
  
        <p class="para">
         <a href="#class.mongocode" class="classname">MongoCode</a> or string to execute.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">args</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Arguments to be passed to <code class="literal">code</code>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.execute-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the result of the evaluation.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.execute-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1598">
     <p><strong>Example #1 Simple <span class="function"><strong>MongoDB::execute()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">"function()&nbsp;{&nbsp;return&nbsp;'Hello,&nbsp;world!';&nbsp;}"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$response</span><span style="color: #007700">[</span><span style="color: #DD0000">'retval'</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  Hello, world!<br />
     </div>
    </div>
    <div class="example" id="example-1599">
     <p><strong>Example #2 Parameter <span class="function"><strong>MongoDB::execute()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      The optional array of parameters will be passed to the JavaScript function.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #DD0000">"function(greeting,&nbsp;name)&nbsp;{&nbsp;return&nbsp;greeting+',&nbsp;'+name+'!';&nbsp;}"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"Good&nbsp;bye"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">$response</span><span style="color: #007700">[</span><span style="color: #DD0000">'retval'</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  Good bye, Joe!<br />
     </div>
    </div>
    <div class="example" id="example-1600">
     <p><strong>Example #3 Scope example</strong></p>
     <div class="example-contents"><p>
      If a <a href="#class.mongocode" class="classname">MongoCode</a> object is used instead of a string for
      the first parameter, a scope can be passed in which the JavaScript will be 
      executed.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$func&nbsp;</span><span style="color: #007700">=&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"function(greeting,&nbsp;name)&nbsp;{&nbsp;"</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"return&nbsp;greeting+',&nbsp;'+name+',&nbsp;says&nbsp;'+greeter;"</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"}"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$scope&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"greeter"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Fred"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$code&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #0000BB">$func</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$scope</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$code</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"Goodbye"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">$response</span><span style="color: #007700">[</span><span style="color: #DD0000">'retval'</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  Goodbye, Joe, says Fred <br />
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.execute-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The MongoDB <a href="https://docs.mongodb.com/manual/reference/command/eval/" class="link external">&raquo;&nbsp;eval command</a> docs</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.execute-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.7.0</td>
         <td>
          This method has been deprecated as a result of the underlaying
          <a href="https://docs.mongodb.com/manual/reference/command/eval/" class="link external">&raquo;&nbsp;eval</a> command
          being deprecated in MongoDB 3.0+.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.forceerror" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::forceError</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.5)</p><p class="refpurpose"><span class="refname">MongoDB::forceError</span> &mdash; <span class="dc-title">Creates a database error</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.forceerror-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::forceError</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     This method is not very useful for normal MongoDB use.  It forces a database 
     error to occur.  This means that <span class="function"><a href="#mongodb.lasterror" class="function">MongoDB::lastError()</a></span> will
     return a generic database error after running this command.
    </p>
    <p class="para">
     This command is identical to running:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">forceError</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'forceerror'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.forceerror-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.forceerror-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.forceerror-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.get" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::__get</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.2)</p><p class="refpurpose"><span class="refname">MongoDB::__get</span> &mdash; <span class="dc-title">Gets a collection</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongodb.get-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::__get</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  
    <p class="para rdfs-comment">
     This is the easiest way of getting a collection from a database object.  If a
     collection name contains strange characters, you may have to use 
     <span class="function"><a href="#mongodb.selectcollection" class="function">MongoDB::selectCollection()</a></span> instead.
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mongo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;the&nbsp;following&nbsp;two&nbsp;lines&nbsp;are&nbsp;equivalent<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongodb.get-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The name of the collection.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.get-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the collection.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.getcollectioninfo" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getCollectionInfo</h1>
    <p class="verinfo">(PECL mongo &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB::getCollectionInfo</span> &mdash; <span class="dc-title">Returns information about collections in this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getcollectioninfo-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getCollectionInfo</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Gets a list of all collections in the database and returns them as an array
     of documents, which contain their names and options.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This method will use the <a href="https://docs.mongodb.com/manual/reference/command/listCollections" class="link external">&raquo;&nbsp;listCollections</a> database command when communicating with MongoDB 2.8+. For previous database versions, the method will query the special <code class="literal">system.namespaces</code> collection.</span></p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getcollectioninfo-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">options</code>
      </dt>
  
      <dd>
  
       <p class="para">
        An array of options for listing the collections. Currently available
        options include:
        <ul class="itemizedlist">
         <li class="listitem"><p class="para"><code class="literal">&quot;filter&quot;</code></p><p class="para">Optional query criteria. If provided, this criteria will be used to filter the collections included in the result.</p><p class="para">Relevant fields that may be queried include <code class="literal">&quot;name&quot;</code> (collection name as a string, without the database name prefix) and <code class="literal">&quot;options&quot; (object containing options used to create the collection).</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">MongoDB 2.6 and earlier versions require the <code class="literal">&quot;name&quot;</code> criteria, if specified, to be a string value (i.e. equality match). This is because the driver must prefix the value with the database name in order to query the <code class="literal">system.namespaces</code> collection. Later versions of MongoDB do not have this limitation, as the driver will use the listCollections command.</span></p></blockquote></li>
         <li class="listitem"><p class="para"><code class="literal">&quot;includeSystemCollections&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Determines whether system collections should be included in the result.</p></li>
        </ul>
       </p>
       <p class="para">
        The following option may be used with MongoDB 2.8+:
        <ul class="itemizedlist">
         <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
        </ul>
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getcollectioninfo-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This function returns an array where each element is an array describing a
     collection. Elements will contain a <code class="literal">name</code> key denoting the
     name of the collection, and optionally contain an <code class="literal">options</code>
     key denoting an array of objects used to create the collection. For example,
     capped collections will include <code class="literal">capped</code> and
     <code class="literal">size</code> options.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb.getcollectioninfo-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     For MongoDB 2.6 and earlier, <a href="#class.mongoexception" class="classname">MongoException</a> will be
     thrown if a non-string value was specified for the
     <code class="literal">&quot;filter&quot;</code> option&#039;s <code class="literal">&quot;name&quot;</code> criteria.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.getcollectioninfo-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1601">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::getCollectionInfo()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCollectionInfo</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [0]=&gt;
    array(2) {
      [&quot;name&quot;]=&gt;
      string(4) &quot;logs&quot;
      [&quot;options&quot;]=&gt;
      array(2) {
        [&quot;capped&quot;]=&gt;
        bool(true)
        [&quot;size&quot;]=&gt;
        int(10240)
      }
    }
    [1]=&gt;
    array(2) {
      [&quot;name&quot;]=&gt;
      string(5) &quot;users&quot;
      [&quot;options&quot;]=&gt;
      array(1) {
        [&quot;flags&quot;]=&gt;
        int(1)
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.getcollectioninfo-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongodb.getcollectionnames" class="function" rel="rdfs-seeAlso">MongoDB::getCollectionNames()</a> - Gets an array of names for all collections in this database</span></li>
      <li class="member"><span class="function"><a href="#mongodb.listcollections" class="function" rel="rdfs-seeAlso">MongoDB::listCollections()</a> - Gets an array of MongoCollection objects for all collections in this database</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.getcollectionnames" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getCollectionNames</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB::getCollectionNames</span> &mdash; <span class="dc-title">Gets an array of names for all collections in this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getcollectionnames-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getCollectionNames</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Gets a list of all collections in the database and returns their names as an
     array of strings.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This method will use the <a href="https://docs.mongodb.com/manual/reference/command/listCollections" class="link external">&raquo;&nbsp;listCollections</a> database command when communicating with MongoDB 2.8+. For previous database versions, the method will query the special <code class="literal">system.namespaces</code> collection.</span></p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getcollectionnames-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">options</code>
      </dt>
  
      <dd>
  
       <p class="para">
        An array of options for listing the collections. Currently available
        options include:
        <ul class="itemizedlist">
         <li class="listitem"><p class="para"><code class="literal">&quot;filter&quot;</code></p><p class="para">Optional query criteria. If provided, this criteria will be used to filter the collections included in the result.</p><p class="para">Relevant fields that may be queried include <code class="literal">&quot;name&quot;</code> (collection name as a string, without the database name prefix) and <code class="literal">&quot;options&quot; (object containing options used to create the collection).</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">MongoDB 2.6 and earlier versions require the <code class="literal">&quot;name&quot;</code> criteria, if specified, to be a string value (i.e. equality match). This is because the driver must prefix the value with the database name in order to query the <code class="literal">system.namespaces</code> collection. Later versions of MongoDB do not have this limitation, as the driver will use the listCollections command.</span></p></blockquote></li>
         <li class="listitem"><p class="para"><code class="literal">&quot;includeSystemCollections&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Determines whether system collections should be included in the result.</p></li>
        </ul>
       </p>
       <p class="para">
        The following option may be used with MongoDB 2.8+:
        <ul class="itemizedlist">
         <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
        </ul>
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getcollectionnames-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the collection names as an array of strings.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb.getcollectionnames-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     For MongoDB 2.6 and earlier, <a href="#class.mongoexception" class="classname">MongoException</a> will be
     thrown if a non-string value was specified for the
     <code class="literal">&quot;filter&quot;</code> option&#039;s <code class="literal">&quot;name&quot;</code> criteria.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.getcollectionnames-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.6.0</td>
        <td>
         Changed first parameter to be an array of options. Pre-1.6.0, the
         first parameter was a boolean indicating the
         <code class="literal">&quot;includeSystemCollections&quot;</code> option.
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.getcollectionnames-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1602">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::getCollectionNames()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collections&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCollectionNames</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$collections&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$collectionName</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Found&nbsp;collection:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$collectionName</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  ...
  Found collection: img
  Found collection: beer
  Found collection: collation
  ...
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.getcollectionnames-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongodb.listcollections" class="function" rel="rdfs-seeAlso">MongoDB::listCollections()</a> - Gets an array of MongoCollection objects for all collections in this database</span></li>
      <li class="member"><span class="function"><a href="#mongodb.getcollectioninfo" class="function" rel="rdfs-seeAlso">MongoDB::getCollectionInfo()</a> - Returns information about collections in this database</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb.getdbref" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getDBRef</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::getDBRef</span> &mdash; <span class="dc-title">Fetches the document pointed to by a database reference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getdbref-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getDBRef</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getdbref-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">ref</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A database reference.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getdbref-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the document pointed to by the reference.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-mongodb.getdbref-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1603">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::getDBRef()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Example demonstrating how to get a database reference and what the expected
      input is.
     </p></div>
     <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />&nbsp;$ref&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$ref'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'profiles'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">'47cc67093475061e3d9536d2'</span><span style="color: #007700">)<br />&nbsp;);<br />&nbsp;<br />&nbsp;</span><span style="color: #0000BB">$profile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDBRef</span><span style="color: #007700">(</span><span style="color: #0000BB">$ref</span><span style="color: #007700">);<br />&nbsp;</span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      See <span class="function"><a href="#mongodb.createdbref" class="function">MongoDB::createDBRef()</a></span> for more information about how to programatically create DB references.
     </p></div>
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.getgridfs" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getGridFS</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::getGridFS</span> &mdash; <span class="dc-title">Fetches toolkit for dealing with files stored in this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getgridfs-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getGridFS</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = &quot;fs&quot;</span></span>
    ] ) : <span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getgridfs-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">prefix</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The prefix for the files and chunks collections.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getgridfs-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns a new gridfs object for this database.
    </p>
   </div>
  
   
   <div class="refsect1 examples" id="refsect1-mongodb.getgridfs-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1604">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::getGridFS()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates how get a MongoGridFS instance.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$prefix&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'files'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">(</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      Read more about the <a href="#class.mongogridfs" class="classname">MongoGridFS</a> to learn how to store files with MongoDB.
     </p></div>
    </div>  
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.getprofilinglevel" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getProfilingLevel</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::getProfilingLevel</span> &mdash; <span class="dc-title">Gets this database&#039;s profiling level</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getprofilinglevel-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getProfilingLevel</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     This returns the current database profiling level.
    </p>
    <p class="para">
     The database profiler tracks query execution times.  If you turn it on (say,
     using <span class="function"><a href="#mongodb.setprofilinglevel" class="function">MongoDB::setProfilingLevel()</a></span> or the shell), you can
     see how many queries took longer than a given number of milliseconds or the
     timing for all queries.
    </p>
    <p class="para">
     Note that profiling slows down queries, so it is better to use in development
     or testing than in a time-sensitive application.
    </p>
    <p class="para">
     This function is equivalent to running:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getProfilingLevel</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'profile'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getprofilinglevel-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getprofilinglevel-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the profiling level.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.getprofilinglevel-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/tutorial/manage-the-database-profiler/" class="link external">&raquo;&nbsp;profiling</a></li>
     <li class="member"><span class="methodname"><a href="#mongodb.setprofilinglevel" class="methodname" rel="rdfs-seeAlso">MongoDB::setProfilingLevel()</a> - Sets this database's profiling level</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.getreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB::getReadPreference</span> &mdash; <span class="dc-title">Get the read preference for this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getReadPreference</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the read preference. The array contains the values <code class="literal">type</code> for the string read preference mode (corresponding to the <a href="#class.mongoclient" class="classname">MongoClient</a> constants), and <code class="literal">tagsets</code> containing a list of all tag set criteria. If no tag sets were specified, <code class="literal">tagsets</code> will not be present in the array.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.getreadpreference-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.3.3</td>
         <td>
          The return value has changed to be consistent with
          <span class="methodname"><a href="#mongodb.setreadpreference" class="methodname">MongoDB::setReadPreference()</a></span>. The
          <code class="literal">type</code> value was changed from a number to a string,
          <code class="literal">type_string</code> was removed, and
          <code class="literal">tagsets</code> now expresses tags as key/value pairs instead
          of colon-delimited strings.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.getreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1605">
     <p><strong>Example #1 <span class="methodname"><strong>MongoDB::getReadPreference()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(),<br />));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadPreference</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;type&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;tagsets&quot;]=&gt;
    array(3) {
      [0]=&gt;
      array(2) {
        [&quot;dc&quot;]=&gt;
        string(4) &quot;east&quot;
        [&quot;use&quot;]=&gt;
        string(9) &quot;reporting&quot;
      }
      [1]=&gt;
      array(1) {
        [&quot;dc&quot;]=&gt;
        string(7) &quot;west&quot;
      }
      [2]=&gt;
      array(0) {
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.getreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongodb.setreadpreference" class="function" rel="rdfs-seeAlso">MongoDB::setReadPreference()</a> - Set the read preference for this database</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb.getslaveokay" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getSlaveOkay</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">MongoDB::getSlaveOkay</span> &mdash; <span class="dc-title">Get slaveOkay setting for this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getslaveokay-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getSlaveOkay</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
  
    <p class="para rdfs-comment">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getslaveokay-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getslaveokay-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the value of slaveOkay for this instance.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.getslaveokay-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.getslaveokay-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
     <li class="member"><span class="methodname"><a href="#mongodb.getreadpreference" class="methodname" rel="rdfs-seeAlso">MongoDB::getReadPreference()</a> - Get the read preference for this database</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb.setreadpreference" class="methodname" rel="rdfs-seeAlso">MongoDB::setReadPreference()</a> - Set the read preference for this database</span></li>
    </ul>
   </div>
  
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.getwriteconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::getWriteConcern</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB::getWriteConcern</span> &mdash; <span class="dc-title">Get the write concern for this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.getwriteconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::getWriteConcern</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.getwriteconcern-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.getwriteconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the write concern. The array contains the values <code class="literal">w</code> for an integer acknowledgement level or string mode, and <code class="literal">wtimeout</code> denoting the maximum number of milliseconds to wait for the server to satisfy the write concern.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.getwriteconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1606">
     <p><strong>Example #1 <span class="methodname"><strong>MongoDB::getWriteConcern()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'wTimeoutMS'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">500</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setWriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;w&quot;]=&gt;
    int(1)
    [&quot;wtimeout&quot;]=&gt;
    int(500)
  }
  array(2) {
    [&quot;w&quot;]=&gt;
    int(1)
    [&quot;wtimeout&quot;]=&gt;
    int(1000)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.getwriteconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.writeconcerns" class="link">write concern</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongodb.setwriteconcern" class="function" rel="rdfs-seeAlso">MongoDB::setWriteConcern()</a> - Set the write concern for this database</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb.lasterror" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::lastError</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.5)</p><p class="refpurpose"><span class="refname">MongoDB::lastError</span> &mdash; <span class="dc-title">Check if there was an error on the most recent db operation performed</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.lasterror-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::lastError</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This method is equivalent to:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">lastError</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'getlasterror'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.lasterror-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.lasterror-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the error, if there was one.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.lasterror-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1607">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::lastError()</strong></span> <strong><code>NULL</code></strong> error example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resetError</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">lastError</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [&quot;err&quot;]=&gt;
    NULL
    [&quot;n&quot;]=&gt;
    int(0)
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1608">
     <p><strong>Example #2 <span class="function"><strong>MongoDB::lastError()</strong></span> duplicate key example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;insert&nbsp;two&nbsp;documents&nbsp;with&nbsp;the&nbsp;same&nbsp;_id<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">lastError</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [&quot;err&quot;]=&gt;
    string(64) &quot;E11000 duplicate key errorindex: foo.foo.$_id_  dup key: { : 1 }&quot;
    [&quot;n&quot;]=&gt;
    int(0)
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.listcollections" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::listCollections</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::listCollections</span> &mdash; <span class="dc-title">Gets an array of MongoCollection objects for all collections in this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.listcollections-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::listCollections</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Gets a list of all collections in the database and returns them as an array
     of <a href="#class.mongocollection" class="classname">MongoCollection</a> objects.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This method will use the <a href="https://docs.mongodb.com/manual/reference/command/listCollections" class="link external">&raquo;&nbsp;listCollections</a> database command when communicating with MongoDB 2.8+. For previous database versions, the method will query the special <code class="literal">system.namespaces</code> collection.</span></p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.listcollections-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">options</code>
      </dt>
  
      <dd>
  
       <p class="para">
        An array of options for listing the collections. Currently available
        options include:
        <ul class="itemizedlist">
         <li class="listitem"><p class="para"><code class="literal">&quot;filter&quot;</code></p><p class="para">Optional query criteria. If provided, this criteria will be used to filter the collections included in the result.</p><p class="para">Relevant fields that may be queried include <code class="literal">&quot;name&quot;</code> (collection name as a string, without the database name prefix) and <code class="literal">&quot;options&quot; (object containing options used to create the collection).</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">MongoDB 2.6 and earlier versions require the <code class="literal">&quot;name&quot;</code> criteria, if specified, to be a string value (i.e. equality match). This is because the driver must prefix the value with the database name in order to query the <code class="literal">system.namespaces</code> collection. Later versions of MongoDB do not have this limitation, as the driver will use the listCollections command.</span></p></blockquote></li>
         <li class="listitem"><p class="para"><code class="literal">&quot;includeSystemCollections&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Determines whether system collections should be included in the result.</p></li>
        </ul>
       </p>
       <p class="para">
        The following option may be used with MongoDB 2.8+:
        <ul class="itemizedlist">
         <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
        </ul>
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.listcollections-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array of MongoCollection objects.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb.listcollections-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     For MongoDB 2.6 and earlier, <a href="#class.mongoexception" class="classname">MongoException</a> will be
     thrown if a non-string value was specified for the
     <code class="literal">&quot;filter&quot;</code> option&#039;s <code class="literal">&quot;name&quot;</code> criteria.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.listcollections-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.6.0</td>
        <td>
         Changed first parameter to be an array of options. Pre-1.6.0, the
         first parameter was a boolean indicating the
         <code class="literal">&quot;includeSystemCollections&quot;</code> option.
        </td>
       </tr>
  
       <tr>
        <td>1.3.0</td>
        <td>
         Added the <code class="parameter">includeSystemCollections</code> parameter.
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.listcollections-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1609">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::listCollections()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      The following example demonstrates running count on each collection in a database.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collections&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">listCollections</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$collections&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"amount&nbsp;of&nbsp;documents&nbsp;in&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #DD0000">:&nbsp;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  ...
  amount of documents in demo.pubs: 4
  amount of documents in demo.elephpants: 3
  amount of documents in demo.cities: 22840
  ...
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.listcollections-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongodb.getcollectionnames" class="function" rel="rdfs-seeAlso">MongoDB::getCollectionNames()</a> - Gets an array of names for all collections in this database</span></li>
      <li class="member"><span class="function"><a href="#mongodb.getcollectioninfo" class="function" rel="rdfs-seeAlso">MongoDB::getCollectionInfo()</a> - Returns information about collections in this database</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
    
  
  
  
  
  <div id="mongodb.preverror" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::prevError</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.5)</p><p class="refpurpose"><span class="refname">MongoDB::prevError</span> &mdash; <span class="dc-title">Checks for the last error thrown during a database operation</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.preverror-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::prevError</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><a href="#mongodb.lasterror" class="function">MongoDB::lastError()</a></span> is usually preferred to this.  This 
     method returns the last database error that occurred and how many operations
     ago it occurred.  It is mostly deprecated.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.preverror-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.preverror-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the error and the number of operations ago it occurred.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.preverror-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.repair" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::repair</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::repair</span> &mdash; <span class="dc-title">Repairs and compacts this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.repair-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::repair</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$preserve_cloned_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$backup_original_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
    ]] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This creates a fresh copy of all database data.  It will remove any corrupt 
     data and compact and large stretches of free space it finds.  This is a very
     slow operation on a large database.
    </p>
    <p class="para">
     This is usually run from the shell or the command line, not the driver.
    </p>
    <p class="para">  
     It is equivalent to the function:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">repair</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'repairDatabase'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.repair-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">preserve_cloned_files</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If cloned files should be kept if the repair fails.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">backup_original_files</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If original files should be backed up.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.repair-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns db response.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.repair-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/command/repairDatabase" class="link external">&raquo;&nbsp;repairDatabase</a>.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.repair-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1610">
     <p><strong>Example #1 <span class="function"><strong>MongoDB::repair()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates how to repare and compact a database.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">repair</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Array
  (
      [ok] =&gt; 1
  )
  </pre></div>
     </div>
    </div>  
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.reseterror" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::resetError</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.5)</p><p class="refpurpose"><span class="refname">MongoDB::resetError</span> &mdash; <span class="dc-title">Clears any flagged errors on the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.reseterror-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::resetError</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This method is not used in normal operations.  It resets the database error 
     tracker (which can be incremented with 
     <span class="function"><a href="#mongodb.forceerror" class="function">MongoDB::forceError()</a></span>, also not normally used).  
    </p>
    <p class="para">
     It is equivalent to running:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">resetError</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'reseterror'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.reseterror-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.reseterror-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.reseterror-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.selectcollection" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::selectCollection</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::selectCollection</span> &mdash; <span class="dc-title">Gets a collection</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongodb.selectcollection-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::selectCollection</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.selectcollection-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The collection name.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.selectcollection-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns a new collection object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb.selectcollection-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.exception" class="classname">Exception</a> if the collection name is invalid.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.setprofilinglevel" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::setProfilingLevel</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::setProfilingLevel</span> &mdash; <span class="dc-title">Sets this database&#039;s profiling level</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.setprofilinglevel-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::setProfilingLevel</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code></span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     This changes the current database profiling level.
    </p>
    <p class="para">
     This function is equivalent to running:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setProfilingLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">$level</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'profile'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$level</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
    <p class="para">
     The options for level are 0 (off), 1 (queries &gt; 100ms), and 2 (all queries).
     If you would like to profile queries that take longer than another time 
     period, use the database command and pass it a second option, the number of
     milliseconds.  For example, to profile all queries that take longer than one
     second, run:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'profile'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'slowms'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
    <p class="para">
     Profiled queries will appear in the <code class="literal">system.profile</code> 
     collection of this database.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.setprofilinglevel-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">level</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Profiling level.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.setprofilinglevel-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the previous profiling level.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.setprofilinglevel-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/tutorial/manage-the-database-profiler/" class="link external">&raquo;&nbsp;profiling</a></li>
     <li class="member"><span class="methodname"><a href="#mongodb.getprofilinglevel" class="methodname" rel="rdfs-seeAlso">MongoDB::getProfilingLevel()</a> - Gets this database's profiling level</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.setreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::setReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB::setReadPreference</span> &mdash; <span class="dc-title">Set the read preference for this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.setreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::setReadPreference</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.setreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">read_preference</code></dt>
  <dd>
  <p class="para">The read preference mode: <strong><code>MongoClient::RP_PRIMARY</code></strong>, <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>, <strong><code>MongoClient::RP_SECONDARY</code></strong>, <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong>, or <strong><code>MongoClient::RP_NEAREST</code></strong>.</p></dd>
  <dt>
  <code class="parameter">tags</code></dt>
  <dd>
  <p class="para">An array of zero or more tag sets, where each tag set is itself an array of criteria used to match tags on replica set members.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.setreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <strong><code>TRUE</code></strong> on success, or <strong><code>FALSE</code></strong> otherwise.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb.setreadpreference-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if either parameter is invalid, or if one or more tag sets are provided with the <strong><code>MongoClient::RP_PRIMARY</code></strong> read preference mode.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.setreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1611">
     <p><strong>Example #1 <span class="methodname"><strong>MongoDB::setReadPreference()</strong></span> tag set array syntax example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center&nbsp;also&nbsp;used&nbsp;for&nbsp;reporting,<br />//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;server&nbsp;in&nbsp;the&nbsp;"west"&nbsp;data&nbsp;center<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_NEAREST</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.setreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongodb.getreadpreference" class="function" rel="rdfs-seeAlso">MongoDB::getReadPreference()</a> - Get the read preference for this database</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb.setslaveokay" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::setSlaveOkay</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">MongoDB::setSlaveOkay</span> &mdash; <span class="dc-title">Change slaveOkay setting for this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.setslaveokay-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::setSlaveOkay</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type">bool</span></div>
  
  
    <p class="para rdfs-comment">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.setslaveokay-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">ok</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If reads should be sent to secondary members of a replica set for all 
         possible queries using this <a href="#class.mongodb" class="classname">MongoDB</a> instance.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.setslaveokay-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the former value of slaveOkay for this instance.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb.setslaveokay-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.setslaveokay-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
     <li class="member"><span class="methodname"><a href="#mongodb.setreadpreference" class="methodname" rel="rdfs-seeAlso">MongoDB::setReadPreference()</a> - Set the read preference for this database</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb.getreadpreference" class="methodname" rel="rdfs-seeAlso">MongoDB::getReadPreference()</a> - Get the read preference for this database</span></li>
    </ul>
   </div>
  
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodb.setwriteconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::setWriteConcern</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB::setWriteConcern</span> &mdash; <span class="dc-title">Set the write concern for this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.setwriteconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::setWriteConcern</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
    ] ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb.setwriteconcern-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">w</code></dt>
  <dd>
  <p class="para">The write concern. This may be an integer denoting the number of servers required to acknowledge the write, or a string mode (e.g. &quot;majority&quot;).</p></dd>
  <dt>
  <code class="parameter">wtimeout</code></dt>
  <dd>
  <p class="para">The maximum number of milliseconds to wait for the server to satisfy the write concern.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.setwriteconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <strong><code>TRUE</code></strong> on success, or <strong><code>FALSE</code></strong> otherwise.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb.setwriteconcern-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if the <code class="literal">w</code> parameter is not an integer or string value.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb.setwriteconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1612">
     <p><strong>Example #1 <span class="methodname"><strong>MongoDB::setWriteConcern()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Require&nbsp;that&nbsp;the&nbsp;majority&nbsp;of&nbsp;servers&nbsp;in&nbsp;the&nbsp;replica&nbsp;set&nbsp;acknowledge&nbsp;writes<br />//&nbsp;within&nbsp;three&nbsp;seconds.<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setWriteConcern</span><span style="color: #007700">(</span><span style="color: #DD0000">'majority'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb.setwriteconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.writeconcerns" class="link">write concern</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongodb.getwriteconcern" class="function" rel="rdfs-seeAlso">MongoDB::getWriteConcern()</a> - Get the write concern for this database</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb.--tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::__toString</span> &mdash; <span class="dc-title">The name of this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb.--tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
   
   <div class="refsect1 parameters" id="refsect1-mongodb.--tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb.--tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns this database&#039;s name.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb.authenticate">MongoDB::authenticate</a> — Log in to this database</li><li><a href="#mongodb.command">MongoDB::command</a> — Execute a database command</li><li><a href="#mongodb.construct">MongoDB::__construct</a> — Creates a new database</li><li><a href="#mongodb.createcollection">MongoDB::createCollection</a> — Creates a collection</li><li><a href="#mongodb.createdbref">MongoDB::createDBRef</a> — Creates a database reference</li><li><a href="#mongodb.drop">MongoDB::drop</a> — Drops this database</li><li><a href="#mongodb.dropcollection">MongoDB::dropCollection</a> — Drops a collection [deprecated]</li><li><a href="#mongodb.execute">MongoDB::execute</a> — Runs JavaScript code on the database server [deprecated]</li><li><a href="#mongodb.forceerror">MongoDB::forceError</a> — Creates a database error</li><li><a href="#mongodb.get">MongoDB::__get</a> — Gets a collection</li><li><a href="#mongodb.getcollectioninfo">MongoDB::getCollectionInfo</a> — Returns information about collections in this database</li><li><a href="#mongodb.getcollectionnames">MongoDB::getCollectionNames</a> — Gets an array of names for all collections in this database</li><li><a href="#mongodb.getdbref">MongoDB::getDBRef</a> — Fetches the document pointed to by a database reference</li><li><a href="#mongodb.getgridfs">MongoDB::getGridFS</a> — Fetches toolkit for dealing with files stored in this database</li><li><a href="#mongodb.getprofilinglevel">MongoDB::getProfilingLevel</a> — Gets this database's profiling level</li><li><a href="#mongodb.getreadpreference">MongoDB::getReadPreference</a> — Get the read preference for this database</li><li><a href="#mongodb.getslaveokay">MongoDB::getSlaveOkay</a> — Get slaveOkay setting for this database</li><li><a href="#mongodb.getwriteconcern">MongoDB::getWriteConcern</a> — Get the write concern for this database</li><li><a href="#mongodb.lasterror">MongoDB::lastError</a> — Check if there was an error on the most recent db operation performed</li><li><a href="#mongodb.listcollections">MongoDB::listCollections</a> — Gets an array of MongoCollection objects for all collections in this database</li><li><a href="#mongodb.preverror">MongoDB::prevError</a> — Checks for the last error thrown during a database operation</li><li><a href="#mongodb.repair">MongoDB::repair</a> — Repairs and compacts this database</li><li><a href="#mongodb.reseterror">MongoDB::resetError</a> — Clears any flagged errors on the database</li><li><a href="#mongodb.selectcollection">MongoDB::selectCollection</a> — Gets a collection</li><li><a href="#mongodb.setprofilinglevel">MongoDB::setProfilingLevel</a> — Sets this database's profiling level</li><li><a href="#mongodb.setreadpreference">MongoDB::setReadPreference</a> — Set the read preference for this database</li><li><a href="#mongodb.setslaveokay">MongoDB::setSlaveOkay</a> — Change slaveOkay setting for this database</li><li><a href="#mongodb.setwriteconcern">MongoDB::setWriteConcern</a> — Set the write concern for this database</li><li><a href="#mongodb.--tostring">MongoDB::__toString</a> — The name of this database</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongocollection" class="reference"><hr />
  
   <h1 class="title">The MongoCollection class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
  
    <div class="section" id="mongocollection.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Represents a MongoDB collection.
     </p>
     <p class="para">
      Collection names can use any character in the ASCII set.  Some valid 
      collection names are &quot;&quot;, &quot;...&quot;, 
      &quot;my collection&quot;, and &quot;*&amp;#@&quot;.
     </p>
     <p class="para">
      User-defined collection names cannot contain the $ symbol.  There are 
      certain system collections which use a $ in their names (e.g., 
      local.oplog.$main), but it is a reserved character.  If you attempt to 
      create and use a collection with a $ in the name, MongoDB will assert.
     </p>
    </div>
  
  
    <div class="section" id="mongocollection.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoCollection</strong>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">ASCENDING</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">DESCENDING</var>
       <span class="initializer"> = -1</span>
      ;</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span>
       <var class="varname">db</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">integer</span>
       <var class="varname">w</var>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">integer</span>
       <var class="varname">wtimeout</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.aggregate" class="methodname">aggregate</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$pipeline</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.aggregatecursor" class="methodname">aggregateCursor</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.batchinsert" class="methodname">batchInsert</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$a</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.count" class="methodname">count</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.createdbref" class="methodname">createDBRef</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$document_or_id</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.createindex" class="methodname">createIndex</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$keys</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.deleteindex" class="methodname">deleteIndex</a></span>
      ( <span class="methodparam"><span class="type"><span class="type string|array">string|array</span></span> <code class="parameter">$keys</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.deleteindexes" class="methodname">deleteIndexes</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.distinct" class="methodname">distinct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$key</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.drop" class="methodname">drop</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.ensureindex" class="methodname">ensureIndex</a></span>
      ( <span class="methodparam"><span class="type"><span class="type string|array">string|array</span></span> <code class="parameter">$key|keys</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.find" class="methodname">find</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.findandmodify" class="methodname">findAndModify</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$update</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ]]] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.findone" class="methodname">findOne</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]]] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.get" class="methodname">__get</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.getdbref" class="methodname">getDBRef</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.getindexinfo" class="methodname">getIndexInfo</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.getname" class="methodname">getName</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.getreadpreference" class="methodname">getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.getslaveokay" class="methodname">getSlaveOkay</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.getwriteconcern" class="methodname">getWriteConcern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.group" class="methodname">group</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$keys</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$initial</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongocode" class="type MongoCode">MongoCode</a></span> <code class="parameter">$reduce</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.insert" class="methodname">insert</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.parallelcollectionscan" class="methodname">parallelCollectionScan</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num_cursors</code></span>
     ) : <span class="type"><span class="type array[MongoCommandCursor]">array[MongoCommandCursor]</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.remove" class="methodname">remove</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.save" class="methodname">save</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.setreadpreference" class="methodname">setReadPreference</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.setslaveokay" class="methodname">setSlaveOkay</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.setwriteconcern" class="methodname">setWriteConcern</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">static protected</span> <span class="methodname"><a href="#mongocollection.toindexstring" class="methodname">toIndexString</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$keys</code></span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.--tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.update" class="methodname">update</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$new_object</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocollection.validate" class="methodname">validate</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$scan_data</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
    ] ) : <span class="type">array</span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
      
       <dt id="mongocollection.constants.ascending"><strong><code>MongoCollection::ASCENDING</code></strong></dt>
  
       <dd>
  
        <span class="simpara">
         Ascending direction for sorts and index creation.
        </span>
       </dd>
  
      
      
       <dt id="mongocollection.constants.descending"><strong><code>MongoCollection::DESCENDING</code></strong></dt>
  
       <dd>
  
        <span class="simpara">
         Descending direction for sorts and index creation.
        </span>
       </dd>
  
      
     </dl>
  
    </div>
  
    <div class="section">
     <h2 class="title">Fields</h2>
     <dl>
  
      
       <dt id="mongocollection.props.db"><var class="varname">db</var></dt>
  
       <dd>
  
        <p class="para">
         The &quot;parent&quot; database for this collection.
        </p>
       </dd>
  
      
      
       <dt id="mongocollection.props.w"><var class="varname">w</var></dt>
  
       <dd>
  
        <p class="para">
         The number of servers to replicate a change to before returning success.
         Value is inherited from the parent database. The 
         <a href="#class.mongodb" class="classname">MongoDB</a> class has a more detailed description of
         how <code class="literal">w</code> works.
        </p>
       </dd>
  
      
      
       <dt id="mongocollection.props.wtimeout"><var class="varname">wtimeout</var></dt>
  
       <dd>
  
        <p class="para">
         The number of milliseconds to wait for <code class="literal">$this-&gt;w</code> 
         replications to take place.  Value is inherited from the parent database.
         The <a href="#class.mongodb" class="classname">MongoDB</a> class has a more detailed description 
         of how <code class="literal">wtimeout</code> works.
        </p>
       </dd>
  
      
     </dl>
  
    </div>
  
    <div class="section">
     <h2 class="title">See Also</h2>
     <p class="para">
      MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/glossary/#term-collection" class="link external">&raquo;&nbsp;collections</a>.
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongocollection.aggregate" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::aggregate</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoCollection::aggregate</span> &mdash; <span class="dc-title">Perform an aggregation using the aggregation framework</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.aggregate-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::aggregate</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$pipeline</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type">array</span></div>
  
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::aggregate</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$op</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$op</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$...</code></span>
    ]] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     The MongoDB
     <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline/" class="link external">&raquo;&nbsp;aggregation framework</a>
     provides a means to calculate aggregated values without having to use
     MapReduce. While MapReduce is powerful, it is often more difficult than
     necessary for many simple aggregation tasks, such as totaling or averaging
     field values.
    </p>
    <p class="para">
     This method accepts either a variable amount of pipeline operators, or a
     single array of operators constituting the pipeline.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.aggregate-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">pipeline</code></dt>
  
      <dd>
  
       <p class="para">
        An array of pipeline operators.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">Options for the aggregation command. Valid options include:</p>
       <ul class="itemizedlist">
        <li class="listitem">
         <p class="para"><code class="literal">&quot;allowDiskUse&quot;</code></p>
         <p class="para">Allow aggregation stages to write to temporary files</p>
        </li>
        <li class="listitem">
         <p class="para"><code class="literal">&quot;cursor&quot;</code></p>
         <p class="para">
          Options controlling the creation of the cursor object. This option
          causes the command to return a result document suitable for constructing
          a <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a>. If you need to use this
          option, you should consider using
          <span class="methodname"><a href="#mongocollection.aggregatecursor" class="methodname">MongoCollection::aggregateCursor()</a></span>.
         </p>
        </li>
        <li class="listitem">
         <p class="para"><code class="literal">&quot;explain&quot;</code></p>
         <p class="para">Return information on the processing of the pipeline.</p>
        </li>
        <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
       </ul>
      </dd>
  
     
    </dl>
  
    <p class="para">Or</p>
    <dl>
  
     
      <dt>
  <code class="parameter">op</code></dt>
  
      <dd>
  
       <p class="para">
        First pipeline operator.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">op</code></dt>
  
      <dd>
  
       <p class="para">
        The second pipeline operator.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">...</code></dt>
  
      <dd>
  
       <p class="para">
        Additional pipeline operators.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.aggregate-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The result of the aggregation as an array. The <var class="varname">ok</var> will
     be set to <code class="literal">1</code> on success, <code class="literal">0</code> on failure.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.aggregate-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     When an error occurs an array with the following keys will be returned:
     <ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        <var class="varname">errmsg</var> - containing the reason for the failure
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <var class="varname">code</var> - the errorcode of the failure
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <var class="varname">ok</var> - will be set to 0.
       </span>
      </li>
     </ul>
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.aggregate-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.5.0</td>
        <td>
         Added optional <code class="parameter">options</code> argument
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.aggregate-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1613">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::aggregate()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      The following example aggregation operation pivots data to create a set of
      author names grouped by tags applied to an article. Call the aggregation
      framework by issuing the following command:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"examples"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"article"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'this&nbsp;is&nbsp;my&nbsp;title'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bob'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'posted'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pageViews'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'tags'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array&nbsp;(&nbsp;</span><span style="color: #DD0000">'fun'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'good'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'fun'&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'comments'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'joe'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'text'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'this&nbsp;is&nbsp;cool'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'sam'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'text'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'this&nbsp;is&nbsp;bad'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'other'&nbsp;</span><span style="color: #007700">=&gt;array&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$ops&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$project'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"author"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"tags"&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$unwind'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$tags'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"tags"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$tags'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"authors"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$addToSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$author'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /></span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregate</span><span style="color: #007700">(</span><span style="color: #0000BB">$ops</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$results</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;result&quot;]=&gt;
    array(2) {
      [0]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        array(1) {
          [&quot;tags&quot;]=&gt;
          string(4) &quot;good&quot;
        }
        [&quot;authors&quot;]=&gt;
        array(1) {
          [0]=&gt;
          string(3) &quot;bob&quot;
        }
      }
      [1]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        array(1) {
          [&quot;tags&quot;]=&gt;
          string(3) &quot;fun&quot;
        }
        [&quot;authors&quot;]=&gt;
        array(1) {
          [0]=&gt;
          string(3) &quot;bob&quot;
        }
      }
    }
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
  
    <p class="para">
     The following examples use the <a href="https://media.mongodb.org/zips.json" class="link external">&raquo;&nbsp;zipcode data set</a>.
     Use mongoimport to load this data set into your mongod instance.
    </p>
  
    <div class="example" id="example-1614">
     <p><strong>Example #2 <span class="methodname"><strong>MongoCollection::aggregate()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      To return all states with a population greater than 10 million, use the following aggregation operation:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"zips"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$pipeline&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'state'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$state'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'totalPop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$pop'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$match'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'totalPop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$gte'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1000&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /></span><span style="color: #0000BB">$out&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregate</span><span style="color: #007700">(</span><span style="color: #0000BB">$pipeline</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$out</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;result&quot;]=&gt;
    array(7) {
      [0]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;TX&quot;
        [&quot;totalPop&quot;]=&gt;
        int(16986510)
      }
      [1]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;PA&quot;
        [&quot;totalPop&quot;]=&gt;
        int(11881643)
      }
      [2]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;NY&quot;
        [&quot;totalPop&quot;]=&gt;
        int(17990455)
      }
      [3]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;IL&quot;
        [&quot;totalPop&quot;]=&gt;
        int(11430602)
      }
      [4]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;CA&quot;
        [&quot;totalPop&quot;]=&gt;
        int(29760021)
      }
      [5]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;OH&quot;
        [&quot;totalPop&quot;]=&gt;
        int(10847115)
      }
      [6]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;FL&quot;
        [&quot;totalPop&quot;]=&gt;
        int(12937926)
      }
    }
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1615">
     <p><strong>Example #3 <span class="methodname"><strong>MongoCollection::aggregate()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      To return the average populations for cities in each state, use the following aggregation operation:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"zips"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$out&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregate</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'state'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$state'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'city'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$city'&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$pop'&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$_id.state'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'avgCityPop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$avg'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$pop'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;)<br />);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$out</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;result&quot;]=&gt;
    array(51) {
      [0]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;DC&quot;
        [&quot;avgCityPop&quot;]=&gt;
        float(303450)
      }
      [1]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;DE&quot;
        [&quot;avgCityPop&quot;]=&gt;
        float(14481.913043478)
      }
  ...
      [49]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;WI&quot;
        [&quot;avgCityPop&quot;]=&gt;
        float(7323.0074850299)
      }
      [50]=&gt;
      array(2) {
        [&quot;_id&quot;]=&gt;
        string(2) &quot;WV&quot;
        [&quot;avgCityPop&quot;]=&gt;
        float(2759.1953846154)
      }
    }
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1616">
     <p><strong>Example #4 <span class="methodname"><strong>MongoCollection::aggregate()</strong></span> with command options</strong></p>
     <div class="example-contents"><p>
      To return information on how the pipeline will be processed we use the
      <code class="literal">explain</code> command option:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"zips"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$pipeline&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$state'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'totalPop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$pop'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$match'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'totalPop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$gte'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1000&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"totalPop"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /><br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"explain"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$out&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregate</span><span style="color: #007700">(</span><span style="color: #0000BB">$pipeline</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$out</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;stages&quot;]=&gt;
    array(4) {
      [0]=&gt;
      array(1) {
        [&quot;$cursor&quot;]=&gt;
        array(3) {
          [&quot;query&quot;]=&gt;
          array(0) {
          }
          [&quot;fields&quot;]=&gt;
          array(3) {
            [&quot;pop&quot;]=&gt;
            int(1)
            [&quot;state&quot;]=&gt;
            int(1)
            [&quot;_id&quot;]=&gt;
            int(0)
          }
          [&quot;plan&quot;]=&gt;
          array(4) {
            [&quot;cursor&quot;]=&gt;
            string(11) &quot;BasicCursor&quot;
            [&quot;isMultiKey&quot;]=&gt;
            bool(false)
            [&quot;scanAndOrder&quot;]=&gt;
            bool(false)
            [&quot;allPlans&quot;]=&gt;
            array(1) {
              [0]=&gt;
              array(3) {
                [&quot;cursor&quot;]=&gt;
                string(11) &quot;BasicCursor&quot;
                [&quot;isMultiKey&quot;]=&gt;
                bool(false)
                [&quot;scanAndOrder&quot;]=&gt;
                bool(false)
              }
            }
          }
        }
      }
      [1]=&gt;
      array(1) {
        [&quot;$group&quot;]=&gt;
        array(2) {
          [&quot;_id&quot;]=&gt;
          string(6) &quot;$state&quot;
          [&quot;totalPop&quot;]=&gt;
          array(1) {
            [&quot;$sum&quot;]=&gt;
            string(4) &quot;$pop&quot;
          }
        }
      }
      [2]=&gt;
      array(1) {
        [&quot;$match&quot;]=&gt;
        array(1) {
          [&quot;totalPop&quot;]=&gt;
          array(1) {
            [&quot;$gte&quot;]=&gt;
            int(10000000)
          }
        }
      }
      [3]=&gt;
      array(1) {
        [&quot;$sort&quot;]=&gt;
        array(1) {
          [&quot;sortKey&quot;]=&gt;
          array(1) {
            [&quot;totalPop&quot;]=&gt;
            int(-1)
          }
        }
      }
    }
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
  
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.aggregate-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocollection.aggregatecursor" class="methodname" rel="rdfs-seeAlso">MongoCollection::aggregateCursor()</a> - Execute an aggregation pipeline command and retrieve results through a cursor</span></li>
     <li class="member">The MongoDB <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline/" class="link external">&raquo;&nbsp;aggregation framework</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocollection.aggregatecursor" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::aggregateCursor</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCollection::aggregateCursor</span> &mdash; <span class="dc-title">Execute an aggregation pipeline command and retrieve results through a cursor</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongocollection.aggregatecursor-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::aggregateCursor</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  
    <p class="para rdfs-comment">
     With this method you can execute Aggregation Framework pipelines and
     retrieve the results through a cursor, instead of getting just one document
     back as you would with <span class="methodname"><a href="#mongocollection.aggregate" class="methodname">MongoCollection::aggregate()</a></span>.
     This method returns a <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> object.
     This cursor object implements the <a href="#class.iterator" class="classname">Iterator</a> interface
     just like the <a href="#class.mongocursor" class="classname">MongoCursor</a> objects that are returned
     by the <span class="methodname"><a href="#mongocollection.find" class="methodname">MongoCollection::find()</a></span> method.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The resulting <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> will inherit this
      collection&#039;s read preference.
      <span class="methodname"><a href="#mongocommandcursor.setreadpreference" class="methodname">MongoCommandCursor::setReadPreference()</a></span> may be used
      to change the read preference before iterating on the cursor.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.aggregatecursor-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">pipeline</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The Aggregation Framework pipeline to execute.
        </p>
       </dd>
  
      
      
       <dt>
  <code class="parameter">options</code></dt>
  
       <dd>
  
        <p class="para">Options for the aggregation command. Valid options include:</p>
        <ul class="itemizedlist">
         <li class="listitem">
          <p class="para"><code class="literal">&quot;allowDiskUse&quot;</code></p>
          <p class="para">Allow aggregation stages to write to temporary files</p>
         </li>
         <li class="listitem">
          <p class="para"><code class="literal">&quot;cursor&quot;</code></p>
          <p class="para">
           It is possible to configure how many initial documents the server
           should return with the first result set. The default initial batch size
           is <code class="literal">101</code>. You can change it by adding the
           <code class="literal">batchSize</code> option:
          </p>
          <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregateCursor</span><span style="color: #007700">(&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pipeline</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">"cursor"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">"batchSize"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">]&nbsp;]<br />);</span>
  </span>
  </code></div>
          </div>
  
          <p class="para">
           This option only configures the size of the first batch. To configure
           the size of future batches, please use the
           <span class="methodname"><a href="#mongocommandcursor.batchsize" class="methodname">MongoCommandCursor::batchSize()</a></span> method on the
           returned <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> object.
          </p>
         </li>
         <li class="listitem">
          <p class="para"><code class="literal">&quot;explain&quot;</code></p>
          <p class="para">
           Return information on the processing of the pipeline. This option may
           cause the command to return a result document that is unsuitable for
           constructing a <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a>. If you need
           to use this option, you should consider using
           <span class="methodname"><a href="#mongocollection.aggregate" class="methodname">MongoCollection::aggregate()</a></span>.
          </p>
         </li>
         <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
        </ul>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.aggregatecursor-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns a <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> object. Because this
     implements the <a href="#class.iterator" class="classname">Iterator</a> interface you can 
     iterate over each of the results as returned by the command query. The
     <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> also implements the
     <a href="#class.mongocursorinterface" class="classname">MongoCursorInterface</a> interface which adds the
     <span class="methodname"><a href="#mongocommandcursor.batchsize" class="methodname">MongoCommandCursor::batchSize()</a></span>,
     <span class="methodname"><a href="#mongocommandcursor.dead" class="methodname">MongoCommandCursor::dead()</a></span>,
     <span class="methodname"><a href="#mongocommandcursor.info" class="methodname">MongoCommandCursor::info()</a></span> methods.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.aggregatecursor-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1617">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::aggregateCursor()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Finding all of the distinct values for a key.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$people&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">people</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drop</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Molly"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">43</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Sally"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Molly"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">87</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$ages&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregateCursor</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$points'&nbsp;</span><span style="color: #007700">]&nbsp;]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">]&nbsp;],<br />]&nbsp;);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$ages&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]}</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'points'</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  Molly: 130<br />
  Joe: 26<br />
  Sally: 22<br />
     </div>
    </div>
  
    <div class="example" id="example-1618">
     <p><strong>Example #2 <span class="function"><strong>MongoCollection::aggregateCursor()</strong></span>
     example with different initial batch size</strong></p>
     <div class="example-contents"><p>
      Finding all of the distinct values for a key.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$people&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">people</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drop</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;Insert&nbsp;some&nbsp;sample&nbsp;data&nbsp;*/<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Molly"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">43</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Sally"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Molly"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">87</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;Run&nbsp;the&nbsp;command&nbsp;cursor&nbsp;*/<br /></span><span style="color: #0000BB">$ages&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregateCursor</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$points'&nbsp;</span><span style="color: #007700">]&nbsp;]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">"cursor"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">"batchSize"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">]&nbsp;]<br />);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$ages&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]}</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'points'</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
  Molly: 130<br />
  Joe: 26<br />
  Sally: 22<br />
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.aggregatecursor-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb.command" class="methodname" rel="rdfs-seeAlso">MongoDB::command()</a> - Execute a database command</span></li>
      <li class="member"><a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a></li>
      <li class="member"><span class="methodname"><a href="#mongocommandcursor.batchsize" class="methodname" rel="rdfs-seeAlso">MongoCommandCursor::batchSize()</a> - Limits the number of elements returned in one batch</span></li>
      <li class="member"><span class="methodname"><a href="#mongocollection.aggregate" class="methodname" rel="rdfs-seeAlso">MongoCollection::aggregate()</a> - Perform an aggregation using the aggregation framework</span></li>
      <li class="member">The MongoDB <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline/" class="link external">&raquo;&nbsp;aggregation framework</a></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.batchinsert" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::batchInsert</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::batchInsert</span> &mdash; <span class="dc-title">Inserts multiple documents into this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.batchinsert-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::batchInsert</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$a</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.batchinsert-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">a</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of arrays or objects. If any objects are used, they may not have
         protected or private properties.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: 
         <p class="para">
          If the documents to insert do not have an <code class="literal">_id</code> key or
          property, a new <a href="#class.mongoid" class="classname">MongoId</a> instance will be created
          and assigned to it. See <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span> for
          additional information on this behavior.
         </p>
        </p></blockquote>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the batch of insert operations. Currently
         available options include:
         <ul class="itemizedlist">
          <li class="listitem">
           <p class="para">
            <code class="literal">&quot;continueOnError&quot;</code>
           </p>
           <p class="para">
            Boolean, defaults to <strong><code>FALSE</code></strong>. If set, the database will not stop
            processing a bulk insert if one fails (eg due to duplicate IDs).
            This makes bulk insert behave similarly to a series of single
            inserts, except that calling <span class="function"><a href="#mongodb.lasterror" class="function">MongoDB::lastError()</a></span>
            will have an error set if any insert fails, not just the last one.
            If multiple errors occur, only the most recent will be reported by
            <span class="function"><a href="#mongodb.lasterror" class="function">MongoDB::lastError()</a></span>.
           </p>
           <blockquote class="note"><p><strong class="note">Note</strong>: 
            <p class="para">
             Please note that <code class="literal">continueOnError</code> affects errors
             on the database side only. If you try to insert a document that has
             errors (for example it contains a key with an empty name), then the
             document is not even transferred to the database as the driver
             detects this error and bails out.
             <code class="literal">continueOnError</code> has no effect on errors detected
             in the documents by the driver.
            </p>
           </p></blockquote>
          </li>
          <li class="listitem"><p class="para"><code class="literal">&quot;fsync&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. If journaling is enabled, it works exactly like <code class="literal">&quot;j&quot;</code>. If journaling is not enabled, the write operation blocks until it is synced to database files on disk. If <strong><code>TRUE</code></strong>, an acknowledged insert is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If journaling is enabled, users are strongly encouraged to use the <code class="literal">&quot;j&quot;</code> option instead of <code class="literal">&quot;fsync&quot;</code>. Do not use <code class="literal">&quot;fsync&quot;</code> and <code class="literal">&quot;j&quot;</code> simultaneously, as that will result in an error.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;j&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Forces the write operation to block until it is synced to the journal on disk. If <strong><code>TRUE</code></strong>, an acknowledged write is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If this option is used and journaling is disabled, MongoDB 2.6+ will raise an error and the write will fail; older server versions will simply ignore the option.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for <a href="#mongo.writeconcerns" class="link">write concern</a> acknowledgement. It is only applicable when <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the timeout pertains to replication. If the write concern is not satisfied within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> will be thrown. A value of <code class="literal">0</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">10000</code> (ten seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;safe&quot;</code></p><p class="para">Deprecated. Please use the <a href="#mongo.writeconcerns" class="link">write concern</a> <code class="literal">&quot;w&quot;</code> option.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wtimeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.batchinsert-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     If the <code class="literal">w</code> parameter is set to acknowledge the write,
     returns an associative array with the status of the inserts (&quot;ok&quot;) and any
     error that may have occurred (&quot;err&quot;).  Otherwise, returns <strong><code>TRUE</code></strong> if the
     batch insert was successfully sent, <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.batchinsert-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoexception" class="classname">MongoException</a> if any inserted documents are
     empty or if they contains zero-length keys. Attempting to insert an object
     with protected and private properties will cause a zero-length key error.
    </p>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.batchinsert-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;wTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;wtimeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;wtimeout&quot;</code> is used.
          </p>
          <p class="para">
           Added the <code class="literal">&quot;socketTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;timeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;timeout&quot;</code> is used.
          </p>
          <p class="para">
           Emits <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;safe&quot;</code>
           is used.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.4</td>
         <td>Added <code class="literal">&quot;wtimeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>Added <code class="literal">&quot;w&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.2.7</td>
         <td>Added <code class="literal">&quot;continueOnError&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.9</td>
         <td>
          <p class="para">
           Added ability to pass integers to the <code class="literal">&quot;safe&quot;</code> option,
           which previously only accepted booleans.
          </p>
          <p class="para">
           Added <code class="literal">&quot;fsync&quot;</code> option.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.0.5</td>
         <td>Added <code class="parameter">options</code> parameter.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.batchinsert-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1619">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::batchInsert()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Batch insertion is a quick way to add many elements to the database at once
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$users&nbsp;</span><span style="color: #007700">=&nbsp;array();<br />for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">100</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$users</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'user'</span><span style="color: #007700">.</span><span style="color: #0000BB">$i</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$mongo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">users</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drop</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">batchInsert</span><span style="color: #007700">(</span><span style="color: #0000BB">$users</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$users&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">].</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;populated&nbsp;with&nbsp;instanceof&nbsp;MongoId<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">$users&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'i'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />foreach&nbsp;(</span><span style="color: #0000BB">$users&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  4bf43ac68ead0e1971000000
  4bf43ac68ead0e1971010000
  4bf43ac68ead0e1971020000
  ...
  string(5) &quot;user1&quot;
  string(5) &quot;user2&quot;
  string(5) &quot;user3&quot;
  ...
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1620">
     <p><strong>Example #2 <span class="function"><strong>MongoCollection::batchInsert()</strong></span> example with
     ignoring errors</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$con&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$doc1&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">'4cb4ab6d7addf98506010001'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'desc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"ONE"</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$doc2&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">'4cb4ab6d7addf98506010002'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'desc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"TWO"</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$doc3&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">'4cb4ab6d7addf98506010002'</span><span style="color: #007700">),&nbsp;</span><span style="color: #FF8000">//&nbsp;same&nbsp;_id&nbsp;as&nbsp;above<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'desc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"THREE"</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$doc4&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">'4cb4ab6d7addf98506010004'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'desc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"FOUR"</span><span style="color: #007700">,<br />);<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'c'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">batchInsert</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">$doc1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$doc2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$doc3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$doc4</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'continueOnError'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br />foreach&nbsp;(</span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$doc</span><span style="color: #007700">[</span><span style="color: #DD0000">'desc'</span><span style="color: #007700">]);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(3) &quot;ONE&quot;
  string(3) &quot;TWO&quot;
  string(4) &quot;FOUR&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.batchinsert-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocollection.insert" class="function" rel="rdfs-seeAlso">MongoCollection::insert()</a> - Inserts a document into the collection</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.update" class="function" rel="rdfs-seeAlso">MongoCollection::update()</a> - Update records based on a given criteria</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.find" class="function" rel="rdfs-seeAlso">MongoCollection::find()</a> - Queries this collection, returning a MongoCursor
    for the result set</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.remove" class="function" rel="rdfs-seeAlso">MongoCollection::remove()</a> - Remove records from this collection</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/tutorial/insert-documents/" class="link external">&raquo;&nbsp;insert</a>.</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::__construct</span> &mdash; <span class="dc-title">Creates a new collection</span></p>
  
   </div>
  
  
   <div class="refsect1 description" id="refsect1-mongocollection.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span>
        <code class="parameter">db</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Parent database.
        </p>
       </dd>
  
         
     </dl>
  
     <dl>
  
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Name for this collection.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new collection object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws default exception if the collection name is invalid.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.count" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::count</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::count</span> &mdash; <span class="dc-title">Counts the number of documents in this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.count-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::count</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type">int</span></div>
  
   </div>
  
   
   <div class="refsect1 parameters" id="refsect1-mongocollection.count-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">query</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Associative array or object with fields to match.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the index creation. Currently available options
         include:
         <table class="doctable informaltable">
          
           <thead>
            <tr>
             <th>Name</th>
             <th>Type</th>
             <th>Description</th>
            </tr>
  
           </thead>
  
           <tbody class="tbody">
            <tr>
             <td><var class="varname">hint</var></td>
             <td><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></td>
             <td>
              <p class="para">
               Index to use for the query. If a string is passed, it should
               correspond to an index name. If an array or object is passed, it
               should correspond to the specification used to create the index
               (i.e. the first argument to
               <span class="function"><a href="#mongocollection.createindex" class="function">MongoCollection::createIndex()</a></span>).
              </p>
              <span class="simpara">This option is only supported in MongoDB 2.6+.</span>
             </td>
            </tr>
  
            <tr>
             <td><var class="varname">limit</var></td>
             <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
             <td>The maximum number of matching documents to return.</td>
            </tr>
  
            <tr>
             <td><var class="varname">maxTimeMS</var></td>
             <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
             <td>
              <p class="para">
               Specifies a cumulative time limit in milliseconds for processing
               the operation (does not include idle time). If the operation is not
               completed within the timeout period, a
               <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be
               thrown.
              </p>
              <span class="simpara">This option is only supported in MongoDB 2.6+.</span>
             </td>
            </tr>
  
            <tr>
             <td><var class="varname">skip</var></td>
             <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
             <td>The number of matching documents to skip before returning results.</td>
            </tr>
  
           </tbody>
          
         </table>
  
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.count-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of documents matching the query.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.count-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoresultexception" class="classname">MongoResultException</a> if the server could not
     execute the command due to an error.
    </p>
    <p class="para">
     Throws <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> if command
     execution was terminated due to <var class="varname">maxTimeMS</var>.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.count-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.6.0</td>
         <td>
          The second parameter is now an <code class="parameter">options</code> array.
          Passing <code class="parameter">limit</code> and <code class="parameter">skip</code> as
          the second and third parameters, respectively, is deprecated.
         </td>
        </tr>
  
        <tr>
         <td>1.0.7</td>
         <td>
          Added <code class="parameter">limit</code> and <code class="parameter">skip</code> as
          second and third parameters, respectively.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.count-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1621">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::count()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">3</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(3)
  int(1)
  </pre></div>
     </div>
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.createdbref" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::createDBRef</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::createDBRef</span> &mdash; <span class="dc-title">Creates a database reference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.createdbref-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::createDBRef</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$document_or_id</code></span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.createdbref-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">document_or_id</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If an array or object is given, its <code class="literal">_id</code> field will be
         used as the reference ID. If a <a href="#class.mongoid" class="classname">MongoId</a> or scalar
         is given, it will be used as the reference ID.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.createdbref-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a database reference array.
    </p>
    <p class="para">
     If an array without an <code class="literal">_id</code> field was provided as the
     <code class="literal">document_or_id</code> parameter, <strong><code>NULL</code></strong> will be returned.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.createdbref-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1622">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::createDBRef()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$songs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">songs</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$playlists&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">playlists</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;reference&nbsp;to&nbsp;a&nbsp;song<br /></span><span style="color: #0000BB">$manamana&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$songs</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Ma&nbsp;na&nbsp;ma&nbsp;na'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$refToSong&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$songs</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDBRef</span><span style="color: #007700">(</span><span style="color: #0000BB">$manamana</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;add&nbsp;the&nbsp;reference&nbsp;to&nbsp;my&nbsp;playlist<br /></span><span style="color: #0000BB">$playlists</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'me'</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'$push'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'songlist'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$refToSong</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.createdbref-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongocollection.getdbref" class="methodname" rel="rdfs-seeAlso">MongoCollection::getDBRef()</a> - Fetches the document pointed to by a database reference</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.createindex" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::createIndex</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCollection::createIndex</span> &mdash; <span class="dc-title">
     Creates an index on the specified field(s) if it does not already exist
    </span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.createindex-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::createIndex</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$keys</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Creates an index on the specified field(s) if it does not already exist.
     Fields may be indexed with a direction (e.g. ascending or descending) or a
     special type (e.g. text, geospatial, hashed).
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This method will use the
      <a href="https://docs.mongodb.com/manual/reference/command/createIndexes" class="link external">&raquo;&nbsp;createIndexes</a>
      database command when communicating with MongoDB 2.6+. For previous database
      versions, the method will perform an insert operation on the
      special <code class="literal">system.indexes</code> collection.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.createindex-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">keys</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array specifying the index&#039;s fields as its keys. For each field, the
         value is either the index direction or
         <a href="https://docs.mongodb.com/manual/core/index-types/" class="link external">&raquo;&nbsp;index type</a>.
         If specifying direction, specify <code class="literal">1</code> for ascending or
         <code class="literal">-1</code> for descending.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the index creation. We pass all given options
         straight to the server, but a non-exhaustive list of currently
         available options include:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;unique&quot;</code></p><p class="para">Specify <strong><code>TRUE</code></strong> to create a unique index. The default value is <strong><code>FALSE</code></strong>. This option applies only to ascending/descending indexes.</p><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">When MongoDB indexes a field, if a document does not have a value for the field, a <strong><code>NULL</code></strong> value is indexed. If multiple documents do not contain a field, a unique index will reject all but the first of those documents. The <code class="literal">&quot;sparse&quot;</code> option may be used to overcome this, since it will prevent documents without the field from being indexed.</p></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;sparse&quot;</code></p><p class="para">Specify <strong><code>TRUE</code></strong> to create a sparse index, which only indexes documents containing a specified field. The default value is <strong><code>FALSE</code></strong>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;expireAfterSeconds&quot;</code></p><p class="para">The value of this option should specify the number of seconds after which a document should be considered expired and automatically removed from the collection. This option is only compatible with single-field indexes where the field will contain <a href="#class.mongodate" class="classname">MongoDate</a> values.</p><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">This feature is available in MongoDB 2.2+. See <a href="https://docs.mongodb.com/manual/tutorial/expire-data/" class="link external">&raquo;&nbsp;Expire Data from Collections by Setting TTL</a> for more information.</p></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;name&quot;</code></p><p class="para">A optional name that uniquely identifies the index.</p><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">By default, the driver will generate an index name based on the index&#039;s field(s) and ordering or type. For example, a compound index <code class="literal">array(&quot;x&quot; =&gt; 1, &quot;y&quot; =&gt; -1)</code> would be named <code class="literal">&quot;x_1_y_-1&quot;</code> and a geospatial index <code class="literal">array(&quot;loc&quot; =&gt; &quot;2dsphere&quot;)</code> would be named <code class="literal">&quot;loc_2dsphere&quot;</code>. For indexes with many fields, it is possible that the generated name might exceed MongoDB&#039;s <a href="https://docs.mongodb.com/manual/reference/limits/#Index-Name-Length" class="link external">&raquo;&nbsp;limit for index names</a>. The <code class="literal">&quot;name&quot;</code> option may be used in that case to supply a shorter name.</p></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;background&quot;</code></p><p class="para">Builds the index in the background so that building an index does <em class="emphasis">not</em> block other database activities. Specify <strong><code>TRUE</code></strong> to build in the background. The default value is <strong><code>FALSE</code></strong>.</p><div class="warning"><strong class="warning">Warning</strong><p class="para">Prior to MongoDB 2.6.0, index builds on secondaries were executed as foreground operations, irrespective of this option. See <a href="https://docs.mongodb.com/manual/tutorial/build-indexes-on-replica-sets/" class="link external">&raquo;&nbsp;Building Indexes with Replica Sets</a> for more information.</p></div></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following option may be used with MongoDB 2.6+:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
         </ul>
        </p>
        <p class="para">
         The following options may be used with MongoDB versions before 2.8:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;dropDups&quot;</code></p><p class="para">Specify <strong><code>TRUE</code></strong> to force creation of a unique index where the collection may contain duplicate values for a key. MongoDB will index the first occurrence of a key and delete all subsequent documents from the collection that contain a duplicate value for that key. The default value is <strong><code>FALSE</code></strong>.</p><div class="warning"><strong class="warning">Warning</strong><p class="para"><code class="literal">&quot;dropDups&quot;</code> may delete data from your database. Use with extreme caution.</p></div><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">This option is not supported on MongoDB 2.8+. Index creation will fail if the collection contains duplicate values.</p></p></blockquote></li>
         </ul>
        </p>
        <p class="para">
         The following options may be used with MongoDB versions before 2.6:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for <a href="#mongo.writeconcerns" class="link">write concern</a> acknowledgement. It is only applicable when <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the timeout pertains to replication. If the write concern is not satisfied within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> will be thrown. A value of <code class="literal">0</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">10000</code> (ten seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;safe&quot;</code></p><p class="para">Deprecated. Please use the <a href="#mongo.writeconcerns" class="link">write concern</a> <code class="literal">&quot;w&quot;</code> option.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wtimeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.createindex-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the status of the index creation. The array
     contains whether the operation succeeded (<code class="literal">&quot;ok&quot;</code>), the
     number of indexes before and after the operation
     (<code class="literal">&quot;numIndexesBefore&quot;</code> and
     <code class="literal">&quot;numIndexesAfter&quot;</code>), and whether the collection that the
     index belongs to has been created
     (<code class="literal">&quot;createdCollectionAutomatically&quot;</code>). If the index already
     existed and did not need to be created, a <code class="literal">&quot;note&quot;</code> field may
     be present in lieu of <code class="literal">&quot;numIndexesAfter&quot;</code>.
    </p>
    <p class="para">
     With MongoDB 2.4 and earlier, a status document is only returned if the
     <a href="#mongo.writeconcerns" class="link">write concern</a> is at least
     <code class="literal">1</code>. Otherwise, <strong><code>TRUE</code></strong> is returned. The fields in the status
     document are different, except for the <code class="literal">&quot;ok&quot;</code> field, which
     signals whether the index creation was successful. Additional fields are
     described in the documentation for
     <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.createindex-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoexception" class="classname">MongoException</a> if the index name is longer
     than 128 bytes, or if the index specification is not an array.
    </p>
    <p class="para">
     Throws <a href="#class.mongoduplicatekeyexception" class="classname">MongoDuplicateKeyException</a> if the server could not
     create the unique index due to conflicting documents.
    </p>
    <p class="para">
     Throws <a href="#class.mongoresultexception" class="classname">MongoResultException</a> if the server could not
     create the index due to an error.
    </p>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.createindex-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1623">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::createIndex()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$c&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;an&nbsp;index&nbsp;on&nbsp;'x'&nbsp;ascending<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;unique&nbsp;index&nbsp;on&nbsp;'y'<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'unique'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;compound&nbsp;index&nbsp;on&nbsp;'za'&nbsp;ascending&nbsp;and&nbsp;'zb'&nbsp;descending<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'za'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'zb'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <div class="example" id="example-1624">
     <p><strong>Example #2 Geospatial Indexing</strong></p>
     <div class="example-contents"><p>
      Mongo supports geospatial indexes, which allow you to search for documents
      near a given location or within a shape. The following example creates a
      geospatial index on the <code class="literal">&quot;loc&quot;</code> field:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'loc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'2dsphere'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <div class="example" id="example-1625">
     <p><strong>Example #3 Drop duplicates example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'joeschmoe'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'joeschmoe'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;Index&nbsp;creation&nbsp;fails,&nbsp;since&nbsp;you&nbsp;cannot&nbsp;create&nbsp;a&nbsp;unique&nbsp;index&nbsp;on&nbsp;a&nbsp;field&nbsp;when<br />&nbsp;*&nbsp;duplicates&nbsp;exist.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'unique'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;MongoDB&nbsp;will&nbsp;one&nbsp;of&nbsp;the&nbsp;conflicting&nbsp;documents&nbsp;and&nbsp;allow&nbsp;the&nbsp;unique&nbsp;index&nbsp;to<br />&nbsp;*&nbsp;be&nbsp;created.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'unique'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'dropDups'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;We&nbsp;now&nbsp;have&nbsp;a&nbsp;unique&nbsp;index&nbsp;and&nbsp;subsequent&nbsp;inserts&nbsp;with&nbsp;the&nbsp;same&nbsp;username&nbsp;will<br />&nbsp;*&nbsp;fail.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'joeschmoe'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.createindex-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocollection.deleteindex" class="methodname" rel="rdfs-seeAlso">MongoCollection::deleteIndex()</a> - Deletes an index from this collection</span></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.deleteindexes" class="methodname" rel="rdfs-seeAlso">MongoCollection::deleteIndexes()</a> - Delete all indices for this collection</span></li>
     <li class="member">
      The MongoDB
      <a href="https://docs.mongodb.com/manual/indexes/" class="link external">&raquo;&nbsp;index</a> and
      <a href="https://docs.mongodb.com/manual/core/index-types/" class="link external">&raquo;&nbsp;index type</a>
      documentation.
     </li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.deleteindex" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::deleteIndex</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::deleteIndex</span> &mdash; <span class="dc-title">Deletes an index from this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.deleteindex-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::deleteIndex</strong></span>
      ( <span class="methodparam"><span class="type"><span class="type string|array">string|array</span></span> <code class="parameter">$keys</code></span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This method is identical to:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">deleteIndexes</span><span style="color: #007700">(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$indexName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toIndexString</span><span style="color: #007700">(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"deleteIndexes"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"index"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$indexName</span><span style="color: #007700">,<br />&nbsp;&nbsp;));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     Each index is given a unique name when it is created. This is often generated
     by the driver based on the index key(s) and order/type, but custom names may
     also be specified with <span class="function"><a href="#mongocollection.createindex" class="function">MongoCollection::createIndex()</a></span>&#039;s
     <code class="literal">&quot;name&quot;</code> option).
    </p>
    <p class="para">
     Unfortunately, <span class="function"><strong>MongoCollection::deleteIndex()</strong></span> cannot
     delete custom-named indexes due to a backwards compatibility issue. When a
     string argument is provided, it is assumed to be the single field name in an
     ascending index (e.g. the name <code class="literal">&quot;x_1&quot;</code> would be used for the
     argument <code class="literal">&quot;x&quot;</code>). If an array or object is provided, an index
     name is generated just as if that argument was passed to
     <span class="function"><a href="#mongocollection.createindex" class="function">MongoCollection::createIndex()</a></span>.
    </p>
    <p class="para">
     In order to delete a custom-named index with the PHP driver, the
     <code class="literal">deleteIndexes</code> database command must be used. For instance,
     an index named &quot;myIndex&quot; could be deleted with the PHP driver by running:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"deleteIndexes"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(),<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"index"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"myIndex"</span><span style="color: #007700">,<br />));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     To determine the name of an index with the PHP driver, you can query the
     <code class="literal">system.indexes</code> collection of a database and look for the
     <code class="literal">&quot;name&quot;</code> field of each result. The <code class="literal">&quot;ns&quot;</code>
     field will indicate the collection to which each index belongs.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.deleteindex-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">keys</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array specifying the index&#039;s fields as its keys. For each field, the
         value is either the index direction or
         <a href="https://docs.mongodb.com/manual/core/index-types/" class="link external">&raquo;&nbsp;index type</a>.
         If specifying direction, specify <code class="literal">1</code> for ascending or
         <code class="literal">-1</code> for descending.
        </p>
        <p class="para">
         If a string is provided, it is assumed to be the single field name in an
         ascending index.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.deleteindex-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.deleteindex-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1626">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::deleteIndex()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      This example passes the function string and array parameters.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">example</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">indices</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;and&nbsp;remove&nbsp;a&nbsp;simple&nbsp;index<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"i"</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteIndex</span><span style="color: #007700">(</span><span style="color: #DD0000">"i"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;and&nbsp;remove&nbsp;a&nbsp;multi-key&nbsp;index<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"j"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"k"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"j"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"k"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.deleteindex-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocollection.createindex" class="methodname" rel="rdfs-seeAlso">MongoCollection::createIndex()</a> - Creates an index on the specified field(s) if it does not already exist</span></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.deleteindexes" class="methodname" rel="rdfs-seeAlso">MongoCollection::deleteIndexes()</a> - Delete all indices for this collection</span></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.toindexstring" class="methodname" rel="rdfs-seeAlso">MongoCollection::toIndexString()</a> - Converts keys specifying an index to its identifying string</span></li>
     <li class="member">
      The MongoDB
      <a href="https://docs.mongodb.com/manual/indexes/" class="link external">&raquo;&nbsp;index</a> and
      <a href="https://docs.mongodb.com/manual/core/index-types/" class="link external">&raquo;&nbsp;index type</a>
      documentation.
     </li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.deleteindexes" class="refentry"><hr />
    <div class="refnamediv">
    <h1 class="refname">MongoCollection::deleteIndexes</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::deleteIndexes</span> &mdash; <span class="dc-title">Delete all indices for this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.deleteindexes-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::deleteIndexes</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.deleteindexes-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.deleteindexes-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.deleteindexes-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1627">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::deleteIndexes()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates how to delete all indexes from a collection and the response to expect.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">articles</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteIndexes</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Array
  (
      [nIndexesWas] =&gt; 1
      [msg] =&gt; all indexes deleted for collection
      [ok] =&gt; 1
  )
  </pre></div>
     </div>   
    </div>  
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.deleteindexes-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocollection.createindex" class="methodname" rel="rdfs-seeAlso">MongoCollection::createIndex()</a> - Creates an index on the specified field(s) if it does not already exist</span></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.deleteindex" class="methodname" rel="rdfs-seeAlso">MongoCollection::deleteIndex()</a> - Deletes an index from this collection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
   
  
  <div id="mongocollection.distinct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::distinct</h1>
    <p class="verinfo">(PECL mongo &gt;=1.2.11)</p><p class="refpurpose"><span class="refname">MongoCollection::distinct</span> &mdash; <span class="dc-title">Retrieve a list of distinct values for the given key across a collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.distinct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::distinct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$key</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
    ] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     The distinct command returns a list of distinct values for the given key
     across a collection. 
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.distinct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">key</code></dt>
  
      <dd>
  
       <p class="para">
        The key to use.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">query</code></dt>
  
      <dd>
  
       <p class="para">
        An optional query parameters 
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.distinct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array of distinct values,  or <strong><code>FALSE</code></strong> on failure
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.distinct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocollection.aggregate.example.basic">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::distinct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dropCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"distinct"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"stuff"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"zip-code"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10010</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"stuff"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"zip-code"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10010</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"stuff"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"zip-code"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">99701</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">(</span><span style="color: #DD0000">"zip-code"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">(</span><span style="color: #DD0000">"zip-code"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"stuff"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">(</span><span style="color: #DD0000">"zip-code"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"stuff"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [0]=&gt;
    int(10010)
    [1]=&gt;
    int(99701)
  }
  array(1) {
    [0]=&gt;
    int(10010)
  }
  array(2) {
    [0]=&gt;
    int(10010)
    [1]=&gt;
    int(99701)
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="mongocollection.aggregate.example.zipcode.population">
     <p><strong>Example #2 <span class="methodname"><strong>MongoCollection::distinct()</strong></span> example on a embedded document</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">25</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">31</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"points"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">25</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">(</span><span style="color: #DD0000">"user.points"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">(</span><span style="color: #DD0000">"user.nonexisting"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [0]=&gt;
    int(25)
    [1]=&gt;
    int(31)
  }
  array(0) {
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocollection.drop" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::drop</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::drop</span> &mdash; <span class="dc-title">Drops this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.drop-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::drop</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Drops this collection and deletes its indices.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.drop-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.drop-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database response.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.drop-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocollection.aggregate.example.zipcode.population.average">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::drop()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates how to drop a collection and the response to expect.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">articles</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drop</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Array
  (
      [nIndexesWas] =&gt; 1
      [msg] =&gt; all indexes deleted for collection
      [ns] =&gt; my_db.articles
      [ok] =&gt; 1
  )
  </pre></div>
     </div>   
    </div>  
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.ensureindex" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::ensureIndex</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::ensureIndex</span> &mdash; <span class="dc-title">
     Creates an index on the specified field(s) if it does not already exist
    </span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.ensureindex-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::ensureIndex</strong></span>
      ( <span class="methodparam"><span class="type"><span class="type string|array">string|array</span></span> <code class="parameter">$key|keys</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">bool</span></div>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      This method is deprecated since version 1.5.0. Please use
      <span class="methodname"><a href="#mongocollection.createindex" class="methodname">MongoCollection::createIndex()</a></span> instead.
     </p>
    </div>
    <p class="para">
     Creates an index on the specified field(s) if it does not already exist.
     Fields may be indexed with a direction (e.g. ascending or descending) or a
     special type (e.g. text, geospatial, hashed).
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This method will use the
      <a href="https://docs.mongodb.com/manual/reference/command/createIndexes" class="link external">&raquo;&nbsp;createIndexes</a>
      database command when communicating with MongoDB 2.6+. For previous database
      versions, the method will perform an insert operation on the
      special <code class="literal">system.indexes</code> collection.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.ensureindex-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">keys</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array specifying the index&#039;s fields as its keys. For each field, the
         value is either the index direction or
         <a href="https://docs.mongodb.com/manual/core/index-types/" class="link external">&raquo;&nbsp;index type</a>.
         If specifying direction, specify <code class="literal">1</code> for ascending or
         <code class="literal">-1</code> for descending.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the index creation. Currently available options
         include:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;unique&quot;</code></p><p class="para">Specify <strong><code>TRUE</code></strong> to create a unique index. The default value is <strong><code>FALSE</code></strong>. This option applies only to ascending/descending indexes.</p><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">When MongoDB indexes a field, if a document does not have a value for the field, a <strong><code>NULL</code></strong> value is indexed. If multiple documents do not contain a field, a unique index will reject all but the first of those documents. The <code class="literal">&quot;sparse&quot;</code> option may be used to overcome this, since it will prevent documents without the field from being indexed.</p></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;sparse&quot;</code></p><p class="para">Specify <strong><code>TRUE</code></strong> to create a sparse index, which only indexes documents containing a specified field. The default value is <strong><code>FALSE</code></strong>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;expireAfterSeconds&quot;</code></p><p class="para">The value of this option should specify the number of seconds after which a document should be considered expired and automatically removed from the collection. This option is only compatible with single-field indexes where the field will contain <a href="#class.mongodate" class="classname">MongoDate</a> values.</p><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">This feature is available in MongoDB 2.2+. See <a href="https://docs.mongodb.com/manual/tutorial/expire-data/" class="link external">&raquo;&nbsp;Expire Data from Collections by Setting TTL</a> for more information.</p></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;name&quot;</code></p><p class="para">A optional name that uniquely identifies the index.</p><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">By default, the driver will generate an index name based on the index&#039;s field(s) and ordering or type. For example, a compound index <code class="literal">array(&quot;x&quot; =&gt; 1, &quot;y&quot; =&gt; -1)</code> would be named <code class="literal">&quot;x_1_y_-1&quot;</code> and a geospatial index <code class="literal">array(&quot;loc&quot; =&gt; &quot;2dsphere&quot;)</code> would be named <code class="literal">&quot;loc_2dsphere&quot;</code>. For indexes with many fields, it is possible that the generated name might exceed MongoDB&#039;s <a href="https://docs.mongodb.com/manual/reference/limits/#Index-Name-Length" class="link external">&raquo;&nbsp;limit for index names</a>. The <code class="literal">&quot;name&quot;</code> option may be used in that case to supply a shorter name.</p></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;background&quot;</code></p><p class="para">Builds the index in the background so that building an index does <em class="emphasis">not</em> block other database activities. Specify <strong><code>TRUE</code></strong> to build in the background. The default value is <strong><code>FALSE</code></strong>.</p><div class="warning"><strong class="warning">Warning</strong><p class="para">Prior to MongoDB 2.6.0, index builds on secondaries were executed as foreground operations, irrespective of this option. See <a href="https://docs.mongodb.com/manual/tutorial/build-indexes-on-replica-sets/" class="link external">&raquo;&nbsp;Building Indexes with Replica Sets</a> for more information.</p></div></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following option may be used with MongoDB 2.6+:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
         </ul>
        </p>
        <p class="para">
         The following options may be used with MongoDB versions before 2.8:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;dropDups&quot;</code></p><p class="para">Specify <strong><code>TRUE</code></strong> to force creation of a unique index where the collection may contain duplicate values for a key. MongoDB will index the first occurrence of a key and delete all subsequent documents from the collection that contain a duplicate value for that key. The default value is <strong><code>FALSE</code></strong>.</p><div class="warning"><strong class="warning">Warning</strong><p class="para"><code class="literal">&quot;dropDups&quot;</code> may delete data from your database. Use with extreme caution.</p></div><blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">This option is not supported on MongoDB 2.8+. Index creation will fail if the collection contains duplicate values.</p></p></blockquote></li>
         </ul>
        </p>
        <p class="para">
         The following options may be used with MongoDB versions before 2.6:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for <a href="#mongo.writeconcerns" class="link">write concern</a> acknowledgement. It is only applicable when <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the timeout pertains to replication. If the write concern is not satisfied within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> will be thrown. A value of <code class="literal">0</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">10000</code> (ten seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;safe&quot;</code></p><p class="para">Deprecated. Please use the <a href="#mongo.writeconcerns" class="link">write concern</a> <code class="literal">&quot;w&quot;</code> option.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wtimeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.ensureindex-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the status of the index creation. The array
     contains whether the operation succeeded (<code class="literal">&quot;ok&quot;</code>), the
     number of indexes before and after the operation
     (<code class="literal">&quot;numIndexesBefore&quot;</code> and
     <code class="literal">&quot;numIndexesAfter&quot;</code>), and whether the collection that the
     index belongs to has been created
     (<code class="literal">&quot;createdCollectionAutomatically&quot;</code>). If the index already
     existed and did not need to be created, a <code class="literal">&quot;note&quot;</code> field may
     be present in lieu of <code class="literal">&quot;numIndexesAfter&quot;</code>.
    </p>
    <p class="para">
     With MongoDB 2.4 and earlier, a status document is only returned if the
     <a href="#mongo.writeconcerns" class="link">write concern</a> is at least
     <code class="literal">1</code>. Otherwise, <strong><code>TRUE</code></strong> is returned. The fields in the status
     document are different, except for the <code class="literal">&quot;ok&quot;</code> field, which
     signals whether the index creation was successful. Additional fields are
     described in the documentation for
     <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.ensureindex-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Renamed the <code class="literal">&quot;wtimeout&quot;</code> option to
           <code class="literal">&quot;wTimeoutMS&quot;</code>. Emits
           <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;wtimeout&quot;</code> is
           used.
          </p>
          <p class="para">
           Renamed the <code class="literal">&quot;timeout&quot;</code> option to
           <code class="literal">&quot;socketTimeoutMS&quot;</code>. Emits
           <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;timeout&quot;</code> is
           used.
          </p>
          <p class="para">
           Emits <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;safe&quot;</code>
           is used.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.4</td>
         <td>Added <code class="literal">&quot;wtimeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">Added <code class="literal">&quot;w&quot;</code> option.</p>
          <p class="para">
           The <code class="parameter">options</code> parameter no longer accepts a
           boolean to signify a unique index. Instead, this now has to be done
           with <code class="literal">array(&#039;unique&#039; =&gt; true)</code>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.11</td>
         <td>
          Emits <strong><code>E_DEPRECATED</code></strong> when
          <code class="parameter">options</code> is <span class="type"><span class="type scalar">scalar</span></span>.
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>Added <code class="literal">&quot;timeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.11</td>
         <td>
          <p class="para">
           The <code class="literal">&quot;safe&quot;</code> option will trigger a primary failover,
           if necessary.
          </p>
          <p class="para">
           <a href="#class.mongoexception" class="classname">MongoException</a> will be thrown if the index name
           (either generated or set) is longer than 128 bytes.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.0.5</td>
         <td>
          Added the <code class="literal">&quot;name&quot;</code> option to override index name
          creation.
         </td>
        </tr>
  
        <tr>
         <td>1.0.2</td>
         <td>
          Changed <code class="parameter">options</code> parameter from boolean to array.
          Pre-1.0.2, the second parameter was an optional boolean value specifying
          a unique index.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.ensureindex-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoexception" class="classname">MongoException</a> if the index name is longer
     than 128 bytes, or if the index specification is not an array.
    </p>
    <p class="para">
     Throws <a href="#class.mongoduplicatekeyexception" class="classname">MongoDuplicateKeyException</a> if the server could not
     create the unique index due to conflicting documents.
    </p>
    <p class="para">
     Throws <a href="#class.mongoresultexception" class="classname">MongoResultException</a> if the server could not
     create the index due to an error.
    </p>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.ensureindex-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocollection.aggregate.example.zipcode.explain">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::ensureIndex()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$c&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;an&nbsp;index&nbsp;on&nbsp;'x'&nbsp;ascending<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;unique&nbsp;index&nbsp;on&nbsp;'y'<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'unique'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;compound&nbsp;index&nbsp;on&nbsp;'za'&nbsp;ascending&nbsp;and&nbsp;'zb'&nbsp;descending<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'za'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'zb'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <div class="example" id="example-1632">
     <p><strong>Example #2 Geospatial Indexing</strong></p>
     <div class="example-contents"><p>
      Mongo supports geospatial indexes, which allow you to search for documents
      near a given location or within a shape. The following example creates a
      geospatial index on the <code class="literal">&quot;loc&quot;</code> field:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'loc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'2dsphere'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <div class="example" id="example-1633">
     <p><strong>Example #3 Drop duplicates example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'joeschmoe'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'joeschmoe'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;Index&nbsp;creation&nbsp;fails,&nbsp;since&nbsp;you&nbsp;cannot&nbsp;create&nbsp;a&nbsp;unique&nbsp;index&nbsp;on&nbsp;a&nbsp;field&nbsp;when<br />&nbsp;*&nbsp;duplicates&nbsp;exist.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'unique'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;MongoDB&nbsp;will&nbsp;one&nbsp;of&nbsp;the&nbsp;conflicting&nbsp;documents&nbsp;and&nbsp;allow&nbsp;the&nbsp;unique&nbsp;index&nbsp;to<br />&nbsp;*&nbsp;be&nbsp;created.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'unique'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'dropDups'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;We&nbsp;now&nbsp;have&nbsp;a&nbsp;unique&nbsp;index&nbsp;and&nbsp;subsequent&nbsp;inserts&nbsp;with&nbsp;the&nbsp;same&nbsp;username&nbsp;will<br />&nbsp;*&nbsp;fail.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'joeschmoe'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.ensureindex-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocollection.createindex" class="methodname" rel="rdfs-seeAlso">MongoCollection::createIndex()</a> - Creates an index on the specified field(s) if it does not already exist</span></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.deleteindex" class="methodname" rel="rdfs-seeAlso">MongoCollection::deleteIndex()</a> - Deletes an index from this collection</span></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.deleteindexes" class="methodname" rel="rdfs-seeAlso">MongoCollection::deleteIndexes()</a> - Delete all indices for this collection</span></li>
     <li class="member">
      The MongoDB
      <a href="https://docs.mongodb.com/manual/indexes/" class="link external">&raquo;&nbsp;index</a> and
      <a href="https://docs.mongodb.com/manual/core/index-types/" class="link external">&raquo;&nbsp;index type</a>
      documentation.
     </li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.find" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::find</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::find</span> &mdash; <span class="dc-title">Queries this collection, returning a <a href="#class.mongocursor" class="classname">MongoCursor</a>
    for the result set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.find-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::find</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.find-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">query</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The fields for which to search. MongoDB&#039;s query language is quite
         extensive. The PHP driver will in almost all cases pass the query
         straight through to the server, so reading the MongoDB core docs on
         <a href="https://docs.mongodb.com/manual/reference/method/db.collection.find/" class="link external">&raquo;&nbsp;find</a> is a good idea.
        </p>
        <div class="warning"><strong class="warning">Warning</strong>
         <p class="para">
          Please make sure that for all special query operators (starting with
          <code class="literal">$</code>) you use single quotes so that PHP doesn&#039;t try to
          replace <code class="literal">&quot;$exists&quot;</code> with the value of the variable
          <code class="literal">$exists</code>.
         </p>
        </div>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">fields</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fields of the results to return. The array is in the format
         <code class="literal">array(&#039;fieldname&#039; =&gt; true, &#039;fieldname2&#039; =&gt; true)</code>.
         The <code class="literal">_id</code> field is always returned.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.find-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a cursor for the search results.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.find-examples">
    <h3 class="title">Examples</h3>
     <div class="example" id="example-1634">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::find()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates basic search options.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'produce'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;search&nbsp;for&nbsp;fruits<br /></span><span style="color: #0000BB">$fruitQuery&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'Type'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Fruit'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruitQuery</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$doc</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;search&nbsp;for&nbsp;produce&nbsp;that&nbsp;is&nbsp;sweet.&nbsp;Taste&nbsp;is&nbsp;a&nbsp;child&nbsp;of&nbsp;Details.&nbsp;<br /></span><span style="color: #0000BB">$sweetQuery&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'Details.Taste'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Sweet'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Sweet\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(</span><span style="color: #0000BB">$sweetQuery</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$doc</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(4) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#7 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;50a87dd084f045a19b220dd6&quot;
    }
    [&quot;Name&quot;]=&gt;
    string(5) &quot;Apple&quot;
    [&quot;Type&quot;]=&gt;
    string(5) &quot;Fruit&quot;
    [&quot;Details&quot;]=&gt;
    array(2) {
      [&quot;Taste&quot;]=&gt;
      string(5) &quot;Sweet&quot;
      [&quot;Colour&quot;]=&gt;
      string(3) &quot;Red&quot;
    }
  }
  array(4) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#8 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;50a87de084f045a19b220dd7&quot;
    }
    [&quot;Name&quot;]=&gt;
    string(5) &quot;Lemon&quot;
    [&quot;Type&quot;]=&gt;
    string(5) &quot;Fruit&quot;
    [&quot;Details&quot;]=&gt;
    array(2) {
      [&quot;Taste&quot;]=&gt;
      string(4) &quot;Sour&quot;
      [&quot;Colour&quot;]=&gt;
      string(5) &quot;Green&quot;
    }
  }
  
  Sweet:
  array(4) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#7 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;50a87dd084f045a19b220dd6&quot;
    }
    [&quot;Name&quot;]=&gt;
    string(5) &quot;Apple&quot;
    [&quot;Type&quot;]=&gt;
    string(5) &quot;Fruit&quot;
    [&quot;Details&quot;]=&gt;
    array(2) {
      [&quot;Taste&quot;]=&gt;
      string(5) &quot;Sweet&quot;
      [&quot;Colour&quot;]=&gt;
      string(3) &quot;Red&quot;
    }
  }
  </pre></div>
     </div>
     <div class="example-contents"><p>
       See <a href="#class.mongocursor" class="classname">MongoCursor</a> for more information how to work with cursors.
     </p></div>
    </div>
    <div class="example" id="example-1635">
     <p><strong>Example #2 <span class="function"><strong>MongoCollection::find()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates how to search for a range.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'phpmanual'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;search&nbsp;for&nbsp;documents&nbsp;where&nbsp;5&nbsp;&lt;&nbsp;x&nbsp;&lt;&nbsp;20<br /></span><span style="color: #0000BB">$rangeQuery&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">'$gt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'$lt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">20&nbsp;</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(</span><span style="color: #0000BB">$rangeQuery</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$doc</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#10 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;4ebc3e3710b89f2349000000&quot;
    }
    [&quot;x&quot;]=&gt;
    int(12)
  }
  array(2) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#11 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;4ebc3e3710b89f2349000001&quot;
    }
    [&quot;x&quot;]=&gt;
    int(12)
  }
  </pre></div>
     </div>
     <div class="example-contents"><p>
       See <a href="#class.mongocursor" class="classname">MongoCursor</a> for more information how to work with cursors.
     </p></div>
    </div>
    <div class="example" id="example-1636">
     <p><strong>Example #3 <span class="function"><strong>MongoCollection::find()</strong></span> example using $where</strong></p>
     <div class="example-contents"><p>This example demonstrates how to search a collection using javascript code to reduce the resultset.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'phpmanual'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$js&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"function()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.name&nbsp;==&nbsp;'Joe'&nbsp;||&nbsp;this.age&nbsp;==&nbsp;50;<br />}"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'$where'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$js</span><span style="color: #007700">));<br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$doc</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#7 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;4ebc3e3710b89f2349000002&quot;
    }
    [&quot;name&quot;]=&gt;
    string(3) &quot;Joe&quot;
    [&quot;age&quot;]=&gt;
    int(20)
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1637">
     <p><strong>Example #4 <span class="function"><strong>MongoCollection::find()</strong></span> example using $in</strong></p>
     <div class="example-contents"><p>This example demonstrates how to search a collection using the $in operator.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'phpmanual'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$in'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'Joe'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Wendy'</span><span style="color: #007700">))<br />));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#7 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;4ebc3e3710b89f2349000002&quot;
    }
    [&quot;name&quot;]=&gt;
    string(3) &quot;Joe&quot;
    [&quot;age&quot;]=&gt;
    int(20)
  }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1638">
     <p><strong>Example #5 Getting results as an array</strong></p>
     <div class="example-contents"><p>
      This returns a <a href="#class.mongocursor" class="classname">MongoCursor</a>.  Often, when people are 
      starting out, they are more comfortable using an array.  To turn a cursor
      into an array, use the <span class="function"><a href="#function.iterator-to-array" class="function">iterator_to_array()</a></span> function.  
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'phpmanual'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">iterator_to_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [&quot;4ebc40af10b89f5149000000&quot;]=&gt;
    array(2) {
      [&quot;_id&quot;]=&gt;
      object(MongoId)#6 (1) {
        [&quot;$id&quot;]=&gt;
        string(24) &quot;4ebc40af10b89f5149000000&quot;
      }
      [&quot;x&quot;]=&gt;
      int(12)
    }
    [&quot;4ebc40af10b89f5149000001&quot;]=&gt;
    array(2) {
      [&quot;_id&quot;]=&gt;
      object(MongoId)#11 (1) {
        [&quot;$id&quot;]=&gt;
        string(24) &quot;4ebc40af10b89f5149000001&quot;
      }
      [&quot;x&quot;]=&gt;
      int(12)
    }
    [&quot;4ebc40af10b89f5149000002&quot;]=&gt;
    array(3) {
      [&quot;_id&quot;]=&gt;
      object(MongoId)#12 (1) {
        [&quot;$id&quot;]=&gt;
        string(24) &quot;4ebc40af10b89f5149000002&quot;
      }
      [&quot;name&quot;]=&gt;
      string(3) &quot;Joe&quot;
      [&quot;age&quot;]=&gt;
      int(20)
    }
  }
  </pre></div>
     </div>
     <div class="example-contents"><p>
      Using <span class="function"><a href="#function.iterator-to-array" class="function">iterator_to_array()</a></span> forces the driver to load all of
      the results into memory, so do not do this for result sets that are larger
      than memory!
     </p></div>
     <div class="example-contents"><p>
      Also, certain system collections do not have an <code class="literal">_id</code> 
      field.  If you are dealing with a collection that might have documents 
      without <code class="literal">_id</code>s, pass <strong><code>FALSE</code></strong> as the second argument to
      <span class="function"><a href="#function.iterator-to-array" class="function">iterator_to_array()</a></span> (so that it will not try to use the
      non-existent <code class="literal">_id</code> values as keys).
     </p></div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.find-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocollection.findone" class="function" rel="rdfs-seeAlso">MongoCollection::findOne()</a> - Queries this collection, returning a single element</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.insert" class="function" rel="rdfs-seeAlso">MongoCollection::insert()</a> - Inserts a document into the collection</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/method/db.collection.find/" class="link external">&raquo;&nbsp;find</a>.</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.findandmodify" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::findAndModify</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoCollection::findAndModify</span> &mdash; <span class="dc-title">Update a document and return it</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.findandmodify-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::findAndModify</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$update</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ]]] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
    The findAndModify command atomically modifies and returns a single document.
    By default, the returned document does not include the modifications made on
    the update. To return the document with the modifications made on the
    update, use the <var class="varname">new</var> option.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.findandmodify-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">query</code></dt>
  
      <dd>
  
       <p class="para">
        The query criteria to search for.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">update</code></dt>
  
      <dd>
  
       <p class="para">
        The update criteria.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">fields</code></dt>
  
      <dd>
  
       <p class="para">
        Optionally only return these fields.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        An array of options to apply, such as remove the match document from the
        DB and return it.
        <table class="doctable informaltable">
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td><var class="varname">sort</var> <span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             Determines which document the operation will modify if the
             query selects multiple documents. findAndModify will modify the
             first document in the sort order specified by this argument.
            </td>
           </tr>
  
           <tr>
            <td><var class="varname">remove</var> <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Optional if <var class="varname">update</var> field exists. When <strong><code>TRUE</code></strong>, removes the selected
             document. The default is <strong><code>FALSE</code></strong>.
            </td>
           </tr>
  
           <tr>
            <td><var class="varname">update</var> <span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             Optional if <var class="varname">remove</var> field exists.
             Performs an update of the selected document.
            </td>
           </tr>
  
           <tr>
            <td><var class="varname">new</var> <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Optional. When <strong><code>TRUE</code></strong>, returns the modified document rather than the
             original. The findAndModify method ignores the <var class="varname">new</var> option for
             remove operations. The default is <strong><code>FALSE</code></strong>.
            </td>
           </tr>
  
           <tr>
            <td><var class="varname">upsert</var> <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Optional. Used in conjunction with the <var class="varname">update</var> field. When <strong><code>TRUE</code></strong>, the
             findAndModify command creates a new document if the query returns
             no documents. The default is false. In MongoDB 2.2, the
             findAndModify command returns <strong><code>NULL</code></strong> when upsert is <strong><code>TRUE</code></strong>.
            </td>
           </tr>
  
           <tr>
            <td></td>
            <td>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.findandmodify-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the original document, or the modified document when
     <var class="varname">new</var> is set.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.findandmodify-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoresultexception" class="classname">MongoResultException</a> on failure.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.findandmodify-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1639">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::findAndModify()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$col&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">jobs</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$col</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Next&nbsp;promo"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">"select&nbsp;product"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"add&nbsp;inventory"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"do&nbsp;placement"</span><span style="color: #007700">),<br />)&nbsp;);<br /><br /></span><span style="color: #0000BB">$col</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Biz&nbsp;report"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">"run&nbsp;sales&nbsp;report"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"email&nbsp;report"&nbsp;</span><span style="color: #007700">)<br />)&nbsp;);<br /><br /></span><span style="color: #0000BB">$col</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Biz&nbsp;report"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">"run&nbsp;marketing&nbsp;report"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"email&nbsp;report"&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br />);<br /><br /><br /><br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$col</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAndModify</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Biz&nbsp;report"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'inprogress'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"started"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">())),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"sort"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"new"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;)<br />);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(6) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#7 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;5091b5b244415e8cc3000002&quot;
    }
    [&quot;inprogress&quot;]=&gt;
    bool(true)
    [&quot;name&quot;]=&gt;
    string(10) &quot;Biz report&quot;
    [&quot;priority&quot;]=&gt;
    int(2)
    [&quot;started&quot;]=&gt;
    object(MongoDate)#8 (2) {
      [&quot;sec&quot;]=&gt;
      int(1351726514)
      [&quot;usec&quot;]=&gt;
      int(925000)
    }
    [&quot;tasks&quot;]=&gt;
    array(2) {
      [0]=&gt;
      string(20) &quot;run marketing report&quot;
      [1]=&gt;
      string(12) &quot;email report&quot;
    }
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1640">
     <p><strong>Example #2 <span class="methodname"><strong>MongoCollection::findAndModify()</strong></span> error handling</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$col&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">jobs</span><span style="color: #007700">;<br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$col</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAndModify</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Next&nbsp;promo"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$pop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$pop'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"stuff"</span><span style="color: #007700">))),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"new"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoResultException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"&nbsp;:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDocument</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  13097 : exception: Unsupported projection option: $pop
  array(3) {
    [&quot;errmsg&quot;]=&gt;
    string(46) &quot;exception: Unsupported projection option: $pop&quot;
    [&quot;code&quot;]=&gt;
    int(13097)
    [&quot;ok&quot;]=&gt;
    float(0)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.findandmodify-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The MongoDB <a href="https://docs.mongodb.com/manual/reference/command/findAndModify/" class="link external">&raquo;&nbsp;findAndModify command</a> docs</li>
    </ul>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocollection.findone" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::findOne</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::findOne</span> &mdash; <span class="dc-title">Queries this collection, returning a single element</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.findone-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::findOne</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]]] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     As opposed to <span class="function"><a href="#mongocollection.find" class="function">MongoCollection::find()</a></span>, this method
     will return only the <em class="emphasis">first</em> result from the result set,
     and not a <a href="#class.mongocursor" class="classname">MongoCursor</a> that can be iterated over.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.findone-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">query</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The fields for which to search. MongoDB&#039;s query language is quite
         extensive. The PHP driver will in almost all cases pass the query
         straight through to the server, so reading the MongoDB core docs on
         <a href="https://docs.mongodb.com/manual/reference/method/db.collection.find/" class="link external">&raquo;&nbsp;find</a> is a good idea.
        </p>
        <div class="warning"><strong class="warning">Warning</strong>
         <p class="para">
          Please make sure that for all special query operaters (starting with
          <code class="literal">$</code>) you use single quotes so that PHP doesn&#039;t try to
          replace <code class="literal">&quot;$exists&quot;</code> with the value of the variable
          <code class="literal">$exists</code>.
         </p>
        </div>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">fields</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fields of the results to return. The array is in the format
         <code class="literal">array(&#039;fieldname&#039; =&gt; true, &#039;fieldname2&#039; =&gt; true)</code>.
         The <code class="literal">_id</code> field is always returned.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         This parameter is an associative array of the form 
         <code class="literal">array(&quot;name&quot; =&gt; &lt;value&gt;, ...)</code>. Currently
         supported options are:
        </p>
        <ul class="itemizedlist">
         <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
        </ul>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.findone-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns record matching the search or <strong><code>NULL</code></strong>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.findone-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the 
     database.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.findone-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.5.0</td>
        <td>
         Added optional <code class="parameter">options</code> argument.
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.findone-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1641">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::findOne()</strong></span> document by its id.</strong></p>
     <div class="example-contents"><p>This example demonstrates how to find a single document in a collection by its id.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$articles&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">articles</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$article&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$articles</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">'47cc67093475061e3d9536d2'</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
    <div class="example" id="example-1642">
     <p><strong>Example #2 <span class="methodname"><strong>MongoCollection::findOne()</strong></span> document by some condition.</strong></p>
     <div class="example-contents"><p>This example demonstrates how to find a single document in a collection by some condition and limiting the returned fields.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$users&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">users</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$users</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'jwage'</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'password'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Array
  (
      [_id] =&gt; MongoId Object
          (
          )
  
      [password] =&gt; test
  )
  </pre></div>
     </div>
     <div class="example-contents"><p>
      Notice how even though the document does have a username field, we limited the results
      to only contain the password field.
     </p></div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.findone-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocollection.find" class="function" rel="rdfs-seeAlso">MongoCollection::find()</a> - Queries this collection, returning a MongoCursor
    for the result set</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.insert" class="function" rel="rdfs-seeAlso">MongoCollection::insert()</a> - Inserts a document into the collection</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/method/db.collection.find/" class="link external">&raquo;&nbsp;find</a>.</li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.get" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::__get</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.2)</p><p class="refpurpose"><span class="refname">MongoCollection::__get</span> &mdash; <span class="dc-title">Gets a collection</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongocollection.get-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::__get</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  
    <p class="para rdfs-comment">
     A concise syntax for getting a collection with a dot-separated name.  If a
     collection name contains strange characters, you may have to use
     <span class="function"><a href="#mongodb.selectcollection" class="function">MongoDB::selectCollection()</a></span> instead.
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mongo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;the&nbsp;following&nbsp;two&nbsp;lines&nbsp;are&nbsp;equivalent<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"bar.baz"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baz</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.get-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The next string in the collection name.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.get-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the collection.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongocollection.getdbref" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::getDBRef</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::getDBRef</span> &mdash; <span class="dc-title">Fetches the document pointed to by a database reference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.getdbref-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::getDBRef</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.getdbref-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">ref</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A database reference.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.getdbref-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database document pointed to by the reference.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.getdbref-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocollection.distinct.basic">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::getDBRef()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$playlists&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">playlists</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$myList&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$playlists</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'me'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;fetch&nbsp;each&nbsp;song&nbsp;in&nbsp;the&nbsp;playlist<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$myList</span><span style="color: #007700">[</span><span style="color: #DD0000">'songlist'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$songRef</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$song&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$playlists</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDBRef</span><span style="color: #007700">(</span><span style="color: #0000BB">$songRef</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$song</span><span style="color: #007700">[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Dazed and Confused
  Ma na ma na
  Bohemian Rhapsody
  </pre></div>
     </div>
     <div class="example-contents screen"> <br />
      In the above example each $songRef looks something like the following:<br />
      <div class="cdata"><pre>
      Array
      (
          [$ref] =&gt; songs
          [$id] =&gt; 49902cde5162504500b45c2c
      )
      </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.getdbref-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongocollection.createdbref" class="methodname" rel="rdfs-seeAlso">MongoCollection::createDBRef()</a> - Creates a database reference</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.getindexinfo" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::getIndexInfo</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::getIndexInfo</span> &mdash; <span class="dc-title">Returns information about indexes on this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.getindexinfo-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::getIndexInfo</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.getindexinfo-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.getindexinfo-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This function returns an array in which each element describes an index.
     Elements will contain the values <code class="literal">name</code> for the name of
     the index, <code class="literal">ns</code> for the namespace (a combination of the
     database and collection name), and <code class="literal">key</code> for a list of all
     fields in the index and their ordering. Additional values may be present for
     special indexes, such as <code class="literal">unique</code> or
     <code class="literal">sparse</code>.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.getindexinfo-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocollection.distinct.basic-embedded">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::getIndexInfo()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'venues'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIndexInfo</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(4) {
    [0]=&gt;
    array(4) {
      [&quot;v&quot;]=&gt;
      int(1)
      [&quot;key&quot;]=&gt;
      array(1) {
        [&quot;_id&quot;]=&gt;
        int(1)
      }
      [&quot;name&quot;]=&gt;
      string(4) &quot;_id_&quot;
      [&quot;ns&quot;]=&gt;
      string(11) &quot;test.venues&quot;
    }
    [1]=&gt;
    array(4) {
      [&quot;v&quot;]=&gt;
      int(1)
      [&quot;key&quot;]=&gt;
      array(1) {
        [&quot;name&quot;]=&gt;
        float(1)
      }
      [&quot;name&quot;]=&gt;
      string(6) &quot;name_1&quot;
      [&quot;ns&quot;]=&gt;
      string(11) &quot;test.venues&quot;
    }
    [2]=&gt;
    array(4) {
      [&quot;v&quot;]=&gt;
      int(1)
      [&quot;key&quot;]=&gt;
      array(2) {
        [&quot;type&quot;]=&gt;
        float(1)
        [&quot;createdAt&quot;]=&gt;
        float(-1)
      }
      [&quot;name&quot;]=&gt;
      string(19) &quot;type_1_createdAt_-1&quot;
      [&quot;ns&quot;]=&gt;
      string(11) &quot;test.venues&quot;
    }
    [3]=&gt;
    array(5) {
      [&quot;v&quot;]=&gt;
      int(1)
      [&quot;key&quot;]=&gt;
      array(1) {
        [&quot;location&quot;]=&gt;
        string(8) &quot;2dsphere&quot;
      }
      [&quot;name&quot;]=&gt;
      string(17) &quot;location_2dsphere&quot;
      [&quot;ns&quot;]=&gt;
      string(11) &quot;test.venues&quot;
      [&quot;2dsphereIndexVersion&quot;]=&gt;
      int(2)
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.getindexinfo-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on 
     <a href="https://docs.mongodb.com/manual/indexes/" class="link external">&raquo;&nbsp;vanilla indexes</a> and
     <a href="https://docs.mongodb.com/manual/applications/geospatial-indexes/" class="link external">&raquo;&nbsp;geospatial indexes</a>.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.getname" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::getName</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::getName</span> &mdash; <span class="dc-title">Returns this collection&#039;s name</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongocollection.getname-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::getName</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.getname-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.getname-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the name of this collection.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-mongocollection.getname-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1645">
      <p><strong>Example #1 <span class="function"><strong>MongoCollection::getName()</strong></span> example</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baz</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Working&nbsp;with&nbsp;collection&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">".\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;the&nbsp;full&nbsp;namespace&nbsp;is&nbsp;given&nbsp;by&nbsp;the&nbsp;MongoCollection::__toString()&nbsp;method<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Working&nbsp;in&nbsp;namespace&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  Working with collection bar.baz.
  Working in namespace foo.bar.baz.
  </pre></div>
      </div>
     </div>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongocollection.getreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::getReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoCollection::getReadPreference</span> &mdash; <span class="dc-title">Get the read preference for this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.getreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::getReadPreference</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.getreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.getreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the read preference. The array contains the values <code class="literal">type</code> for the string read preference mode (corresponding to the <a href="#class.mongoclient" class="classname">MongoClient</a> constants), and <code class="literal">tagsets</code> containing a list of all tag set criteria. If no tag sets were specified, <code class="literal">tagsets</code> will not be present in the array.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.getreadpreference-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.3.3</td>
         <td>
          The return value has changed to be consistent with
          <span class="methodname"><a href="#mongocollection.setreadpreference" class="methodname">MongoCollection::setReadPreference()</a></span>. The
          <code class="literal">type</code> value was changed from a number to a string,
          <code class="literal">type_string</code> was removed, and
          <code class="literal">tagsets</code> now expresses tags as key/value pairs instead
          of colon-delimited strings.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.getreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1646">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::getReadPreference()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">users</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(),<br />));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadPreference</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;type&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;tagsets&quot;]=&gt;
    array(3) {
      [0]=&gt;
      array(2) {
        [&quot;dc&quot;]=&gt;
        string(4) &quot;east&quot;
        [&quot;use&quot;]=&gt;
        string(9) &quot;reporting&quot;
      }
      [1]=&gt;
      array(1) {
        [&quot;dc&quot;]=&gt;
        string(7) &quot;west&quot;
      }
      [2]=&gt;
      array(0) {
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.getreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocollection.setreadpreference" class="function" rel="rdfs-seeAlso">MongoCollection::setReadPreference()</a> - Set the read preference for this collection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocollection.getslaveokay" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::getSlaveOkay</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">MongoCollection::getSlaveOkay</span> &mdash; <span class="dc-title">Get slaveOkay setting for this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.getslaveokay-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::getSlaveOkay</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
  
    <p class="para rdfs-comment">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.getslaveokay-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.getslaveokay-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the value of slaveOkay for this instance.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.getslaveokay-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.getslaveokay-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.getreadpreference" class="methodname" rel="rdfs-seeAlso">MongoCollection::getReadPreference()</a> - Get the read preference for this collection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.getwriteconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::getWriteConcern</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCollection::getWriteConcern</span> &mdash; <span class="dc-title">Get the write concern for this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.getwriteconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::getWriteConcern</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.getwriteconcern-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.getwriteconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the write concern. The array contains the values <code class="literal">w</code> for an integer acknowledgement level or string mode, and <code class="literal">wtimeout</code> denoting the maximum number of milliseconds to wait for the server to satisfy the write concern.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.getwriteconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1647">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::getWriteConcern()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'wTimeoutMS'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">500</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$coll&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$coll</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$coll</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setWriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$coll</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;w&quot;]=&gt;
    int(1)
    [&quot;wtimeout&quot;]=&gt;
    int(500)
  }
  array(2) {
    [&quot;w&quot;]=&gt;
    int(1)
    [&quot;wtimeout&quot;]=&gt;
    int(1000)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.getwriteconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.writeconcerns" class="link">write concern</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocollection.setwriteconcern" class="function" rel="rdfs-seeAlso">MongoCollection::setWriteConcern()</a> - Set the write concern for this database</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocollection.group" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::group</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.2)</p><p class="refpurpose"><span class="refname">MongoCollection::group</span> &mdash; <span class="dc-title">Performs an operation similar to SQL&#039;s GROUP BY command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.group-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::group</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$keys</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$initial</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongocode" class="type MongoCode">MongoCode</a></span> <code class="parameter">$reduce</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.group-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">keys</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fields to group by.  If an array or non-code object is passed, it will be
         the key used to group results. 
        </p>
        <p class="para">1.0.4+: If <code class="parameter">keys</code> is an instance of 
         <a href="#class.mongocode" class="classname">MongoCode</a>, <code class="parameter">keys</code> will be treated as
         a function that returns the key to group by (see the &quot;Passing a 
         <code class="parameter">keys</code> function&quot; example below).  
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">initial</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Initial value of the aggregation counter object.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">reduce</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A function that takes two arguments (the current document and the 
         aggregation to this point) and does the aggregation.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Optional parameters to the group command.  Valid options include:
        </p>
        <ul class="itemizedlist">
         <li class="listitem">
          <p class="para">
           <code class="literal">&quot;condition&quot;</code>
          </p>
          <p class="para">
           Criteria for including a document in the aggregation.
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           <code class="literal">&quot;finalize&quot;</code>
          </p>
          <p class="para">
           Function called once per unique key that takes the final output of the
           reduce function.
          </p>
         </li>
         <li class="listitem"><p class="para"><code class="literal">&quot;maxTimeMS&quot;</code></p><p class="para">Specifies a cumulative time limit in milliseconds for processing the operation on the server (does not include idle time). If the operation is not completed by the server within the timeout period, a <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> will be thrown.</p></li>
        </ul>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.group-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the result.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.group-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>Added <code class="literal">&quot;maxTimeMS&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.2.11</td>
         <td>
          Emits <strong><code>E_DEPRECATED</code></strong> when
          <code class="parameter">options</code> is <span class="type"><span class="type scalar">scalar</span></span>.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.group-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1648">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::group()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      This groups documents by category and creates a list of names within that
      category.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"category"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"apple"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"category"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"peach"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"category"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"banana"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"category"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"veggie"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"corn"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"category"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"veggie"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"broccoli"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$keys&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"category"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$initial&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"items"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array());<br /><br /></span><span style="color: #0000BB">$reduce&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"function&nbsp;(obj,&nbsp;prev)&nbsp;{&nbsp;prev.items.push(obj.name);&nbsp;}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$g&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$initial</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$reduce</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$g</span><span style="color: #007700">[</span><span style="color: #DD0000">'retval'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  [{&quot;category&quot;:&quot;fruit&quot;,&quot;items&quot;:[&quot;apple&quot;,&quot;peach&quot;,&quot;banana&quot;]},{&quot;category&quot;:&quot;veggie&quot;,&quot;items&quot;:[&quot;corn&quot;,&quot;broccoli&quot;]}]
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1649">
     <p><strong>Example #2 <span class="function"><strong>MongoCollection::group()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      This example doesn&#039;t use any key, so every document will be its own group.
      It also uses a condition: only documents that match this condition will be
      processed by the grouping function.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;use&nbsp;all&nbsp;fields<br /></span><span style="color: #0000BB">$keys&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><br /></span><span style="color: #FF8000">//&nbsp;set&nbsp;intial&nbsp;values<br /></span><span style="color: #0000BB">$initial&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"count"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;JavaScript&nbsp;function&nbsp;to&nbsp;perform<br /></span><span style="color: #0000BB">$reduce&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"function&nbsp;(obj,&nbsp;prev)&nbsp;{&nbsp;prev.count++;&nbsp;}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;only&nbsp;use&nbsp;documents&nbsp;where&nbsp;the&nbsp;"a"&nbsp;field&nbsp;is&nbsp;greater&nbsp;than&nbsp;1<br /></span><span style="color: #0000BB">$condition&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'condition'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">'$gt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">$g&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$initial</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$reduce</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$condition</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$g</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(4) {
    [&quot;retval&quot;]=&gt;
    array(1) {
      [0]=&gt;
      array(1) {
        [&quot;count&quot;]=&gt;
        float(1)
      }
    }
    [&quot;count&quot;]=&gt;
    float(1)
    [&quot;keys&quot;]=&gt;
    int(1)
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1650">
     <p><strong>Example #3 Passing a <code class="parameter">keys</code> function</strong></p>
     <div class="example-contents"><p>
      If you want to group by something other than a field name, you can pass
      a function as the first parameter of 
      <span class="function"><strong>MongoCollection::group()</strong></span> and it will be run against each
      document.  The return value of the function will be used as its grouping 
      value.
     </p></div>
     <div class="example-contents"><p>
      This example demonstrates grouping by the num field modulo 4.
     </p></div>
  
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">'function(doc)&nbsp;{&nbsp;return&nbsp;{mod&nbsp;:&nbsp;doc.num&nbsp;%&nbsp;4};&nbsp;}'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"count"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">'function(current,&nbsp;total)&nbsp;{&nbsp;total.count++;&nbsp;}'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.insert" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::insert</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::insert</span> &mdash; <span class="dc-title">Inserts a document into the collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.insert-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::insert</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  
    <p class="para rdfs-comment">
     All strings sent to the database must be UTF-8.  If a string is not UTF-8, a 
     <a href="#class.mongoexception" class="classname">MongoException</a> will be thrown.  To insert 
     (or query for) a non-UTF-8 string, use <a href="#class.mongobindata" class="classname">MongoBinData</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.insert-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">document</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array or object. If an object is used, it may not have protected or
         private properties.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: 
         <p class="para">
          If the parameter does not have an <code class="literal">_id</code> key or
          property, a new <a href="#class.mongoid" class="classname">MongoId</a> instance will be created
          and assigned to it. This special behavior does not mean that the
          parameter is passed by reference.
         </p>
        </p></blockquote>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the insert operation. Currently available options
         include:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;fsync&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. If journaling is enabled, it works exactly like <code class="literal">&quot;j&quot;</code>. If journaling is not enabled, the write operation blocks until it is synced to database files on disk. If <strong><code>TRUE</code></strong>, an acknowledged insert is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If journaling is enabled, users are strongly encouraged to use the <code class="literal">&quot;j&quot;</code> option instead of <code class="literal">&quot;fsync&quot;</code>. Do not use <code class="literal">&quot;fsync&quot;</code> and <code class="literal">&quot;j&quot;</code> simultaneously, as that will result in an error.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;j&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Forces the write operation to block until it is synced to the journal on disk. If <strong><code>TRUE</code></strong>, an acknowledged write is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If this option is used and journaling is disabled, MongoDB 2.6+ will raise an error and the write will fail; older server versions will simply ignore the option.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for <a href="#mongo.writeconcerns" class="link">write concern</a> acknowledgement. It is only applicable when <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the timeout pertains to replication. If the write concern is not satisfied within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> will be thrown. A value of <code class="literal">0</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">10000</code> (ten seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;safe&quot;</code></p><p class="para">Deprecated. Please use the <a href="#mongo.writeconcerns" class="link">write concern</a> <code class="literal">&quot;w&quot;</code> option.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wtimeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.insert-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the status of the insertion if the
     <code class="literal">&quot;w&quot;</code> option is set. Otherwise, returns <strong><code>TRUE</code></strong> if the
     inserted array is not empty (a <a href="#class.mongoexception" class="classname">MongoException</a> will be
     thrown if the inserted array is empty).
    </p>
    <p class="para">
     If an array is returned, the following keys may be present:
     <dl>
  
      
       <dt>
  
        <code class="parameter">ok</code>
       </dt>
  
       <dd>
  
        <p class="para">
         This should almost always be 1 (unless last_error itself failed).
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">err</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If this field is non-null, an error occurred on the previous operation.
         If this field is set, it will be a string describing the error that
         occurred. 
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">code</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If a database error occurred, the relevant error code will be passed
         back to the client. 
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">errmsg</code>
       </dt>
  
       <dd>
  
        <p class="para">
         This field is set if something goes wrong with a database command. It
         is coupled with <code class="literal">ok</code> being 0. For example, if
         <code class="literal">w</code> is set and times out, errmsg will be set to &quot;timed
         out waiting for slaves&quot; and <code class="literal">ok</code> will be 0.  If this
         field is set, it will be a string describing the error that occurred. 
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">n</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If the last operation was an update, upsert, or a remove, the number
         of documents affected will be returned. For insert operations, this value
         is always <code class="literal">0</code>.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">wtimeout</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If the previous option timed out waiting for replication. 
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">waited</code>
       </dt>
  
       <dd>
  
        <p class="para">
         How long the operation waited before timing out. 
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">wtime</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If <code class="literal">w</code> was set and the operation succeeded, how long it took to
         replicate to <code class="literal">w</code> servers. 
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">upserted</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If an upsert occurred, this field will contain the new record&#039;s
         <code class="literal">_id</code> field. For upserts, either this field or
         <code class="literal">updatedExisting</code> will be present (unless an error
         occurred). 
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">updatedExisting</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If an upsert updated an existing element, this field will be true. For
         upserts, either this field or upserted will be present (unless an error
         occurred). 
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.insert-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoexception" class="classname">MongoException</a> if the inserted document is
     empty or if it contains zero-length keys. Attempting to insert an object with
     protected and private properties will cause a zero-length key error.
    </p>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.insert-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;wTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;wtimeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;wtimeout&quot;</code> is used.
          </p>
          <p class="para">
           Added the <code class="literal">&quot;socketTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;timeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;timeout&quot;</code> is used.
          </p>
          <p class="para">
           Emits <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;safe&quot;</code>
           is used.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.4</td>
         <td>Added <code class="literal">&quot;wtimeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">Added <code class="literal">&quot;w&quot;</code> option.</p>
          <p class="para">
           The <code class="parameter">options</code> parameter no longer accepts a
           boolean to signify an acknowledged write. Instead, this now has to be
           done with <code class="literal">array(&#039;w&#039; =&gt; 1)</code> (the default behaviour of
           <a href="#class.mongoclient" class="classname">MongoClient</a>).
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>Added <code class="literal">&quot;timeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.11</td>
         <td>
          Disconnects on &quot;not master&quot; errors if <code class="literal">&quot;safe&quot;</code> is set.
         </td>
        </tr>
  
        <tr>
         <td>1.0.9</td>
         <td>
          <p class="para">
           Added ability to pass integers to the <code class="literal">&quot;safe&quot;</code> option,
           which previously only accepted booleans.
          </p>
          <p class="para">
           Added <code class="literal">&quot;fsync&quot;</code> option.
          </p>
          <p class="para">
           The return type was changed to be an array containing error information
           if the <code class="literal">&quot;safe&quot;</code> option is used. Otherwise, a boolean
           is returned as before.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.0.2</td>
         <td>
          Changed second parameter to be an array of options. Pre-1.0.2, the
          second parameter was a boolean indicating the <code class="literal">&quot;safe&quot;</code>
          option.
         </td>
        </tr>
  
        <tr>
         <td>1.0.1</td>
         <td>
          Throw a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the
          <code class="literal">&quot;safe&quot;</code> option is set and the insert fails.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.insert-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1651">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::insert()</strong></span> <code class="literal">_id</code> example</strong></p>
     <div class="example-contents"><p>
      An <code class="literal">_id</code> field will be added to the inserted document if
      not already present. Depending on how the parameter is passed, a generated
      <code class="literal">_id</code> may or may not be available to calling code.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'phpmanual'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;If&nbsp;an&nbsp;array&nbsp;literal&nbsp;is&nbsp;used,&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;access&nbsp;the&nbsp;generated&nbsp;_id<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;_id&nbsp;is&nbsp;available&nbsp;on&nbsp;an&nbsp;array&nbsp;passed&nbsp;by&nbsp;value<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;_id&nbsp;is&nbsp;not&nbsp;available&nbsp;on&nbsp;an&nbsp;array&nbsp;passed&nbsp;by&nbsp;reference<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ref&nbsp;</span><span style="color: #007700">=&nbsp;&amp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$ref</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$ref</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;_id&nbsp;is&nbsp;available&nbsp;if&nbsp;a&nbsp;wrapping&nbsp;function&nbsp;does&nbsp;not&nbsp;trigger&nbsp;copy-on-write<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">insert_no_cow</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">insert_no_cow</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;_id&nbsp;is&nbsp;not&nbsp;available&nbsp;if&nbsp;a&nbsp;wrapping&nbsp;function&nbsp;triggers&nbsp;copy-on-write<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">insert_cow</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">[</span><span style="color: #DD0000">'y'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">insert_cow</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;x&quot;]=&gt;
    int(2)
    [&quot;_id&quot;]=&gt;
    object(MongoId)#4 (0) {
    }
  }
  array(1) {
    [&quot;x&quot;]=&gt;
    int(3)
  }
  array(2) {
    [&quot;x&quot;]=&gt;
    int(4)
    [&quot;_id&quot;]=&gt;
    object(MongoId)#5 (0) {
    }
  }
  array(1) {
    [&quot;x&quot;]=&gt;
    int(5)
  }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1652">
     <p><strong>Example #2 <span class="function"><strong>MongoCollection::insert()</strong></span> acknowledged write example</strong></p>
     <div class="example-contents"><p>
      This example shows inserting two elements with the same _id, which causes 
      a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> to be thrown, as 
      <code class="parameter">w</code> was set.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$person&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Joe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"age"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$person</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;now&nbsp;$person&nbsp;has&nbsp;an&nbsp;_id&nbsp;field,&nbsp;so&nbsp;if&nbsp;we&nbsp;save&nbsp;it&nbsp;<br />//&nbsp;again,&nbsp;we&nbsp;will&nbsp;get&nbsp;an&nbsp;exception<br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$person</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoCursorException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Can't&nbsp;save&nbsp;the&nbsp;same&nbsp;person&nbsp;twice!\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.insert-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocollection.batchinsert" class="function" rel="rdfs-seeAlso">MongoCollection::batchInsert()</a> - Inserts multiple documents into this collection</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.update" class="function" rel="rdfs-seeAlso">MongoCollection::update()</a> - Update records based on a given criteria</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.find" class="function" rel="rdfs-seeAlso">MongoCollection::find()</a> - Queries this collection, returning a MongoCursor
    for the result set</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.remove" class="function" rel="rdfs-seeAlso">MongoCollection::remove()</a> - Remove records from this collection</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/tutorial/insert-documents/" class="link external">&raquo;&nbsp;insert</a>.</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.parallelcollectionscan" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::parallelCollectionScan</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCollection::parallelCollectionScan</span> &mdash; <span class="dc-title">Returns an array of cursors to iterator over a full collection in parallel</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongocollection.parallelcollectionscan-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::parallelCollectionScan</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num_cursors</code></span>
     ) : <span class="type"><span class="type array[MongoCommandCursor]">array[MongoCommandCursor]</span></span></div>
  
    <p class="para rdfs-comment">
     This method returns an array of a maximum of <code class="literal">num_cursors</code>
     cursors. An iteration over one of the returned cursors results in a partial
     set of documents for a collection. Iteration over all the returned cursors
     results in getting every document back from the collection.
    </p>
    <p class="para">
     This method is a wrapper for the <code class="literal">parallelCollectionScan</code>
     MongoDB command.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.parallelcollectionscan-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">num_cursors</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of cursors to request from the server. Please note, that the
         server can return less cursors than you requested.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.parallelcollectionscan-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns an array of <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> objects.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.parallelcollectionscan-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1653">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::parallelCollectionScan()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Returning all documents in a collection by using multiple cursors.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cities</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;Request&nbsp;three&nbsp;cursors&nbsp;*/<br /></span><span style="color: #0000BB">$cursors&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parallelCollectionScan</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Add&nbsp;all&nbsp;the&nbsp;cursors&nbsp;to&nbsp;the&nbsp;MultipleIterator&nbsp;*/<br /></span><span style="color: #0000BB">$mi&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MultipleIterator</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">MultipleIterator</span><span style="color: #007700">::</span><span style="color: #0000BB">MIT_NEED_ANY&nbsp;</span><span style="color: #007700">);<br />foreach&nbsp;(&nbsp;</span><span style="color: #0000BB">$cursors&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mi</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attachIterator</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Iterate&nbsp;over&nbsp;all&nbsp;the&nbsp;associated&nbsp;cursors&nbsp;*/<br /></span><span style="color: #007700">foreach&nbsp;(&nbsp;</span><span style="color: #0000BB">$mi&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$items&nbsp;</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;</span><span style="color: #0000BB">$items&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">$item&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">NULL&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.parallelcollectionscan-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><a href="#class.multipleiterator" class="classname">MultipleIterator</a></li>
      <li class="member"><a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a></li>
      <li class="member"><span class="methodname"><a href="#mongodb.command" class="methodname" rel="rdfs-seeAlso">MongoDB::command()</a> - Execute a database command</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.remove" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::remove</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::remove</span> &mdash; <span class="dc-title">Remove records from this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.remove-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::remove</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.remove-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt id="mongocollection.remove.criteria">
        <code class="parameter">criteria</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Query criteria for the documents to delete.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the remove operation. Currently available options
         include:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem" id="mongocollection.remove.justone">
           <p class="para">
            <code class="literal">&quot;justOne&quot;</code>
           </p>
           <p class="para">
            Specify <strong><code>TRUE</code></strong> to limit deletion to just one document. If <strong><code>FALSE</code></strong> or
            omitted, all documents matching the criteria will be deleted.
           </p>
          </li>
          <li class="listitem"><p class="para"><code class="literal">&quot;fsync&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. If journaling is enabled, it works exactly like <code class="literal">&quot;j&quot;</code>. If journaling is not enabled, the write operation blocks until it is synced to database files on disk. If <strong><code>TRUE</code></strong>, an acknowledged insert is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If journaling is enabled, users are strongly encouraged to use the <code class="literal">&quot;j&quot;</code> option instead of <code class="literal">&quot;fsync&quot;</code>. Do not use <code class="literal">&quot;fsync&quot;</code> and <code class="literal">&quot;j&quot;</code> simultaneously, as that will result in an error.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;j&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Forces the write operation to block until it is synced to the journal on disk. If <strong><code>TRUE</code></strong>, an acknowledged write is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If this option is used and journaling is disabled, MongoDB 2.6+ will raise an error and the write will fail; older server versions will simply ignore the option.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for <a href="#mongo.writeconcerns" class="link">write concern</a> acknowledgement. It is only applicable when <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the timeout pertains to replication. If the write concern is not satisfied within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> will be thrown. A value of <code class="literal">0</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">10000</code> (ten seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;safe&quot;</code></p><p class="para">Deprecated. Please use the <a href="#mongo.writeconcerns" class="link">write concern</a> <code class="literal">&quot;w&quot;</code> option.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wtimeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.remove-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the status of the removal if the
     <code class="literal">&quot;w&quot;</code> option is set. Otherwise, returns <strong><code>TRUE</code></strong>.
    </p>
    <p class="para">
     Fields in the status array are described in the documentation for
     <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.remove-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.remove-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;wTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;wtimeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;wtimeout&quot;</code> is used.
          </p>
          <p class="para">
           Added <code class="literal">&quot;socketTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;timeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;timeout&quot;</code> is used.
          </p>
          <p class="para">
           Emits <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;safe&quot;</code>
           is used.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.4</td>
         <td>Added <code class="literal">&quot;wtimeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">Added <code class="literal">&quot;w&quot;</code> option.</p>
          <p class="para">
           The <code class="parameter">options</code> parameter no longer accepts a
           boolean to signify <code class="literal">&quot;justOne&quot;</code>. Instead, this now has
           to be done with <code class="literal">array(&#039;justOne&#039; =&gt; true)</code>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.11</td>
         <td>
          Emits <strong><code>E_DEPRECATED</code></strong> when
          <code class="parameter">options</code> is <span class="type"><span class="type scalar">scalar</span></span>.
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>Added <code class="literal">&quot;timeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.11</td>
         <td>
          Disconnects on &quot;not master&quot; errors if <code class="literal">&quot;safe&quot;</code> is set.
         </td>
        </tr>
  
        <tr>
         <td>1.0.9</td>
         <td>
          <p class="para">
           Added ability to pass integers to the <code class="literal">&quot;safe&quot;</code> option,
           which previously only accepted booleans.
          </p>
          <p class="para">
           Added <code class="literal">&quot;fsync&quot;</code> option.
          </p>
          <p class="para">
           The return type was changed to be an array containing error information
           if the <code class="literal">&quot;safe&quot;</code> option is used. Otherwise, a boolean
           is returned as before.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.0.5</td>
         <td>
          Changed second parameter to be an array of options. Pre-1.0.5, the
          second parameter was a boolean indicating the <code class="literal">&quot;safe&quot;</code>
          option.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.remove-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocollection.findandmodify.example.basic">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::remove()</strong></span> with justOne example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$radioactive&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">radioactive</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;count&nbsp;how&nbsp;much&nbsp;more&nbsp;plutonium&nbsp;there&nbsp;is<br /></span><span style="color: #0000BB">$remaining&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$radioactive</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'type'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">94</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$halflife&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$remaining</span><span style="color: #007700">/</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;remove&nbsp;half&nbsp;of&nbsp;it<br /></span><span style="color: #007700">while&nbsp;(</span><span style="color: #0000BB">$halflife&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$radioactive</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">remove</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'type'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">94</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"justOne"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$halflife</span><span style="color: #007700">--;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.remove-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocollection.insert" class="function" rel="rdfs-seeAlso">MongoCollection::insert()</a> - Inserts a document into the collection</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.update" class="function" rel="rdfs-seeAlso">MongoCollection::update()</a> - Update records based on a given criteria</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/tutorial/remove-documents/" class="link external">&raquo;&nbsp;remove</a>.</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.save" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::save</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::save</span> &mdash; <span class="dc-title">Saves a document to this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.save-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::save</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
    <p class="para rdfs-comment">
     If the object is from the database, update the existing database object, otherwise 
     insert this object.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.save-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">document</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Array or object to save. If an object is used, it may not have protected
         or private properties.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: 
         <p class="para">
          If the parameter does not have an <code class="literal">_id</code> key or
          property, a new <a href="#class.mongoid" class="classname">MongoId</a> instance will be created
          and assigned to it. See <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span> for
          additional information on this behavior.
         </p>
        </p></blockquote>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Options for the save.
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;fsync&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. If journaling is enabled, it works exactly like <code class="literal">&quot;j&quot;</code>. If journaling is not enabled, the write operation blocks until it is synced to database files on disk. If <strong><code>TRUE</code></strong>, an acknowledged insert is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If journaling is enabled, users are strongly encouraged to use the <code class="literal">&quot;j&quot;</code> option instead of <code class="literal">&quot;fsync&quot;</code>. Do not use <code class="literal">&quot;fsync&quot;</code> and <code class="literal">&quot;j&quot;</code> simultaneously, as that will result in an error.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;j&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Forces the write operation to block until it is synced to the journal on disk. If <strong><code>TRUE</code></strong>, an acknowledged write is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If this option is used and journaling is disabled, MongoDB 2.6+ will raise an error and the write will fail; older server versions will simply ignore the option.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wtimeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for <a href="#mongo.writeconcerns" class="link">write concern</a> acknowledgement. It is only applicable when <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the timeout pertains to replication. If the write concern is not satisfied within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> will be thrown. A value of <code class="literal">0</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">10000</code> (ten seconds).</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;safe&quot;</code></p><p class="para">Deprecated. Please use the <a href="#mongo.writeconcerns" class="link">write concern</a> <code class="literal">&quot;w&quot;</code> option.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.save-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     If <code class="parameter">w</code> was set, returns an array containing the status of the save.
     Otherwise, returns a boolean representing if the array was not empty (an empty array will not 
     be inserted).
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.save-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoexception" class="classname">MongoException</a> if the inserted document is
     empty or if it contains zero-length keys. Attempting to insert an object with
     protected and private properties will cause a zero-length key error.
    </p>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.save-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;wTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;wtimeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;wtimeout&quot;</code> is used.
          </p>
          <p class="para">
           Added <code class="literal">&quot;socketTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;timeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;timeout&quot;</code> is used.
          </p>
          <p class="para">
           Emits <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;safe&quot;</code>
           is used.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>Added <code class="literal">&quot;timeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.11</td>
         <td>
          Disconnects on &quot;not master&quot; errors if <code class="literal">&quot;safe&quot;</code> is set.
         </td>
        </tr>
  
        <tr>
         <td>1.0.9</td>
         <td>
          <p class="para">
           Added <code class="literal">&quot;fsync&quot;</code> option.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.0.5</td>
         <td>Added <code class="parameter">options</code> parameter.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.save-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocollection.findandmodify.example.error">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::save()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$obj&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;insert&nbsp;$obj&nbsp;into&nbsp;the&nbsp;db<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;add&nbsp;another&nbsp;field<br /></span><span style="color: #0000BB">$obj</span><span style="color: #007700">[</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;$obj&nbsp;cannot&nbsp;be&nbsp;inserted&nbsp;again,&nbsp;causes&nbsp;duplicate&nbsp;_id&nbsp;error<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;save&nbsp;updates&nbsp;$obj&nbsp;with&nbsp;the&nbsp;new&nbsp;field<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;x&quot;]=&gt;
    int(1)
    [&quot;_id&quot;]=&gt;
    object(MongoId)#4 (1) {
      [&quot;$id&quot;]=&gt;
      string(24) &quot;50b6afe544415ed606000000&quot;
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.setreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::setReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoCollection::setReadPreference</span> &mdash; <span class="dc-title">Set the read preference for this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.setreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::setReadPreference</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.setreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">read_preference</code></dt>
  <dd>
  <p class="para">The read preference mode: <strong><code>MongoClient::RP_PRIMARY</code></strong>, <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>, <strong><code>MongoClient::RP_SECONDARY</code></strong>, <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong>, or <strong><code>MongoClient::RP_NEAREST</code></strong>.</p></dd>
  <dt>
  <code class="parameter">tags</code></dt>
  <dd>
  <p class="para">An array of zero or more tag sets, where each tag set is itself an array of criteria used to match tags on replica set members.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.setreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <strong><code>TRUE</code></strong> on success, or <strong><code>FALSE</code></strong> otherwise.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.setreadpreference-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if either parameter is invalid, or if one or more tag sets are provided with the <strong><code>MongoClient::RP_PRIMARY</code></strong> read preference mode.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.setreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1656">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCollection::setReadPreference()</strong></span> tag set array syntax example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">users</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center&nbsp;also&nbsp;used&nbsp;for&nbsp;reporting,<br />//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;server&nbsp;in&nbsp;the&nbsp;"west"&nbsp;data&nbsp;center<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_NEAREST</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.setreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocollection.getreadpreference" class="function" rel="rdfs-seeAlso">MongoCollection::getReadPreference()</a> - Get the read preference for this collection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocollection.setslaveokay" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::setSlaveOkay</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">MongoCollection::setSlaveOkay</span> &mdash; <span class="dc-title">Change slaveOkay setting for this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.setslaveokay-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::setSlaveOkay</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type">bool</span></div>
  
  
    <p class="para rdfs-comment">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.setslaveokay-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">ok</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If reads should be sent to secondary members of a replica set for all 
         possible queries using this <a href="#class.mongocollection" class="classname">MongoCollection</a> 
         instance.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.setslaveokay-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the former value of slaveOkay for this instance.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.setslaveokay-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.setslaveokay-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
     <li class="member"><span class="methodname"><a href="#mongocollection.setreadpreference" class="methodname" rel="rdfs-seeAlso">MongoCollection::setReadPreference()</a> - Set the read preference for this collection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.setwriteconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::setWriteConcern</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCollection::setWriteConcern</span> &mdash; <span class="dc-title">Set the write concern for this database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.setwriteconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::setWriteConcern</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
    ] ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.setwriteconcern-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">w</code></dt>
  <dd>
  <p class="para">The write concern. This may be an integer denoting the number of servers required to acknowledge the write, or a string mode (e.g. &quot;majority&quot;).</p></dd>
  <dt>
  <code class="parameter">wtimeout</code></dt>
  <dd>
  <p class="para">The maximum number of milliseconds to wait for the server to satisfy the write concern.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.setwriteconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <strong><code>TRUE</code></strong> on success, or <strong><code>FALSE</code></strong> otherwise.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.setwriteconcern-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if the <code class="literal">w</code> parameter is not an integer or string value.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.setwriteconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1657">
     <p><strong>Example #1 <span class="methodname"><a href="#mongodb.setwriteconcern" class="methodname">MongoDB::setWriteConcern()</a></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$coll&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Require&nbsp;that&nbsp;the&nbsp;majority&nbsp;of&nbsp;servers&nbsp;in&nbsp;the&nbsp;replica&nbsp;set&nbsp;acknowledge&nbsp;writes<br />//&nbsp;within&nbsp;three&nbsp;seconds.<br /></span><span style="color: #0000BB">$coll</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setWriteConcern</span><span style="color: #007700">(</span><span style="color: #DD0000">'majority'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.setwriteconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.writeconcerns" class="link">write concern</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocollection.getwriteconcern" class="function" rel="rdfs-seeAlso">MongoCollection::getWriteConcern()</a> - Get the write concern for this collection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocollection.toindexstring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::toIndexString</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::toIndexString</span> &mdash; <span class="dc-title">Converts keys specifying an index to its identifying string</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.toindexstring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">static protected</span> <span class="methodname"><strong>MongoCollection::toIndexString</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$keys</code></span>
     ) : <span class="type">string</span></div>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      This method is deprecated since version 1.5.0.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.toindexstring-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">keys</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Field or fields to convert to the identifying string
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.toindexstring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a string that describes the index.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.toindexstring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1658">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::toIndexString()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example shows how you can create an index name out of keys.
     Because this is a protected (static) method, you need to overload it in a
     child class first.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Create&nbsp;inherited&nbsp;class&nbsp;to&nbsp;make&nbsp;the&nbsp;method&nbsp;"public".<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyCollection&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">MongoCollection<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">toIndexString</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">toIndexString</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />echo&nbsp;</span><span style="color: #0000BB">MyCollection</span><span style="color: #007700">::</span><span style="color: #0000BB">toIndexString</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;Outputs:&nbsp;foo_1<br /><br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">MyCollection</span><span style="color: #007700">::</span><span style="color: #0000BB">toIndexString</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'age'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">)),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;Outputs:&nbsp;name_1_age_-1<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.toindexstring-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/indexes/" class="link external">&raquo;&nbsp;indexes</a>.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.toindexstring-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          This method has been deprecated.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.--tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::__toString</span> &mdash; <span class="dc-title">String representation of this collection</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongocollection.--tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.--tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.--tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the full name of this collection.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-mongocollection.--tostring-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1659">
      <p><strong>Example #1 <span class="function"><strong>MongoCollection::__toString()</strong></span> example</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$c1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baz</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Working&nbsp;with&nbsp;collection&nbsp;</span><span style="color: #0000BB">$c1</span><span style="color: #DD0000">."</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$c2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'[]'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'&amp;'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Working&nbsp;with&nbsp;collection&nbsp;</span><span style="color: #0000BB">$c2</span><span style="color: #DD0000">."</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  Working with collection foo.bar.baz.
  Working with collection [].&amp;.
  </pre></div>
      </div>
     </div>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongocollection.update" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::update</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::update</span> &mdash; <span class="dc-title">Update records based on a given criteria</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.update-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::update</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$new_object</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.update-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt id="mongocollection.update.criteria">
        <code class="parameter">criteria</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Query criteria for the documents to update.
        </p>
       </dd>
  
      
      
       <dt id="mongocollection.update.new_object">
        <code class="parameter">new_object</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The object used to update the matched documents. This may either contain
         update operators (for modifying specific fields) or be a replacement
         document.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the update operation. Currently available options
         include:
         <ul class="itemizedlist">
          <li class="listitem" id="mongocollection.update.upsert">
           <p class="para">
            <code class="literal">&quot;upsert&quot;</code>
           </p>
           <p class="para">
            If no document matches <code class="parameter">$criteria</code>, a new
            document will be inserted.
           </p>
           <p class="para">
            If a new document would be inserted and
            <code class="parameter">$new_object</code> contains atomic modifiers
            (i.e. <code class="literal">$</code> operators), those operations will be
            applied to the <code class="parameter">$criteria</code> parameter to create
            the new document. If <code class="parameter">$new_object</code> does not
            contain atomic modifiers, it will be used as-is for the inserted
            document. See the upsert examples below for more information.
           </p>
          </li>
          <li class="listitem" id="mongocollection.update.multiple">
           <p class="para">
            <code class="literal">&quot;multiple&quot;</code>
           </p>
           <p class="para">
            All documents matching $criteria will be updated.  
            <span class="function"><strong>MongoCollection::update()</strong></span> has exactly the opposite 
            behavior of <span class="function"><a href="#mongocollection.remove" class="function">MongoCollection::remove()</a></span>: it updates 
            one document by default, not all matching documents.  <em class="emphasis">It is 
            recommended that you always specify whether you want to update 
             multiple documents or a single document</em>, as the database 
            may change its default behavior at some point in the future.
           </p>
          </li>
          <li class="listitem"><p class="para"><code class="literal">&quot;fsync&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. If journaling is enabled, it works exactly like <code class="literal">&quot;j&quot;</code>. If journaling is not enabled, the write operation blocks until it is synced to database files on disk. If <strong><code>TRUE</code></strong>, an acknowledged insert is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If journaling is enabled, users are strongly encouraged to use the <code class="literal">&quot;j&quot;</code> option instead of <code class="literal">&quot;fsync&quot;</code>. Do not use <code class="literal">&quot;fsync&quot;</code> and <code class="literal">&quot;j&quot;</code> simultaneously, as that will result in an error.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;j&quot;</code></p><p class="para">Boolean, defaults to <strong><code>FALSE</code></strong>. Forces the write operation to block until it is synced to the journal on disk. If <strong><code>TRUE</code></strong>, an acknowledged write is implied and this option will override setting <code class="literal">&quot;w&quot;</code> to <code class="literal">0</code>.</p><blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">If this option is used and journaling is disabled, MongoDB 2.6+ will raise an error and the write will fail; older server versions will simply ignore the option.</span></p></blockquote></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;socketTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for socket communication. If the server does not respond within the timeout period, a <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> will be thrown and there will be no way to determine if the server actually handled the write or not. A value of <code class="literal">-1</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">30000</code> (30 seconds).</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;w&quot;</code></p><p class="para">See <a href="#mongo.writeconcerns" class="link">Write Concerns</a>. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">1</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wTimeoutMS&quot;</code></p><p class="para">This option specifies the time limit, in milliseconds, for <a href="#mongo.writeconcerns" class="link">write concern</a> acknowledgement. It is only applicable when <code class="literal">&quot;w&quot;</code> is greater than <code class="literal">1</code>, as the timeout pertains to replication. If the write concern is not satisfied within the time limit, a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> will be thrown. A value of <code class="literal">0</code> may be specified to block indefinitely. The default value for <a href="#class.mongoclient" class="classname">MongoClient</a> is <code class="literal">10000</code> (ten seconds).</p></li>
         </ul>
        </p>
        <p class="para">
         The following options are deprecated and should no longer be used:
         <ul class="itemizedlist">
          <li class="listitem"><p class="para"><code class="literal">&quot;safe&quot;</code></p><p class="para">Deprecated. Please use the <a href="#mongo.writeconcerns" class="link">write concern</a> <code class="literal">&quot;w&quot;</code> option.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;timeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;socketTimeoutMS&quot;</code>.</p></li>
          <li class="listitem"><p class="para"><code class="literal">&quot;wtimeout&quot;</code></p><p class="para">Deprecated alias for <code class="literal">&quot;wTimeoutMS&quot;</code>.</p></li>
         </ul>
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.update-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the status of the update if the
     <code class="literal">&quot;w&quot;</code> option is set. Otherwise, returns <strong><code>TRUE</code></strong>.
    </p>
    <p class="para">
     Fields in the status array are described in the documentation for
     <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocollection.update-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocollection.update-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;wTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;wtimeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;wtimeout&quot;</code> is used.
          </p>
          <p class="para">
           Added the <code class="literal">&quot;socketTimeoutMS&quot;</code> option, which replaces
           <code class="literal">&quot;timeout&quot;</code>. Emits <strong><code>E_DEPRECATED</code></strong>
           when <code class="literal">&quot;timeout&quot;</code> is used.
          </p>
          <p class="para">
           Emits <strong><code>E_DEPRECATED</code></strong> when <code class="literal">&quot;safe&quot;</code>
           is used.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.4</td>
         <td>Added <code class="literal">&quot;wtimeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">Added <code class="literal">&quot;w&quot;</code> option.</p>
          <p class="para">
           The <code class="parameter">options</code> parameter no longer accepts a boolean
           to signify an upsert. Instead, this now has to be done with
           <code class="literal">array(&#039;upsert&#039; =&gt; true)</code>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.11</td>
         <td>
          Emits <strong><code>E_DEPRECATED</code></strong> when
          <code class="parameter">options</code> is <span class="type"><span class="type scalar">scalar</span></span>.
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>Added <code class="literal">&quot;timeout&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.11</td>
         <td>
          Disconnects on &quot;not master&quot; errors if <code class="literal">&quot;safe&quot;</code> is set.
         </td>
        </tr>
  
        <tr>
         <td>1.0.9</td>
         <td>
          <p class="para">
           Added ability to pass integers to the <code class="literal">&quot;safe&quot;</code> option,
           which previously only accepted booleans.
          </p>
          <p class="para">
           Added <code class="literal">&quot;fsync&quot;</code> option.
          </p>
          <p class="para">
           The return type was changed to be an array containing error information
           if the <code class="literal">&quot;safe&quot;</code> option is used. Otherwise, a boolean
           is returned as before.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.0.5</td>
         <td>Added <code class="literal">&quot;safe&quot;</code> option.</td>
        </tr>
  
        <tr>
         <td>1.0.1</td>
         <td>
          Changed <code class="parameter">options</code> parameter from boolean to array.
          Pre-1.0.1, the second parameter was an optional boolean value specifying
          an upsert.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocollection.update-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1660">
     <p><strong>Example #1 <span class="function"><strong>MongoCollection::update()</strong></span></strong></p>
     <div class="example-contents"><p>
      Adding an address field to a document.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"firstname"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Bob"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"lastname"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Jones"&nbsp;</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$newdata&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"address"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"1&nbsp;Smith&nbsp;Lane"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"firstname"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Bob"</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$newdata</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"firstname"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Bob"</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(4) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#6 (0) {
    }
    [&quot;firstname&quot;]=&gt;
    string(3) &quot;Bob&quot;
    [&quot;lastname&quot;]=&gt;
    string(5) &quot;Jones&quot;
    [&quot;address&quot;]=&gt;
    string(12) &quot;1 Smith Lane&quot;
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1661">
     <p><strong>Example #2 <span class="function"><strong>MongoCollection::update()</strong></span> upsert examples</strong></p>
     <div class="example-contents"><p>
      Upserts can simplify code, as a single line can create the document if it
      does not exist (based on <code class="parameter">$criteria</code>), or update an
      existing document if it matches.
     </p></div>
     <div class="example-contents"><p>
      In the following example, <code class="parameter">$new_object</code> contains an
      atomic modifier. Since the collection is empty and upsert must insert a new
      document, it will apply those operations to the
      <code class="parameter">$criteria</code> parameter in order to create the document.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drop</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"uri"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"/summer_pics"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$inc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"page&nbsp;hits"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"upsert"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#9 (0) {
    }
    [&quot;uri&quot;]=&gt;
    string(12) &quot;/summer_pics&quot;
    [&quot;page hits&quot;]=&gt;
    int(1)
  }
  </pre></div>
     </div>
     <div class="example-contents"><p>
      If <code class="parameter">$new_object</code> does not contain atomic modifiers
      (i.e. <code class="literal">$</code> operators), upsert will use
      <code class="parameter">$new_object</code> as-is for the new document. This matches
      the behavior of a normal update, where not using atomic modifiers causes the
      document to be overwritten.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drop</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"joe"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"username"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"joe312"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"createdAt"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">()),&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"upsert"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#10 (0) {
    }
    [&quot;username&quot;]=&gt;
    string(6) &quot;joe312&quot;
    [&quot;createdAt&quot;]=&gt;
    object(MongoDate)#4 (0) {
    }
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1662">
     <p><strong>Example #3 <span class="function"><strong>MongoCollection::update()</strong></span> multiple example</strong></p>
     <div class="example-contents"><p>
      By default, <span class="function"><strong>MongoCollection::update()</strong></span> will only update
      the first document matching <code class="parameter">$criteria</code> that it
      finds. Using the &quot;multiple&quot; option can override this behavior, if needed.
     </p></div>
     <div class="example-contents"><p>
      This example adds a &quot;gift&quot; field to every person whose birthday is in the
      next day.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$today&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'$gt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">'$lt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"+1&nbsp;day"</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"birthday"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$today</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'gift'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$surprise</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"multiple"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocollection.update-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     The <a href="#mongo.updates" class="link">PHP documentation on updates</a> and the
     <a href="https://docs.mongodb.com/manual/tutorial/modify-documents/" class="link external">&raquo;&nbsp;MongoDB core docs</a>.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocollection.validate" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCollection::validate</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCollection::validate</span> &mdash; <span class="dc-title">Validates this collection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocollection.validate-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCollection::validate</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$scan_data</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
    ] ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocollection.validate-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">scan_data</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Only validate indices, not the base collection.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocollection.validate-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database&#039;s evaluation of this object.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongocollection.aggregate">MongoCollection::aggregate</a> — Perform an aggregation using the aggregation framework</li><li><a href="#mongocollection.aggregatecursor">MongoCollection::aggregateCursor</a> — Execute an aggregation pipeline command and retrieve results through a cursor</li><li><a href="#mongocollection.batchinsert">MongoCollection::batchInsert</a> — Inserts multiple documents into this collection</li><li><a href="#mongocollection.construct">MongoCollection::__construct</a> — Creates a new collection</li><li><a href="#mongocollection.count">MongoCollection::count</a> — Counts the number of documents in this collection</li><li><a href="#mongocollection.createdbref">MongoCollection::createDBRef</a> — Creates a database reference</li><li><a href="#mongocollection.createindex">MongoCollection::createIndex</a> — Creates an index on the specified field(s) if it does not already exist</li><li><a href="#mongocollection.deleteindex">MongoCollection::deleteIndex</a> — Deletes an index from this collection</li><li><a href="#mongocollection.deleteindexes">MongoCollection::deleteIndexes</a> — Delete all indices for this collection</li><li><a href="#mongocollection.distinct">MongoCollection::distinct</a> — Retrieve a list of distinct values for the given key across a collection</li><li><a href="#mongocollection.drop">MongoCollection::drop</a> — Drops this collection</li><li><a href="#mongocollection.ensureindex">MongoCollection::ensureIndex</a> — Creates an index on the specified field(s) if it does not already exist</li><li><a href="#mongocollection.find">MongoCollection::find</a> — Queries this collection, returning a MongoCursor
    for the result set</li><li><a href="#mongocollection.findandmodify">MongoCollection::findAndModify</a> — Update a document and return it</li><li><a href="#mongocollection.findone">MongoCollection::findOne</a> — Queries this collection, returning a single element</li><li><a href="#mongocollection.get">MongoCollection::__get</a> — Gets a collection</li><li><a href="#mongocollection.getdbref">MongoCollection::getDBRef</a> — Fetches the document pointed to by a database reference</li><li><a href="#mongocollection.getindexinfo">MongoCollection::getIndexInfo</a> — Returns information about indexes on this collection</li><li><a href="#mongocollection.getname">MongoCollection::getName</a> — Returns this collection's name</li><li><a href="#mongocollection.getreadpreference">MongoCollection::getReadPreference</a> — Get the read preference for this collection</li><li><a href="#mongocollection.getslaveokay">MongoCollection::getSlaveOkay</a> — Get slaveOkay setting for this collection</li><li><a href="#mongocollection.getwriteconcern">MongoCollection::getWriteConcern</a> — Get the write concern for this collection</li><li><a href="#mongocollection.group">MongoCollection::group</a> — Performs an operation similar to SQL's GROUP BY command</li><li><a href="#mongocollection.insert">MongoCollection::insert</a> — Inserts a document into the collection</li><li><a href="#mongocollection.parallelcollectionscan">MongoCollection::parallelCollectionScan</a> — Returns an array of cursors to iterator over a full collection in parallel</li><li><a href="#mongocollection.remove">MongoCollection::remove</a> — Remove records from this collection</li><li><a href="#mongocollection.save">MongoCollection::save</a> — Saves a document to this collection</li><li><a href="#mongocollection.setreadpreference">MongoCollection::setReadPreference</a> — Set the read preference for this collection</li><li><a href="#mongocollection.setslaveokay">MongoCollection::setSlaveOkay</a> — Change slaveOkay setting for this collection</li><li><a href="#mongocollection.setwriteconcern">MongoCollection::setWriteConcern</a> — Set the write concern for this database</li><li><a href="#mongocollection.toindexstring">MongoCollection::toIndexString</a> — Converts keys specifying an index to its identifying string</li><li><a href="#mongocollection.--tostring">MongoCollection::__toString</a> — String representation of this collection</li><li><a href="#mongocollection.update">MongoCollection::update</a> — Update records based on a given criteria</li><li><a href="#mongocollection.validate">MongoCollection::validate</a> — Validates this collection</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongocursor" class="reference"><hr />
  
   <h1 class="title">The MongoCursor class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
    
    <div class="section" id="mongocursor.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      A cursor is used to iterate through the results of a database query.  For 
      example, to query the database and see all results, you could do:
      <div class="example" id="example-1663">
       <p><strong>Example #1 <strong class="classname">MongoCursor</strong> basic usage</strong></p>
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">iterator_to_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
     <p class="para">
      You don&#039;t generally create cursors using the 
      <strong class="classname">MongoCursor</strong> constructor, you get a new cursor by
      calling <span class="function"><a href="#mongocollection.find" class="function">MongoCollection::find()</a></span> (as shown above).
     </p>
     <p class="para">
      Suppose that, in the example above, <code class="literal">$collection</code> was a
      50GB collection.  We certainly wouldn&#039;t want to load that into memory all 
      at once, which is what a cursor is for: allowing the client to access the 
      collection in dribs and drabs.  
     </p>
     <p class="para">
      If we have a large result set, we can iterate through it, loading a few 
      megabytes of results into memory at a time.  For example, we could do:
      <div class="example" id="example-1664">
       <p><strong>Example #2 Iterating over <strong class="classname">MongoCursor</strong></strong></p>
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;to&nbsp;each&nbsp;document<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
      This will go through each document in the collection, loading and garbage 
      collecting documents as needed.
     </p>
     <p class="para">
      Note that this means that a cursor does not &quot;contain&quot; the database results, 
      it just manages them.  Thus, if you print a cursor (with, say, 
      <span class="function"><a href="#function.var-dump" class="function">var_dump()</a></span> or <span class="function"><a href="#function.print-r" class="function">print_r()</a></span>), you&#039;ll just 
      get the cursor object, not your documents.  To get the documents themselves, 
      you can use one of the methods shown above.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Cursor Stages</h2>
     <p class="para">
      A <strong class="classname">MongoCursor</strong> has two &quot;life stages&quot;: pre- and post-
      query. When a cursor is created, it has not yet contacted the database, so 
      it is in its pre-query state.  In this state, the client can further specify
      what they want the query to do, including adding limits, skips, sorts, and 
      more advanced options.
     </p>
     <p class="para">
      When the client attempts to get a result (by calling 
      <span class="function"><a href="#mongocursor.next" class="function">MongoCursor::next()</a></span>, directly or indirectly), the cursor
      moves into the post-query stage.  At this point, the query has been executed
      by the database and cannot be modified anymore.
     </p>
     <p class="para">
      <div class="example" id="example-1665">
       <p><strong>Example #3 Adding options to <strong class="classname">MongoCursor</strong></strong></p>
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;database&nbsp;has&nbsp;not&nbsp;yet&nbsp;been&nbsp;queried,&nbsp;so&nbsp;more&nbsp;search&nbsp;options&nbsp;can&nbsp;be&nbsp;added<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">());<br /></span><span style="color: #FF8000">//&nbsp;now&nbsp;database&nbsp;has&nbsp;been&nbsp;queried&nbsp;and&nbsp;more&nbsp;options&nbsp;cannot&nbsp;be&nbsp;added<br /><br />//&nbsp;so&nbsp;this&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception:<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">skip</span><span style="color: #007700">(</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
    </div>
    
  
    <div class="section" id="mongocursor.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoCursor</strong>
       </span>
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongocursorinterface" class="interfacename">MongoCursorInterface</a></span>
       </span>
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.iterator" class="interfacename">Iterator</a></span>
       </span>
       {</div>
      
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Static Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">static</span>
       <span class="type">boolean</span>
       <var class="varname">slaveOkay</var>
       <span class="initializer"> = <strong><code>FALSE</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">static</span>
       <span class="type">integer</span>
       <var class="varname">timeout</var>
       <span class="initializer"> = 30000</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.addoption" class="methodname">addOption</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$key</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.awaitdata" class="methodname">awaitData</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$wait</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.batchsize" class="methodname">batchSize</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.count" class="methodname">count</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$foundOnly</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
    ] ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.current" class="methodname">current</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.dead" class="methodname">dead</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">protected</span> <span class="methodname"><a href="#mongocursor.doquery" class="methodname">doQuery</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.explain" class="methodname">explain</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.fields" class="methodname">fields</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$f</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.getnext" class="methodname">getNext</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.getreadpreference" class="methodname">getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.hasnext" class="methodname">hasNext</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.hint" class="methodname">hint</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$index</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.immortal" class="methodname">immortal</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$liveForever</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.info" class="methodname">info</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.key" class="methodname">key</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type string|int">string|int</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.limit" class="methodname">limit</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.maxtimems" class="methodname">maxTimeMS</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.next" class="methodname">next</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.partial" class="methodname">partial</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$okay</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.reset" class="methodname">reset</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.rewind" class="methodname">rewind</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.setflag" class="methodname">setFlag</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$flag</code></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$set</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.setreadpreference" class="methodname">setReadPreference</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.skip" class="methodname">skip</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.slaveokay" class="methodname">slaveOkay</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$okay</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.snapshot" class="methodname">snapshot</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.sort" class="methodname">sort</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.tailable" class="methodname">tailable</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$tail</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.timeout" class="methodname">timeout</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursor.valid" class="methodname">valid</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
     }</div>
     
  
    </div>
  
    <div class="section">
     <h2 class="title">Static Variables</h2>
  
     <dl>
  
      
       <dt id="mongocursor.props.slaveokay"><var class="varname">slaveOkay</var></dt>
  
       <dd>
  
        <p class="para">
         If the query should have the &quot;slaveOkay&quot; flag set, which allows reads on
         the secondary (secondaries are, by default, just for backup and not
         queried). Can be overridden with <span class="function"><a href="#mongocursor.slaveokay" class="function">MongoCursor::slaveOkay()</a></span>.
        </p>
        <p class="para">
         This functionality is <em class="emphasis">deprecated</em>. Please use
         <a href="#mongo.readpreferences" class="xref">Read Preferences</a> instead.
        </p>
       </dd>
  
      
      
       <dt id="mongocursor.props.timeout"><var class="varname">timeout</var></dt>
  
       <dd>
  
        <p class="para">
         Set timeout in milliseconds for all database responses. Use
         <code class="literal">-1</code> to wait forever. Can be overridden with
         <span class="function"><a href="#mongocursor.timeout" class="function">MongoCursor::timeout()</a></span>. This does not cause the
         MongoDB server to cancel the operation; it only instructs the driver to
         stop waiting for a response and throw a
         <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> after a set time.
        </p>
       </dd>
  
      
     </dl>
  
    </div>
  
    <div class="section">
     <h2 class="title">See Also</h2>
     <p class="para">
      MongoDB core docs on <a href="https://docs.mongodb.com/manual/core/cursors/" class="link external">&raquo;&nbsp;cursors</a>.
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongocursor.addoption" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::addOption</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.4)</p><p class="refpurpose"><span class="refname">MongoCursor::addOption</span> &mdash; <span class="dc-title">Adds a top-level key/value pair to a query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.addoption-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::addOption</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$key</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     This is an advanced function and should not be used unless you know what 
     you&#039;re doing.
    </p>
    <p class="para">
     A query can optionally be nested in a &quot;query&quot; field if other options, such as
     a sort or hint, are given.  For instance, adding a sort causes the query 
     to become a subfield of a bigger query object, like:
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$query&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"query"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"orderby"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$sort</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </p>
    <p class="para">
     This method is for adding a top-level field to a query.  It makes the query a
     subobject (if it isn&#039;t already) and adds the key/value pair of your chosing
     to the top level.
    </p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      It cannot be used to add extra criteria to a query on the fly.  For instance,
      this <em class="emphasis">will not</em> work:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;NOT&nbsp;CORRECT<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$users</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">addOption</span><span style="color: #007700">(</span><span style="color: #DD0000">"name"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"joe"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">addOption</span><span style="color: #007700">(</span><span style="color: #DD0000">"age"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      This <em class="emphasis">does not</em> query for a user named &quot;joe&quot; with an age of 20.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.addoption-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">key</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fieldname to add.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">value</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Value to add.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.addoption-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.addoption-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.addoption-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1666">
     <p><strong>Example #1 Adding a comment with <span class="function"><strong>MongoCursor::addOption()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      MongoDB supports special options to be send to the server. The shell uses
      the <code class="literal">_addSpecial</code> option to send a
      <code class="literal">$comment</code> to the server. This comment will show up in
      the profiling log (for slow queries f.e.). In the PHP driver, you use the
      <span class="function"><strong>MongoCursor::addOption()</strong></span> method.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addOption</span><span style="color: #007700">(</span><span style="color: #DD0000">'$comment'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"This&nbsp;comment&nbsp;will&nbsp;show&nbsp;up&nbsp;in&nbsp;the&nbsp;profiling&nbsp;log"</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{&nbsp;</span><span style="color: #FF8000">/*&nbsp;empty&nbsp;*/&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  {
      &quot;op&quot; : &quot;query&quot;,
      &quot;ns&quot; : &quot;demo.demo&quot;,
      &quot;query&quot; : {
          &quot;$query&quot; : {
               
          },
          &quot;$comment&quot; : &quot;This comment will show up in the profiling log&quot;
      },
      &quot;cursorid&quot; : 168463566447,
      &quot;ntoreturn&quot; : 0,
      &quot;ntoskip&quot; : 0,
      &quot;nscanned&quot; : 101,
      &quot;nscannedObjects&quot; : 101,
      &quot;keyUpdates&quot; : 0,
      &quot;numYield&quot; : 0,
  …
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1667">
     <p><strong>Example #2 <span class="function"><strong>MongoCursor::addOption()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Using <span class="function"><a href="#mongocursor.skip" class="function">MongoCursor::skip()</a></span> to skip over millions of 
      results can become slow.  One way around this is to use 
      <code class="literal">$min</code> or <code class="literal">$max</code> options for the query.
      These can be handy, but they require an index on exactly the fields being 
      searched for.  This is an example of how to use <code class="literal">$min</code> as
      an alternative to <span class="function"><a href="#mongocursor.skip" class="function">MongoCursor::skip()</a></span>.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;make&nbsp;sure&nbsp;we&nbsp;have&nbsp;an&nbsp;index<br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ensureIndex</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"ts"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;you&nbsp;may&nbsp;have&nbsp;to&nbsp;modify&nbsp;this&nbsp;to&nbsp;run&nbsp;in&nbsp;a&nbsp;reasonable&nbsp;amount&nbsp;of&nbsp;time&nbsp;on&nbsp;slow&nbsp;<br />//&nbsp;machines&nbsp;(should&nbsp;take&nbsp;about&nbsp;30&nbsp;seconds&nbsp;on&nbsp;a&nbsp;good&nbsp;machine)<br /></span><span style="color: #007700">for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">30000000</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"ts"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"i"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">$now&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"now"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;find&nbsp;documents&nbsp;inserted&nbsp;in&nbsp;the&nbsp;last&nbsp;2&nbsp;seconds<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">addOption</span><span style="color: #007700">(</span><span style="color: #DD0000">'$min'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"ts"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$now</span><span style="color: #007700">-</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.awaitdata" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::awaitData</h1>
    <p class="verinfo">(PECL mongo &gt;=1.2.11)</p><p class="refpurpose"><span class="refname">MongoCursor::awaitData</span> &mdash; <span class="dc-title">Sets whether this cursor will wait for a while for a tailable cursor to return more data</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.awaitdata-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::awaitData</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$wait</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     This method is to be used with tailable cursors. If we are at the end of
     the data, block for a while rather than returning no data. After a timeout
     period, we do return as normal.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.awaitdata-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">wait</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If the cursor should wait for more data to become available.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.awaitdata-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.awaitdata-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.awaitdata-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1668">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::awaitData()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      In this example we tail the &quot;oplog&quot; and instead of sleeping during every
      iteration, we set the <span class="function"><strong>MongoCursor::awaitData()</strong></span> option.
      <span class="function"><a href="#mongocursor.hasnext" class="function">MongoCursor::hasNext()</a></span> will now block until there is
      more data available.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'mongodb://localhost:13000'</span><span style="color: #007700">,&nbsp;array(&nbsp;</span><span style="color: #DD0000">'replSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'seta'&nbsp;</span><span style="color: #007700">)&nbsp;);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">local</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'oplog.rs'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(&nbsp;array(&nbsp;</span><span style="color: #DD0000">'ns'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'demo.article'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'op'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'i'&nbsp;</span><span style="color: #007700">)&nbsp;);<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tailable</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">awaitData</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">);<br /><br />while&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasNext</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;we've&nbsp;read&nbsp;all&nbsp;the&nbsp;results,&nbsp;exit<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dead</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">()&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.awaitdata-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/tutorial/create-tailable-cursor/" class="link external">&raquo;&nbsp;tailable cursors</a>.
    </p>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongocursor.tailable" class="function" rel="rdfs-seeAlso">MongoCursor::tailable()</a> - Sets whether this cursor will be left open after fetching the last results</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.batchsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::batchSize</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.11)</p><p class="refpurpose"><span class="refname">MongoCursor::batchSize</span> &mdash; <span class="dc-title">Limits the number of elements returned in one batch</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.batchsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::batchSize</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     A cursor typically fetches a batch of result objects and store them
     locally. This method sets the batchSize value to configure the amount of
     documents retrieved from the server in one round trip. However, it will
     never return more documents than fit in the max batch size limit (usually
     4MB).  
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.batchsize-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">batchSize</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of results to return per batch. Each batch requires a
         round-trip to the server. 
        </p>
        <p class="para">
         If <code class="parameter">batchSize</code> is <em class="emphasis">2 or
         more</em>, it represents the size of each batch of objects retrieved.
         It can be adjusted to optimize performance and limit data transfer.
        </p>
        <p class="para">
         If <code class="parameter">batchSize</code> is <code class="literal">1</code> or negative, it
         will limit of number returned documents to the absolute value of batchSize,
         and the cursor will be closed. For example if
         batchSize is <code class="literal">-10</code>, then the server will return a maximum
         of 10 documents and as many as can fit in 4MB, then close the cursor.
        </p>
        <div class="warning"><strong class="warning">Warning</strong>
         <p class="para">
          A <code class="parameter">batchSize</code> of <code class="literal">1</code> is special, and
          means the same as <code class="literal">-1</code>, i.e. a value of
          <code class="literal">1</code> makes the cursor only capable of returning
          <em class="emphasis">one</em> document.
         </p>
        </div>
        <p class="para">
         Note that this feature is different from
         <span class="function"><a href="#mongocursor.limit" class="function">MongoCursor::limit()</a></span> in that documents must fit within a
         maximum size, and it removes the need to send a request to close the cursor
         server-side. The batch size can be changed even after a cursor is iterated,
         in which case the setting will apply on the next batch retrieval. 
        </p>
        <p class="para">
         This cannot override MongoDB&#039;s limit on the amount of data it will return to 
         the client (i.e., if you set batch size to 1,000,000,000, MongoDB will still 
         only return 4-16MB of results per batch). 
        </p>
        <p class="para">
         To ensure consistent behavior, the rules of
         <span class="function"><strong>MongoCursor::batchSize()</strong></span> and
         <span class="function"><a href="#mongocursor.limit" class="function">MongoCursor::limit()</a></span> behave a 
         little complex but work &quot;as expected&quot;.  The rules are: hard limits override 
         soft limits with preference given to <span class="function"><a href="#mongocursor.limit" class="function">MongoCursor::limit()</a></span>
         over <span class="function"><strong>MongoCursor::batchSize()</strong></span>.  After that, whichever is 
         set and lower than the other will take precedence. See below.
         section for some examples.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.batchsize-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.batchsize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1669">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::batchSize()</strong></span> and combinations with
     <span class="function"><a href="#mongocursor.limit" class="function">MongoCursor::limit()</a></span></strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;one&nbsp;batch,&nbsp;at&nbsp;most&nbsp;10&nbsp;items.&nbsp;The&nbsp;-10&nbsp;makes&nbsp;the&nbsp;server&nbsp;to&nbsp;return&nbsp;10&nbsp;items,<br />//&nbsp;and&nbsp;then&nbsp;remove&nbsp;the&nbsp;cursor.<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">20</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">batchSize</span><span style="color: #007700">(-</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;first&nbsp;batch:&nbsp;at&nbsp;most&nbsp;10&nbsp;items<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;first&nbsp;batch:&nbsp;at&nbsp;most&nbsp;10&nbsp;items<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">batchSize</span><span style="color: #007700">(</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;results&nbsp;are&nbsp;fetched&nbsp;in&nbsp;batches&nbsp;of&nbsp;10&nbsp;each,&nbsp;with&nbsp;a&nbsp;maximum&nbsp;of&nbsp;20&nbsp;items<br />//&nbsp;returned&nbsp;(that&nbsp;means&nbsp;two&nbsp;batches&nbsp;of&nbsp;10).<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">20</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">batchSize</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;results&nbsp;are&nbsp;fetched&nbsp;in&nbsp;batches&nbsp;of&nbsp;7&nbsp;each,&nbsp;with&nbsp;a&nbsp;maximum&nbsp;of&nbsp;30&nbsp;items<br />//&nbsp;returned&nbsp;(that&nbsp;means&nbsp;that&nbsp;the&nbsp;driver&nbsp;requests&nbsp;4&nbsp;batches&nbsp;of&nbsp;7,&nbsp;and&nbsp;one&nbsp;batch<br />//&nbsp;of&nbsp;2).<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">30</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">batchSize</span><span style="color: #007700">(</span><span style="color: #0000BB">7</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.batchsize-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/method/cursor.batchSize/" class="link external">&raquo;&nbsp;batchSize</a>.
    </p>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongocursor.limit" class="function" rel="rdfs-seeAlso">MongoCursor::limit()</a> - Limits the number of results returned</span></li>
      <li class="member"><span class="methodname"><a href="#mongocursorinterface.batchsize" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::batchSize()</a> - Limits the number of elements returned in one batch</span></li>
     </ul>
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocursor.batchsize-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.5</td>
         <td>
          <p class="para">
           Before 1.4.5, this method would throw an
           <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the cursor had already
           started iterating.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::__construct</span> &mdash; <span class="dc-title">Create a new cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">connection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database connection.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">ns</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Full name of database and collection.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">query</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database query.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">fields</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fields to return.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the new cursor.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.count" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::count</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.2)</p><p class="refpurpose"><span class="refname">MongoCursor::count</span> &mdash; <span class="dc-title">Counts the number of results for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.count-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::count</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$foundOnly</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
    ] ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     This method does not affect the state of the cursor: if you haven&#039;t queried 
     yet, you can still apply limits, skips, etc.  If you have started iterating
     through results, it will not move the current position of the cursor.  If you
     have exhausted the cursor, it will not reset it.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.count-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">foundOnly</code>
      </dt>
  
      <dd>
  
       <p class="para">
        Send cursor limit and skip information to the count function, if applicable.
       </p>
      </dd>
  
        
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.count-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     The number of documents returned by this cursor&#039;s query.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.count-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1670">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::count()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">3</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(3)
  int(3)
  int(3)
  int(2)
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.count-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the 
     database.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.current" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::current</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::current</span> &mdash; <span class="dc-title">Returns the current element</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.current-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::current</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This returns <strong><code>NULL</code></strong> until <span class="function"><a href="#mongocursor.next" class="function">MongoCursor::next()</a></span> is called.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.current-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.current-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     The current result document as an associative array. <strong><code>NULL</code></strong> will be returned
     if there is no result.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.current-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.current" class="methodname" rel="rdfs-seeAlso">Iterator::current()</a> - Return the current element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.dead" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::dead</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.6)</p><p class="refpurpose"><span class="refname">MongoCursor::dead</span> &mdash; <span class="dc-title">Checks if there are results that have not yet been sent from the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.dead-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::dead</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     The database sends responses in batches of documents, up to 4MB of documents
     per response. This method checks if the database has more batches or if the 
     result set has been exhausted.
    </p>
    <p class="para">
     A cursor being &quot;dead&quot; does not mean that 
     <span class="function"><a href="#mongocursor.hasnext" class="function">MongoCursor::hasNext()</a></span> will return <strong><code>FALSE</code></strong>, it only means
     that the database is done sending results to the client. The client should
     continue iterating through results until 
     <span class="function"><a href="#mongocursor.hasnext" class="function">MongoCursor::hasNext()</a></span> is <strong><code>FALSE</code></strong>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.dead-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.dead-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if there are more results that have not yet been sent to the
     client, and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.dead-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocursorinterface.dead" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::dead()</a> - Checks if there are results that have not yet been sent from the database</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.doquery" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::doQuery</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0 &lt;1.6.0)</p><p class="refpurpose"><span class="refname">MongoCursor::doQuery</span> &mdash; <span class="dc-title">Execute the query</span></p>
  
   </div>
   
   <div class="refsect1 description" id="refsect1-mongocursor.doquery-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">protected</span> <span class="methodname"><strong>MongoCursor::doQuery</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      Please do not use me.
     </p>
    </div>
    <p class="para">
     This function actually queries the database.  All queries and commands go 
     through this function.  Thus, this function can be overridden to provide 
     custom query handling.  
    </p>
    <p class="para">
     This handles serializing your query, sending it to the database, receiving a 
     response, and deserializing it.  Thus, if you are planning to override this,
     your code should probably call out to the original to use the existing
     functionality (see the example below).
    </p>
   </div>
  
   
   <div class="refsect1 parameters" id="refsect1-mongocursor.doquery-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">This function has no parameters.</p>
   </div>
  
   
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.doquery-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     <strong><code>NULL</code></strong>.
    </p>
   </div>
  
   
   <div class="refsect1 errors" id="refsect1-mongocursor.doquery-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the 
     database.
    </p>
   </div>
  
   
   <div class="refsect1 changelog" id="refsect1-mongocursor.doquery-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.doquery-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1671">
      <p><strong>Example #1 <span class="function"><strong>MongoCursor::doQuery()</strong></span> example</strong></p>
      <div class="example-contents"><p>
       You could override this function to attempt a query on a secondary and, if
       that fails, try it again on the primary.
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyCursor&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">MongoCursor&nbsp;</span><span style="color: #007700">{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;</span><span style="color: #0000BB">doQuery</span><span style="color: #007700">()&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">slaveOkay</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">MongoCursor</span><span style="color: #007700">::</span><span style="color: #0000BB">doQuery</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(</span><span style="color: #0000BB">MongoCursorException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">slaveOkay</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">MongoCursor</span><span style="color: #007700">::</span><span style="color: #0000BB">doQuery</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
   </div>
   
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.explain" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::explain</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.2)</p><p class="refpurpose"><span class="refname">MongoCursor::explain</span> &mdash; <span class="dc-title">Return an explanation of the query, often useful for optimization and debugging</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.explain-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::explain</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.explain-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.explain-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns an explanation of the query.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-mongocursor.explain-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1672">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::explain()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"x"</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"y"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"z"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">))-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">4</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">skip</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">explain</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(8) {
    [&quot;cursor&quot;]=&gt;
    string(15) &quot;BtreeCursor x_1&quot;
    [&quot;startKey&quot;]=&gt;
    array(1) {
      [&quot;x&quot;]=&gt;
      int(1)
    }
    [&quot;endKey&quot;]=&gt;
    array(1) {
      [&quot;x&quot;]=&gt;
      int(1)
    }
    [&quot;nscanned&quot;]=&gt;
    float(4)
    [&quot;n&quot;]=&gt;
    int(4)
    [&quot;scanAndOrder&quot;]=&gt;
    int(1)
    [&quot;millis&quot;]=&gt;
    int(3)
    [&quot;allPlans&quot;]=&gt;
    array(2) {
      [0]=&gt;
      array(3) {
        [&quot;cursor&quot;]=&gt;
        string(15) &quot;BtreeCursor x_1&quot;
        [&quot;startKey&quot;]=&gt;
        array(1) {
          [&quot;x&quot;]=&gt;
          int(1)
        }
        [&quot;endKey&quot;]=&gt;
        array(1) {
          [&quot;x&quot;]=&gt;
          int(1)
        }
      }
      [1]=&gt;
      array(3) {
        [&quot;cursor&quot;]=&gt;
        string(11) &quot;BasicCursor&quot;
        [&quot;startKey&quot;]=&gt;
        array(0) {
        }
        [&quot;endKey&quot;]=&gt;
        array(0) {
        }
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
   <div class="refsect1 errors" id="refsect1-mongocursor.explain-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the 
     database.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.explain-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/method/cursor.explain/" class="link external">&raquo;&nbsp;explain</a>.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.fields" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::fields</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.6)</p><p class="refpurpose"><span class="refname">MongoCursor::fields</span> &mdash; <span class="dc-title">Sets the fields for a query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.fields-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::fields</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$f</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     Fields are specified by <code class="literal">&quot;fieldname&quot; : bool</code>.  <strong><code>TRUE</code></strong> 
     indicates that a field should be returned, <strong><code>FALSE</code></strong> indicates that it should
     not be returned.  You can also use 1 and 0 instead of <strong><code>TRUE</code></strong> and <strong><code>FALSE</code></strong>.
    </p>
    <p class="para">
     Thus, to return only the &quot;summary&quot; field, one could say:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fields</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"summary"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     To return all fields except the &quot;hidden&quot; field:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fields</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"hidden"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.fields-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">f</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fields to return (or not return).
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.fields-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.fields-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started
     iterating or a scalar argument is given.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.getnext" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::getNext</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::getNext</span> &mdash; <span class="dc-title">Advances the cursor to the next result, and returns that result</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.getnext-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::getNext</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
  
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      <span class="methodname"><strong>MongoCursor::getNext()</strong></span> is an alias of <span class="methodname"><a href="#mongocursor.next" class="methodname">MongoCursor::next()</a></span>.
     </p>
    </p></blockquote>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.getreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::getReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.3)</p><p class="refpurpose"><span class="refname">MongoCursor::getReadPreference</span> &mdash; <span class="dc-title">Get the read preference for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.getreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::getReadPreference</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.getreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.getreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the read preference. The array contains the values <code class="literal">type</code> for the string read preference mode (corresponding to the <a href="#class.mongoclient" class="classname">MongoClient</a> constants), and <code class="literal">tagsets</code> containing a list of all tag set criteria. If no tag sets were specified, <code class="literal">tagsets</code> will not be present in the array.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.getreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1673">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCursor::getReadPreference()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">users</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(),<br />));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadPreference</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;type&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;tagsets&quot;]=&gt;
    array(3) {
      [0]=&gt;
      array(2) {
        [&quot;dc&quot;]=&gt;
        string(4) &quot;east&quot;
        [&quot;use&quot;]=&gt;
        string(9) &quot;reporting&quot;
      }
      [1]=&gt;
      array(1) {
        [&quot;dc&quot;]=&gt;
        string(7) &quot;west&quot;
      }
      [2]=&gt;
      array(0) {
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.getreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocursor.setreadpreference" class="function" rel="rdfs-seeAlso">MongoCursor::setReadPreference()</a> - Set the read preference for this query</span></li>
     <li class="member"><span class="function"><a href="#mongocursorinterface.getreadpreference" class="function" rel="rdfs-seeAlso">MongoCursorInterface::getReadPreference()</a> - Get the read preference for this query</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocursor.hasnext" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::hasNext</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::hasNext</span> &mdash; <span class="dc-title">Checks if there are any more elements in this cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.hasnext-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::hasNext</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.hasnext-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.hasnext-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns if there is another element.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.hasnext-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach 
     the database and <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the
     timeout is exceeded.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.hint" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::hint</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::hint</span> &mdash; <span class="dc-title">Gives the database a hint about the query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.hint-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::hint</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$index</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.hint-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">index</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Index to use for the query. If a string is passed, it should correspond
         to an index name. If an array or object is passed, it should correspond
         to the specification used to create the index (i.e. the first argument
         to <span class="function"><a href="#mongocollection.ensureindex" class="function">MongoCollection::ensureIndex()</a></span>).
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.hint-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.hint-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocursor.hint-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.0</td>
         <td>
          <p class="para">
           The <code class="parameter">index</code> argument now supports index names as
           string values. In versions before 1.4.0, only array or object values
           were accepted.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.immortal" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::immortal</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.1)</p><p class="refpurpose"><span class="refname">MongoCursor::immortal</span> &mdash; <span class="dc-title">Sets whether this cursor will timeout</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.immortal-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::immortal</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$liveForever</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     After remaining idle on the server for some amount of time, cursors, by
     default, &quot;die.&quot;  This is generally the behavior one wants. The database
     cleans up a cursor once all of its results have been sent to the client,
     but if the client doesn&#039;t request all of the results, the cursor will
     languish there, taking up resources.  Thus, after a few minutes, the cursor
     &quot;times out&quot; and the database assumes the client has gotten everything it
     needs and cleans up its the cursor&#039;s resources.
    </p>
    <p class="para">
     If, for some reason, you need a cursor to hang around for a long time, you
     can prevent the database from cleaning it up by using this method.
     However, if you make a cursor immortal, you need to iterate through all of
     its results (or at least until <span class="methodname"><a href="#mongocursor.dead" class="methodname">MongoCursor::dead()</a></span>
     returns <strong><code>TRUE</code></strong>) or the cursor will hang around the database
     <em class="emphasis">forever</em>, taking up resources.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.immortal-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">liveForever</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If the cursor should be immortal.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
   
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.immortal-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.immortal-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.info" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::info</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.5)</p><p class="refpurpose"><span class="refname">MongoCursor::info</span> &mdash; <span class="dc-title">Gets information about the cursor&#039;s creation and iteration</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.info-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::info</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This can be called before or after the cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.info-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.info-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the namespace, batch size, limit, skip, flags, query, and projected
     fields for this cursor. If the cursor has started iterating, additional
     information about iteration and the connection will be included.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocursor.info-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.1.0</td>
         <td>
          Added a number of other fields, including <code class="literal">id</code> (the 
          cursor id), <code class="literal">at</code> (the driver&#039;s counter of which 
          document is current), <code class="literal">numReturned</code> (the number 
          returned by the server in the current batch), and 
          <code class="literal">server</code> (which server the query was sent 
          to—useful in conjunction with
          <a href="#mongo.readpreferences" class="xref">Read Preferences</a>.
         </td>
        </tr>
  
        <tr>
         <td>1.0.10</td>
         <td>
          Added <code class="literal">started_iterating</code> field, a boolean indicating
          if cursor is pre- or post-query.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.info-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1674">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::info()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"x"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"y"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">));<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Before&nbsp;iteration&nbsp;started:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">info</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\nAfter&nbsp;iteration&nbsp;started:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">info</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Before iteration started:
  array(8) {
    [&quot;ns&quot;]=&gt;
    string(8) &quot;test.foo&quot;
    [&quot;limit&quot;]=&gt;
    int(0)
    [&quot;batchSize&quot;]=&gt;
    int(0)
    [&quot;skip&quot;]=&gt;
    int(0)
    [&quot;flags&quot;]=&gt;
    int(0)
    [&quot;query&quot;]=&gt;
    array(1) {
      [&quot;x&quot;]=&gt;
      int(4)
    }
    [&quot;fields&quot;]=&gt;
    array(1) {
      [&quot;y&quot;]=&gt;
      int(0)
    }
    [&quot;started_iterating&quot;]=&gt;
    bool(false)
  }
  
  After iteration started:
  array(15) {
    [&quot;ns&quot;]=&gt;
    string(8) &quot;test.foo&quot;
    [&quot;limit&quot;]=&gt;
    int(0)
    [&quot;batchSize&quot;]=&gt;
    int(0)
    [&quot;skip&quot;]=&gt;
    int(0)
    [&quot;flags&quot;]=&gt;
    int(0)
    [&quot;query&quot;]=&gt;
    array(1) {
      [&quot;x&quot;]=&gt;
      int(4)
    }
    [&quot;fields&quot;]=&gt;
    array(1) {
      [&quot;y&quot;]=&gt;
      int(0)
    }
    [&quot;started_iterating&quot;]=&gt;
    bool(true)
    [&quot;id&quot;]=&gt;
    int(0)
    [&quot;at&quot;]=&gt;
    int(0)
    [&quot;numReturned&quot;]=&gt;
    int(1)
    [&quot;server&quot;]=&gt;
    string(25) &quot;localhost:27017;-;.;26450&quot;
    [&quot;host&quot;]=&gt;
    string(9) &quot;localhost&quot;
    [&quot;port&quot;]=&gt;
    int(27017)
    [&quot;connection_type_desc&quot;]=&gt;
    string(10) &quot;STANDALONE&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.info-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocursorinterface.info" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::info()</a> - Gets information about the cursor's creation and iteration</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.key" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::key</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::key</span> &mdash; <span class="dc-title">Returns the current result&#039;s _id, or its index within the result set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.key-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::key</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type string|int">string|int</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.key-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.key-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     The current result&#039;s <code class="literal">_id</code> as a string. If the result
     has no <code class="literal">_id</code>, its numeric index within the result set will
     be returned as an integer.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.key-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.key" class="methodname" rel="rdfs-seeAlso">Iterator::key()</a> - Return the key of the current element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.limit" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::limit</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::limit</span> &mdash; <span class="dc-title">Limits the number of results returned</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.limit-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::limit</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.limit-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">num</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of results to return.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.limit-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.limit-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.limit-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/method/cursor.limit/" class="link external">&raquo;&nbsp;limit</a>.</li>
      <li class="member"><span class="function"><a href="#mongocursor.batchsize" class="function" rel="rdfs-seeAlso">MongoCursor::batchSize()</a> - Limits the number of elements returned in one batch</span></li>
      <li class="member"><span class="methodname"><a href="#mongocursor.skip" class="methodname" rel="rdfs-seeAlso">MongoCursor::skip()</a> - Skips a number of results</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.maxtimems" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::maxTimeMS</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCursor::maxTimeMS</span> &mdash; <span class="dc-title">Sets a server-side timeout for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.maxtimems-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::maxTimeMS</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     Specifies a cumulative time limit in milliseconds to be allowed by the server
     for processing operations on the cursor.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.maxtimems-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">ms</code>
      </dt>
  
      <dd>
  
       <p class="para">
        Specifies a cumulative time limit in milliseconds to be allowed by the
        server for processing operations on the cursor.
       </p>
      </dd>
  
        
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.maxtimems-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.maxtimems-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started
     iterating.
    </p>
    <p class="para">
     Causes methods that fetch results to throw a
     <a href="#class.mongoexecutiontimeoutexception" class="classname">MongoExecutionTimeoutException</a> if the query takes
     longer than the specified number of milliseconds in processing time.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.maxtimems-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1675">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCursor::maxTimeMS()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      In the following example, the server will abort the query if the cursor
      requires more than two seconds in processing time to return its results.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maxTimeMS</span><span style="color: #007700">(</span><span style="color: #0000BB">2000</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">iterator_to_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoExecutionTimeoutException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"query&nbsp;took&nbsp;too&nbsp;long!"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongocursor.maxtimems-notes">
    <h3 class="title">Notes</h3>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
       Unlike <span class="methodname"><a href="#mongocursor.timeout" class="methodname">MongoCursor::timeout()</a></span>, which specifies a
       client-side timeout, <span class="methodname"><strong>MongoCursor::maxTimeMS()</strong></span> can be
       used to cause the MongoDB server to abort long-running queries. This
       timeout is cumulative for the lifetime of the cursor (i.e. each batch will
       contribute to this time limit). The timeout only considers processing time;
       idle time is not considered.
     </p>
    </div>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.next" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::next</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::next</span> &mdash; <span class="dc-title">Advances the cursor to the next result, and returns that result</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.next-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::next</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.next-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.next-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the next document.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.next-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the
     database and <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the
     timeout is exceeded.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.next-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.next" class="methodname" rel="rdfs-seeAlso">Iterator::next()</a> - Move forward to next element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.partial" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::partial</h1>
    <p class="verinfo">(PECL mongo &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoCursor::partial</span> &mdash; <span class="dc-title">If this query should fetch partial results from <em class="emphasis">mongos</em> if a shard is down</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.partial-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::partial</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$okay</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     This option allows <em class="emphasis">mongos</em> to send partial query results 
     if a shard is unreachable.  This is only applicable when running a sharded 
     MongoDB cluster and connecting to a <em class="emphasis">mongos</em>.
    </p>
    <p class="para">
     If a shard goes down and a query needs to be sent to that shard, 
     <em class="emphasis">mongos</em> will return the results (if any) from shards it
     already contacted, then an error message that it could not reach the shard
     (a <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> in PHP).  If you would like to
     get whatever results <em class="emphasis">mongos</em> can provide and no 
     exception, you can use this method.  Note that this means that you won&#039;t have
     an indication that a shard is down in your query response.
    </p>
    <p class="para">
     This has no effect on the query if all shards are reachable.  This flag was
     implemented in MongoDB version 1.7.5, so will only work with that version and
     higher.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.partial-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">okay</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If receiving partial results is okay.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
   
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.partial-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.partial-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.reset" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::reset</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::reset</span> &mdash; <span class="dc-title">Clears the cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.reset-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::reset</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.reset-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.reset-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     <strong><code>NULL</code></strong>.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.rewind" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::rewind</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::rewind</span> &mdash; <span class="dc-title">Returns the cursor to the beginning of the result set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.rewind-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::rewind</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     This is identical to the function:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reset</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.rewind-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.rewind-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     <strong><code>NULL</code></strong>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.rewind-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the
     database and <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the
     timeout is exceeded.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.rewind-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.rewind" class="methodname" rel="rdfs-seeAlso">Iterator::rewind()</a> - Rewind the Iterator to the first element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.setflag" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::setFlag</h1>
    <p class="verinfo">(PECL mongo &gt;=1.2.11)</p><p class="refpurpose"><span class="refname">MongoCursor::setFlag</span> &mdash; <span class="dc-title">Sets arbitrary flags in case there is no method available the specific flag</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.setflag-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::setFlag</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$flag</code></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$set</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     The <a href="#class.mongocursor" class="classname">MongoCursor</a> class has several methods for
     setting flags on the query object. This method is available in case the
     MongoDB wire protocol has acquired a new flag, and the driver has not been
     updated with a method for this new flag. In all other cases, the method
     should be used. See the &quot;See also&quot; section for available methods.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.setflag-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">flag</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Which flag to set. You can not set flag 6 (EXHAUST) as the driver does
         not know how to handle them. You will get a warning if you try to use
         this flag. For available flags, please refer to the wire protocol
         <a href="https://docs.mongodb.com/meta-driver/latest/legacy/mongodb-wire-protocol/#MongoWireProtocol-OPQUERY" class="link external">&raquo;&nbsp;documentation</a>.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">set</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Whether the flag should be set (<strong><code>TRUE</code></strong>) or unset (<strong><code>FALSE</code></strong>).
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
   
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.setflag-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.setflag-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Shows a warning when an unsupport flag is attempted to be set.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocursor.setflag-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.0</td>
         <td>
          Support for flag 3 (OPLOG_REPLAY) is added. Versions before 1.4.0
          would throw a warning saying that the flag is unsupported.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.setflag-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1676">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::setFlag()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'mongodb://localhost:13000'</span><span style="color: #007700">,&nbsp;array(&nbsp;</span><span style="color: #DD0000">'replSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'seta'&nbsp;</span><span style="color: #007700">)&nbsp;);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">local</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'oplog.rs'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(&nbsp;array(&nbsp;</span><span style="color: #DD0000">'ns'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'demo.article'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'op'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'i'&nbsp;</span><span style="color: #007700">)&nbsp;);<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFlag</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;sets&nbsp;the&nbsp;tailable&nbsp;flag<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFlag</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;sets&nbsp;the&nbsp;await&nbsp;data&nbsp;flag<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.setflag-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongocursor.tailable" class="function" rel="rdfs-seeAlso">MongoCursor::tailable()</a> - Sets whether this cursor will be left open after fetching the last results</span></li>
      <li class="member"><span class="function"><a href="#mongocursor.immortal" class="function" rel="rdfs-seeAlso">MongoCursor::immortal()</a> - Sets whether this cursor will timeout</span></li>
      <li class="member"><span class="function"><a href="#mongocursor.awaitdata" class="function" rel="rdfs-seeAlso">MongoCursor::awaitData()</a> - Sets whether this cursor will wait for a while for a tailable cursor to return more data</span></li>
      <li class="member"><span class="function"><a href="#mongocursor.partial" class="function" rel="rdfs-seeAlso">MongoCursor::partial()</a> - If this query should fetch partial results from mongos if a shard is down</span></li>
      <li class="member">MongoDB core docs on<a href="https://docs.mongodb.com/meta-driver/latest/legacy/mongodb-wire-protocol/#MongoWireProtocol-OPQUERY" class="link external">&raquo;&nbsp;wire protocol query flags</a></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.setreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::setReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.3)</p><p class="refpurpose"><span class="refname">MongoCursor::setReadPreference</span> &mdash; <span class="dc-title">Set the read preference for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.setreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::setReadPreference</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.setreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">read_preference</code></dt>
  <dd>
  <p class="para">The read preference mode: <strong><code>MongoClient::RP_PRIMARY</code></strong>, <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>, <strong><code>MongoClient::RP_SECONDARY</code></strong>, <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong>, or <strong><code>MongoClient::RP_NEAREST</code></strong>.</p></dd>
  <dt>
  <code class="parameter">tags</code></dt>
  <dd>
  <p class="para">An array of zero or more tag sets, where each tag set is itself an array of criteria used to match tags on replica set members.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.setreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.setreadpreference-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if either parameter is invalid, or if one or more tag sets are provided with the <strong><code>MongoClient::RP_PRIMARY</code></strong> read preference mode.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.setreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1677">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCursor::setReadPreference()</strong></span> tag set array syntax example
     </strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">users</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center&nbsp;also&nbsp;used&nbsp;for&nbsp;reporting,<br />//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;server&nbsp;in&nbsp;the&nbsp;"west"&nbsp;data&nbsp;center<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_NEAREST</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'</span><span style="color: #007700">),<br />));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.setreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocursor.getreadpreference" class="function" rel="rdfs-seeAlso">MongoCursor::getReadPreference()</a> - Get the read preference for this query</span></li>
     <li class="member"><span class="function"><a href="#mongocursorinterface.setreadpreference" class="function" rel="rdfs-seeAlso">MongoCursorInterface::setReadPreference()</a> - Set the read preference for this query</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocursor.skip" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::skip</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::skip</span> &mdash; <span class="dc-title">Skips a number of results</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.skip-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::skip</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.skip-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">num</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of results to skip.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.skip-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.skip-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.skip-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongocursor.limit" class="methodname" rel="rdfs-seeAlso">MongoCursor::limit()</a> - Limits the number of results returned</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.slaveokay" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::slaveOkay</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.4)</p><p class="refpurpose"><span class="refname">MongoCursor::slaveOkay</span> &mdash; <span class="dc-title">Sets whether this query can be done on a secondary [deprecated]</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.slaveokay-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::slaveOkay</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$okay</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      This method is deprecated since version 1.5.0. Instead, please use
      <span class="methodname"><a href="#mongocursor.setreadpreference" class="methodname">MongoCursor::setReadPreference()</a></span> and <a href="#mongo.readpreferences" class="xref">Read Preferences</a>.
     </p>
    </div>
    <p class="para">
     Calling this will make the driver route reads to secondaries if:
     <ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        You are using a replica set, and
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        You created a <a href="#class.mongoclient" class="classname">MongoClient</a> instance using the option
        <code class="literal">&quot;replicaSet&quot; =&gt; &quot;setName&quot;</code>, and
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        There is a healthy secondary that can be reached by the driver.
       </span>
      </li>
     </ul>
     You can check which server was used for this query by calling 
     <span class="function"><a href="#mongocursor.info" class="function">MongoCursor::info()</a></span> after running the query.  It&#039;s
     <code class="literal">server</code> field will show which server the query was sent to.
    </p>
    <p class="para">
     Note that you should use this function even if you do not use the automatic
     routing to secondaries. If you connect directly to a secondary in a replica
     set, you still need to call this function, which basically tells the database
     that you are aware that you might be getting older data and you&#039;re okay with
     that. If you do not call this, you&#039;ll get &quot;not master&quot; errors when you try to
     query.
    </p>
    <p class="para">
     This method will override the static class variable 
     <var class="varname">MongoCursor::$slaveOkay</var>.  It will also override 
     <span class="function"><a href="#mongo.setslaveokay" class="function">Mongo::setSlaveOkay()</a></span>, 
     <span class="function"><a href="#mongodb.setslaveokay" class="function">MongoDB::setSlaveOkay()</a></span> and
     <span class="function"><a href="#mongocollection.setslaveokay" class="function">MongoCollection::setSlaveOkay()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.slaveokay-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">okay</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If it is okay to query the secondary.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
   
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.slaveokay-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.slaveokay-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.slaveokay-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocursor.intro-example">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::slaveOkay()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />MongoCursor</span><span style="color: #007700">::</span><span style="color: #0000BB">$slaveOkay&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;cannot&nbsp;query&nbsp;secondary<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;can&nbsp;query&nbsp;secondary<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">slaveOkay</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">MongoCursor</span><span style="color: #007700">::</span><span style="color: #0000BB">$slaveOkay&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;can&nbsp;query&nbsp;secondary<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;cannot&nbsp;query&nbsp;secondary<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">slaveOkay</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.slaveokay-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
     <li class="member"><span class="methodname"><a href="#mongocursor.setreadpreference" class="methodname" rel="rdfs-seeAlso">MongoCursor::setReadPreference()</a> - Set the read preference for this query</span></li>
     <li class="member"><span class="methodname"><a href="#mongocursor.getreadpreference" class="methodname" rel="rdfs-seeAlso">MongoCursor::getReadPreference()</a> - Get the read preference for this query</span></li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongocursor.slaveokay-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          This method has been deprecated in favour of
          <span class="methodname"><a href="#mongocursor.setreadpreference" class="methodname">MongoCursor::setReadPreference()</a></span> and <a href="#mongo.readpreferences" class="xref">Read Preferences</a>.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.snapshot" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::snapshot</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.4)</p><p class="refpurpose"><span class="refname">MongoCursor::snapshot</span> &mdash; <span class="dc-title">Use snapshot mode for the query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.snapshot-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::snapshot</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     Use snapshot mode for the query. Snapshot mode ensures that a document will
     not be returned more than once because an intervening write operation results
     in a move of the document. Documents inserted or deleted during the lifetime
     of the cursor may or may not be returned, irrespective of snapshot mode.
    </p>
    <p class="para">
     Queries with short responses (less than 1MB) are always effectively
     snapshotted.
    </p>
    <p class="para">
     Snapshot mode may not be used with sorting, explicit hints, or queries on
     sharded collections.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.snapshot-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
   
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.snapshot-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.snapshot-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.snapshot-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/operator/meta/snapshot/" class="link external">&raquo;&nbsp;$snapshot operator</a>.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.sort" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::sort</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::sort</span> &mdash; <span class="dc-title">Sorts the results by given fields</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.sort-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::sort</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.sort-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">fields</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of fields by which to sort. Each element in the array has as
         key the field name, and as value either <code class="literal">1</code> for
         ascending sort, or <code class="literal">-1</code> for descending sort.
        </p>
        <p class="para">
         Each result is first sorted on the first field in the array, then (if
         it exists) on the second field in the array, etc. This means that the
         order of the fields in the <code class="parameter">fields</code> array is
         important. See also the examples section.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
   
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.sort-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the same cursor that this method was called on.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.sort-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.sort-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1679">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::sort()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Sort&nbsp;on&nbsp;field&nbsp;x,&nbsp;ascending<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;order&nbsp;in&nbsp;the&nbsp;associative&nbsp;array&nbsp;is&nbsp;important.&nbsp;For&nbsp;instance,&nbsp;these&nbsp;two<br />//&nbsp;examples&nbsp;will&nbsp;yield&nbsp;different&nbsp;results:<br /><br />//&nbsp;Sort&nbsp;on&nbsp;date&nbsp;ascending&nbsp;and&nbsp;age&nbsp;descending<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'date'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'age'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;Sort&nbsp;on&nbsp;age&nbsp;descending&nbsp;and&nbsp;date&nbsp;ascending<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'age'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'date'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.tailable" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::tailable</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.4)</p><p class="refpurpose"><span class="refname">MongoCursor::tailable</span> &mdash; <span class="dc-title">Sets whether this cursor will be left open after fetching the last results</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.tailable-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::tailable</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$tail</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     Mongo has a feature known as tailable cursors which are similar to the Unix 
     &quot;tail -f&quot; command.
    </p>
    <p class="para">
     Tailable means cursor is not closed when the last data is retrieved.  Rather,
     the cursor marks the final object&#039;s position.  you can resume using the 
     cursor later, from where it was located, if more data were received.
    </p>
    <p class="para">
     Like any &quot;latent cursor&quot;, the cursor may become invalid at some point -- for 
     example if that final object it references were deleted.  Thus, you should be
     prepared to requery if the cursor is <span class="function"><a href="#mongocursor.dead" class="function">MongoCursor::dead()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.tailable-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">tail</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If the cursor should be tailable.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
   
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.tailable-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.tailable-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if this cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.tailable-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocursor.stages.adding-options">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::tailable()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">tailable</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><br />while&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasNext</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;we've&nbsp;read&nbsp;all&nbsp;the&nbsp;results,&nbsp;exit<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dead</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;read&nbsp;all&nbsp;results&nbsp;so&nbsp;far,&nbsp;wait&nbsp;for&nbsp;more<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$results</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.tailable-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     MongoDB core docs on <a href="https://docs.mongodb.com/manual/tutorial/create-tailable-cursor/" class="link external">&raquo;&nbsp;tailable cursors</a>.
    </p>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongocursor.awaitdata" class="function" rel="rdfs-seeAlso">MongoCursor::awaitData()</a> - Sets whether this cursor will wait for a while for a tailable cursor to return more data</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.timeout" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::timeout</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.3)</p><p class="refpurpose"><span class="refname">MongoCursor::timeout</span> &mdash; <span class="dc-title">Sets a client-side timeout for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.timeout-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::timeout</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocursor" class="type MongoCursor">MongoCursor</a></span></div>
  
    <p class="para rdfs-comment">
     A timeout can be set at any time and will affect subsequent queries on the 
     cursor, including fetching more results from the database.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.timeout-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">ms</code>
      </dt>
  
      <dd>
  
       <p class="para">
        The number of milliseconds for the cursor to wait for a response. Use
        <code class="literal">-1</code> to wait forever. By default, the cursor will wait
        <var class="varname">30000</var> milliseconds (30 seconds).
       </p>
      </dd>
  
        
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.timeout-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     This cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursor.timeout-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Causes methods that fetch results to throw a
     <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the query takes longer
     than the specified number of milliseconds.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocursor.timeout-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1681">
     <p><strong>Example #1 <span class="function"><strong>MongoCursor::timeout()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      In the following example, the driver will wait forever for the initial
      database response, and then wait 100ms for subsequent responses.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">timeout</span><span style="color: #007700">(-</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;$cursor-&gt;hasNext()&nbsp;executes&nbsp;the&nbsp;query.&nbsp;An&nbsp;infinite&nbsp;timeout&nbsp;has&nbsp;been&nbsp;set,&nbsp;so<br />&nbsp;*&nbsp;the&nbsp;driver&nbsp;will&nbsp;wait&nbsp;as&nbsp;long&nbsp;as&nbsp;necessary&nbsp;for&nbsp;a&nbsp;response.<br />&nbsp;*/<br /></span><span style="color: #007700">while&nbsp;(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasNext</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">timeout</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;A&nbsp;timeout&nbsp;has&nbsp;now&nbsp;been&nbsp;set,&nbsp;so&nbsp;if&nbsp;the&nbsp;cursor&nbsp;needs&nbsp;to&nbsp;get&nbsp;more&nbsp;results<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;from&nbsp;the&nbsp;database,&nbsp;it&nbsp;will&nbsp;only&nbsp;wait&nbsp;100ms&nbsp;for&nbsp;a&nbsp;response.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoCursorTimeoutException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"query&nbsp;took&nbsp;too&nbsp;long!"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongocursor.timeout-notes">
    <h3 class="title">Notes</h3>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
       This does not cause the MongoDB server to cancel long-running operations;
       it only instructs the driver to stop waiting for a response and throw a
       <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> after a set time.
       If you need to specify a server-side timeout for a query, consider using
       <span class="methodname"><a href="#mongocursor.maxtimems" class="methodname">MongoCursor::maxTimeMS()</a></span>.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.timeout-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocursorinterface.timeout" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::timeout()</a> - Sets a client-side timeout for this query</span></li>
     <li class="member">The <code class="literal">socketTimeoutMS</code> option for <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocursor.valid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursor::valid</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::valid</span> &mdash; <span class="dc-title">Checks if the cursor is reading a valid result</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursor.valid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursor::valid</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursor.valid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursor.valid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     <strong><code>TRUE</code></strong> if the current result is not null, and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursor.valid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.valid" class="methodname" rel="rdfs-seeAlso">Iterator::valid()</a> - Checks if current position is valid</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongocursor.addoption">MongoCursor::addOption</a> — Adds a top-level key/value pair to a query</li><li><a href="#mongocursor.awaitdata">MongoCursor::awaitData</a> — Sets whether this cursor will wait for a while for a tailable cursor to return more data</li><li><a href="#mongocursor.batchsize">MongoCursor::batchSize</a> — Limits the number of elements returned in one batch</li><li><a href="#mongocursor.construct">MongoCursor::__construct</a> — Create a new cursor</li><li><a href="#mongocursor.count">MongoCursor::count</a> — Counts the number of results for this query</li><li><a href="#mongocursor.current">MongoCursor::current</a> — Returns the current element</li><li><a href="#mongocursor.dead">MongoCursor::dead</a> — Checks if there are results that have not yet been sent from the database</li><li><a href="#mongocursor.doquery">MongoCursor::doQuery</a> — Execute the query</li><li><a href="#mongocursor.explain">MongoCursor::explain</a> — Return an explanation of the query, often useful for optimization and debugging</li><li><a href="#mongocursor.fields">MongoCursor::fields</a> — Sets the fields for a query</li><li><a href="#mongocursor.getnext">MongoCursor::getNext</a> — Advances the cursor to the next result, and returns that result</li><li><a href="#mongocursor.getreadpreference">MongoCursor::getReadPreference</a> — Get the read preference for this query</li><li><a href="#mongocursor.hasnext">MongoCursor::hasNext</a> — Checks if there are any more elements in this cursor</li><li><a href="#mongocursor.hint">MongoCursor::hint</a> — Gives the database a hint about the query</li><li><a href="#mongocursor.immortal">MongoCursor::immortal</a> — Sets whether this cursor will timeout</li><li><a href="#mongocursor.info">MongoCursor::info</a> — Gets information about the cursor's creation and iteration</li><li><a href="#mongocursor.key">MongoCursor::key</a> — Returns the current result's _id, or its index within the result set</li><li><a href="#mongocursor.limit">MongoCursor::limit</a> — Limits the number of results returned</li><li><a href="#mongocursor.maxtimems">MongoCursor::maxTimeMS</a> — Sets a server-side timeout for this query</li><li><a href="#mongocursor.next">MongoCursor::next</a> — Advances the cursor to the next result, and returns that result</li><li><a href="#mongocursor.partial">MongoCursor::partial</a> — If this query should fetch partial results from mongos if a shard is down</li><li><a href="#mongocursor.reset">MongoCursor::reset</a> — Clears the cursor</li><li><a href="#mongocursor.rewind">MongoCursor::rewind</a> — Returns the cursor to the beginning of the result set</li><li><a href="#mongocursor.setflag">MongoCursor::setFlag</a> — Sets arbitrary flags in case there is no method available the specific flag</li><li><a href="#mongocursor.setreadpreference">MongoCursor::setReadPreference</a> — Set the read preference for this query</li><li><a href="#mongocursor.skip">MongoCursor::skip</a> — Skips a number of results</li><li><a href="#mongocursor.slaveokay">MongoCursor::slaveOkay</a> — Sets whether this query can be done on a secondary [deprecated]</li><li><a href="#mongocursor.snapshot">MongoCursor::snapshot</a> — Use snapshot mode for the query</li><li><a href="#mongocursor.sort">MongoCursor::sort</a> — Sorts the results by given fields</li><li><a href="#mongocursor.tailable">MongoCursor::tailable</a> — Sets whether this cursor will be left open after fetching the last results</li><li><a href="#mongocursor.timeout">MongoCursor::timeout</a> — Sets a client-side timeout for this query</li><li><a href="#mongocursor.valid">MongoCursor::valid</a> — Checks if the cursor is reading a valid result</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongocursorinterface" class="reference"><hr />
  
   <h1 class="title">The MongoCursorInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.5.0)</p>
  
    
    <div class="section" id="mongocursorinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Interface for cursors, which can be used to iterate through results of a
      database query or command. This interface is implemented by the
      <a href="#class.mongocursor" class="classname">MongoCursor</a> and
      <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> classes.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       Similar to <a href="#class.traversable" class="classname">Traversable</a>, this interface cannot be
       implemented in PHP scripts.
      </span>
     </p></blockquote>
    </div>
    
  
    <div class="section" id="mongocursorinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoCursorInterface</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.iterator" class="classname">Iterator</a>
       </span>
       {</div>
      
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongocursorinterface.batchsize" class="methodname">batchSize</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
     ) : <span class="type"><a href="#class.mongocursorinterface" class="type MongoCursorInterface">MongoCursorInterface</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongocursorinterface.dead" class="methodname">dead</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongocursorinterface.getreadpreference" class="methodname">getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongocursorinterface.info" class="methodname">info</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongocursorinterface.setreadpreference" class="methodname">setReadPreference</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type"><a href="#class.mongocursorinterface" class="type MongoCursorInterface">MongoCursorInterface</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongocursorinterface.timeout" class="methodname">timeout</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocursorinterface" class="type MongoCursorInterface">MongoCursorInterface</a></span></div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#iterator.current" class="methodname">Iterator::current</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#iterator.key" class="methodname">Iterator::key</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type scalar">scalar</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#iterator.next" class="methodname">Iterator::next</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#iterator.rewind" class="methodname">Iterator::rewind</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#iterator.valid" class="methodname">Iterator::valid</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
     }</div>
     
    </div>
  
   </div>
  
   
  
  
  <div id="mongocursorinterface.batchsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursorInterface::batchSize</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCursorInterface::batchSize</span> &mdash; <span class="dc-title">Limits the number of elements returned in one batch</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursorinterface.batchsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoCursorInterface::batchSize</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
     ) : <span class="type"><a href="#class.mongocursorinterface" class="type MongoCursorInterface">MongoCursorInterface</a></span></div>
  
    <p class="para rdfs-comment">
     A cursor typically fetches a batch of result objects and stores them
     locally. This method sets the batch size value to configure the amount of
     documents retrieved from the server in one round trip.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursorinterface.batchsize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">batchSize</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of results to return per batch.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursorinterface.batchsize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocursorinterface.dead" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursorInterface::dead</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCursorInterface::dead</span> &mdash; <span class="dc-title">Checks if there are results that have not yet been sent from the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursorinterface.dead-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoCursorInterface::dead</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     This method checks whether the cursor has been exhausted and the database has
     no more results to send to the client. A cursor being &quot;dead&quot; does not
     necessarily mean that there are no more results available for iteration.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursorinterface.dead-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursorinterface.dead-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if there are more results that have not yet been sent to the
     client, and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocursorinterface.getreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursorInterface::getReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoCursorInterface::getReadPreference</span> &mdash; <span class="dc-title">Get the read preference for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursorinterface.getreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoCursorInterface::getReadPreference</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursorinterface.getreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursorinterface.getreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the read preference. The array contains the values <code class="literal">type</code> for the string read preference mode (corresponding to the <a href="#class.mongoclient" class="classname">MongoClient</a> constants), and <code class="literal">tagsets</code> containing a list of all tag set criteria. If no tag sets were specified, <code class="literal">tagsets</code> will not be present in the array.</p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursorinterface.getreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocursorinterface.setreadpreference" class="function" rel="rdfs-seeAlso">MongoCursorInterface::setReadPreference()</a> - Set the read preference for this query</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocursorinterface.info" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursorInterface::info</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCursorInterface::info</span> &mdash; <span class="dc-title">Gets information about the cursor&#039;s creation and iteration</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursorinterface.info-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoCursorInterface::info</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Returns information about the cursor&#039;s creation and iteration. This can be
     called before or after the cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursorinterface.info-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursorinterface.info-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the namespace, batch size, limit, skip, flags, query, and projected
     fields for this cursor. If the cursor has started iterating, additional
     information about iteration and the connection will be included.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocursorinterface.setreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursorInterface::setReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoCursorInterface::setReadPreference</span> &mdash; <span class="dc-title">Set the read preference for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursorinterface.setreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoCursorInterface::setReadPreference</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type"><a href="#class.mongocursorinterface" class="type MongoCursorInterface">MongoCursorInterface</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursorinterface.setreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">read_preference</code></dt>
  <dd>
  <p class="para">The read preference mode: <strong><code>MongoClient::RP_PRIMARY</code></strong>, <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>, <strong><code>MongoClient::RP_SECONDARY</code></strong>, <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong>, or <strong><code>MongoClient::RP_NEAREST</code></strong>.</p></dd>
  <dt>
  <code class="parameter">tags</code></dt>
  <dd>
  <p class="para">An array of zero or more tag sets, where each tag set is itself an array of criteria used to match tags on replica set members.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursorinterface.setreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursorinterface.setreadpreference-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if either parameter is invalid, or if one or more tag sets are provided with the <strong><code>MongoClient::RP_PRIMARY</code></strong> read preference mode.</p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursorinterface.setreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocursorinterface.getreadpreference" class="function" rel="rdfs-seeAlso">MongoCursorInterface::getReadPreference()</a> - Get the read preference for this query</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocursorinterface.timeout" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursorInterface::timeout</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCursorInterface::timeout</span> &mdash; <span class="dc-title">Sets a client-side timeout for this query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursorinterface.timeout-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoCursorInterface::timeout</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocursorinterface" class="type MongoCursorInterface">MongoCursorInterface</a></span></div>
  
    <p class="para rdfs-comment">
     A timeout can be set at any time and will affect subsequent data retrieval
     associated with this cursor, including fetching more results from the
     database.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursorinterface.timeout-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">ms</code>
      </dt>
  
      <dd>
  
       <p class="para">
        The number of milliseconds for the cursor to wait for a response. Use
        <code class="literal">-1</code> to wait forever. By default, the cursor will wait
        <var class="varname">30000</var> milliseconds (30 seconds).
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursorinterface.timeout-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocursorinterface.timeout-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Causes methods that fetch results to throw a
     <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the data fetch takes
     longer than the specified number of milliseconds.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocursorinterface.timeout-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <code class="literal">socketTimeoutMS</code> option for <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongocursorinterface.batchsize">MongoCursorInterface::batchSize</a> — Limits the number of elements returned in one batch</li><li><a href="#mongocursorinterface.dead">MongoCursorInterface::dead</a> — Checks if there are results that have not yet been sent from the database</li><li><a href="#mongocursorinterface.getreadpreference">MongoCursorInterface::getReadPreference</a> — Get the read preference for this query</li><li><a href="#mongocursorinterface.info">MongoCursorInterface::info</a> — Gets information about the cursor's creation and iteration</li><li><a href="#mongocursorinterface.setreadpreference">MongoCursorInterface::setReadPreference</a> — Set the read preference for this query</li><li><a href="#mongocursorinterface.timeout">MongoCursorInterface::timeout</a> — Sets a client-side timeout for this query</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongocommandcursor" class="reference"><hr />
  
   <h1 class="title">The MongoCommandCursor class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.5.0)</p>
  
    
    <div class="section" id="mongocommandcursor.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      A command cursor is similar to a <a href="#class.mongocursor" class="classname">MongoCursor</a> except
      that you use it for iterating through the results of a database command
      instead of a normal query. Command cursors are useful for iterating over
      large result sets that might exceed the document size limit (currently 16MB)
      of a single <span class="function"><a href="#mongodb.command" class="function">MongoDB::command()</a></span> response.
     </p>
     <p class="para">
      While you can create command cursors using
      <span class="function"><a href="#mongocommandcursor.construct" class="function">MongoCommandCursor::__construct()</a></span> or the
      <span class="function"><a href="#mongocommandcursor.createfromdocument" class="function">MongoCommandCursor::createFromDocument()</a></span> factory method,
      you will generally want to use command-specific helpers such as
      <span class="function"><a href="#mongocollection.aggregatecursor" class="function">MongoCollection::aggregateCursor()</a></span>.
     </p>
     <p class="para">
      Note that the cursor does not &quot;contain&quot; the database command&#039;s results; it
      just manages iteration through them. Thus, if you print a cursor (f.e. with
      <span class="function"><a href="#function.var-dump" class="function">var_dump()</a></span> or <span class="function"><a href="#function.print-r" class="function">print_r()</a></span>), you will see
      the cursor object but not the result documents.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Cursor Stages</h2>
     <p class="para">
      A <strong class="classname">MongoCommandCursor</strong> has two &quot;life stages&quot;: pre-
      and post- command. When a cursor is created, it has not yet contacted the
      database, so it is in its pre-command state. When the client first attempts
      to get a result (by calling <span class="function"><a href="#mongocommandcursor.rewind" class="function">MongoCommandCursor::rewind()</a></span>,
      directly or indirectly), the cursor moves into the post-command state.
     </p>
     <p class="para">
      The command cursor&#039;s batch size and socket timeout may be configured in both
      the pre- and post- command states.
     </p>
     <p class="para">
      <div class="example" id="example-1682">
       <p><strong>Example #1 Adding options to <strong class="classname">MongoCommandCursor</strong></strong></p>
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCommandCursor</span><span style="color: #007700">(...);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">batchSize</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
    </div>
    
  
    <div class="section" id="mongocommandcursor.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoCommandCursor</strong>
       </span>
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongocursorinterface" class="interfacename">MongoCursorInterface</a></span>
       </span>
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.iterator" class="interfacename">Iterator</a></span>
       </span>
       {</div>
      
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.batchsize" class="methodname">batchSize</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
     ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code><span class="initializer"> = array()</span></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongocommandcursor.createfromdocument" class="methodname">createFromDocument</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$hash</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$document</code></span>
     ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.current" class="methodname">current</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.dead" class="methodname">dead</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.getreadpreference" class="methodname">getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.info" class="methodname">info</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.key" class="methodname">key</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.next" class="methodname">next</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.rewind" class="methodname">rewind</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.setreadpreference" class="methodname">setReadPreference</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.timeout" class="methodname">timeout</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocommandcursor.valid" class="methodname">valid</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
     }</div>
     
  
    </div>
  
    <div class="section">
     <h2 class="title">See Also</h2>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb.command" class="methodname">MongoDB::command()</a></span></li>
      <li class="member"><span class="methodname"><a href="#mongocollection.aggregatecursor" class="methodname">MongoCollection::aggregateCursor()</a></span></li>
     </ul>
    </div>
  
   </div>
  
   
  
  
  <div id="mongocommandcursor.batchsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::batchSize</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::batchSize</span> &mdash; <span class="dc-title">Limits the number of elements returned in one batch</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.batchsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::batchSize</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
     ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  
    <p class="para rdfs-comment">
     A cursor typically fetches a batch of result objects and store them
     locally. This method sets the batchSize value to configure the amount of
     documents retrieved from the server in one round trip.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.batchsize-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">batchSize</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of results to return per batch. Each batch requires a
         round-trip to the server. 
        </p>
        <p class="para">
         This cannot override MongoDB&#039;s limit on the amount of data it will return to 
         the client (i.e., if you set batch size to 1,000,000,000, MongoDB will still 
         only return 4-16MB of results per batch). 
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.batchsize-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.batchsize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1683">
     <p><strong>Example #1 <span class="function"><strong>MongoCommandCursor::batchSize()</strong></span></strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$commandCursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">batchSize</span><span style="color: #007700">(</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.batchsize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocursorinterface.batchsize" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::batchSize()</a> - Limits the number of elements returned in one batch</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::__construct</span> &mdash; <span class="dc-title">Create a new command cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code><span class="initializer"> = array()</span></span>
     )</div>
  
    <p class="para rdfs-comment">
     Generally, you should not have to construct a
     <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> manually, as there are helper
     functions such as <span class="methodname"><a href="#mongocollection.aggregatecursor" class="methodname">MongoCollection::aggregateCursor()</a></span>
     and <span class="methodname"><a href="#mongocollection.parallelcollectionscan" class="methodname">MongoCollection::parallelCollectionScan()</a></span>;
     however, if the server introduces new commands that can return cursors, this
     constructor will be useful in the absence of specific helper methods. You may
     also consider using
     <span class="methodname"><a href="#mongocommandcursor.createfromdocument" class="methodname">MongoCommandCursor::createFromDocument()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">connection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database connection.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">ns</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Full name of the database and collection (e.g.
         <code class="literal">&quot;test.foo&quot;</code>)
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">command</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database command.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the new cursor.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1684">
     <p><strong>Example #1 <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Define&nbsp;the&nbsp;aggregation&nbsp;pipeline<br /></span><span style="color: #0000BB">$pipeline&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$country_code'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'timezones'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$addToSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$timezone'&nbsp;</span><span style="color: #007700">]<br />&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">]&nbsp;],<br />];<br /><br /></span><span style="color: #FF8000">//&nbsp;Construct&nbsp;a&nbsp;MongoCommandCursor&nbsp;object<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCommandCursor</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;MongoClient&nbsp;object<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'demo.cities'</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;namespace<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'aggregate'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'cities'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pipeline'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$pipeline</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'batchSize'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;]<br />);<br /><br />foreach(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">…<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocommandcursor.createfromdocument" class="function" rel="rdfs-seeAlso">MongoCommandCursor::createFromDocument()</a> - Create a new command cursor from an existing command response document</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.aggregatecursor" class="function" rel="rdfs-seeAlso">MongoCollection::aggregateCursor()</a> - Execute an aggregation pipeline command and retrieve results through a cursor</span></li>
     <li class="member"><span class="function"><a href="#mongocollection.parallelcollectionscan" class="function" rel="rdfs-seeAlso">MongoCollection::parallelCollectionScan()</a> - Returns an array of cursors to iterator over a full collection in parallel</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.createfromdocument" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::createFromDocument</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::createFromDocument</span> &mdash; <span class="dc-title">Create a new command cursor from an existing command response document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.createfromdocument-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoCommandCursor::createFromDocument</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongoclient" class="type MongoClient">MongoClient</a></span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$hash</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$document</code></span>
     ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  
    <p class="para rdfs-comment">
     Use this method if you have a raw command result with cursor information in
     it. Note that cursors created with this method cannot be iterated multiple
     times, as they will lack the original command necessary for re-execution.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.createfromdocument-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">connection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database connection.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">hash</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The connection hash, as obtained through the third by-reference argument
         to <span class="methodname"><a href="#mongodb.command" class="methodname">MongoDB::command()</a></span>.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">document</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Document with cursor information in it. This document needs to contain
         the <code class="literal">id</code>, <code class="literal">ns</code> and
         <code class="literal">firstBatch</code> fields. Such a document is obtained by
         calling the <span class="methodname"><a href="#mongodb.command" class="methodname">MongoDB::command()</a></span> with appropriate
         arguments to return a cursor, and not just an inline result. See the
         example below.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.createfromdocument-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the new cursor.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.createfromdocument-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1685">
     <p><strong>Example #1 <span class="function"><strong>MongoCommandCursor::createFromDocument()</strong></span></strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Define&nbsp;the&nbsp;aggregation&nbsp;pipeline<br /></span><span style="color: #0000BB">$pipeline&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$country_code'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'timezones'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$addToSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$timezone'&nbsp;</span><span style="color: #007700">]<br />&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">]&nbsp;],<br />];<br /><br /></span><span style="color: #FF8000">//&nbsp;Execute&nbsp;the&nbsp;command.&nbsp;The&nbsp;"cursor"&nbsp;option&nbsp;instructs&nbsp;the&nbsp;server&nbsp;to&nbsp;return<br />//&nbsp;cursor&nbsp;information&nbsp;in&nbsp;the&nbsp;response&nbsp;instead&nbsp;of&nbsp;inline&nbsp;results.<br /></span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'aggregate'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'cities'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pipeline'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$pipeline</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'batchSize'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hash<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Show&nbsp;result&nbsp;and&nbsp;hash<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$r</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hash&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Construct&nbsp;the&nbsp;command&nbsp;cursor<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoCommandCursor</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromDocument</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hash</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;cursor&quot;]=&gt;
    array(3) {
      [&quot;id&quot;]=&gt;
      object(MongoInt64)#5 (1) {
        [&quot;value&quot;]=&gt;
        string(12) &quot;392143983421&quot;
      }
      [&quot;ns&quot;]=&gt;
      string(11) &quot;demo.cities&quot;
      [&quot;firstBatch&quot;]=&gt;
      array(1) {
        [0]=&gt;
        array(2) {
          [&quot;_id&quot;]=&gt;
          string(2) &quot;AD&quot;
          [&quot;timezones&quot;]=&gt;
          array(1) {
            [0]=&gt;
            string(14) &quot;Europe/Andorra&quot;
          }
        }
      }
    }
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  string(25) &quot;localhost:27017;-;.;17617&quot;
  </pre></div>
     </div>
     <div class="example-contents"><p>
      As you can see, the returned cursor information has the
      <code class="literal">id</code>, <code class="literal">ns</code> and
      <code class="literal">firstBatch</code> fields.
     </p></div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.createfromdocument-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocommandcursor.construct" class="function" rel="rdfs-seeAlso">MongoCommandCursor::__construct()</a> - Create a new command cursor</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.current" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::current</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::current</span> &mdash; <span class="dc-title">Returns the current element</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.current-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::current</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This returns <strong><code>NULL</code></strong> until <span class="function"><a href="#mongocommandcursor.rewind" class="function">MongoCommandCursor::rewind()</a></span> is called.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.current-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.current-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     The current result document as an associative array. <strong><code>NULL</code></strong> will be returned
     if there is no result.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.current-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.current" class="methodname" rel="rdfs-seeAlso">Iterator::current()</a> - Return the current element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.dead" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::dead</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::dead</span> &mdash; <span class="dc-title">Checks if there are results that have not yet been sent from the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.dead-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::dead</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     This method checks whether the <a href="#class.mongocommandcursor" class="classname">MongoCommandCursor</a>
     cursor has been exhausted and the database has no more results to send to the
     client. A cursor being &quot;dead&quot; does not necessarily mean that there are no
     more results available for iteration.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.dead-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.dead-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if there are more results that have not yet been sent to the
     client, and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.dead-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocursorinterface.dead" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::dead()</a> - Checks if there are results that have not yet been sent from the database</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.getreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::getReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::getReadPreference</span> &mdash; <span class="dc-title">Get the read preference for this command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.getreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::getReadPreference</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.getreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.getreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">This function returns an array describing the read preference. The array contains the values <code class="literal">type</code> for the string read preference mode (corresponding to the <a href="#class.mongoclient" class="classname">MongoClient</a> constants), and <code class="literal">tagsets</code> containing a list of all tag set criteria. If no tag sets were specified, <code class="literal">tagsets</code> will not be present in the array.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.getreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongocursor.doquery.example.basic">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCommandCursor::getReadPreference()</strong></span> return value example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://rs1.example.com:27017'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'replicaSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'myReplSetName'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'people'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;If&nbsp;a&nbsp;MongoCommandCursor&nbsp;is&nbsp;constructed&nbsp;directly,&nbsp;it&nbsp;will&nbsp;inherit&nbsp;the&nbsp;read<br />//&nbsp;preference&nbsp;of&nbsp;the&nbsp;MongoClient&nbsp;instance&nbsp;passed&nbsp;to&nbsp;its&nbsp;constructor;&nbsp;however,<br />//&nbsp;MongoCollection::aggregateCursor()&nbsp;will&nbsp;have&nbsp;the&nbsp;MongoCommandCursor&nbsp;inherit<br />//&nbsp;the&nbsp;collection's&nbsp;read&nbsp;preference.<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregateCursor</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$points'&nbsp;</span><span style="color: #007700">]&nbsp;]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">]&nbsp;],<br />]&nbsp;);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadPreference</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(1) {
    [&quot;type&quot;]=&gt;
    string(9) &quot;secondary&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.getreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocommandcursor.setreadpreference" class="function" rel="rdfs-seeAlso">MongoCommandCursor::setReadPreference()</a> - Set the read preference for this command</span></li>
     <li class="member"><span class="function"><a href="#mongocursorinterface.getreadpreference" class="function" rel="rdfs-seeAlso">MongoCursorInterface::getReadPreference()</a> - Get the read preference for this query</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocommandcursor.info" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::info</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::info</span> &mdash; <span class="dc-title">Gets information about the cursor&#039;s creation and iteration</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.info-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::info</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This can be called before or after the cursor has started iterating.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.info-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.info-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the namespace, batch size, limit, skip, flags, query, and projected
     fields for this cursor. If the cursor has started iterating, additional
     information about iteration and the connection will be included.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.info-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1687">
     <p><strong>Example #1 <span class="function"><strong>MongoCommandCursor::info()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCommandCursor</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;MongoClient&nbsp;object<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'demo.cities'</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;namespace<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'aggregate'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'cities'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pipeline'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;[&nbsp;</span><span style="color: #DD0000">'$match'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$exists'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">]&nbsp;]&nbsp;]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'batchSize'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;]<br />);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Before&nbsp;iteration&nbsp;started:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">info</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\nAfter&nbsp;iteration&nbsp;started:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">info</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Before iteration started:
  array(8) {
    [&quot;ns&quot;]=&gt;
    string(11) &quot;demo.cities&quot;
    [&quot;limit&quot;]=&gt;
    int(0)
    [&quot;batchSize&quot;]=&gt;
    int(0)
    [&quot;skip&quot;]=&gt;
    int(0)
    [&quot;flags&quot;]=&gt;
    int(0)
    [&quot;query&quot;]=&gt;
    array(3) {
      [&quot;aggregate&quot;]=&gt;
      string(6) &quot;cities&quot;
      [&quot;pipeline&quot;]=&gt;
      array(1) {
        [0]=&gt;
        array(1) {
          [&quot;$match&quot;]=&gt;
          array(1) {
            [&quot;_id&quot;]=&gt;
            array(1) {
              [&quot;$exists&quot;]=&gt;
              bool(true)
            }
          }
        }
      }
      [&quot;cursor&quot;]=&gt;
      array(1) {
        [&quot;batchSize&quot;]=&gt;
        int(1)
      }
    }
    [&quot;fields&quot;]=&gt;
    NULL
    [&quot;started_iterating&quot;]=&gt;
    bool(false)
  }
  
  After iteration started:
  array(17) {
    [&quot;ns&quot;]=&gt;
    string(11) &quot;demo.cities&quot;
    [&quot;limit&quot;]=&gt;
    int(0)
    [&quot;batchSize&quot;]=&gt;
    int(0)
    [&quot;skip&quot;]=&gt;
    int(0)
    [&quot;flags&quot;]=&gt;
    int(0)
    [&quot;query&quot;]=&gt;
    array(3) {
      [&quot;aggregate&quot;]=&gt;
      string(6) &quot;cities&quot;
      [&quot;pipeline&quot;]=&gt;
      array(1) {
        [0]=&gt;
        array(1) {
          [&quot;$match&quot;]=&gt;
          array(1) {
            [&quot;_id&quot;]=&gt;
            array(1) {
              [&quot;$exists&quot;]=&gt;
              bool(true)
            }
          }
        }
      }
      [&quot;cursor&quot;]=&gt;
      array(1) {
        [&quot;batchSize&quot;]=&gt;
        int(1)
      }
    }
    [&quot;fields&quot;]=&gt;
    NULL
    [&quot;started_iterating&quot;]=&gt;
    bool(true)
    [&quot;id&quot;]=&gt;
    int(185840310129)
    [&quot;at&quot;]=&gt;
    int(0)
    [&quot;numReturned&quot;]=&gt;
    int(0)
    [&quot;server&quot;]=&gt;
    string(25) &quot;localhost:27017;-;.;23991&quot;
    [&quot;host&quot;]=&gt;
    string(9) &quot;localhost&quot;
    [&quot;port&quot;]=&gt;
    int(27017)
    [&quot;connection_type_desc&quot;]=&gt;
    string(10) &quot;STANDALONE&quot;
    [&quot;firstBatchAt&quot;]=&gt;
    int(0)
    [&quot;firstBatchNumReturned&quot;]=&gt;
    int(1)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.info-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongocursorinterface.info" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::info()</a> - Gets information about the cursor's creation and iteration</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.key" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::key</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::key</span> &mdash; <span class="dc-title">Returns the current result&#039;s index within the result set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.key-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::key</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.key-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.key-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The current result&#039;s index within the result set.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.key-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.key" class="methodname" rel="rdfs-seeAlso">Iterator::key()</a> - Return the key of the current element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.next" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::next</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::next</span> &mdash; <span class="dc-title">Advances the cursor to the next result</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.next-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::next</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.next-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.next-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     <strong><code>NULL</code></strong>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocommandcursor.next-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the
     database and <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the
     timeout is exceeded.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.next-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.next" class="methodname" rel="rdfs-seeAlso">Iterator::next()</a> - Move forward to next element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.rewind" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::rewind</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::rewind</span> &mdash; <span class="dc-title">Executes the command and resets the cursor to the start of the result set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.rewind-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::rewind</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     If the cursor has already started iteration, the command will be re-executed.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.rewind-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.rewind-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The raw server result document.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocommandcursor.rewind-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it cannot reach the
     database and <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the
     timeout is exceeded.
    </p>
    <p class="para">
     Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the cursor was created
     with <span class="function"><a href="#mongocommandcursor.createfromdocument" class="function">MongoCommandCursor::createFromDocument()</a></span> and has
     already started iteration. Such cursors cannot be iterated multiple times, as
     they lack the original command necessary for re-execution.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.rewind-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1688">
     <p><strong>Example #1 <span class="function"><strong>MongoCommandCursor::rewind()</strong></span></strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$rawResult&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$commandCursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Command&nbsp;cursor&nbsp;is&nbsp;now&nbsp;reset&nbsp;to&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;result&nbsp;set<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rawResult</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;cursor&quot;]=&gt;
    array(3) {
      [&quot;id&quot;]=&gt;
      object(MongoInt64)#5 (1) {
        [&quot;value&quot;]=&gt;
        string(12) &quot;310050110216&quot;
      }
      [&quot;ns&quot;]=&gt;
      string(9) &quot;demo.test&quot;
      [&quot;firstBatch&quot;]=&gt;
      array(1) {
        [0]=&gt;
        array(2) {
          [&quot;_id&quot;]=&gt;
          object(MongoId)#6 (1) {
            [&quot;$id&quot;]=&gt;
            string(24) &quot;52f5691544670a8077b0dc51&quot;
          }
          [&quot;value&quot;]=&gt;
          string(2) &quot;42&quot;
        }
      }
    }
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.rewind-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.rewind" class="methodname" rel="rdfs-seeAlso">Iterator::rewind()</a> - Rewind the Iterator to the first element</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.setreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::setReadPreference</h1>
    <p class="verinfo">(PECL mongo &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::setReadPreference</span> &mdash; <span class="dc-title">Set the read preference for this command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.setreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::setReadPreference</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.setreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  <dt>
  <code class="parameter">read_preference</code></dt>
  <dd>
  <p class="para">The read preference mode: <strong><code>MongoClient::RP_PRIMARY</code></strong>, <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>, <strong><code>MongoClient::RP_SECONDARY</code></strong>, <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong>, or <strong><code>MongoClient::RP_NEAREST</code></strong>.</p></dd>
  <dt>
  <code class="parameter">tags</code></dt>
  <dd>
  <p class="para">An array of zero or more tag sets, where each tag set is itself an array of criteria used to match tags on replica set members.</p></dd>
  </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.setreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocommandcursor.setreadpreference-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Emits <strong><code>E_WARNING</code></strong> if either parameter is invalid, or if one or more tag sets are provided with the <strong><code>MongoClient::RP_PRIMARY</code></strong> read preference mode.</p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.setreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1689">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCommandCursor::setReadPreference()</strong></span> tag set array syntax example
     </strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://rs1.example.com:27017'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'replicaSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'myReplSetName'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'people'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregateCursor</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$points'&nbsp;</span><span style="color: #007700">]&nbsp;]&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'points'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">]&nbsp;],<br />]&nbsp;);<br /><br /></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center&nbsp;also&nbsp;used&nbsp;for&nbsp;reporting,<br />//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;server&nbsp;in&nbsp;the&nbsp;"west"&nbsp;data&nbsp;center<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_NEAREST</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'east'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'west'&nbsp;</span><span style="color: #007700">],<br />]&nbsp;);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #FF8000">//&nbsp;If&nbsp;the&nbsp;read&nbsp;preference&nbsp;is&nbsp;changed,&nbsp;it&nbsp;will&nbsp;be&nbsp;used&nbsp;the&nbsp;next&nbsp;time&nbsp;the&nbsp;cursor<br />//&nbsp;is&nbsp;rewound&nbsp;and&nbsp;the&nbsp;command&nbsp;is&nbsp;re-executed.<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.setreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member">The <a href="#mongo.readpreferences" class="link">read preferences</a> documentation.</li>
     <li class="member"><span class="function"><a href="#mongocommandcursor.getreadpreference" class="function" rel="rdfs-seeAlso">MongoCommandCursor::getReadPreference()</a> - Get the read preference for this command</span></li>
     <li class="member"><span class="function"><a href="#mongocursorinterface.setreadpreference" class="function" rel="rdfs-seeAlso">MongoCursorInterface::setReadPreference()</a> - Set the read preference for this query</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocommandcursor.timeout" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::timeout</h1>
    <p class="verinfo">(PECL mongo &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::timeout</span> &mdash; <span class="dc-title">Sets a client-side timeout for this command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.timeout-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::timeout</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
     ) : <span class="type"><a href="#class.mongocommandcursor" class="type MongoCommandCursor">MongoCommandCursor</a></span></div>
  
    <p class="para rdfs-comment">
     A timeout can be set at any time and will affect subsequent data retrieval
     associated with this cursor, including fetching more results from the
     database.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.timeout-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  
       <code class="parameter">ms</code>
      </dt>
  
      <dd>
  
       <p class="para">
        The number of milliseconds for the cursor to wait for a response. Use
        <code class="literal">-1</code> to wait forever. By default, the cursor will wait
        <var class="varname">30000</var> milliseconds (30 seconds).
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.timeout-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongocommandcursor.timeout-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Causes methods that fetch results to throw a
     <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the data fetch takes
     longer than the specified number of milliseconds.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocommandcursor.timeout-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1690">
     <p><strong>Example #1 <span class="function"><strong>MongoCommandCursor::timeout()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      In the following example, the driver will wait for 60 seconds for the
      first response from the aggregate command. It will also wait for 60
      seconds each time the server needs to be polled for more information.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$col&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">database</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">collection</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$pipeline&nbsp;</span><span style="color: #007700">=&nbsp;[&nbsp;</span><span style="color: #0000BB">…&nbsp;</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$col</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">aggregateCursor</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$pipeline&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">timeout</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">60000&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;for&nbsp;60&nbsp;seconds<br /><br /></span><span style="color: #007700">foreach&nbsp;(&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">…<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongocommandcursor.timeout-notes">
    <h3 class="title">Notes</h3>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
       This does not cause the MongoDB server to cancel long-running operations;
       it only instructs the driver to stop waiting for a response and throw a
       <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> after a set time.
       If you need to specify a server-side timeout for a command, considering
       passing the <code class="literal">maxTimeMS</code> option to
       <span class="methodname"><a href="#mongocollection.aggregatecursor" class="methodname">MongoCollection::aggregateCursor()</a></span>.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.timeout-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocollection.aggregatecursor" class="function" rel="rdfs-seeAlso">MongoCollection::aggregateCursor()</a> - Execute an aggregation pipeline command and retrieve results through a cursor</span></li>
     <li class="member"><span class="methodname"><a href="#mongocursorinterface.timeout" class="methodname" rel="rdfs-seeAlso">MongoCursorInterface::timeout()</a> - Sets a client-side timeout for this query</span></li>
     <li class="member">The <code class="literal">socketTimeoutMS</code> option for <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongocommandcursor.valid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCommandCursor::valid</h1>
    <p class="verinfo">(PECL mongo &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoCommandCursor::valid</span> &mdash; <span class="dc-title">Checks if the cursor is reading a valid result</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocommandcursor.valid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCommandCursor::valid</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocommandcursor.valid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocommandcursor.valid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     <strong><code>TRUE</code></strong> if the current result is not null, and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongocommandcursor.valid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#iterator.valid" class="methodname" rel="rdfs-seeAlso">Iterator::valid()</a> - Checks if current position is valid</span></li>
    </ul>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongocommandcursor.batchsize">MongoCommandCursor::batchSize</a> — Limits the number of elements returned in one batch</li><li><a href="#mongocommandcursor.construct">MongoCommandCursor::__construct</a> — Create a new command cursor</li><li><a href="#mongocommandcursor.createfromdocument">MongoCommandCursor::createFromDocument</a> — Create a new command cursor from an existing command response document</li><li><a href="#mongocommandcursor.current">MongoCommandCursor::current</a> — Returns the current element</li><li><a href="#mongocommandcursor.dead">MongoCommandCursor::dead</a> — Checks if there are results that have not yet been sent from the database</li><li><a href="#mongocommandcursor.getreadpreference">MongoCommandCursor::getReadPreference</a> — Get the read preference for this command</li><li><a href="#mongocommandcursor.info">MongoCommandCursor::info</a> — Gets information about the cursor's creation and iteration</li><li><a href="#mongocommandcursor.key">MongoCommandCursor::key</a> — Returns the current result's index within the result set</li><li><a href="#mongocommandcursor.next">MongoCommandCursor::next</a> — Advances the cursor to the next result</li><li><a href="#mongocommandcursor.rewind">MongoCommandCursor::rewind</a> — Executes the command and resets the cursor to the start of the result set</li><li><a href="#mongocommandcursor.setreadpreference">MongoCommandCursor::setReadPreference</a> — Set the read preference for this command</li><li><a href="#mongocommandcursor.timeout">MongoCommandCursor::timeout</a> — Sets a client-side timeout for this command</li><li><a href="#mongocommandcursor.valid">MongoCommandCursor::valid</a> — Checks if the cursor is reading a valid result</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
  </div>
  
  <hr />
  
  
   
  
  
  <div id="mongo.types" class="part"><hr />
  
   <h1>Types</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_part"><li><a href="#class.mongoid">MongoId</a></li><li><a href="#class.mongocode">MongoCode</a></li><li><a href="#class.mongodate">MongoDate</a></li><li><a href="#class.mongoregex">MongoRegex</a></li><li><a href="#class.mongobindata">MongoBinData</a></li><li><a href="#class.mongoint32">MongoInt32</a></li><li><a href="#class.mongoint64">MongoInt64</a></li><li><a href="#class.mongodbref">MongoDBRef</a></li><li><a href="#class.mongominkey">MongoMinKey</a></li><li><a href="#class.mongomaxkey">MongoMaxKey</a></li><li><a href="#class.mongotimestamp">MongoTimestamp</a></li></ul>
  
  
   <div class="partintro">
    <div class="section">
     <p class="para">
      MongoDB allows programmers to save and query for data expressed in all of the
      basic PHP types, compound types (arrays, associative arrays, and objects), and
      a half-dozen classes provided by the MongoDB PHP driver (for regular
      expressions, dates, and other specialized applications).
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Booleans and <strong><code>NULL</code></strong></h2>
     <p class="para">
      <strong><code>TRUE</code></strong>, <strong><code>FALSE</code></strong>, and <strong><code>NULL</code></strong> can be used as-is.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Numbers</h2>
     <p class="para">
      Numbers are distinct from strings in MongoDB: &quot;123&quot; does not match 123.
      Thus, if you want to make sure numbers are sorted and matched correctly, you
      must make sure that they are actually saved as numbers.
     </p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$doc&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"123"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$doc</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123</span><span style="color: #007700">));&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;matches<br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"123"</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;doesn't&nbsp;match<br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123.0</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;matches<br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123</span><span style="color: #007700">));&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;doesn't&nbsp;match<br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"123"</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;matches<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <p class="para">
      As noted above, floating point numbers do compare with/match integer numbers
      as one would expect.
     </p>
     <div class="section">
      <h2 class="title">Large Numbers</h2>
      <p class="para">
       By default, on a 32-bit system, numbers are sent to the database as 32-bit
       integers. On a 64-bit system, they are sent as 64-bit integers.  For
       backwards compatibility, all systems deserialize 64-bit integers as floating
       point numbers.  Floating point numbers are not exact.  If you need exact
       values, you must tweak your
       <a href="#mongo.configuration" class="link">php.ini settings</a>.
      </p>
      <p class="para">
       On a 32-bit system, if <code class="literal">mongo.long_as_object</code> is set,
       64-bit integers will be returns as <a href="#class.mongoint64" class="classname">MongoInt64</a>
       objects.  The integer will be stored in the <code class="literal">value</code> field
       with perfect precision (as a string). You can also use
       <a href="#class.mongoint64" class="classname">MongoInt64</a> to save 64-bit integers on 32-bit
       machines.
      </p>
      <p class="para">
       On 64-bit systems, you can either set <code class="literal">mongo.long_as_object</code>
       or set <code class="literal">mongo.native_long</code>.
       <code class="literal">mongo.native_long</code> will return 64-bit integers and
       &quot;normal&quot; PHP integers.  You can use <a href="#class.mongoint32" class="classname">MongoInt32</a> to
       save 32-bit integers on 64-bit machines.
      </p>
      <p class="para">
       You should set the <code class="literal">mongo.long_as_object</code> and
       <code class="literal">mongo.native_long</code> behavior that you plan to use, even if
       it is the default behavior (to protect against future changes to the
       defaults).
      </p>
      <p class="para">
       See also: <a href="#mongo.configuration" class="link">php.ini Options</a>,
       <a href="#class.mongoint32" class="classname">MongoInt32</a>, <a href="#class.mongoint64" class="classname">MongoInt64</a>.
      </p>
     </div>
    </div>
  
    <div class="section">
     <h2 class="title">Strings</h2>
     <p class="para">
      Strings must be UTF-8. Non-UTF-8 strings must either be converted to UTF-8
      before being sent to the database or saved as binary data.
     </p>
     <p class="para">
      Regular expressions can be used to match strings, and are expressed using the
      <a href="#class.mongoregex" class="classname">MongoRegex</a> class.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Binary Data</h2>
     <p class="para">
      Non-UTF-8 strings, images, and any other binary data should be sent to the
      database using the <a href="#class.mongobindata" class="classname">MongoBinData</a> type.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Dates</h2>
     <p class="para">
      Dates can be created using the <a href="#class.mongodate" class="classname">MongoDate</a> class.  They
      are stored as milliseconds since the epoch.
     </p>
     <p class="para">
      <a href="#class.mongotimestamp" class="classname">MongoTimestamp</a> is not for saving dates or timestamps,
      it is used internally by MongoDB.  Unless you are creating a tool that
      interacts with the internals of replication or sharding, you should use
      <a href="#class.mongodate" class="classname">MongoDate</a>, <em class="emphasis">not</em>
      <a href="#class.mongotimestamp" class="classname">MongoTimestamp</a>.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Unique Ids</h2>
     <p class="para">
      The driver will automatically create an <code class="literal">_id</code> field before
      inserting a document (unless one is specified by the user).  This field is an
      instance of <a href="#class.mongoid" class="classname">MongoId</a> (called &quot;ObjectId&quot; in most other
      languages).
     </p>
     <p class="para">
      These ids are 12 bytes long and composed of:
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para">4 bytes of timestamp</p>
        <p class="para">
         No two records can have the same id if they were inserted at different
         times.
        </p>
       </li>
       <li class="listitem">
        <p class="para">3 bytes machine id</p>
        <p class="para">
         No two records can have the same id if they were inserted on different
         machines
        </p>
       </li>
       <li class="listitem">
        <p class="para">2 bytes thread id</p>
        <p class="para">
         No two records can have the same id if they were inserted by different
         threads running on the same machine.
        </p>
       </li>
       <li class="listitem">
        <p class="para">3 bytes incrementing value</p>
        <p class="para">
         Each time an id is created, a global counter is incremented and used
         as the increment value of the next id.
        </p>
       </li>
      </ul>
      Thus, no two records can have the same id unless a single process on a
      single machine managed to insert 256^3 (over 16 million) documents in
      one second, overflowing the increment field.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">JavaScript</h2>
     <p class="para">
      MongoDB comes with a JavaScript engine, so you can embed JavaScript in
      queries (using a $where clause), send it directly to the database to be
      executed, and use it to perform aggregations.
     </p>
     <p class="para">
      For security, use <a href="#class.mongocode" class="classname">MongoCode</a>&#039;s <code class="literal">scope</code>
      field to use PHP variables in JavaScript.  Code that does not require
      external values can either use <a href="#class.mongocode" class="classname">MongoCode</a> or just be
      a string.  See the
      <a href="#mongo.security" class="link">section on security</a> for more
      information about sending JavaScript to the database.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Arrays and Objects</h2>
  
     <p class="para">
      Arrays and objects can also be saved to the database.  An array with ascending
      numeric keys will be saved as a an array, anything else will be saved as an
      object.
     </p>
  
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;$scores&nbsp;will&nbsp;be&nbsp;saved&nbsp;as&nbsp;an&nbsp;array<br /></span><span style="color: #0000BB">$scores&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">98</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">73</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">85</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"scores"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$scores</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;$scores&nbsp;will&nbsp;be&nbsp;saved&nbsp;as&nbsp;an&nbsp;object<br /></span><span style="color: #0000BB">$scores&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"quiz1"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">98</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"midterm"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"quiz2"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">73</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"final"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">85</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"scores"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$scores</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
  
     <p class="para">
      If you query for these objects using the database shell, they will look like:
      <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">&gt; db.students.find()
  { &quot;_id&quot; : ObjectId(&quot;4b06beada9ad6390dab17c43&quot;), &quot;scores&quot; : [ 98, 100, 73, 85 ] }
  { &quot;_id&quot; : ObjectId(&quot;4b06bebea9ad6390dab17c44&quot;), &quot;scores&quot; : { &quot;quiz1&quot; : 98, &quot;midterm&quot; : 100, &quot;quiz2&quot; : 73, &quot;final&quot; : 85 } }</pre>
  </div>
      </div>
  
     </p>
  
     <p class="para">
      The database can also save arbitrary PHP objects (although they will be
      returned as associative arrays).  The fields are used for the key/value
      pairs.  For example, a blog post might look like:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;the&nbsp;blog&nbsp;post&nbsp;class<br />&nbsp;&nbsp;</span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Post&nbsp;</span><span style="color: #007700">{<br /><br />&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$author</span><span style="color: #007700">;<br />&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">;<br />&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$comments&nbsp;</span><span style="color: #007700">=&nbsp;array();<br />&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$author</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">author&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$author</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">content&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">();<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">setTitle</span><span style="color: #007700">(</span><span style="color: #0000BB">$title</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$title</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;simple&nbsp;blog&nbsp;post&nbsp;and&nbsp;insert&nbsp;it&nbsp;into&nbsp;the&nbsp;database<br /></span><span style="color: #0000BB">$post1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Post</span><span style="color: #007700">(</span><span style="color: #DD0000">"Adam"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;a&nbsp;blog&nbsp;post"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$post1</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;there&nbsp;is&nbsp;nothing&nbsp;restricting&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;"author"&nbsp;field,&nbsp;so&nbsp;we&nbsp;can&nbsp;make<br />//&nbsp;it&nbsp;a&nbsp;nested&nbsp;object<br /></span><span style="color: #0000BB">$author&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Fred"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"karma"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">42</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$post2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Post</span><span style="color: #007700">(</span><span style="color: #0000BB">$author</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;another&nbsp;blog&nbsp;post."</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;we&nbsp;create&nbsp;an&nbsp;extra&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;title<br /></span><span style="color: #0000BB">$post2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setTitle</span><span style="color: #007700">(</span><span style="color: #DD0000">"Second&nbsp;Post"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$post2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </p>
  
     <p class="para">
      From the database shell, this will look something like:
      <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">&gt; db.blog.find()
  { &quot;_id&quot; : ObjectId(&quot;4b06c263edb87a281e09dad8&quot;), &quot;author&quot; : &quot;Adam&quot;, &quot;content&quot; : &quot;This is a blog post&quot;, &quot;comments&quot; : [ ], &quot;date&quot; : &quot;Fri Nov 20 2009 11:22:59 GMT-0500 (EST)&quot; }
  { &quot;_id&quot; : ObjectId(&quot;4b06c282edb87a281e09dad9&quot;), &quot;author&quot; : { &quot;name&quot; : &quot;Fred&quot;, &quot;karma&quot; : 42 }, &quot;content&quot; : &quot;This is a blog post&quot;, &quot;comments&quot; : [ ], &quot;date&quot; : &quot;Fri Nov 20 2009 11:23:30 GMT-0500 (EST)&quot;, &quot;title&quot; : &quot;Second Post&quot; }</pre>
  </div>
      </div>
  
     </p>
  
     <p class="para">
      The driver will not detect reference loops in arrays and objects.  For
      example, this will give a fatal error:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents">
  <div class="txtcode"><pre class="txtcode">Fatal error: Nesting level too deep - recursive dependency?</pre>
  </div>
      </div>
  
      If you need to insert documents that may have recursive dependency, you have
      to check for it yourself before passing it to the driver.
     </p>
    </div>
   </div>
   
  
  
  <div id="class.mongoid" class="reference"><hr />
  
   <h1 class="title">The MongoId class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.8.0)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongoid.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      A unique identifier created for database objects.  If an object is inserted
      into the database without an _id field, an _id field will be added to it
      with a <strong class="classname">MongoId</strong> instance as its value.  If the data 
      has a naturally occuring unique field (e.g. username or timestamp) it is
      fine to use this as the _id field instead, and it will not be replaced with 
      a <strong class="classname">MongoId</strong>.
     </p>
     <p class="para">
      Instances of the <strong class="classname">MongoId</strong> class fulfill the role that 
      autoincrementing does in a relational database: to provide a unique key if 
      the data does not naturally have one. Autoincrementing does not work well 
      with a sharded database, as it is difficult to determine the next number in
      the sequence. This class fulfills the constraints of quickly generating a
      value that is unique across shards.
     </p>
     <p class="para">
      Each MongoId is 12 bytes (making its string form 24 hexadecimal characters).
      The first four bytes are a timestamp, the next three are a hash of the
      client machine&#039;s hostname, the next two are the two least significant bytes
      of the process id running the script, and the last three bytes are an
      incrementing value.
     </p>
     <p class="para">
      <strong class="classname">MongoId</strong>s are serializable/unserializable.  Their
      serialized form is similar to their string form:
      <div class="example-contents screen">
  <div class="cdata"><pre>
  C:7:&quot;MongoId&quot;:24:{4af9f23d8ead0e1d32000000}
  </pre></div>
      </div>
     </p>
    </div>
  
  
    <div class="section" id="mongoid.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoId</strong>
       </span>
       {</div>
  
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">string</span>
       <var class="varname">$id</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoid.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type"><span class="type string|MongoId">string|MongoId</span></span> <code class="parameter">$id</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongoid.gethostname" class="methodname">getHostname</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoid.getinc" class="methodname">getInc</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoid.getpid" class="methodname">getPID</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoid.gettimestamp" class="methodname">getTimestamp</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongoid.isvalid" class="methodname">isValid</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongoid.set-state" class="methodname">__set_state</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$props</code></span>
     ) : <span class="type"><a href="#class.mongoid" class="type MongoId">MongoId</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoid.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Fields</h2>
     <dl>
  
      
       <dt id="mongoid.props.id"><var class="varname">$id</var></dt>
  
       <dd>
  
        <span class="simpara">
         This field contains the string representation of this object.
        </span>
        <blockquote class="note"><p><strong class="note">Note</strong>: 
          <span class="simpara">
            The property name begins with a <code class="literal">$</code> character. It may
            be accessed using
            <a href="#language.types.string.parsing.complex" class="link">complex variable
            parsed syntax</a> (e.g. <code class="literal">$mongoId-&gt;{&#039;$id&#039;}</code>).
          </span>
        </p></blockquote>
       </dd>
  
      
     </dl>
  
    </div>
  
    <div class="section">
     <h2 class="title">See Also</h2>
     <p class="para">
      MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/object-id/" class="link external">&raquo;&nbsp;ObjectIds</a>.
     </p>
    </div>
   </div>
  
   
  
  
  <div id="mongoid.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.0)</p><p class="refpurpose"><span class="refname">MongoId::__construct</span> &mdash; <span class="dc-title">Creates a new id</span></p>
  
   </div>
  
   <div id="mongoid.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-objectid.construct" class="methodname">MongoDB\BSON\ObjectId::__construct()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoId::__construct</strong></span>
      ([ <span class="methodparam"><span class="type"><span class="type string|MongoId">string|MongoId</span></span> <code class="parameter">$id</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
    ] )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">id</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A string (must be 24 hexadecimal characters) or a
         <a href="#class.mongoid" class="classname">MongoId</a> instance.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new id.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongoid.construct-changelog">
    <h3 class="title">Changelog</h3>
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>Version</th>
        <th>Description</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>1.4.0</td>
        <td>
         An exception is thrown when passed invalid string
        </td>
       </tr>
  
      </tbody>
     
    </table>
  
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoid.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1691">
     <p><strong>Example #1 <span class="function"><strong>MongoId::__construct()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      This example shows how to create a new id. This is seldom necessary, as the 
      driver adds an id to arrays automatically before storing them in the 
      database.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />&nbsp;&nbsp;$id1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">();<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$id1</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$id2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">();<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$id2</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  49a7011a05c677b9a916612a
  49a702d5450046d3d515d10d
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1692">
     <p><strong>Example #2 Parameter example</strong></p>
     <div class="example-contents"><p>This example shows how to use a string parameter to initialize a MongoId with a given value.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$id1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;new&nbsp;id&nbsp;from&nbsp;$id1<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$id2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$id1</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;show&nbsp;that&nbsp;$id1&nbsp;and&nbsp;$id2&nbsp;have&nbsp;the&nbsp;same&nbsp;hexidecimal&nbsp;value<br />&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$id1&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$id2</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  bool(true)
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoid.construct-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongoid.tostring" class="methodname" rel="rdfs-seeAlso">MongoId::__toString()</a> - Returns a hexidecimal representation of this id</span></li>
      <li class="member"><span class="methodname"><a href="#mongoid.isvalid" class="methodname" rel="rdfs-seeAlso">MongoId::isvalid()</a> - Check if a value is a valid ObjectId</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoid.gethostname" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::getHostname</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.8)</p><p class="refpurpose"><span class="refname">MongoId::getHostname</span> &mdash; <span class="dc-title">Gets the hostname being used for this machine&#039;s ids</span></p>
  
   </div>
  
   <div id="mongoid.gethostname-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.gethostname-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoId::getHostname</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     This returns the hostname <a href="#class.mongoid" class="classname">MongoId</a> is using to 
     generate unique ids.  This should be the same value 
     <span class="function"><a href="#function.gethostname" class="function">gethostname()</a></span> returns.
    </p>
    <p class="para">
     It is identical to the function:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">getHostname</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">gethostname</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.gethostname-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.gethostname-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the hostname.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoid.getinc" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::getInc</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.11)</p><p class="refpurpose"><span class="refname">MongoId::getInc</span> &mdash; <span class="dc-title">Gets the incremented value to create this id</span></p>
  
   </div>
  
   <div id="mongoid.getinc-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.getinc-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoId::getInc</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.getinc-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.getinc-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the incremented value used to create this <a href="#class.mongoid" class="classname">MongoId</a>.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoid.getpid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::getPID</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.11)</p><p class="refpurpose"><span class="refname">MongoId::getPID</span> &mdash; <span class="dc-title">Gets the process ID</span></p>
  
   </div>
  
   <div id="mongoid.getpid-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.getpid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoId::getPID</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     Extracts the pid from the Mongo ID
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.getpid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.getpid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the PID of the <a href="#class.mongoid" class="classname">MongoId</a>.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoid.gettimestamp" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::getTimestamp</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.1)</p><p class="refpurpose"><span class="refname">MongoId::getTimestamp</span> &mdash; <span class="dc-title">Gets the number of seconds since the epoch that this id was created</span></p>
  
   </div>
  
   <div id="mongoid.gettimestamp-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.gettimestamp-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoId::getTimestamp</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     This returns the same thing as running <span class="function"><a href="#function.time" class="function">time()</a></span> when the id is created.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.gettimestamp-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.gettimestamp-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of seconds since the epoch that this id was created.  There are only 
     four bytes of timestamp stored, so <a href="#class.mongodate" class="classname">MongoDate</a> is a better choice 
     for storing exact or wide-ranging times.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoid.isvalid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::isValid</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoId::isValid</span> &mdash; <span class="dc-title">Check if a value is a valid ObjectId</span></p>
  
   </div>
  
   <div id="mongoid.isvalid-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.isvalid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoId::isValid</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     This method may be used to check a variable before passing it as an argument
     to <span class="function"><a href="#mongoid.construct" class="function">MongoId::__construct()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.isvalid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">value</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The value to check for validity.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.isvalid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if <code class="parameter">value</code> is a
     <a href="#class.mongoid" class="classname">MongoId</a> instance or a string consisting of exactly 24
     hexadecimal characters; otherwise, <strong><code>FALSE</code></strong> is returned.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoid.set-state" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::__set_state</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.8)</p><p class="refpurpose"><span class="refname">MongoId::__set_state</span> &mdash; <span class="dc-title">Create a dummy MongoId</span></p>
  
   </div>
  
   <div id="mongoid.set-state-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.set-state-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoId::__set_state</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$props</code></span>
     ) : <span class="type"><a href="#class.mongoid" class="type MongoId">MongoId</a></span></div>
  
    <p class="para rdfs-comment">
     This function is only used by PHP internally, it shouldn&#039;t need to ever be
     called by the user.
    </p>
    <p class="para">
     It is identical to the function:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">__set_state</span><span style="color: #007700">(</span><span style="color: #0000BB">$props</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoId</span><span style="color: #007700">(</span><span style="color: #DD0000">"000000000000000000000000"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.set-state-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">props</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Theoretically, an array of properties used to create the new id.  
         However, as MongoId instances have no properties, this is not used.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.set-state-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     A new id with the value &quot;000000000000000000000000&quot;.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoid.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoId::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.0)</p><p class="refpurpose"><span class="refname">MongoId::__toString</span> &mdash; <span class="dc-title">Returns a hexidecimal representation of this id</span></p>
  
   </div>
  
   <div id="mongoid.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-objectid.tostring" class="methodname">MongoDB\BSON\ObjectId::__toString()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoid.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoId::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoid.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoid.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This id.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoid.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1693">
     <p><strong>Example #1 <span class="function"><strong>MongoId::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(&nbsp;</span><span style="color: #DD0000">"x"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"y"&nbsp;</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(&nbsp;</span><span style="color: #DD0000">"x"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"y"&nbsp;</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$r1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$r2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br /><br />echo&nbsp;</span><span style="color: #0000BB">$r1</span><span style="color: #007700">[</span><span style="color: #DD0000">"_id"</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$r2</span><span style="color: #007700">[</span><span style="color: #DD0000">"_id"</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  49a7011a05c677b9a916612a
  49a702d5450046d3d515d10d
  </pre></div>
     </div>
    </div>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoid.construct">MongoId::__construct</a> — Creates a new id</li><li><a href="#mongoid.gethostname">MongoId::getHostname</a> — Gets the hostname being used for this machine's ids</li><li><a href="#mongoid.getinc">MongoId::getInc</a> — Gets the incremented value to create this id</li><li><a href="#mongoid.getpid">MongoId::getPID</a> — Gets the process ID</li><li><a href="#mongoid.gettimestamp">MongoId::getTimestamp</a> — Gets the number of seconds since the epoch that this id was created</li><li><a href="#mongoid.isvalid">MongoId::isValid</a> — Check if a value is a valid ObjectId</li><li><a href="#mongoid.set-state">MongoId::__set_state</a> — Create a dummy MongoId</li><li><a href="#mongoid.tostring">MongoId::__toString</a> — Returns a hexidecimal representation of this id</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongocode" class="reference"><hr />
  
   <h1 class="title">The MongoCode class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.8.3)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-javascript" class="classname">MongoDB\BSON\JavaScript</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongocode.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Represents JavaScript code for the database.
     </p>
     <p class="para">
      MongoCode objects are composed of two parts: a string of code and an optional scope.  The string of code must be valid JavaScript.  The scope is a associative array of variable name/value pairs.
     </p>
    </div>
  
  
    <div class="section" id="mongocode.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoCode</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocode.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$code</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$scope</code><span class="initializer"> = array()</span></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocode.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongocode.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCode::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.3)</p><p class="refpurpose"><span class="refname">MongoCode::__construct</span> &mdash; <span class="dc-title">Creates a new code object</span></p>
  
   </div>
  
   <div id="mongocode.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-javascript.construct" class="methodname">MongoDB\BSON\JavaScript::__construct()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocode.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCode::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$code</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$scope</code><span class="initializer"> = array()</span></span>
    ] )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocode.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">code</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A string of code.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">scope</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The scope to use for the code.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocode.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new code object.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocode.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1694">
     <p><strong>Example #1 <span class="methodname"><strong>MongoCode::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$code&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;'</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'for(i=0;i&lt;10;i++)&nbsp;{'</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'db.foo.update({z&nbsp;:&nbsp;i},&nbsp;{z&nbsp;:&nbsp;x});'</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'}'</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'return&nbsp;x-1;'</span><span style="color: #007700">.<br />&nbsp;</span><span style="color: #DD0000">'}'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"x"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$code</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoCode)#1 (2) {
    [&quot;scope&quot;]=&gt;
    array(1) {
      [&quot;x&quot;]=&gt;
      int(4)
    }
    [&quot;code&quot;]=&gt;
    string(80) &quot;function() { for(i=0;i&lt;10;i++) { db.foo.update({z : i}, {z : x}); } return x-1; }&quot;
  }
  </pre></div>
     </div>
    </div>
  
  
    <div class="example" id="example-1695">
     <p><strong>Example #2 Using <a href="#class.mongocode" class="classname">MongoCode</a> with $where</strong></p>
     <div class="example-contents"><p>
      This example queries a collection for elements where the &#039;x&#039; fields is less than $y.  Notice that
      PHP objects can be passed into the JavaScript scope and that the JavaScript function returns a boolean.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'$where'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;this.x&nbsp;&lt;&nbsp;y;&nbsp;}'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'y'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$y</span><span style="color: #007700">))));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongocode.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCode::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.3)</p><p class="refpurpose"><span class="refname">MongoCode::__toString</span> &mdash; <span class="dc-title">Returns this code as a string</span></p>
  
   </div>
  
   <div id="mongocode.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this method in the new extension.</p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocode.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCode::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocode.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocode.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This code, the scope is not returned.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongocode.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1696">
     <p><strong>Example #1 <span class="function"><strong>MongoCode::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$code&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">'return&nbsp;x;'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"x"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"hi"</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$code</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$code&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCode</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;for(i=0;i&lt;10;i++)&nbsp;{&nbsp;db.foo.update({x:i},&nbsp;{x:i+1});&nbsp;}&nbsp;}'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$code</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  return x;
  function() { for(i=0;i&lt;10;i++) { db.foo.update({x:i}, {x:i+1}); } }
  </pre></div>
     </div>
    </div>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongocode.construct">MongoCode::__construct</a> — Creates a new code object</li><li><a href="#mongocode.tostring">MongoCode::__toString</a> — Returns this code as a string</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongodate" class="reference"><hr />
  
   <h1 class="title">The MongoDate class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.8.1)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-utcdatetime" class="classname">MongoDB\BSON\UTCDateTime</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongodate.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Represent date objects for the database.  This class should be used to save
      dates to the database and to query for dates.  For example:
     </p>
     <div class="example" id="mongocommandcursor.stages.adding-options">
      <p><strong>Example #1 Storing dates with <strong class="classname">MongoDate</strong></strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;save&nbsp;a&nbsp;date&nbsp;to&nbsp;the&nbsp;database<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"ts"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">()));<br /><br /></span><span style="color: #0000BB">$start&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"2010-01-15&nbsp;00:00:00"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$end&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"2010-01-30&nbsp;00:00:00"</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;find&nbsp;dates&nbsp;between&nbsp;1/15/2010&nbsp;and&nbsp;1/30/2010<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"ts"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$gt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$start</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'$lte'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$end</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
     <p class="para">
      MongoDB stores dates as milliseconds past the epoch.  This means that dates 
      <em class="emphasis">do not</em> contain timezone information.  Timezones must be
      stored in a separate field if needed.  Second, this means that any precision
      beyond milliseconds will be lost when the document is sent to/from the 
      database.
     </p>
    </div>
  
  
    <div class="section" id="mongodate.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDate</strong>
       </span>
       {</div>
  
    
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">int</span>
       <var class="varname">sec</var>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">int</span>
       <var class="varname">usec</var>
      ;</div>
  
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodate.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$sec</code><span class="initializer"> = time()</span></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$usec</code><span class="initializer"> = 0</span></span>
    ]] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodate.todatetime" class="methodname">toDateTime</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.datetime" class="type DateTime">DateTime</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodate.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongodate.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDate::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.1)</p><p class="refpurpose"><span class="refname">MongoDate::__construct</span> &mdash; <span class="dc-title">Creates a new date</span></p>
  
   </div>
  
   <div id="mongodate.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-utcdatetime.construct" class="methodname">MongoDB\BSON\UTCDateTime::__construct()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodate.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDate::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$sec</code><span class="initializer"> = time()</span></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$usec</code><span class="initializer"> = 0</span></span>
    ]] )</div>
  
    <p class="para rdfs-comment">
     Creates a new date.  If no parameters are given, the current time is used.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodate.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">sec</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Number of seconds since the epoch (i.e. 1 Jan 1970 00:00:00.000 UTC).
        </p>
       </dd>
  
           
      
       <dt>
  
        <code class="parameter">usec</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Microseconds. Please be aware though that MongoDB&#039;s resolution is
         <em class="emphasis">milliseconds</em> and not microseconds, which means this
         value will be truncated to millisecond resolution.
        </p>
       </dd>
  
           
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodate.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
      Returns this new date.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodate.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1698">
     <p><strong>Example #1 <span class="function"><strong>MongoDate::__construct()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates creating a new date with the current time and a new date with a given time.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$d&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$d</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">1234567890</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$d</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"2009-05-01&nbsp;00:00:01"</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$d</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  0.23660600 1235685067
  0.00000000 1234567890
  0.00000000 1241150401
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodate.construct-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodate.tostring" class="methodname" rel="rdfs-seeAlso">MongoDate::__toString()</a> - Returns a string representation of this date</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodate.todatetime" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDate::toDateTime</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.6.0)</p><p class="refpurpose"><span class="refname">MongoDate::toDateTime</span> &mdash; <span class="dc-title">Returns a DateTime object representing this date</span></p>
  
   </div>
  
   <div id="mongodate.todatetime-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-utcdatetime.todatetime" class="methodname">MongoDB\BSON\UTCDateTime::toDateTime()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodate.todatetime-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDate::toDateTime</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.datetime" class="type DateTime">DateTime</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.datetime" class="classname">DateTime</a> representation of this date. The
     returned <a href="#class.datetime" class="classname">DateTime</a> will use the UTC time zone.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodate.todatetime-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodate.todatetime-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This date as a <a href="#class.datetime" class="classname">DateTime</a> object.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodate.todatetime-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1699">
     <p><strong>Example #1 <span class="function"><strong>MongoDate::toDateTime()</strong></span> example</strong></p>
     <div class="example-contents"><p>This example demonstrates creating a DateTime object from a MongoDate
     object.</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$d&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"2014-11-18&nbsp;11:01:25"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toDateTime</span><span style="color: #007700">()&nbsp;);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  class DateTime#2 (3) {
    public $date =&gt;
    string(26) &quot;2014-11-18 11:01:25.000000&quot;
    public $timezone_type =&gt;
    int(1)
    public $timezone =&gt;
    string(6) &quot;+00:00&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodate.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDate::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.1)</p><p class="refpurpose"><span class="refname">MongoDate::__toString</span> &mdash; <span class="dc-title">Returns a string representation of this date</span></p>
  
   </div>
  
   <div id="mongodate.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-utcdatetime.tostring" class="methodname">MongoDB\BSON\UTCDateTime::__toString()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodate.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDate::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns a string representation of this date, similar to the representation returned by <span class="function"><a href="#function.microtime" class="function">microtime()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodate.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodate.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This date.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodate.construct">MongoDate::__construct</a> — Creates a new date</li><li><a href="#mongodate.todatetime">MongoDate::toDateTime</a> — Returns a DateTime object representing this date</li><li><a href="#mongodate.tostring">MongoDate::__toString</a> — Returns a string representation of this date</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoregex" class="reference"><hr />
  
   <h1 class="title">The MongoRegex class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.8.1)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-regex" class="classname">MongoDB\BSON\Regex</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongoregex.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This class can be used to create regular expressions.  Typically, these
      expressions will be used to query the database and find matching strings.
      More unusually, they can be saved to the database and retrieved.
     </p>
     <p class="para">
      Regular expressions consist of four parts. First a <code class="literal">/</code>
      as starting delimiter, then the pattern, another <code class="literal">/</code> 
      and finally a string containing flags.
     </p>
     <p class="para">
      <div class="example" id="example-1700">
       <p><strong>Example #1 Regular expression pattern</strong></p>
        <div class="example-contents screen">
  <div class="cdata"><pre>
  /pattern/flags
  </pre></div>
        </div>
      </div>
     </p>
     <p class="para">
      MongoDB recognizes six regular expression flags:
     </p>
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <code class="literal">i</code>: Case insensitive
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">m</code>: Multiline
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">x</code>: Can contain comments
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">l</code>: locale
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">s</code>: dotall, &quot;.&quot; matches everything, including newlines
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">u</code>: match unicode
       </p>
      </li>
     </ul>
    </div>
  
  
    <div class="section" id="mongoregex.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoRegex</strong>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">string</span>
       <var class="varname">regex</var>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">string</span>
       <var class="varname">flags</var>
      ;</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoregex.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$regex</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoregex.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongoregex.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoRegex::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.1)</p><p class="refpurpose"><span class="refname">MongoRegex::__construct</span> &mdash; <span class="dc-title">Creates a new regular expression</span></p>
  
   </div>
  
   <div id="mongoregex.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-regex.construct" class="methodname">MongoDB\BSON\Regex::__construct()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoregex.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoRegex::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$regex</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     Creates a new regular expression.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoregex.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">regex</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Regular expression string of the form <code class="literal">/expr/flags</code>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoregex.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new regular expression.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoregex.construct-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1701">
      <p><strong>Example #1 <span class="function"><strong>MongoRegex::__construct()</strong></span> example</strong></p>
      <div class="example-contents"><p>This example uses a regular expression to query for all documents
      with a username field starting (<code class="literal">^</code>) with an
      <code class="literal">l</code> and a vowel (<code class="literal">[aeiouy]</code>),
      case-insensitive (<code class="literal">/i</code>).</p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$luke_search&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoRegex</span><span style="color: #007700">(</span><span style="color: #DD0000">"/^l[aeiouy]/i"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"username"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$luke_search</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongoregex.construct-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongoregex.tostring" class="methodname" rel="rdfs-seeAlso">MongoRegex::__toString()</a> - A string representation of this regular expression</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoregex.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoRegex::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.1)</p><p class="refpurpose"><span class="refname">MongoRegex::__toString</span> &mdash; <span class="dc-title">A string representation of this regular expression</span></p>
  
   </div>
  
   <div id="mongoregex.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-regex.tostring" class="methodname">MongoDB\BSON\Regex::__toString()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoregex.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoRegex::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns a string representation of this regular expression.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoregex.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoregex.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     This regular expression in the form &quot;/expr/flags&quot;.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoregex.tostring-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1702">
      <p><strong>Example #1 <span class="function"><strong>MongoRegex::__toString()</strong></span> example</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$r&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoRegex</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">"/[a-fA-F0-9]{16}/g"&nbsp;</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">regex&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flags&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$r</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  [a-fA-F0-9]{16}
  g
  /[a-fA-F0-9]{16}/g
  </pre></div>
      </div>
     </div>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoregex.construct">MongoRegex::__construct</a> — Creates a new regular expression</li><li><a href="#mongoregex.tostring">MongoRegex::__toString</a> — A string representation of this regular expression</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongobindata" class="reference"><hr />
  
   <h1 class="title">The MongoBinData class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 0.8.1)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongobindata.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      An object that can be used to store or retrieve binary data from the database.
     </p>
     <p class="para">
      The maximum size of a single object that can be inserted into the database
      is 16MB. For data that is larger than this (movies, music, Henry Kissinger&#039;s
      autobiography), use <a href="#class.mongogridfs" class="classname">MongoGridFS</a>. For data that is
      smaller than 16MB, you may find it easier to embed it within the document
      using <strong class="classname">MongoBinData</strong>.
     </p>
     <p class="para">
      For example, to embed an image in a document, one could write:
     </p>
     <div class="example" id="example-1703">
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$profile&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"username"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"foobity"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"pic"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoBinData</span><span style="color: #007700">(</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">"gravatar.jpg"</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">MongoBinData</span><span style="color: #007700">::</span><span style="color: #0000BB">GENERIC</span><span style="color: #007700">),<br />);<br /><br /></span><span style="color: #0000BB">$users</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(</span><span style="color: #0000BB">$profile</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
     <p class="para">
      This class contains a <var class="varname">type</var> field, which currently gives
      no additional functionality in the PHP driver or the database. There are
      seven predefined types, which are defined as class constants below. For
      backwards compatibility, the PHP driver uses
      <strong><code>MongoBinData::BYTE_ARRAY</code></strong> as the default; however, this
      may change to <strong><code>MongoBinData::GENERIC</code></strong> in the future.
      Users are encouraged to specify a type in
      <span class="function"><a href="#mongobindata.construct" class="function">MongoBinData::__construct()</a></span>.
     </p>
    </div>
  
  
    <div class="section" id="mongobindata.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoBinData</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">GENERIC</var>
       <span class="initializer"> = 0</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">FUNC</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">BYTE_ARRAY</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">UUID</var>
       <span class="initializer"> = 3</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">UUID_RFC4122</var>
       <span class="initializer"> = 4</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">MD5</var>
       <span class="initializer"> = 5</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">CUSTOM</var>
       <span class="initializer"> = 128</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">string</span>
       <var class="varname">bin</var>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">int</span>
       <var class="varname">type</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongobindata.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$data</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$type</code><span class="initializer"> = 0</span></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongobindata.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
  
    <div class="section">
     <h2 class="title">Predefined Constants</h2>
     <div class="section" id="mongobindata.constants.types">
      <h2 class="title">Binary Data Types</h2>
      <dl>
  
       
        <dt id="mongobindata.constants.generic"><strong><code>MongoBinData::GENERIC</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Generic binary data.
         </span>
        </dd>
  
       
       
        <dt id="mongobindata.constants.func"><strong><code>MongoBinData::FUNC</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Function.
         </span>
        </dd>
  
       
       
        <dt id="mongobindata.constants.byte_array"><strong><code>MongoBinData::BYTE_ARRAY</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Generic binary data (deprecated in favor of
          <strong><code>MongoBinData::GENERIC</code></strong>).
         </span>
        </dd>
  
       
       
        <dt id="mongobindata.constants.uuid"><strong><code>MongoBinData::UUID</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Universally unique identifier (deprecated in favor of
          <strong><code>MongoBinData::UUID_RFC4122</code></strong>).
         </span>
        </dd>
  
       
       
        <dt id="mongobindata.constants.uuid_rfc4122"><strong><code>MongoBinData::UUID_RFC4122</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Universally unique identifier (according to
          <a href="http://www.faqs.org/rfcs/rfc4122" class="link external">&raquo;&nbsp;RFC 4122</a>).
         </span>
        </dd>
  
       
       
        <dt id="mongobindata.constants.md5"><strong><code>MongoBinData::MD5</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          MD5.
         </span>
        </dd>
  
       
       
        <dt id="mongobindata.constants.custom"><strong><code>MongoBinData::CUSTOM</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          User-defined type.
         </span>
        </dd>
  
       
      </dl>
  
     </div>
    </div>
  
  
    <div class="simplesect">
     <h3 class="title">Changelog</h3>
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          Added <strong><code>MongoBinData::GENERIC</code></strong> and
          <strong><code>MongoBinData::UUID_RFC4122</code></strong> constants.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongobindata.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoBinData::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.1)</p><p class="refpurpose"><span class="refname">MongoBinData::__construct</span> &mdash; <span class="dc-title">Creates a new binary data object</span></p>
  
   </div>
  
   <div id="mongobindata.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.construct" class="methodname">MongoDB\BSON\Binary::__construct()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongobindata.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoBinData::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$data</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$type</code><span class="initializer"> = 0</span></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Creates a new binary data object.
    </p>
    <p class="para">
     There are seven types of binary data currently recognized by the BSON spec,
     which are defined as
     <a href="#mongobindata.constants.types" class="link">class constants</a>. For
     backwards compatibility, the PHP driver uses
     <strong><code>MongoBinData::BYTE_ARRAY</code></strong> as the default; however, this
     may change to <strong><code>MongoBinData::GENERIC</code></strong> in the future.
     Users are encouraged to specify a type instead of relying on the default.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongobindata.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">data</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Binary data.
        </p>
       </dd>
  
           
      
       <dt>
  
        <code class="parameter">type</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Data type.
        </p>
       </dd>
  
           
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongobindata.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new binary data object.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongobindata.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.5.0</td>
         <td>
          The default changed from <code class="literal">2</code>
          (<strong><code>MongoBinData::BYTE_ARRAY</code></strong>) to
          <code class="literal">0</code> (<strong><code>MongoBinData::GENERIC</code></strong>).
         </td>
        </tr>
  
        <tr>
         <td>1.2.11</td>
         <td>
          Emits <strong><code>E_DEPRECATED</code></strong> when the second argument is not
          used. The default value for <code class="parameter">type</code> may change in
          the near future.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongobindata.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoBinData::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.8.1)</p><p class="refpurpose"><span class="refname">MongoBinData::__toString</span> &mdash; <span class="dc-title">The string representation of this binary data object</span></p>
  
   </div>
  
   <div id="mongobindata.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.getdata" class="methodname">MongoDB\BSON\Binary::getData()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongobindata.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoBinData::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongobindata.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongobindata.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string &quot;&lt;Mongo Binary Data&gt;&quot;.  To access the contents of a 
     <a href="#class.mongobindata" class="classname">MongoBinData</a>, use the <code class="literal">bin</code> field.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongobindata.construct">MongoBinData::__construct</a> — Creates a new binary data object</li><li><a href="#mongobindata.tostring">MongoBinData::__toString</a> — The string representation of this binary data object</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoint32" class="reference"><hr />
  
   <h1 class="title">The MongoInt32 class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.0.9)</p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      Instead, the new extension chooses the appropriate database type depending
      on the integer&#039;s value.
     </p>
    </div>
  
  
    <div class="section" id="mongoint32.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The class can be used to save 32-bit integers to the database on a 64-bit 
      system.
     </p>
    </div>
  
  
    <div class="section" id="mongoint32.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoInt32</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">string</span>
       <var class="varname">value</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoint32.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoint32.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Fields</h2>
     <dl>
  
      
       <dt id="mongoint32.props.value"><var class="varname">value</var></dt>
  
       <dd>
  
        <span class="simpara">
         This is the string value of the 32-bit number.  For instance, 123&#039;s value
         would be &quot;123&quot;.
        </span>
       </dd>
  
      
     </dl>
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongoint32.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoInt32::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.9)</p><p class="refpurpose"><span class="refname">MongoInt32::__construct</span> &mdash; <span class="dc-title">Creates a new 32-bit integer</span></p>
  
   </div>
  
   <div id="mongoint32.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      Instead, the new extension chooses the appropriate database type depending
      on the integer&#039;s value.
     </p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoint32.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoInt32::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     Creates a new 32-bit number with the given value.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoint32.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">value</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A number.
        </p>
       </dd>
  
           
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoint32.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new integer.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoint32.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoInt32::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.9)</p><p class="refpurpose"><span class="refname">MongoInt32::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this 32-bit integer</span></p>
  
   </div>
  
   <div id="mongoint32.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      Instead, the new extension chooses the appropriate database type depending
      on the integer&#039;s value.
     </p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoint32.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoInt32::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoint32.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoint32.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this integer.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoint32.construct">MongoInt32::__construct</a> — Creates a new 32-bit integer</li><li><a href="#mongoint32.tostring">MongoInt32::__toString</a> — Returns the string representation of this 32-bit integer</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoint64" class="reference"><hr />
  
   <h1 class="title">The MongoInt64 class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.0.9)</p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      Instead, the new extension chooses the appropriate database type depending
      on the integer&#039;s value.
     </p>
    </div>
  
  
    <div class="section" id="mongoint64.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The class can be used to save 64-bit integers to the database on a 32-bit 
      system.
     </p>
    </div>
  
  
    <div class="section" id="mongoint64.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoInt64</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">string</span>
       <var class="varname">value</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoint64.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoint64.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Fields</h2>
     <dl>
  
      
       <dt id="mongoint64.props.value"><var class="varname">value</var></dt>
  
       <dd>
  
        <span class="simpara">
         This is the string value of the 64-bit number.  For instance, 123&#039;s value
         would be &quot;123&quot;.
        </span>
       </dd>
  
      
     </dl>
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongoint64.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoInt64::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.9)</p><p class="refpurpose"><span class="refname">MongoInt64::__construct</span> &mdash; <span class="dc-title">Creates a new 64-bit integer</span></p>
  
   </div>
  
   <div id="mongoint64.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      Instead, the new extension chooses the appropriate database type depending
      on the integer&#039;s value.
     </p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoint64.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoInt64::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>
     )</div>
  
    <p class="para rdfs-comment">
     Creates a new 64-bit number with the given value.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoint64.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">value</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A number.
        </p>
       </dd>
  
           
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoint64.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new integer.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongoint64.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoInt64::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.9)</p><p class="refpurpose"><span class="refname">MongoInt64::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this 64-bit integer</span></p>
  
   </div>
  
   <div id="mongoint64.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      Instead, the new extension chooses the appropriate database type depending
      on the integer&#039;s value.
     </p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoint64.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoInt64::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoint64.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoint64.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this integer.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoint64.construct">MongoInt64::__construct</a> — Creates a new 64-bit integer</li><li><a href="#mongoint64.tostring">MongoInt64::__toString</a> — Returns the string representation of this 64-bit integer</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongodbref" class="reference"><hr />
  
   <h1 class="title">The MongoDBRef class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      The concept of database references, and hence this class, has been
      deprecated in the database.
     </p>
    </div>
  
  
    <div class="section" id="mongodbref.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This class can be used to create lightweight links between objects in 
      different collections.
     </p>
     <p class="para">
      <em class="emphasis">Motivation</em>: Suppose we need to refer to a document in 
      another collection. The easiest way is to create a field in the current 
      document.  For example, if we had a &quot;people&quot; collection and an &quot;addresses&quot;
      collection, we might want to create a link between each person document and
      an address document:
      <div class="example" id="example-1704">
       <p><strong>Example #1 Linking documents</strong></p>
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$people&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">people</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$addresses&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addresses</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$myAddress&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"line&nbsp;1"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"123&nbsp;Main&nbsp;Street"</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"line&nbsp;2"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"city"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Springfield"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"state"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Vermont"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"country"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"USA"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;save&nbsp;the&nbsp;address<br /></span><span style="color: #0000BB">$addresses</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$myAddress</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;save&nbsp;a&nbsp;person&nbsp;with&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;address<br /></span><span style="color: #0000BB">$me&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Fred"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"address"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$myAddress</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$me</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
     <p class="para">
      Then, later on, we can find the person&#039;s address by querying the &quot;addresses&quot;
      collection with the <a href="#class.mongoid" class="classname">MongoId</a> we saved in the &quot;people&quot;
      collection.
     </p>
     <p class="para">
      Suppose now that we have a more general case, where we don&#039;t know which
      collection (or even which database) contains the referenced document.  
      <strong class="classname">MongoDBRef</strong> is a good choice for this case, as it is a
      common format that all of the drivers and the database understand.
     </p>
     <p class="para">
      If each person had a list of things they liked which could come from
      multiple collections, such as &quot;hobbies&quot;, &quot;sports&quot;, &quot;books&quot;, etc., we could
      use <strong class="classname">MongoDBRef</strong>s to keep track of what &quot;like&quot; went
      with what collection:
      <div class="example" id="example-1705">
       <p><strong>Example #2 Creating MongoDBRef links</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$people&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"people"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;model&nbsp;trains&nbsp;are&nbsp;in&nbsp;the&nbsp;"hobbies"&nbsp;collection<br /></span><span style="color: #0000BB">$trainRef&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDBRef</span><span style="color: #007700">::</span><span style="color: #0000BB">create</span><span style="color: #007700">(</span><span style="color: #DD0000">"hobbies"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$modelTrains</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]);<br /></span><span style="color: #FF8000">//&nbsp;soccer&nbsp;is&nbsp;in&nbsp;the&nbsp;"sports"&nbsp;collection<br /></span><span style="color: #0000BB">$soccerRef&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDBRef</span><span style="color: #007700">::</span><span style="color: #0000BB">create</span><span style="color: #007700">(</span><span style="color: #DD0000">"sports"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$soccer</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;now&nbsp;we'll&nbsp;know&nbsp;what&nbsp;collections&nbsp;the&nbsp;items&nbsp;in&nbsp;the&nbsp;"likes"&nbsp;array&nbsp;came&nbsp;from&nbsp;when<br />//&nbsp;we&nbsp;retrieve&nbsp;this&nbsp;document<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Fred"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"likes"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">$trainRef</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$soccerRef</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
     <p class="para">
      Database references can be thought of as hyperlinks: they give the unique 
      address of another document, but they do not load it or automatically follow
      the link/reference.  
     </p>
     <p class="para">
      A database reference is just a normal associative array, not an instance of
      <strong class="classname">MongoDBRef</strong>, so this class is a little different than 
      the other data type classes.  This class contains exclusively static methods 
      for manipulating database references.
     </p>
    </div>
  
  
    <div class="section" id="mongodbref.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDBRef</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongodbref.create" class="methodname">create</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$id</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
    ] ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongodbref.get" class="methodname">get</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongodbref.isref" class="methodname">isRef</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$ref</code></span>
     ) : <span class="type">bool</span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">See Also</h2>
     <p class="para">
      MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/database-references/" class="link external">&raquo;&nbsp;databases references</a>.
     </p>
    </div>
   </div>
  
   
  
  
  <div id="mongodbref.create" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDBRef::create</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.9.0)</p><p class="refpurpose"><span class="refname">MongoDBRef::create</span> &mdash; <span class="dc-title">Creates a new database reference</span></p>
  
   </div>
  
   <div id="mongodbref.create-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      The concept of database references, and hence this class, has been
      deprecated.
     </p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodbref.create-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoDBRef::create</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$id</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
    ] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     If no database is given, the current database is used.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodbref.create-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">collection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Collection name (without the database name).
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">id</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The _id field of the object to which to link.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">database</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database name.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodbref.create-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the reference.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodbref.create-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1706">
     <p><strong>Example #1 <span class="function"><strong>MongoDBRef::create()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      This creates a database reference to a document in the 
      <code class="literal">addresses</code> collection.  The 
      <span class="function"><a href="#mongocollection.getname" class="function">MongoCollection::getName()</a></span> function returns the name of 
      the collection (not including the database name).
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$addresses&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addresses</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$people&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">people</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;save&nbsp;$address&nbsp;so&nbsp;it&nbsp;has&nbsp;an&nbsp;_id<br /></span><span style="color: #0000BB">$addresses</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$address</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;reference<br /></span><span style="color: #0000BB">$ref&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDBRef</span><span style="color: #007700">::</span><span style="color: #0000BB">create</span><span style="color: #007700">(</span><span style="color: #0000BB">$addresses</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$address</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;set&nbsp;the&nbsp;field&nbsp;in&nbsp;$person<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'address'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$ref</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(</span><span style="color: #0000BB">$person</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodbref.create-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb.createdbref" class="methodname" rel="rdfs-seeAlso">MongoDB::createDBRef()</a> - Creates a database reference</span></li>
      <li class="member"><span class="methodname"><a href="#mongocollection.createdbref" class="methodname" rel="rdfs-seeAlso">MongoCollection::createDBRef()</a> - Creates a database reference</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodbref.get" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDBRef::get</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.9.0)</p><p class="refpurpose"><span class="refname">MongoDBRef::get</span> &mdash; <span class="dc-title">Fetches the object pointed to by a reference</span></p>
  
   </div>
  
   <div id="mongodbref.get-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      The concept of database references, and hence this class, has been
      deprecated.
     </p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodbref.get-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoDBRef::get</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodbref.get-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">db</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database to use.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">ref</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Reference to fetch.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodbref.get-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the document to which the reference refers or <strong><code>NULL</code></strong> if the document
     does not exist (the reference is broken).
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodbref.get-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1707">
     <p><strong>Example #1 <span class="function"><a href="#mongocollection.createdbref" class="function">MongoCollection::createDBRef()</a></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;get&nbsp;$person&nbsp;out&nbsp;of&nbsp;the&nbsp;db<br /></span><span style="color: #0000BB">$person&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;dereference&nbsp;the&nbsp;address<br /></span><span style="color: #0000BB">$address&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDBRef</span><span style="color: #007700">::</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">db</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">[</span><span style="color: #DD0000">'address'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodbref.get-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb.getdbref" class="methodname" rel="rdfs-seeAlso">MongoDB::getDBRef()</a> - Fetches the document pointed to by a database reference</span></li>
      <li class="member"><span class="methodname"><a href="#mongocollection.getdbref" class="methodname" rel="rdfs-seeAlso">MongoCollection::getDBRef()</a> - Fetches the document pointed to by a database reference</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongodbref.isref" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDBRef::isRef</h1>
    <p class="verinfo">(PECL mongo &gt;= 0.9.0)</p><p class="refpurpose"><span class="refname">MongoDBRef::isRef</span> &mdash; <span class="dc-title">Checks if an array is a database reference</span></p>
  
   </div>
  
   <div id="mongodbref.isref-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  There is no equivalent for this class in the new extension.</p>
     <p class="para">
      The concept of database references, and hence this class, has been
      deprecated.
     </p>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodbref.isref-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoDBRef::isRef</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$ref</code></span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     This method does not actually follow the reference, so it does not determine if it is
     broken or not.  It merely checks that <code class="parameter">ref</code> is in valid 
     database reference format (in that it is an object or array with $ref and $id
     fields).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodbref.isref-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">ref</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Array or object to check.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodbref.isref-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
      Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodbref.create">MongoDBRef::create</a> — Creates a new database reference</li><li><a href="#mongodbref.get">MongoDBRef::get</a> — Fetches the object pointed to by a reference</li><li><a href="#mongodbref.isref">MongoDBRef::isRef</a> — Checks if an array is a database reference</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongominkey" class="reference"><hr />
  
   <h1 class="title">The MongoMinKey class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.0.2)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-minkey" class="classname">MongoDB\BSON\MinKey</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongominkey.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      <strong class="classname">MongoMinKey</strong> is an special type used by the database
      that compares less than all other possible BSON values. Thus, if a query is
      sorted by a given field in ascending order, any document with a 
      <strong class="classname">MongoMinKey</strong> as its value will be returned first.
     </p>
     <p class="para">
      <strong class="classname">MongoMinKey</strong> has no associated fields, methods, or
      constants. It is merely the &quot;smallest&quot; value that can be represented in the
      database.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       <strong class="classname">MongoMinKey</strong> is used internally by MongoDB for
       indexing and sharding. There is generally no reason to use this class in
       an application.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongominkey.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoMinKey</strong>
       </span>
       {</div>
  
     }</div>
  
  
    </div>
  
    <div class="section" id="mongominkey.example">
     <h2 class="title">Using <strong class="classname">MongoMinKey</strong> as a value</h2>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"task"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"lunch"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"doBy"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoMinKey</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"task"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"staff&nbsp;meeting"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"doBy"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"+4&nbsp;days"</span><span style="color: #007700">))));<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"doBy"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <p class="para">
      The cursor will return the lunch document followed by the staff meeting
      document. The lunch document will always be returned first, regardless of
      what else is added to the collection (unless other documents are added with
      <strong class="classname">MongoMinKey</strong> in their &quot;doBy&quot; field).
     </p>
    </div>
  
    <div class="simplesect">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongomaxkey" class="classname">MongoMaxKey</a></li>
     </ul>
    </div>
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongomaxkey" class="reference"><hr />
  
   <h1 class="title">The MongoMaxKey class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.0.2)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-maxkey" class="classname">MongoDB\BSON\MaxKey</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongomaxkey.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      <strong class="classname">MongoMaxKey</strong> is an special type used by the database
      that compares greater than all other possible BSON values. Thus, if a query
      is sorted by a given field in ascending order, any document with a 
      <strong class="classname">MongoMaxKey</strong> as its value will be returned last.
     </p>
     <p class="para">
      <strong class="classname">MongoMaxKey</strong> has no associated fields, methods, or
      constants. It is merely the &quot;greatest&quot; value that can be represented in the
      database.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       <strong class="classname">MongoMaxKey</strong> is used internally by MongoDB for
       indexing and sharding. There is generally no reason to use this class in
       an application.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongomaxkey.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoMaxKey</strong>
       </span>
       {</div>
  
     }</div>
  
  
    </div>
  
    <div class="section" id="mongomaxkey.example">
     <h2 class="title">Using <strong class="classname">MongoMaxKey</strong> as a value</h2>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"task"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"dishes"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"doBy"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoMaxKey</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"task"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"staff&nbsp;meeting"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"doBy"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">(</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">"+4&nbsp;days"</span><span style="color: #007700">))));<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"doBy"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <p class="para">
      The cursor will return the staff meeting document followed by the dishes
      document. The dishes document will always be returned last, regardless of
      what else is added to the collection (unless other documents are added with
      <strong class="classname">MongoMaxKey</strong> in their &quot;doBy&quot; field).
     </p>
    </div>
  
    <div class="simplesect">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongominkey" class="classname">MongoMinKey</a></li>
     </ul>
    </div>
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongotimestamp" class="reference"><hr />
  
   <h1 class="title">The MongoTimestamp class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.0.1)</p>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">This extension that defines this class
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this class include:</p>
     <ul class="simplelist">
      <li class="member"><a href="#class.mongodb-bson-timestamp" class="classname">MongoDB\BSON\Timestamp</a></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongotimestamp.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      <strong class="classname">MongoTimestamp</strong> is an internal type used by MongoDB
      for replication and sharding. It consists of a 4-byte timestamp (i.e.
      seconds since the epoch) and a 4-byte increment. This type is not intended
      for storing time or date values (e.g. a &quot;createdAt&quot; field on a document).
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       Unless you are writing an application that interacts with MongoDB&#039;s
       replication oplog or sharding internals: stop, go directly to
       <a href="#class.mongodate" class="classname">MongoDate</a>, do not pass go, and do not collect 200
       dollars. This is not the class you are looking for.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongotimestamp.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoTimestamp</strong>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">int</span>
       <var class="varname">sec</var>
       <span class="initializer"> = 0</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">int</span>
       <var class="varname">inc</var>
       <span class="initializer"> = 0</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongotimestamp.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$sec</code><span class="initializer"> = time()</span></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$inc</code></span>
    ]] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongotimestamp.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
   
  
     }</div>
  
  
    </div>
   </div>
  
   
  
  
  <div id="mongotimestamp.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoTimestamp::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.1)</p><p class="refpurpose"><span class="refname">MongoTimestamp::__construct</span> &mdash; <span class="dc-title">Creates a new timestamp</span></p>
  
   </div>
  
   <div id="mongotimestamp.construct-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-timestamp.construct" class="methodname">MongoDB\BSON\Timestamp::__construct()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongotimestamp.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoTimestamp::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$sec</code><span class="initializer"> = time()</span></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$inc</code></span>
    ]] )</div>
  
    <p class="para rdfs-comment">
     Creates a new timestamp.  If no parameters are given, the current time is 
     used and the increment is automatically provided.  The increment is set to 0
     when the module is loaded and is incremented every time this constructor is 
     called (without the $inc parameter passed in).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongotimestamp.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">sec</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Number of seconds since the epoch (i.e. 1 Jan 1970 00:00:00.000 UTC).
        </p>
       </dd>
  
           
      
       <dt>
  
        <code class="parameter">inc</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Increment.
        </p>
       </dd>
  
           
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongotimestamp.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
      Returns this new timestamp.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongotimestamp.construct-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongotimestamp.tostring" class="methodname" rel="rdfs-seeAlso">MongoTimestamp::__toString()</a> - Returns a string representation of this timestamp</span></li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongotimestamp.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoTimestamp::__toString</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.1)</p><p class="refpurpose"><span class="refname">MongoTimestamp::__toString</span> &mdash; <span class="dc-title">Returns a string representation of this timestamp</span></p>
  
   </div>
  
   <div id="mongotimestamp.tostring-soft-deprecation-notice" class="soft-deprecation-notice">
    <blockquote class="sidebar">
     <p class="para">This extension that defines this method
  is deprecated. Instead, the <a href="#set.mongodb" class="link">MongoDB</a> extension should be used.
  Alternatives to this method include:</p>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-bson-timestamp.tostring" class="methodname">MongoDB\BSON\Timestamp::__toString()</a></span></li>
     </ul>
    </blockquote>
   </div>
  
   <div class="refsect1 description" id="refsect1-mongotimestamp.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoTimestamp::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the &quot;sec&quot; field of this timestamp.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongotimestamp.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongotimestamp.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The seconds since epoch represented by this timestamp.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongotimestamp.construct">MongoTimestamp::__construct</a> — Creates a new timestamp</li><li><a href="#mongotimestamp.tostring">MongoTimestamp::__toString</a> — Returns a string representation of this timestamp</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
  </div>
  
  <hr />
  
  
   
  
  
  <div id="mongo.gridfs" class="part"><hr />
  
   <h1>GridFS Classes</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_part"><li><a href="#class.mongogridfs">MongoGridFS</a></li><li><a href="#class.mongogridfsfile">MongoGridFSFile</a></li><li><a href="#class.mongogridfscursor">MongoGridFSCursor</a></li></ul>
  
  
   
  
  
  <div id="class.mongogridfs" class="reference"><hr />
  
   <h1 class="title">The MongoGridFS class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
  
    <div class="section" id="mongogridfs.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Utilities for storing and retrieving files from the database.
     </p>
  
     <p class="para">
      GridFS is a storage specification all supported drivers implement. 
      Basically, it defines two collections: <code class="literal">files</code>, for file 
      metadata, and <code class="literal">chunks</code>, for file content.  If the file is 
      large, it will automatically be split into smaller chunks and each chunk 
      will be saved as a document in the chunks collection.
     </p>
  
     <p class="para">
      Each document in the files collection contains the filename, upload date, 
      and md5 hash.  It also contains a unique <code class="literal">_id</code> field, which
      can be used to query the chunks collection for the file&#039;s content.  Each 
      document in the chunks collection contains a chunk of binary data, a 
      <code class="literal">files_id</code> field that matches its file&#039;s 
      <code class="literal">_id</code>, and the position of this chunk in the overall file.
     </p>
  
     <p class="para">
      For example, the files document is something like:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123456789</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"filename"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"foo.txt"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"chunkSize"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"length"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      and the chunks documents look like:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array(</span><span style="color: #DD0000">"files_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123456789</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"n"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"data"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoBinData</span><span style="color: #007700">(</span><span style="color: #DD0000">"abc"</span><span style="color: #007700">));<br />array(</span><span style="color: #DD0000">"files_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123456789</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"n"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"data"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoBinData</span><span style="color: #007700">(</span><span style="color: #DD0000">"def"</span><span style="color: #007700">));<br />array(</span><span style="color: #DD0000">"files_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123456789</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"n"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"data"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoBinData</span><span style="color: #007700">(</span><span style="color: #DD0000">"ghi"</span><span style="color: #007700">));<br />array(</span><span style="color: #DD0000">"files_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123456789</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"n"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"data"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoBinData</span><span style="color: #007700">(</span><span style="color: #DD0000">"jkl"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      Of course, the default chunk size is thousands of bytes, but that makes an unwieldy example.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Inter-Language Compatibility</h2>
     <p class="para">
      You should be able to use any files created by MongoGridFS with any other 
      drivers, and vice versa.  However, some drivers expect that all metadata
      associated with a file be in a &quot;metadata&quot; field.  If you&#039;re going to be 
      using other languages, it&#039;s a good idea to wrap info you might want them to
      see in a &quot;metadata&quot; field.  For example, instead of:
     </p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeFile</span><span style="color: #007700">(</span><span style="color: #DD0000">"somefile.txt"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"date"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">()));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <p class="para">
      use something like:
     </p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeFile</span><span style="color: #007700">(</span><span style="color: #DD0000">"somefile.txt"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"metadata"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"date"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">())));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <div class="section">
     <h2 class="title">The <strong class="classname">MongoGridFS</strong> Family</h2>
  
     <p class="para">
      <strong class="classname">MongoGridFS</strong> represents the files and chunks 
      collections. <strong class="classname">MongoGridFS</strong> extends MongoCollection, 
      and an instance of <strong class="classname">MongoGridFS</strong> has access to all of 
      <a href="#class.mongocollection" class="classname">MongoCollection</a> methods, which act on the files
      collection:
      <div class="informalexample">
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$grid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"filename"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$newObj</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;update&nbsp;on&nbsp;the&nbsp;files&nbsp;collection<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
  
     <p class="para">
      Another example of manipulating metadata:
      <div class="informalexample">
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;save&nbsp;a&nbsp;file<br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeFile</span><span style="color: #007700">(</span><span style="color: #DD0000">"game.tgz"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$game&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;add&nbsp;a&nbsp;downloads&nbsp;counter<br /></span><span style="color: #0000BB">$game</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">file</span><span style="color: #007700">[</span><span style="color: #DD0000">'downloads'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">(</span><span style="color: #0000BB">$game</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">file</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;increment&nbsp;the&nbsp;counter<br /></span><span style="color: #0000BB">$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'$inc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"downloads"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
  
     <p class="para">
      You can also access the chunks collection from an instance of 
      <strong class="classname">MongoGridFS</strong>:
      <div class="informalexample">
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />&nbsp;&nbsp;$chunks&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">chunks</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;$chunks&nbsp;is&nbsp;a&nbsp;normal&nbsp;MongoCollection<br /></span><span style="color: #0000BB">$chunks</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"x"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
     <p class="para">
      There are some methods for <strong class="classname">MongoGridFS</strong> with the same
      name as <a href="#class.mongocollection" class="classname">MongoCollection</a> methods, that behave 
      slightly differently. For example, <span class="function"><a href="#mongogridfs.remove" class="function">MongoGridFS::remove()</a></span>
      will remove any objects that match the criteria from the files collection 
      and their content from the chunks collection.
     </p>
  
     <p class="para">
      To store something new in GridFS, there are a couple options.  If you have
      a filename, you can say:
      <div class="informalexample">
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeFile</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"whatever"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"metadata"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"you"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"want"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
  
     <p class="para">
      If you have a string of bytes that isn&#039;t a file, you can also store that
      using <span class="function"><a href="#mongogridfs.storebytes" class="function">MongoGridFS::storeBytes()</a></span>:
      <div class="informalexample">
       <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$grid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeBytes</span><span style="color: #007700">(</span><span style="color: #0000BB">$bytes</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"whatever"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"metadata"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"you"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"want"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </p>
  
     <p class="para">
      Querying a <strong class="classname">MongoGridFS</strong> collection returns a 
      <a href="#class.mongogridfscursor" class="classname">MongoGridFSCursor</a>, which behaves like a normal 
      <a href="#class.mongocursor" class="classname">MongoCursor</a> except that it returns 
      <strong class="classname">MongoGridFSFiles</strong> instead of associative arrays.
     </p>
  
     <p class="para">
      <strong class="classname">MongoGridFSFiles</strong> can be written back to disc using 
      <span class="function"><a href="#mongogridfsfile.write" class="function">MongoGridFSFile::write()</a></span> or retrieved in memory using 
      <span class="function"><a href="#mongogridfsfile.getbytes" class="function">MongoGridFSFile::getBytes()</a></span>. There is currently no 
      method that automatically streams chunks, but it would be fairly easy to 
      write by querying the <code class="literal">$grid-&gt;chunks</code> collection.
     </p>
  
     <p class="para">
      <a href="#class.mongogridfsfile" class="classname">MongoGridFSFile</a> objects contain a field file which
      contains any file metadata.
     </p>
    </div>
  
  
    <div class="section" id="mongogridfs.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongocollection" class="classname">MongoCollection</a>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span>
       <var class="varname">chunks</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">filesName</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">chunksName</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span> <code class="parameter">$db</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = &quot;fs&quot;</span></span>
     [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$chunks</code><span class="initializer"> = &quot;fs&quot;</span></span>
    ]] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.delete" class="methodname">delete</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$id</code></span>
     ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.drop" class="methodname">drop</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.find" class="methodname">find</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#class.mongogridfscursor" class="type MongoGridFSCursor">MongoGridFSCursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.findone" class="methodname">findOne</a></span>
      ([ <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.get" class="methodname">get</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$id</code></span>
     ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.put" class="methodname">put</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.remove" class="methodname">remove</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.storebytes" class="methodname">storeBytes</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$bytes</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.storefile" class="methodname">storeFile</a></span>
      ( <span class="methodparam"><span class="type"><span class="type string|resource">string|resource</span></span> <code class="parameter">$filename</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfs.storeupload" class="methodname">storeUpload</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code></span>
    ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">See Also</h2>
     <ul class="simplelist">
      <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/core/gridfs/" class="link external">&raquo;&nbsp;GridFS</a></li>
      <li class="member">LightCube Solutions blog post on <a href="http://www.lightcubesolutions.com/blog/?p=209" class="link external">&raquo;&nbsp;saving user uploads</a></li>
      <li class="member">LightCube Solutions blog post on <a href="http://www.lightcubesolutions.com/blog/?p=228" class="link external">&raquo;&nbsp;adding metadata to files</a></li>
     </ul>
    </div>
   </div>
  
   
  
  
  <div id="mongogridfs.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFS::__construct</span> &mdash; <span class="dc-title">Creates new file collections</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongogridfs.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span> <code class="parameter">$db</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = &quot;fs&quot;</span></span>
     [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$chunks</code><span class="initializer"> = &quot;fs&quot;</span></span>
    ]] )</div>
  
  
    <p class="para rdfs-comment">
     Files as stored across two collections, the first containing file meta information, the
     second containing chunks of the actual file. By default, fs.files and fs.chunks are the
     collection names used.
    </p>
    <p class="para">
     Use one argument to specify a prefix other than &quot;fs&quot;:
  <div class="descriptioncode"><pre class="descriptioncode">$fs = new MongoGridFS($db, &quot;myfiles&quot;);</pre>
  </div>
     uses myfiles.files and myfiles.chunks collections.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.construct-parameters">
    <h3 class="title">Parameters</h3>  
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">db</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">files</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Optional collection name prefix.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.delete" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::delete</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.8)</p><p class="refpurpose"><span class="refname">MongoGridFS::delete</span> &mdash; <span class="dc-title">Remove a file and its chunks from the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.delete-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::delete</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$id</code></span>
     ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  
  
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      <span class="methodname"><strong>MongoGridFS::delete()</strong></span> is a convenience method for
      calling <span class="methodname"><a href="#mongogridfs.remove" class="methodname">MongoGridFS::remove()</a></span> with specific
      <code class="parameter">criteria</code> and default <code class="parameter">options</code>
      parameters.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.delete-parameters">
   <h3 class="title">Parameters</h3>
   <p class="para">
    <dl>
  
     
      <dt>
  
       <code class="parameter">id</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <code class="literal">_id</code> of the file to remove.
       </p>
      </dd>
  
        
    </dl>
  
   </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.delete-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the status of the removal (with respect to the
     <code class="literal">files</code> collection) if a
     <a href="#mongo.writeconcerns" class="link">write concern</a> is applied.
     Otherwise, returns <strong><code>TRUE</code></strong>.
    </p>
    <p class="para">
     Fields in the status array are described in the documentation for
     <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongogridfs.delete-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.drop" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::drop</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFS::drop</span> &mdash; <span class="dc-title">Drops the files and chunks collections</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.drop-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::drop</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.drop-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.drop-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The database response.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.find" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::find</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFS::find</span> &mdash; <span class="dc-title">Queries for files</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.find-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::find</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#class.mongogridfscursor" class="type MongoGridFSCursor">MongoGridFSCursor</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.find-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">query</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The query.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">fields</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fields to return.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.find-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     A <a href="#class.mongogridfscursor" class="classname">MongoGridFSCursor</a>.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.findone" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::findOne</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFS::findOne</span> &mdash; <span class="dc-title">Returns a single file matching the criteria</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.findone-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::findOne</strong></span>
      ([ <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.findone-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">query</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The filename or criteria for which to search.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.findone-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a <a href="#class.mongogridfsfile" class="classname">MongoGridFSFile</a> or <strong><code>NULL</code></strong>.
    </p>
   </div>
  
   
   <div class="refsect1 examples" id="refsect1-mongogridfs.findone-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1708">
     <p><strong>Example #1 <span class="methodname"><strong>MongoGridFS::findOne()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Example demonstrating how to find a single file from the MongoGridFS.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$downloads&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">(</span><span style="color: #DD0000">'downloads'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$downloads</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'filename.tgz'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$download&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$downloads</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'filename.tgz'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;instance&nbsp;of&nbsp;MongoGridFSFile<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$download</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      See <a href="#class.mongogridfsfile" class="classname">MongoGridFSFile</a> for more information about how to work with files.
     </p></div>
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  MongoGridFSFile Object
  (
      [file] =&gt; Array
          (
              [_id] =&gt; MongoId Object
                  (
                  )
  
              [filename] =&gt; filename.tgz
              [uploadDate] =&gt; MongoDate Object
                  (
                      [sec] =&gt; 1274288014
                      [usec] =&gt; 467000
                  )
  
              [chunkSize] =&gt; 262144
              [md5] =&gt; d41d8cd98f00b204e9800998ecf8427e
          )
  
      [gridfs:protected] =&gt; MongoGridFS Object
          (
              [chunks] =&gt; MongoCollection Object
                  (
                  )
  
              [filesName:protected] =&gt; downloads.files
              [chunksName:protected] =&gt; downloads.chunks
          )
  
  )
  </pre></div>
     </div>
    </div>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.get" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::get</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.8)</p><p class="refpurpose"><span class="refname">MongoGridFS::get</span> &mdash; <span class="dc-title">Retrieve a file from the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.get-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::get</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$id</code></span>
     ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.get-parameters">
   <h3 class="title">Parameters</h3>
   <p class="para">
    <dl>
  
     
      <dt>
  
       <code class="parameter">id</code>
      </dt>
  
      <dd>
  
       <p class="para">
        <code class="literal">_id</code> of the file to find.
       </p>
      </dd>
  
        
    </dl>
  
   </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.get-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the file, if found, or <strong><code>NULL</code></strong>.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.put" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::put</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.8)</p><p class="refpurpose"><span class="refname">MongoGridFS::put</span> &mdash; <span class="dc-title">Stores a file in the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.put-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::put</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
  
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      <span class="methodname"><strong>MongoGridFS::put()</strong></span> is an alias of <span class="methodname"><a href="#mongogridfs.storefile" class="methodname">MongoGridFS::storeFile()</a></span>.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.put-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">filename</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Name of the file to store.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">metadata</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Other metadata fields to include in the file document.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">These fields may also overwrite those that would be created automatically by the driver, as described in the MongoDB core documentation for the <a href="https://docs.mongodb.com/manual/core/gridfs/#the-files-collection" class="link external">&raquo;&nbsp;files collection</a>. Some practical use cases for this behavior would be to specify a custom <code class="literal">chunkSize</code> or <code class="literal">_id</code> for the file.</p></p></blockquote>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the insert operations executed against the
         <code class="literal">chunks</code> and <code class="literal">files</code> collections. See
         <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span> for documentation on these
         these options.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.put-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns the <code class="literal">_id</code> of the saved file document. This will be a generated <a href="#class.mongoid" class="classname">MongoId</a> unless an <code class="literal">_id</code> was explicitly specified in the <code class="parameter">metadata</code> parameter.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongogridfs.put-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongogridfsexception" class="classname">MongoGridFSException</a> if there is an error
     reading <code class="parameter">filename</code> or inserting into the
     <code class="literal">chunks</code> or <code class="literal">files</code> collections.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongogridfs.put-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongogridfs.storebytes" class="function" rel="rdfs-seeAlso">MongoGridFS::storeBytes()</a> - Stores a string of bytes in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storefile" class="function" rel="rdfs-seeAlso">MongoGridFS::storeFile()</a> - Stores a file in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storeupload" class="function" rel="rdfs-seeAlso">MongoGridFS::storeUpload()</a> - Stores an uploaded file in the database</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/core/gridfs/" class="link external">&raquo;&nbsp;GridFS</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.remove" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::remove</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFS::remove</span> &mdash; <span class="dc-title">Remove files and their chunks from the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.remove-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::remove</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><span class="type bool|array">bool|array</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.remove-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">criteria</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The filename or criteria for which to search.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the remove operations executed against the
         <code class="literal">chunks</code> and <code class="literal">files</code> collections. See
         <span class="function"><a href="#mongocollection.remove" class="function">MongoCollection::remove()</a></span> for documentation on these
         options.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.remove-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing the status of the removal (with respect to the
     <code class="literal">files</code> collection) if the <code class="literal">&quot;w&quot;</code> option is
     set. Otherwise, returns <strong><code>TRUE</code></strong>.
    </p>
    <p class="para">
     Fields in the status array are described in the documentation for
     <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongogridfs.remove-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Throws <a href="#class.mongocursorexception" class="classname">MongoCursorException</a> if the <code class="literal">&quot;w&quot;</code> option is set and the write fails.</p><p class="para">Throws <a href="#class.mongocursortimeoutexception" class="classname">MongoCursorTimeoutException</a> if the <code class="literal">&quot;w&quot;</code> option is set to a value greater than one and the operation takes longer than <var class="varname">MongoCursor::$timeout</var> milliseconds to complete.  This does not kill the operation on the server, it is a client-side timeout. The operation in <var class="varname">MongoCollection::$wtimeout</var> is milliseconds.</p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfs.storebytes" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::storeBytes</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.2)</p><p class="refpurpose"><span class="refname">MongoGridFS::storeBytes</span> &mdash; <span class="dc-title">Stores a string of bytes in the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.storebytes-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::storeBytes</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$bytes</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.storebytes-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">bytes</code>
       </dt>
  
       <dd>
  
        <p class="para">
         String of bytes to store.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">metadata</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Other metadata fields to include in the file document.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">These fields may also overwrite those that would be created automatically by the driver, as described in the MongoDB core documentation for the <a href="https://docs.mongodb.com/manual/core/gridfs/#the-files-collection" class="link external">&raquo;&nbsp;files collection</a>. Some practical use cases for this behavior would be to specify a custom <code class="literal">chunkSize</code> or <code class="literal">_id</code> for the file.</p></p></blockquote>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the insert operations executed against the
         <code class="literal">chunks</code> and <code class="literal">files</code> collections. See
         <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span> for documentation on these
         these options.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.storebytes-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns the <code class="literal">_id</code> of the saved file document. This will be a generated <a href="#class.mongoid" class="classname">MongoId</a> unless an <code class="literal">_id</code> was explicitly specified in the <code class="parameter">metadata</code> parameter.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongogridfs.storebytes-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongogridfsexception" class="classname">MongoGridFSException</a> if there is an error
     inserting into the <code class="literal">chunks</code> or <code class="literal">files</code>
     collections.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongogridfs.storebytes-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1709">
     <p><strong>Example #1 <span class="function"><strong>MongoGridFS::storeBytes()</strong></span> with additional metadata</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$gridfs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$bytes&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abcdefghijklmnopqrstuvwxyz'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$gridfs</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeBytes</span><span style="color: #007700">(</span><span style="color: #0000BB">$bytes</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'alphabet'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$gridfsFile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$gridfs</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$gridfsFile</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">file</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(7) {
    [&quot;_id&quot;]=&gt;
    string(8) &quot;alphabet&quot;
    [&quot;uploadDate&quot;]=&gt;
    object(MongoDate)#7 (0) {
    }
    [&quot;length&quot;]=&gt;
    int(26)
    [&quot;chunkSize&quot;]=&gt;
    int(262144)
    [&quot;md5&quot;]=&gt;
    string(32) &quot;c3fcd3d76192e4007dfb496cca67e13b&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongogridfs.storebytes-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongogridfs.put" class="function" rel="rdfs-seeAlso">MongoGridFS::put()</a> - Stores a file in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storefile" class="function" rel="rdfs-seeAlso">MongoGridFS::storeFile()</a> - Stores a file in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storeupload" class="function" rel="rdfs-seeAlso">MongoGridFS::storeUpload()</a> - Stores an uploaded file in the database</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/core/gridfs/" class="link external">&raquo;&nbsp;GridFS</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongogridfs.storefile" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::storeFile</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFS::storeFile</span> &mdash; <span class="dc-title">Stores a file in the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.storefile-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::storeFile</strong></span>
      ( <span class="methodparam"><span class="type"><span class="type string|resource">string|resource</span></span> <code class="parameter">$filename</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.storefile-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">filename</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Name of the file or a readable stream to store.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">metadata</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Other metadata fields to include in the file document.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">These fields may also overwrite those that would be created automatically by the driver, as described in the MongoDB core documentation for the <a href="https://docs.mongodb.com/manual/core/gridfs/#the-files-collection" class="link external">&raquo;&nbsp;files collection</a>. Some practical use cases for this behavior would be to specify a custom <code class="literal">chunkSize</code> or <code class="literal">_id</code> for the file.</p></p></blockquote>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">options</code>
       </dt>
  
       <dd>
  
        <p class="para">
         An array of options for the insert operations executed against the
         <code class="literal">chunks</code> and <code class="literal">files</code> collections. See
         <span class="function"><a href="#mongocollection.insert" class="function">MongoCollection::insert()</a></span> for documentation on these
         these options.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.storefile-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns the <code class="literal">_id</code> of the saved file document. This will be a generated <a href="#class.mongoid" class="classname">MongoId</a> unless an <code class="literal">_id</code> was explicitly specified in the <code class="parameter">metadata</code> parameter.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongogridfs.storefile-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongogridfsexception" class="classname">MongoGridFSException</a> if there is an error
     reading <code class="parameter">filename</code> or inserting into the
     <code class="literal">chunks</code> or <code class="literal">files</code> collections.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongogridfs.storefile-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1710">
     <p><strong>Example #1 <span class="function"><strong>MongoGridFS::storeFile()</strong></span> with additional metadata</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$gridfs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$gridfs</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'example.txt'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'contentType'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'plain/text'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$gridfsFile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$gridfs</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$gridfsFile</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">file</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(7) {
    [&quot;_id&quot;]=&gt;
    object(MongoId)#6 (0) {
    }
    [&quot;contentType&quot;]=&gt;
    string(10) &quot;plain/text&quot;
    [&quot;filename&quot;]=&gt;
    string(11) &quot;example.txt&quot;
    [&quot;uploadDate&quot;]=&gt;
    object(MongoDate)#7 (0) {
    }
    [&quot;length&quot;]=&gt;
    int(26)
    [&quot;chunkSize&quot;]=&gt;
    int(262144)
    [&quot;md5&quot;]=&gt;
    string(32) &quot;c3fcd3d76192e4007dfb496cca67e13b&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongogridfs.storefile-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongogridfs.put" class="function" rel="rdfs-seeAlso">MongoGridFS::put()</a> - Stores a file in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storebytes" class="function" rel="rdfs-seeAlso">MongoGridFS::storeBytes()</a> - Stores a string of bytes in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storeupload" class="function" rel="rdfs-seeAlso">MongoGridFS::storeUpload()</a> - Stores an uploaded file in the database</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/core/gridfs/" class="link external">&raquo;&nbsp;GridFS</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongogridfs.storeupload" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFS::storeUpload</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFS::storeUpload</span> &mdash; <span class="dc-title">Stores an uploaded file in the database</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfs.storeupload-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFS::storeUpload</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$metadata</code></span>
    ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfs.storeupload-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">name</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The name of the uploaded file(s) to store. This should correspond to the
         file field&#039;s <code class="literal">name</code> attribute in the HTML form.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">metadata</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Other metadata fields to include in the file document.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">These fields may also overwrite those that would be created automatically by the driver, as described in the MongoDB core documentation for the <a href="https://docs.mongodb.com/manual/core/gridfs/#the-files-collection" class="link external">&raquo;&nbsp;files collection</a>. Some practical use cases for this behavior would be to specify a custom <code class="literal">chunkSize</code> or <code class="literal">_id</code> for the file.</p></p></blockquote>
        <blockquote class="note"><p><strong class="note">Note</strong>: 
         <p class="para">
          The <code class="literal">filename</code> field will be populated with the
          client&#039;s filename (e.g. <code class="literal">$_FILES[&#039;foo&#039;][&#039;name&#039;]</code>).
         </p>
        </p></blockquote>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfs.storeupload-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns the <code class="literal">_id</code> of the saved file document. This will be a generated <a href="#class.mongoid" class="classname">MongoId</a> unless an <code class="literal">_id</code> was explicitly specified in the <code class="parameter">metadata</code> parameter.</p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      If <a href="#features.file-upload.multiple" class="link">multiple files are uploaded
      using the same field name</a>, this method will not return anything;
      however, the files themselves will still be processed.
     </p>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongogridfs.storeupload-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongogridfsexception" class="classname">MongoGridFSException</a> if there is an error
     reading the uploaded file(s) or inserting into the <code class="literal">chunks</code>
     or <code class="literal">files</code> collections.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongogridfs.storeupload-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.5</td>
         <td>
          Changed second parameter to an array of metadata. Pre-1.2.5, the
          second parameter was an optional string overriding the filename.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongogridfs.storeupload-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1711">
     <p><strong>Example #1 <span class="function"><strong>MongoGridFS::storeUpload()</strong></span> HTML form example</strong></p>
     <div class="example-contents"><p>
      Suppose you have the following HTML form:
     </p></div>
     <div class="example-contents">
  <div class="htmlcode"><pre class="htmlcode">&lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
      &lt;label for=&quot;username&quot;&gt;Username:&lt;/label&gt;
      &lt;input type=&quot;text&quot; name=&quot;username&quot; id=&quot;username&quot; /&gt;
  
      &lt;label for=&quot;pic&quot;&gt;Please upload a profile picture:&lt;/label&gt;
      &lt;input type=&quot;file&quot; name=&quot;pic&quot; id=&quot;pic&quot; /&gt;
  
      &lt;input type=&quot;submit&quot; /&gt;
  &lt;/form&gt;</pre>
  </div>
     </div>
  
     <div class="example-contents"><p>
      If you wanted to store the uploaded image in MongoDB, you could do the
      following in the script handling the form submission:
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$gridfs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$gridfs</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">storeUpload</span><span style="color: #007700">(</span><span style="color: #DD0000">'pic'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongogridfs.storeupload-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongogridfs.put" class="function" rel="rdfs-seeAlso">MongoGridFS::put()</a> - Stores a file in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storebytes" class="function" rel="rdfs-seeAlso">MongoGridFS::storeBytes()</a> - Stores a string of bytes in the database</span></li>
     <li class="member"><span class="function"><a href="#mongogridfs.storefile" class="function" rel="rdfs-seeAlso">MongoGridFS::storeFile()</a> - Stores a file in the database</span></li>
     <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/core/gridfs/" class="link external">&raquo;&nbsp;GridFS</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongogridfs.construct">MongoGridFS::__construct</a> — Creates new file collections</li><li><a href="#mongogridfs.delete">MongoGridFS::delete</a> — Remove a file and its chunks from the database</li><li><a href="#mongogridfs.drop">MongoGridFS::drop</a> — Drops the files and chunks collections</li><li><a href="#mongogridfs.find">MongoGridFS::find</a> — Queries for files</li><li><a href="#mongogridfs.findone">MongoGridFS::findOne</a> — Returns a single file matching the criteria</li><li><a href="#mongogridfs.get">MongoGridFS::get</a> — Retrieve a file from the database</li><li><a href="#mongogridfs.put">MongoGridFS::put</a> — Stores a file in the database</li><li><a href="#mongogridfs.remove">MongoGridFS::remove</a> — Remove files and their chunks from the database</li><li><a href="#mongogridfs.storebytes">MongoGridFS::storeBytes</a> — Stores a string of bytes in the database</li><li><a href="#mongogridfs.storefile">MongoGridFS::storeFile</a> — Stores a file in the database</li><li><a href="#mongogridfs.storeupload">MongoGridFS::storeUpload</a> — Stores an uploaded file in the database</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongogridfsfile" class="reference"><hr />
  
   <h1 class="title">The MongoGridFSFile class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
  
    <div class="section" id="mongogridfsfile.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      A database file object.
     </p>
    </div>
  
  
    <div class="section" id="mongogridfsfile.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoGridFSFile</strong>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <span class="type">array</span>
       <var class="varname">file</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span>
       <var class="varname">gridfs</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfsfile.construct" class="methodname">MongoGridfsFile::__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span> <code class="parameter">$gridfs</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$file</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfsfile.getbytes" class="methodname">getBytes</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfsfile.getfilename" class="methodname">getFilename</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfsfile.getresource" class="methodname">getResource</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">resource</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfsfile.getsize" class="methodname">getSize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfsfile.write" class="methodname">write</a></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
    ] ) : <span class="type">int</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongogridfsfile.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridfsFile::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridfsFile::__construct</span> &mdash; <span class="dc-title">Create a new GridFS file</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongogridfsfile.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridfsFile::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span> <code class="parameter">$gridfs</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$file</code></span>
     )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfsfile.construct-parameters">
    <h3 class="title">Parameters</h3>    
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">gridfs</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The parent MongoGridFS instance.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">file</code>
       </dt>
  
       <dd>
  
        <p class="para">
         A file from the database.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfsfile.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new MongoGridFSFile.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfsfile.getbytes" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSFile::getBytes</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSFile::getBytes</span> &mdash; <span class="dc-title">Returns this file&#039;s contents as a string of bytes</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfsfile.getbytes-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSFile::getBytes</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Warning: this will load the file into memory.  If the file is bigger than
     your memory, this will cause problems!
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfsfile.getbytes-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfsfile.getbytes-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns a string of the bytes in the file.
    </p>
   </div>
  
   
   <div class="refsect1 examples" id="refsect1-mongogridfsfile.getbytes-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1712">
     <p><strong>Example #1 <span class="methodname"><strong>MongoGridFSFile::getBytes()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$images&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">(</span><span style="color: #DD0000">'images'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$image&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$images</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'jwage.png'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;image/png;'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$image</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getBytes</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfsfile.getfilename" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSFile::getFilename</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSFile::getFilename</span> &mdash; <span class="dc-title">Returns this file&#039;s filename</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongogridfsfile.getfilename-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSFile::getFilename</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongogridfsfile.getfilename-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfsfile.getfilename-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the filename.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfsfile.getresource" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSFile::getResource</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoGridFSFile::getResource</span> &mdash; <span class="dc-title">Returns a resource that can be used to read the stored file</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfsfile.getresource-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSFile::getResource</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">resource</span></div>
  
    <p class="para rdfs-comment">
     This method returns a stream resource that can be used with all file
     functions in PHP that deal with reading files. The contents of the file are
     pulled out of MongoDB on the fly, so that the whole file does not have to
     be loaded into memory first.
    </p>
    <p class="para">
     At most two GridFSFile chunks will be loaded in memory.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfsfile.getresource-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfsfile.getresource-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns a resource that can be used to read the file with
    </p>
   </div>
  
   
   <div class="refsect1 examples" id="refsect1-mongogridfsfile.getresource-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1713">
     <p><strong>Example #1 <span class="methodname"><strong>MongoGridFSFile::getResource()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$images&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">(</span><span style="color: #DD0000">'images'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$image&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$images</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongo.png'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;image/png;'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$image</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getResource</span><span style="color: #007700">();<br /><br />while&nbsp;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8192</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfsfile.getsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSFile::getSize</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSFile::getSize</span> &mdash; <span class="dc-title">Returns this file&#039;s size</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongogridfsfile.getsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSFile::getSize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongogridfsfile.getsize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfsfile.getsize-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns this file&#039;s size
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfsfile.write" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSFile::write</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSFile::write</span> &mdash; <span class="dc-title">Writes this file to the filesystem</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-mongogridfsfile.write-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSFile::write</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
    ] ) : <span class="type">int</span></div>
  
   </div>
  
   <div class="refsect1 parameters" id="refsect1-mongogridfsfile.write-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">filename</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The location to which to write the file.  If none is given,
         the stored filename will be used.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfsfile.write-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of bytes written.
    </p>
   </div>
  
   
   <div class="refsect1 examples" id="refsect1-mongogridfsfile.write-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1714">
     <p><strong>Example #1 <span class="methodname"><strong>MongoGridFSFile::write()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$images&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getGridFS</span><span style="color: #007700">(</span><span style="color: #DD0000">'images'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$image&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$images</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'jwage.png'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$image</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/write/jwage.png'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongogridfsfile.construct">MongoGridfsFile::__construct</a> — Create a new GridFS file</li><li><a href="#mongogridfsfile.getbytes">MongoGridFSFile::getBytes</a> — Returns this file's contents as a string of bytes</li><li><a href="#mongogridfsfile.getfilename">MongoGridFSFile::getFilename</a> — Returns this file's filename</li><li><a href="#mongogridfsfile.getresource">MongoGridFSFile::getResource</a> — Returns a resource that can be used to read the stored file</li><li><a href="#mongogridfsfile.getsize">MongoGridFSFile::getSize</a> — Returns this file's size</li><li><a href="#mongogridfsfile.write">MongoGridFSFile::write</a> — Writes this file to the filesystem</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongogridfscursor" class="reference"><hr />
  
   <h1 class="title">The MongoGridFSCursor class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
  
    <div class="section" id="mongogridfscursor.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Cursor for database file results.
     </p>
    </div>
  
  
    <div class="section" id="mongogridfscursor.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongocursor" class="classname">MongoCursor</a>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span>
       <var class="varname">gridfs</var>
       <span class="initializer"> = <strong><code>NULL</code></strong></span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfscursor.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span> <code class="parameter">$gridfs</code></span>
     , <span class="methodparam"><span class="type">resource</span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfscursor.current" class="methodname">current</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfscursor.getnext" class="methodname">getNext</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongogridfscursor.key" class="methodname">key</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongogridfscursor.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSCursor::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSCursor::__construct</span> &mdash; <span class="dc-title">Create a new cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfscursor.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSCursor::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongogridfs" class="type MongoGridFS">MongoGridFS</a></span> <code class="parameter">$gridfs</code></span>
     , <span class="methodparam"><span class="type">resource</span> <code class="parameter">$connection</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
     , <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
     )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfscursor.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">gridfs</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Related GridFS collection.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">connection</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database connection.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">ns</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Full name of database and collection.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">query</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Database query.
        </p>
       </dd>
  
         
      
       <dt>
  
        <code class="parameter">fields</code>
       </dt>
  
       <dd>
  
        <p class="para">
         Fields to return.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfscursor.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the new cursor.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfscursor.current" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSCursor::current</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSCursor::current</span> &mdash; <span class="dc-title">Returns the current file</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfscursor.current-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSCursor::current</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfscursor.current-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfscursor.current-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     The current file.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfscursor.getnext" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSCursor::getNext</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSCursor::getNext</span> &mdash; <span class="dc-title">Return the next file to which this cursor points, and advance the cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfscursor.getnext-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSCursor::getNext</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongogridfsfile" class="type MongoGridFSFile">MongoGridFSFile</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfscursor.getnext-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfscursor.getnext-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the next file.
    </p>
   </div>
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongogridfscursor.key" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoGridFSCursor::key</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoGridFSCursor::key</span> &mdash; <span class="dc-title">Returns the current result&#039;s filename</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongogridfscursor.key-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoGridFSCursor::key</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongogridfscursor.key-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongogridfscursor.key-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     The current result&#039;s _id as a string.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongogridfscursor.key-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.3.0</td>
         <td>
          The document&#039;s <code class="literal">_id</code> is returned as a string value,
          since the key should be unique. Pre-1.3.0, <code class="literal">filename</code>
          was returned.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongogridfscursor.construct">MongoGridFSCursor::__construct</a> — Create a new cursor</li><li><a href="#mongogridfscursor.current">MongoGridFSCursor::current</a> — Returns the current file</li><li><a href="#mongogridfscursor.getnext">MongoGridFSCursor::getNext</a> — Return the next file to which this cursor points, and advance the cursor</li><li><a href="#mongogridfscursor.key">MongoGridFSCursor::key</a> — Returns the current result's filename</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
  </div>
  
  <hr />
  
  
   
  
  
  <div id="mongo.batch" class="part"><hr />
  
   <h1>Batch Classes</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_part"><li><a href="#class.mongowritebatch">MongoWriteBatch</a></li><li><a href="#class.mongoinsertbatch">MongoInsertBatch</a></li><li><a href="#class.mongoupdatebatch">MongoUpdateBatch</a></li><li><a href="#class.mongodeletebatch">MongoDeleteBatch</a></li></ul>
  
  
   
  
  
  <div id="class.mongowritebatch" class="reference"><hr />
  
   <h1 class="title">The MongoWriteBatch class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.5.0)</p>
  
  
    <div class="section" id="mongowritebatch.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      MongoWriteBatch is the base class for the <a href="#class.mongoinsertbatch" class="classname">MongoInsertBatch</a>,
      <a href="#class.mongoupdatebatch" class="classname">MongoUpdateBatch</a> and <a href="#class.mongodeletebatch" class="classname">MongoDeleteBatch</a> classes.
     </p>
     <p class="para">
      MongoWriteBatch allows you to &quot;batch up&quot; multiple operations (of same type) and shipping them all
      to MongoDB at the same time. This can be especially useful when operating on many documents at the
      same time to reduce roundtrips.
     </p>
     <p class="para">
      Prior to version 1.5.0 of the driver it was possible to use <span class="methodname"><a href="#mongocollection.batchinsert" class="methodname">MongoCollection::batchInsert()</a></span>,
      however, as of 1.5.0 that method is now discouraged.
     </p>
     <p class="para">
      Note: This class is only available when talking to MongoDB 2.6.0 (and later) servers. It will throw
      <a href="#class.mongoprotocolexception" class="classname">MongoProtocolException</a> if attempting to use it on older MongoDB servers.
     </p>
    </div>
  
  
    <div class="section" id="mongowritebatch.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoWriteBatch</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">COMMAND_INSERT</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">COMMAND_UPDATE</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">COMMAND_DELETE</var>
       <span class="initializer"> = 3</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="constructorsynopsis dc-description">
     <span class="modifier">protected</span> <span class="methodname"><a href="#mongowritebatch.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$batch_type</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ]] )</div>
  
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.add" class="methodname">add</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$item</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">execute</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
     ) : <span class="type">array</span></div>
  
     }</div>
  
  
     <div class="section" id="mongowritebatch.constants">
      <h2 class="title">MongoWriteBatch types</h2>
      <dl>
  
  
       
        <dt id="mongowritebatch.constants.command.insert"><strong><code>MongoWriteBatch::COMMAND_INSERT</code></strong></dt>
  
        <dd>
  
         <p class="para">Create an Insert Write Batch</p>
        </dd>
  
       
  
       
        <dt id="mongowritebatch.constants.command.update"><strong><code>MongoWriteBatch::COMMAND_UPDATE</code></strong></dt>
  
        <dd>
  
         <p class="para">Create an Update Write Batch</p>
        </dd>
  
       
  
       
        <dt id="mongowritebatch.constants.command.delete"><strong><code>MongoWriteBatch::COMMAND_DELETE</code></strong></dt>
  
        <dd>
  
         <p class="para">Create an Delete Write Batch</p>
        </dd>
  
       
  
      </dl>
  
     </div>
    </div>
  
    <div class="section" id="mongowritebatch.description">
     <h2 class="title">Description</h2>
     <p class="para">
      When executing a batch by calling
      <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute()</a></span>, MongoWriteBatch will send
      up to <code class="literal">maxWriteBatchSize</code> (defaults to 1000) documents or
      <code class="literal">maxBsonObjectSize</code> (defaults to 16777216 bytes), whichever
      comes first.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       Documents will never be partially transferred. When adding documents to the batch, that overflows the limit, a new
       batch will be created and the document put into the new batch.
      </p>
     </p></blockquote>
    </div>
  
    <div class="section" id="mongowritebatch.errors">
     <h2 class="title">Errors/Exceptions</h2>
     <ul class="simplelist">
      <li class="member"><a href="#class.exception" class="classname">Exception</a> on parameter parsing failures</li>
      <li class="member"><a href="#class.exception" class="classname">Exception</a> on argument validation errors (e.g. missing keys)</li>
      <li class="member"><a href="#class.mongoprotocolexception" class="classname">MongoProtocolException</a> when talking to MongoDB server older then 2.6.0.</li>
      <li class="member"><a href="#class.mongoprotocolexception" class="classname">MongoProtocolException</a> on socket errors.</li>
      <li class="member"><a href="#class.mongowriteconcernexception" class="classname">MongoWriteConcernException</a> when a write fails due to <a href="#mongo.writeconcerns" class="link">WriteConcerns</a></li>
     </ul>
    </div>
  
    <div class="section" id="mongowritebatch.examples">
     <h2 class="title">Examples</h2>
     <div class="example" id="example-1715">
      <p><strong>Example #1 <strong class="classname">MongoWriteBatch</strong> example</strong></p>
      <div class="example-contents"><p>
       Adding documents to a Insert batch and then execute it
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"my"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"is"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"working"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"pretty"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"well"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoInsertBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">);<br />foreach(</span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above example will output:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;nInserted&quot;]=&gt;
    int(3)
    [&quot;ok&quot;]=&gt;
    bool(true)
  }
  </pre></div>
      </div>
     </div>
    </div>
  
   </div>
  
   
  
  
  <div id="mongowritebatch.add" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoWriteBatch::add</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoWriteBatch::add</span> &mdash; <span class="dc-title">Adds a write operation to a batch</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongowritebatch.add-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoWriteBatch::add</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$item</code></span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Adds a write operation to the batch.
    </p>
    <p class="para">
     If <code class="parameter">$item</code> causes the batch to exceed the
     <code class="literal">maxWriteBatchSize</code> or <code class="literal">maxBsonObjectSize</code>
     limits, the driver will internally split the batches into multiple write
     commands upon calling <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongowritebatch.add-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">item</code></dt>
  
      <dd>
  
       <p class="para">
        An array that describes a write operation. The structure of this value
        depends on the batch&#039;s operation type.
        <table class="doctable informaltable">
         <thead>
          <tr>
           <th>Batch type</th>
           <th>Argument expectation</th>
          </tr>
  
         </thead>
  
         <tbody class="tbody">
          <tr>
           <td><strong><code>MongoWriteBatch::COMMAND_INSERT</code></strong></td>
           <td>
            <span class="simpara">The document to add.</span>
           </td>
          </tr>
  
          <tr>
           <td><strong><code>MongoWriteBatch::COMMAND_UPDATE</code></strong></td>
           <td>
            <p class="para">Raw update operation.</p>
            <p class="para">Required keys are <code class="literal">&quot;q&quot;</code> and <code class="literal">&quot;u&quot;</code>, which correspond to the <a href="#mongocollection.update.criteria" class="link"><code class="parameter">$criteria</code></a> and <a href="#mongocollection.update.new_object" class="link"><code class="parameter">$new_object</code></a> parameters of <span class="function"><a href="#mongocollection.update" class="function">MongoCollection::update()</a></span>, respectively.</p>
            <p class="para">Optional keys are <code class="literal">&quot;multi&quot;</code> and <code class="literal">&quot;upsert&quot;</code>, which correspond to the <a href="#mongocollection.update.multiple" class="link"><code class="literal">&quot;multiple&quot;</code></a> and <a href="#mongocollection.update.upsert" class="link"><code class="literal">&quot;upsert&quot;</code></a> options for <span class="function"><a href="#mongocollection.update" class="function">MongoCollection::update()</a></span>, respectively. If unspecified, both options default to <strong><code>FALSE</code></strong>.</p>
           </td>
          </tr>
  
          <tr>
           <td><strong><code>MongoWriteBatch::COMMAND_DELETE</code></strong></td>
           <td>
            <p class="para">Raw delete operation.</p>
            <p class="para">Required keys are: <code class="literal">&quot;q&quot;</code> and <code class="literal">&quot;limit&quot;</code>, which correspond to the <a href="#mongocollection.remove.criteria" class="link"><code class="parameter">$criteria</code></a> parameter and <a href="#mongocollection.remove.justone" class="link"><code class="literal">&quot;justOne&quot;</code></a> option of <span class="function"><a href="#mongocollection.remove" class="function">MongoCollection::remove()</a></span>, respectively.</p>
            <p class="para">The <code class="literal">&quot;limit&quot;</code> option is an <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>; however, MongoDB only supports <code class="literal">0</code> (i.e. remove all matching documents) and <code class="literal">1</code> (i.e. remove at most one matching document) at this time.</p>
           </td>
          </tr>
  
         </tbody>
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongowritebatch.add-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> on success and throws an exception on failure.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongowritebatch.add-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.exception" class="classname">Exception</a> on parameter parsing failures</li>
     <li class="member"><a href="#class.exception" class="classname">Exception</a> on argument validation errors (e.g. missing keys)</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongowritebatch.add-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1716">
     <p><strong>Example #1 <span class="methodname"><strong>MongoWriteBatch::add()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Batching up multiple insert operations
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"my"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"is"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"working"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"pretty"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"well"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoInsertBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">);<br />foreach(</span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <div class="example" id="example-1717">
     <p><strong>Example #2 <span class="methodname"><strong>MongoWriteBatch::add()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Batching up multiple update operations
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$item1&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"my"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"u"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"multi"&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">/*&nbsp;default&nbsp;value&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"upsert"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">/*&nbsp;default&nbsp;value&nbsp;*/<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$item2&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"is"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"working"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"u"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"multi"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$item3&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"created"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"new-document"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"u"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"upsert"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />);<br /><br /></span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoUpdateBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item3</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
  
    <div class="example" id="mongobindata.intro-example">
     <p><strong>Example #3 <span class="methodname"><strong>MongoWriteBatch::add()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Batching up multiple delete operations
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$item1&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"my"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"limit"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$item2&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"limit"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />);<br /><br /><br /></span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDeleteBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongowritebatch.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoWriteBatch::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoWriteBatch::__construct</span> &mdash; <span class="dc-title">Creates a new batch of write operations</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongowritebatch.construct-description">
    <h3 class="title">Description</h3>
    <div class="constructorsynopsis dc-description">
     <span class="modifier">protected</span> <span class="methodname"><strong>MongoWriteBatch::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$batch_type</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ]] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new MongoWriteBatch.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This is a protected constructor. Please use one of the classes inheriting <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>.
     </p>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongowritebatch.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">collection</code></dt>
  
      <dd>
  <p class="para">The <a href="#class.mongocollection" class="classname">MongoCollection</a> to execute the batch on. Its <a href="#mongo.writeconcerns" class="link">write concern</a> will be copied and used as the default write concern if none is given as <code class="parameter">$write_options</code> or during <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute()</a></span>.</p></dd>
  
     
     
      <dt>
  <code class="parameter">batch_type</code></dt>
  
      <dd>
  
       <p class="para">
        One of:
        <ul class="simplelist">
         <li class="member"><code class="literal">0</code> - make an MongoWriteBatch::COMMAND_INSERT batch</li>
         <li class="member"><code class="literal">1</code> - make an MongoWriteBatch::COMMAND_UPDATE batch</li>
         <li class="member"><code class="literal">2</code> - make a  MongoWriteBatch::COMMAND_DELETE batch</li>
        </ul>
       </p>
      </dd>
  
     
     
      <dt id="mongowritebatch.construct.write_options"><code class="parameter">write_options</code></dt>
  
      <dd>
  <p class="para">An array of Write Options.<table class="doctable informaltable"><thead><tr><th>key</th><th>value meaning</th></tr>
  </thead>
  <tbody class="tbody"><tr><td>w (int|string)</td><td><a href="#mongo.writeconcerns" class="link">Write concern</a> value</td></tr>
  <tr><td>wtimeout (int)</td><td><a href="#mongo.writeconcerns" class="link">Maximum time to wait for replication</a></td></tr>
  <tr><td>ordered</td><td>Determines if MongoDB must apply this batch in order. Ordered writes execute serially (i.e. one at a time) and execution will stop after the first error. Unordered writes may execute in parallel and execution will not stop after the first error. Defaults to <strong><code>TRUE</code></strong></td></tr>
  <tr><td>j (bool)</td><td>Wait for journaling on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  <tr><td>fsync (bool)</td><td>Wait for fsync on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  </tbody></table>
  </p></dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongowritebatch.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     A new MongoWriteBatch of type <code class="parameter">batch_type</code>.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongowritebatch.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongoinsertbatch" class="classname">MongoInsertBatch</a></li>
     <li class="member"><a href="#class.mongoupdatebatch" class="classname">MongoUpdateBatch</a></li>
     <li class="member"><a href="#class.mongodeletebatch" class="classname">MongoDeleteBatch</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongowritebatch.execute" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoWriteBatch::execute</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoWriteBatch::execute</span> &mdash; <span class="dc-title">Executes a batch of write operations</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongowritebatch.execute-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoWriteBatch::execute</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Executes the batch of write operations.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongowritebatch.execute-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">write_options</code></dt>
  
      <dd>
  
       <p class="para">
        See <a href="#mongowritebatch.construct.write_options" class="link">MongoWriteBatch::__construct</a>.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongowritebatch.execute-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array containing statistical information for the full batch.
     If the batch had to be split into multiple batches, the return value will aggregate
     the values from individual batches and return only the totals.
    </p>
    <p class="para">
     If the batch was empty, an array containing only the &#039;ok&#039; field is returned (as <strong><code>TRUE</code></strong>) although
     nothing will be shipped over the wire (<acronym>NOOP</acronym>).
    </p>
    <p class="para">
     <table class="doctable informaltable">
      <thead>
       <tr>
        <th>Array key</th>
        <th>Value meaning</th>
        <th>Returned for batch type</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td>nInserted</td>
        <td>Number of inserted documents</td>
        <td>MongoWriteBatch::COMMAND_INSERT batch</td>
       </tr>
  
       <tr>
        <td>nMatched</td>
        <td>Number of documents matching the query criteria</td>
        <td>MongoWriteBatch::COMMAND_UPDATE batch</td>
       </tr>
  
       <tr>
        <td>nModified</td>
        <td>Number of documents actually needed to be modied</td>
        <td>MongoWriteBatch::COMMAND_UPDATE batch</td>
       </tr>
  
       <tr>
        <td>nUpserted</td>
        <td>Number of upserted documents</td>
        <td>MongoWriteBatch::COMMAND_UPDATE batch</td>
       </tr>
  
       <tr>
        <td>nRemoved</td>
        <td>Number of documents removed</td>
        <td>MongoWriteBatch::COMMAND_DELETE batch</td>
       </tr>
  
       <tr>
        <td>ok</td>
        <td>Command success indicator</td>
        <td>All</td>
       </tr>
  
      </tbody>
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongowritebatch.execute-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     A <a href="#class.mongowriteconcernexception" class="classname">MongoWriteConcernException</a> exception is thrown on failure.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongowritebatch.execute-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1719">
     <p><strong>Example #1 <span class="methodname"><a href="#mongowritebatch.add" class="methodname">MongoWriteBatch::add()</a></span> example</strong></p>
     <div class="example-contents"><p>
      Batching up multiple insert operations
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"my"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"is"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"working"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$docs</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">"pretty"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"well"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoInsertBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">);<br />foreach(</span><span style="color: #0000BB">$docs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
      <div class="example-contents"><p>The above example will output:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;nInserted&quot;]=&gt;
    int(3)
    [&quot;ok&quot;]=&gt;
    bool(true)
  }
  </pre></div>
      </div>
    </div>
  
    <div class="example" id="example-1720">
     <p><strong>Example #2 <span class="methodname"><a href="#mongowritebatch.add" class="methodname">MongoWriteBatch::add()</a></span> example</strong></p>
     <div class="example-contents"><p>
      Batching up multiple update operations
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$item1&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"my"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"u"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"multi"&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">/*&nbsp;default&nbsp;value&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"upsert"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">/*&nbsp;default&nbsp;value&nbsp;*/<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$item2&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"is"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"working"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"u"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"multi"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$item3&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"created"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"new-document"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"u"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"upsert"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />);<br /><br /></span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoUpdateBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item3</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
      <div class="example-contents"><p>The above example will output:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  array(4) {
    [&quot;nMatched&quot;]=&gt;
    int(18)
    [&quot;nModified&quot;]=&gt;
    int(2)
    [&quot;nUpserted&quot;]=&gt;
    int(0)
    [&quot;ok&quot;]=&gt;
    bool(true)
  }
  </pre></div>
      </div>
    </div>
  
    <div class="example" id="example-1721">
     <p><strong>Example #3 <span class="methodname"><a href="#mongowritebatch.add" class="methodname">MongoWriteBatch::add()</a></span> example</strong></p>
     <div class="example-contents"><p>
      Batching up multiple delete operations
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$item1&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"my"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"limit"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$item2&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"q"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"try"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"limit"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />);<br /><br /><br /></span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDeleteBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$collection</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$item2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$batch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
      <div class="example-contents"><p>The above example will output:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;nRemoved&quot;]=&gt;
    int(1)
    [&quot;ok&quot;]=&gt;
    bool(true)
  }
  </pre></div>
      </div>
    </div>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongowritebatch.add">MongoWriteBatch::add</a> — Adds a write operation to a batch</li><li><a href="#mongowritebatch.construct">MongoWriteBatch::__construct</a> — Creates a new batch of write operations</li><li><a href="#mongowritebatch.execute">MongoWriteBatch::execute</a> — Executes a batch of write operations</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoinsertbatch" class="reference"><hr />
  
   <h1 class="title">The MongoInsertBatch class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.5.0)</p>
  
  
    <div class="section" id="mongoinsertbatch.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Constructs a batch of INSERT operations. See <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>.
     </p>
    </div>
  
  
    <div class="section" id="mongoinsertbatch.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoInsertBatch</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoinsertbatch.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ] )</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.add" class="methodname">MongoWriteBatch::add</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$item</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
     ) : <span class="type">array</span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongoinsertbatch.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoInsertBatch::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoInsertBatch::__construct</span> &mdash; <span class="dc-title">Description</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoinsertbatch.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoInsertBatch::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Constructs a batch of INSERT operations. See <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoinsertbatch.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">collection</code></dt>
  
      <dd>
  <p class="para">The <a href="#class.mongocollection" class="classname">MongoCollection</a> to execute the batch on. Its <a href="#mongo.writeconcerns" class="link">write concern</a> will be copied and used as the default write concern if none is given as <code class="parameter">$write_options</code> or during <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute()</a></span>.</p></dd>
  
     
     
      <dt>
  <code class="parameter">write_options</code></dt>
  
      <dd>
  <p class="para">An array of Write Options.<table class="doctable informaltable"><thead><tr><th>key</th><th>value meaning</th></tr>
  </thead>
  <tbody class="tbody"><tr><td>w (int|string)</td><td><a href="#mongo.writeconcerns" class="link">Write concern</a> value</td></tr>
  <tr><td>wtimeout (int)</td><td><a href="#mongo.writeconcerns" class="link">Maximum time to wait for replication</a></td></tr>
  <tr><td>ordered</td><td>Determines if MongoDB must apply this batch in order. Ordered writes execute serially (i.e. one at a time) and execution will stop after the first error. Unordered writes may execute in parallel and execution will not stop after the first error. Defaults to <strong><code>TRUE</code></strong></td></tr>
  <tr><td>j (bool)</td><td>Wait for journaling on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  <tr><td>fsync (bool)</td><td>Wait for fsync on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  </tbody></table>
  </p></dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoinsertbatch.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     A new MongoInsertBatch.
    </p>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoinsertbatch.construct">MongoInsertBatch::__construct</a> — Description</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoupdatebatch" class="reference"><hr />
  
   <h1 class="title">The MongoUpdateBatch class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.5.0)</p>
  
  
    <div class="section" id="mongoupdatebatch.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Constructs a batch of UPDATE operations. See <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>.
     </p>
    </div>
  
  
    <div class="section" id="mongoupdatebatch.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoUpdateBatch</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoupdatebatch.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ] )</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.add" class="methodname">MongoWriteBatch::add</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$item</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
     ) : <span class="type">array</span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongoupdatebatch.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoUpdateBatch::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoUpdateBatch::__construct</span> &mdash; <span class="dc-title">Description</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoupdatebatch.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoUpdateBatch::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Constructs a batch of UPDATE operations. See <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoupdatebatch.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">collection</code></dt>
  
      <dd>
  <p class="para">The <a href="#class.mongocollection" class="classname">MongoCollection</a> to execute the batch on. Its <a href="#mongo.writeconcerns" class="link">write concern</a> will be copied and used as the default write concern if none is given as <code class="parameter">$write_options</code> or during <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute()</a></span>.</p></dd>
  
     
     
      <dt>
  <code class="parameter">write_options</code></dt>
  
      <dd>
  <p class="para">An array of Write Options.<table class="doctable informaltable"><thead><tr><th>key</th><th>value meaning</th></tr>
  </thead>
  <tbody class="tbody"><tr><td>w (int|string)</td><td><a href="#mongo.writeconcerns" class="link">Write concern</a> value</td></tr>
  <tr><td>wtimeout (int)</td><td><a href="#mongo.writeconcerns" class="link">Maximum time to wait for replication</a></td></tr>
  <tr><td>ordered</td><td>Determines if MongoDB must apply this batch in order. Ordered writes execute serially (i.e. one at a time) and execution will stop after the first error. Unordered writes may execute in parallel and execution will not stop after the first error. Defaults to <strong><code>TRUE</code></strong></td></tr>
  <tr><td>j (bool)</td><td>Wait for journaling on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  <tr><td>fsync (bool)</td><td>Wait for fsync on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  </tbody></table>
  </p></dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoupdatebatch.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     A new MongoUpdateBatch.
    </p>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoupdatebatch.construct">MongoUpdateBatch::__construct</a> — Description</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongodeletebatch" class="reference"><hr />
  
   <h1 class="title">The MongoDeleteBatch class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.5.0)</p>
  
  
    <div class="section" id="mongodeletebatch.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Constructs a batch of DELETE operations. See <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>.
     </p>
    </div>
  
  
    <div class="section" id="mongodeletebatch.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDeleteBatch</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodeletebatch.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ] )</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.add" class="methodname">MongoWriteBatch::add</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$item</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
     ) : <span class="type">array</span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongodeletebatch.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDeleteBatch::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoDeleteBatch::__construct</span> &mdash; <span class="dc-title">Description</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodeletebatch.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDeleteBatch::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span> <code class="parameter">$collection</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$write_options</code></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Constructs a batch of DELETE operations. See <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodeletebatch.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">collection</code></dt>
  
      <dd>
  <p class="para">The <a href="#class.mongocollection" class="classname">MongoCollection</a> to execute the batch on. Its <a href="#mongo.writeconcerns" class="link">write concern</a> will be copied and used as the default write concern if none is given as <code class="parameter">$write_options</code> or during <span class="methodname"><a href="#mongowritebatch.execute" class="methodname">MongoWriteBatch::execute()</a></span>.</p></dd>
  
     
     
      <dt>
  <code class="parameter">write_options</code></dt>
  
      <dd>
  <p class="para">An array of Write Options.<table class="doctable informaltable"><thead><tr><th>key</th><th>value meaning</th></tr>
  </thead>
  <tbody class="tbody"><tr><td>w (int|string)</td><td><a href="#mongo.writeconcerns" class="link">Write concern</a> value</td></tr>
  <tr><td>wtimeout (int)</td><td><a href="#mongo.writeconcerns" class="link">Maximum time to wait for replication</a></td></tr>
  <tr><td>ordered</td><td>Determines if MongoDB must apply this batch in order. Ordered writes execute serially (i.e. one at a time) and execution will stop after the first error. Unordered writes may execute in parallel and execution will not stop after the first error. Defaults to <strong><code>TRUE</code></strong></td></tr>
  <tr><td>j (bool)</td><td>Wait for journaling on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  <tr><td>fsync (bool)</td><td>Wait for fsync on the primary. This value is discouraged, use WriteConcern instead</td></tr>
  </tbody></table>
  </p></dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodeletebatch.construct-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     A new MongoDeleteBatch.
    </p>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodeletebatch.construct">MongoDeleteBatch::__construct</a> — Description</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
  </div>
  
  <hr />
  
  
   
  
  
  <div id="mongo.miscellaneous" class="part"><hr />
  
   <h1>Miscellaneous</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_part"><li><a href="#class.mongolog">MongoLog</a></li><li><a href="#class.mongopool">MongoPool</a></li><li><a href="#class.mongo">Mongo</a></li></ul>
  
  
   
  
  
  <div id="class.mongolog" class="reference"><hr />
  
   <h1 class="title">The MongoLog class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.2.3)</p>
  
  
    <div class="section" id="mongolog.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Logging can be used to get detailed information about what the driver is
      doing. Logging is disabled by default, but this class allows you to activate
      specific levels of logging for various parts of the driver. Some examples:
     </p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;print&nbsp;every&nbsp;log&nbsp;message&nbsp;possible<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;all&nbsp;log&nbsp;levels<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;all&nbsp;parts&nbsp;of&nbsp;the&nbsp;driver<br /><br />//&nbsp;print&nbsp;significant&nbsp;events&nbsp;about&nbsp;replica&nbsp;set&nbsp;failover<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">INFO</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">RS</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;print&nbsp;info-&nbsp;and&nbsp;diagnostic-level&nbsp;events&nbsp;for&nbsp;replica&nbsp;sets&nbsp;and&nbsp;connections<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">INFO</span><span style="color: #007700">|</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">FINE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">RS</span><span style="color: #007700">|</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">CON</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       By default, MongoLog emits all log messages as PHP notices. Depending
       on the <acronym title="Server Application Programming Interface">SAPI</acronym> you use, messages may be sent to
       <code class="literal">stderr</code> (for <acronym title="Command Line Interpreter/Interface">CLI</acronym>) or the web server&#039;s
       error log. If, after configuring MongoLog, log messages are not appearing
       as expected, ensure that the <strong><code>E_NOTICE</code></strong> bit is included
       in <a href="#ini.error-reporting" class="link">error_reporting</a> and that
       <a href="#ini.display-errors" class="link">display_errors</a> is on.
      </p>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongolog.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoLog</strong>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">NONE</var>
       <span class="initializer"> = 0</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">ALL</var>
       <span class="initializer"> = 31</span>
      ;</div>
  
  
      <div class="classsynopsisinfo">level constants {</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">WARNING</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">INFO</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">FINE</var>
       <span class="initializer"> = 4</span>
      ;</div>
  
  
      <div class="classsynopsisinfo">module constants {</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">RS</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">POOL</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">CON</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">IO</var>
       <span class="initializer"> = 4</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">SERVER</var>
       <span class="initializer"> = 8</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">int</span>
       <var class="varname">PARSE</var>
       <span class="initializer"> = 16</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
      <div class="fieldsynopsis">
       <span class="modifier">private</span>
       <span class="modifier">static</span>
       <span class="type">int</span>
       <var class="varname">callback</var>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">private</span>
       <span class="modifier">static</span>
       <span class="type">int</span>
       <var class="varname">level</var>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">private</span>
       <span class="modifier">static</span>
       <span class="type">int</span>
       <var class="varname">module</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongolog.getcallback" class="methodname">getCallback</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongolog.getlevel" class="methodname">getLevel</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongolog.getmodule" class="methodname">getModule</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongolog.setcallback" class="methodname">setCallback</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> <code class="parameter">$log_function</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongolog.setlevel" class="methodname">setLevel</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongolog.setmodule" class="methodname">setModule</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$module</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Predefined Constants</h2>
     <div class="section" id="mongolog.constants.types">
      <h2 class="title">MongoLog Constants</h2>
      <p class="para">
       These constants can be used by both
       <span class="function"><a href="#mongolog.setlevel" class="function">MongoLog::setLevel()</a></span> and
       <span class="function"><a href="#mongolog.setmodule" class="function">MongoLog::setModule()</a></span>.
      </p>
  
      <dl>
  
       
        <dt id="mongolog.constants.none"><strong><code>MongoLog::NONE</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log nothing.
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.all"><strong><code>MongoLog::ALL</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log everything.
         </span>
        </dd>
  
       
      </dl>
  
     </div>
  
     <div class="section" id="mongolog.constants.level">
      <h2 class="title">MongoLog Level Constants</h2>
      <p class="para">
       These constants can be used by <span class="function"><a href="#mongolog.setlevel" class="function">MongoLog::setLevel()</a></span>.
      </p>
      <dl>
  
       
        <dt id="mongolog.constants.warning"><strong><code>MongoLog::WARNING</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log events that are somewhat exceptional, but not quite worthy of an
          actual exception (e.g. recoverable connection errors).
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.info"><strong><code>MongoLog::INFO</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log events that may be of interest to administrators, but are not
          particularly noteworthy (e.g. option parsing, authentication steps).
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.fine"><strong><code>MongoLog::FINE</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log most events that the driver performs (e.g. server selection, socket
          communication). Depending on the module being logged, this can be
          extremely noisy and is primarily useful for debugging.
         </span>
        </dd>
  
       
      </dl>
  
     </div>
  
     <div class="section" id="mongolog.constants.module">
      <h2 class="title">MongoLog Module Constants</h2>
      <p class="para">
       These constants can be used by <span class="function"><a href="#mongolog.setmodule" class="function">MongoLog::setModule()</a></span>.
      </p>
      <dl>
  
       
        <dt id="mongolog.constants.con"><strong><code>MongoLog::CON</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log connection activity. Creating new connections, authentication,
          pinging, timeouts, etc.
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.io"><strong><code>MongoLog::IO</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log traffic to/from the database. Unless your program is trivial, this
          will create an enormous number of log messages.
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.parse"><strong><code>MongoLog::PARSE</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log parsing of the connection string and options when constructing
          <a href="#class.mongoclient" class="classname">MongoClient</a>.
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.pool"><strong><code>MongoLog::POOL</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Previously used to log connection pool activity. This option is now a
          deprecated alias of <strong><code>MongoLog::RS</code></strong>.
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.rs"><strong><code>MongoLog::RS</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Log replica set activity. Failovers, read preference selection, etc.
         </span>
        </dd>
  
       
       
        <dt id="mongolog.constants.server"><strong><code>MongoLog::SERVER</code></strong></dt>
  
        <dd>
  
         <span class="simpara">
          Previously used to log server status changes. This option is deprecated
          in favor of <strong><code>MongoLog::RS</code></strong>.
         </span>
        </dd>
  
       
      </dl>
  
     </div>
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Added <strong><code>MongoLog::CON</code></strong> and deprecated
           <strong><code>MongoLog::POOL</code></strong> and
           <strong><code>MongoLog::SERVER</code></strong>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongolog.getcallback" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoLog::getCallback</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.3.0)</p><p class="refpurpose"><span class="refname">MongoLog::getCallback</span> &mdash; <span class="dc-title">Gets the previously set callback function</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongolog.getcallback-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoLog::getCallback</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span></div>
  
    <p class="para rdfs-comment">
     Retrieves the callback function.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongolog.getcallback-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongolog.getcallback-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the callback function, or <strong><code>FALSE</code></strong> if not set yet.
    </p>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongolog.getcallback-notes">
    <h3 class="title">Notes</h3>
    <div class="caution"><strong class="caution">Caution</strong>
     <p class="para">
      This function is only available with PHP 5.3.0 and later.
     </p>
    </div>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongolog.getlevel" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoLog::getLevel</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.2.3)</p><p class="refpurpose"><span class="refname">MongoLog::getLevel</span> &mdash; <span class="dc-title">Gets the level(s) currently being logged</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongolog.getlevel-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoLog::getLevel</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     This function can be used to see which log levels are currently enabled.
     The returned integer may be compared with the
     <a href="#mongolog.constants.level" class="link">MongoLog level constants</a>
     using bitwise operators to check for specific log levels.
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">getLevel</span><span style="color: #007700">()&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">FINE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"lots&nbsp;of&nbsp;logs\n"</span><span style="color: #007700">;<br />}<br /><br />if&nbsp;(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">getLevel</span><span style="color: #007700">()&nbsp;^&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">NONE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"logging,&nbsp;at&nbsp;least&nbsp;a&nbsp;little\n"</span><span style="color: #007700">;<br />}<br /><br />if&nbsp;(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">getLevel</span><span style="color: #007700">()&nbsp;==&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"logging&nbsp;at&nbsp;the&nbsp;highest&nbsp;levels\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongolog.getlevel-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongolog.getlevel-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the level(s) currently being logged.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongolog.getmodule" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoLog::getModule</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.2.3)</p><p class="refpurpose"><span class="refname">MongoLog::getModule</span> &mdash; <span class="dc-title">Gets the module(s) currently being logged</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongolog.getmodule-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoLog::getModule</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     This function can be used to see which driver modules are currently being
     logged. The returned integer may be compared with the
     <a href="#mongolog.constants.module" class="link">MongoLog module constants</a>
     using bitwise operators to check if specific modules are being logged.
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">getModule</span><span style="color: #007700">()&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">RS</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"logging&nbsp;replica&nbsp;sets\n"</span><span style="color: #007700">;<br />}<br /><br />if&nbsp;(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">getModule</span><span style="color: #007700">()&nbsp;^&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">NONE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"logging&nbsp;something\n"</span><span style="color: #007700">;<br />}<br /><br />if&nbsp;((</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">getModule</span><span style="color: #007700">()&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">IO</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"not&nbsp;logging&nbsp;io\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongolog.getmodule-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongolog.getmodule-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the module(s) currently being logged.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongolog.setcallback" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoLog::setCallback</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.3.0)</p><p class="refpurpose"><span class="refname">MongoLog::setCallback</span> &mdash; <span class="dc-title">Sets a callback function to be invoked for events</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongolog.setcallback-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoLog::setCallback</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> <code class="parameter">$log_function</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     This function will set a callback function to be invoked for events in lieu
     of emitting of PHP notice.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongolog.setcallback-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">log_function</code></dt>
  
       <dd>
  
        <p class="para">
         The callback function to be invoked on events. It should have the following prototype:
        </p>
        <p class="para">
         <div class="methodsynopsis dc-description">
          <span class="methodname"><span class="replaceable">log_function</span></span>
           ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$module</code></span>
          , <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code></span>
          , <span class="methodparam"><span class="type">string</span> <code class="parameter">$message</code></span>
          )</div>
  
         <dl>
  
          
           <dt>
  <code class="parameter">module</code></dt>
  
           <dd>
  
            <span class="simpara">
             One of the <a href="#mongolog.constants.module" class="link">MongoLog
             module constants</a>.
            </span>
           </dd>
  
          
          
           <dt>
  <code class="parameter">level</code></dt>
  
           <dd>
  
            <span class="simpara">
             One of the <a href="#mongolog.constants.level" class="link">MongoLog
             level constants</a>.
            </span>
           </dd>
  
          
          
           <dt>
  <code class="parameter">message</code></dt>
  
           <dd>
  
            <span class="simpara">
             The log message itself.
            </span>
           </dd>
  
          
         </dl>
  
        </p>
       </dd>
  
      
     </dl>
  
    </p>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongolog.setcallback-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongolog.setcallback-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1722">
     <p><strong>Example #1 <span class="methodname"><strong>MongoLog::setCallback()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">module2string</span><span style="color: #007700">(</span><span style="color: #0000BB">$module</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$module</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">RS</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"REPLSET"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">CON</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"CON"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">IO</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"IO"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">SERVER</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"SERVER"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">PARSE</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"PARSE"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;return&nbsp;</span><span style="color: #DD0000">"UNKNOWN"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">level2string</span><span style="color: #007700">(</span><span style="color: #0000BB">$level</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$level</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">WARNING</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"WARN"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">INFO</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"INFO"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">FINE</span><span style="color: #007700">:&nbsp;return&nbsp;</span><span style="color: #DD0000">"FINE"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;return&nbsp;</span><span style="color: #DD0000">"UNKNOWN"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">callback</span><span style="color: #007700">(</span><span style="color: #0000BB">$module</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$level</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$message</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"Y-m-d&nbsp;H:i:s&nbsp;-&nbsp;"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s):&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">module2string</span><span style="color: #007700">(</span><span style="color: #0000BB">$module</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">level2string</span><span style="color: #007700">(</span><span style="color: #0000BB">$level</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$message</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;We&nbsp;specify&nbsp;the&nbsp;function&nbsp;name&nbsp;here,&nbsp;but&nbsp;any&nbsp;callable&nbsp;(e.g.&nbsp;anonymous&nbsp;function)&nbsp;will&nbsp;work<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setCallback</span><span style="color: #007700">(</span><span style="color: #DD0000">"callback"</span><span style="color: #007700">);<br /><br />new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  2013-07-09 09:41:42 - PARSE (INFO): Parsing localhost:27017
  2013-07-09 09:41:42 - PARSE (INFO): - Found node: localhost:27017
  2013-07-09 09:41:42 - PARSE (INFO): - Connection type: STANDALONE
  2013-07-09 09:41:42 - CON (INFO): mongo_get_read_write_connection: finding a STANDALONE connection
  2013-07-09 09:41:42 - CON (INFO): connection_create: creating new connection for localhost:27017
  2013-07-09 09:41:42 - CON (INFO): stream_connect: Not establishing SSL for localhost:27017
  2013-07-09 09:41:42 - CON (INFO): get_server_flags: start
  2013-07-09 09:41:42 - CON (FINE): send_packet: read from header: 36
  2013-07-09 09:41:42 - CON (FINE): send_packet: data_size: 95
  2013-07-09 09:41:42 - CON (FINE): get_server_flags: setting maxBsonObjectSize to 16777216
  2013-07-09 09:41:42 - CON (FINE): get_server_flags: setting maxMessageSizeBytes to 48000000
  2013-07-09 09:41:42 - CON (INFO): is_ping: pinging localhost:27017;-;.;1543
  2013-07-09 09:41:42 - CON (FINE): send_packet: read from header: 36
  2013-07-09 09:41:42 - CON (FINE): send_packet: data_size: 17
  2013-07-09 09:41:42 - CON (INFO): is_ping: last pinged at 1373359302; time: 0ms
  2013-07-09 09:41:42 - REPLSET (FINE): finding candidate servers
  2013-07-09 09:41:42 - REPLSET (FINE): - all servers
  2013-07-09 09:41:42 - REPLSET (FINE): filter_connections: adding connections:
  2013-07-09 09:41:42 - REPLSET (FINE): - connection: type: STANDALONE, socket: 42, ping: 0, hash: localhost:27017;-;.;1543
  2013-07-09 09:41:42 - REPLSET (FINE): filter_connections: done
  2013-07-09 09:41:42 - REPLSET (FINE): limiting by seeded/discovered servers
  2013-07-09 09:41:42 - REPLSET (FINE): - connection: type: STANDALONE, socket: 42, ping: 0, hash: localhost:27017;-;.;1543
  2013-07-09 09:41:42 - REPLSET (FINE): limiting by seeded/discovered servers: done
  2013-07-09 09:41:42 - REPLSET (FINE): limiting by credentials
  2013-07-09 09:41:42 - REPLSET (FINE): - connection: type: STANDALONE, socket: 42, ping: 0, hash: localhost:27017;-;.;1543
  2013-07-09 09:41:42 - REPLSET (FINE): limiting by credentials: done
  2013-07-09 09:41:42 - REPLSET (FINE): sorting servers by priority and ping time
  2013-07-09 09:41:42 - REPLSET (FINE): - connection: type: STANDALONE, socket: 42, ping: 0, hash: localhost:27017;-;.;1543
  2013-07-09 09:41:42 - REPLSET (FINE): sorting servers: done
  2013-07-09 09:41:42 - REPLSET (FINE): selecting near servers
  2013-07-09 09:41:42 - REPLSET (FINE): selecting near servers: nearest is 0ms
  2013-07-09 09:41:42 - REPLSET (FINE): - connection: type: STANDALONE, socket: 42, ping: 0, hash: localhost:27017;-;.;1543
  2013-07-09 09:41:42 - REPLSET (FINE): selecting near server: done
  2013-07-09 09:41:42 - REPLSET (INFO): pick server: random element 0
  2013-07-09 09:41:42 - REPLSET (INFO): - connection: type: STANDALONE, socket: 42, ping: 0, hash: localhost:27017;-;.;1543
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongolog.setcallback-notes">
    <h3 class="title">Notes</h3>
    <div class="caution"><strong class="caution">Caution</strong>
     <p class="para">
      This function is only available with PHP 5.3.0 and later.
     </p>
    </div>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongolog.setlevel" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoLog::setLevel</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.2.3)</p><p class="refpurpose"><span class="refname">MongoLog::setLevel</span> &mdash; <span class="dc-title">Sets the level(s) to be logged</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongolog.setlevel-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoLog::setLevel</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     This function can be used to control logging verbosity and the types of
     activities that should be logged. The
     <a href="#mongolog.constants.level" class="link">MongoLog level constants</a>
     may be used with bitwise operators to specify multiple levels.
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;first,&nbsp;specify&nbsp;a&nbsp;logging&nbsp;module<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">CON</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;log&nbsp;messages&nbsp;for&nbsp;every&nbsp;level<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;log&nbsp;warning&nbsp;and&nbsp;info&nbsp;messages&nbsp;only<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">WARNING</span><span style="color: #007700">|</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">INFO</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;log&nbsp;everything&nbsp;except&nbsp;fine&nbsp;activity<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL&nbsp;</span><span style="color: #007700">&amp;&nbsp;(~</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">FINE</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     Note that you must also call <span class="function"><a href="#mongolog.setmodule" class="function">MongoLog::setModule()</a></span> to
     specify which modules(s) of the driver should log.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongolog.setlevel-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">level</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The level(s) you would like to log.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongolog.setmodule" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoLog::setModule</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.2.3)</p><p class="refpurpose"><span class="refname">MongoLog::setModule</span> &mdash; <span class="dc-title">Sets the module(s) to be logged</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongolog.setmodule-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoLog::setModule</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$module</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     This function can be used to set which driver modules should be logged. The
     <a href="#mongolog.constants.module" class="link">MongoLog module constants</a>
     may be used with bitwise operators to specify multiple modules.
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;first,&nbsp;specify&nbsp;a&nbsp;logging&nbsp;level<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setLevel</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;log&nbsp;replica&nbsp;set&nbsp;activity<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">RS</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;log&nbsp;replica&nbsp;sets&nbsp;and&nbsp;connection&nbsp;activity<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">RS</span><span style="color: #007700">|</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">CON</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;log&nbsp;everything&nbsp;except&nbsp;IO&nbsp;activity<br /></span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">setModule</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">ALL&nbsp;</span><span style="color: #007700">&amp;&nbsp;(~</span><span style="color: #0000BB">MongoLog</span><span style="color: #007700">::</span><span style="color: #0000BB">IO</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     Note that you must also call <span class="function"><a href="#mongolog.setlevel" class="function">MongoLog::setLevel()</a></span> to
     enable logging.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongolog.setmodule-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">module</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The module(s) you would like to log.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongolog.getcallback">MongoLog::getCallback</a> — Gets the previously set callback function</li><li><a href="#mongolog.getlevel">MongoLog::getLevel</a> — Gets the level(s) currently being logged</li><li><a href="#mongolog.getmodule">MongoLog::getModule</a> — Gets the module(s) currently being logged</li><li><a href="#mongolog.setcallback">MongoLog::setCallback</a> — Sets a callback function to be invoked for events</li><li><a href="#mongolog.setlevel">MongoLog::setLevel</a> — Sets the level(s) to be logged</li><li><a href="#mongolog.setmodule">MongoLog::setModule</a> — Sets the module(s) to be logged</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongopool" class="reference"><hr />
  
   <h1 class="title">The MongoPool class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.2.3)</p>
  
  
    <div class="section" id="mongopool.intro">
     <h2 class="title">Introduction</h2>
     <div class="warning"><strong class="warning">Warning</strong>
      <p class="para">
       The current (1.3.0+) releases of the driver no longer implements pooling.
       This class and its methods are therefore deprecated and should not be
       used.
      </p>
     </div>
    </div>
  
  
    <div class="section" id="mongopool.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoPool</strong>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongopool.getsize" class="methodname">getSize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongopool.info" class="methodname">info</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongopool.setsize" class="methodname">setSize</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code></span>
     ) : <span class="type">bool</span></div>
  
     }</div>
  
  
    </div>
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           This functionality has been removed and no longer does anything other
           than emit deprecation warnings. This class is only kept around for
           backwards compatibility and will be removed in the near future.
          </td>
         </tr>
  
         <tr>
          <td>1.2.11</td>
          <td>
          Emits <strong><code>E_DEPRECATED</code></strong> when used.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongopool.getsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoPool::getSize</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.2.3)</p><p class="refpurpose"><span class="refname">MongoPool::getSize</span> &mdash; <span class="dc-title">Get pool size for connection pools</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongopool.getsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoPool::getSize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongopool.getsize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongopool.getsize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the current pool size.
    </p>
   </div>
  
   <div class="refsect1 changelog" id="refsect1-mongopool.getsize-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongopool.getsize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1723">
     <p><strong>Example #1 Changing pool size</strong></p>
     <div class="example-contents"><p>
      This returns the default pool size, sets a new pool size, then prints the
      new pool size and the pool debugging information.  Note that changing the
      pool size only affects new connection pools, it does not change old ones.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$connection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">(</span><span style="color: #DD0000">"host1"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;pool&nbsp;size&nbsp;is&nbsp;-1<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"pool&nbsp;size&nbsp;is:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">MongoPool</span><span style="color: #007700">::</span><span style="color: #0000BB">getSize</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"setting&nbsp;pool&nbsp;size&nbsp;to&nbsp;200\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">MongoPool</span><span style="color: #007700">::</span><span style="color: #0000BB">setSize</span><span style="color: #007700">(</span><span style="color: #0000BB">200</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;pool&nbsp;size&nbsp;is&nbsp;200<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"pool&nbsp;size&nbsp;is:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">MongoPool</span><span style="color: #007700">::</span><span style="color: #0000BB">getSize</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$conn2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">(</span><span style="color: #DD0000">"host2"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;remaining&nbsp;for&nbsp;host1&nbsp;is&nbsp;-2<br />//&nbsp;remaining&nbsp;for&nbsp;host2&nbsp;is&nbsp;199<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">::</span><span style="color: #0000BB">poolDebug</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongopool.getsize-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongopool.setsize" class="function" rel="rdfs-seeAlso">MongoPool::setSize()</a> - Set the size for future connection pools</span></li>
      <li class="member"><span class="function"><a href="#mongopool.info" class="function" rel="rdfs-seeAlso">MongoPool::info()</a> - Returns information about all connection pools</span></li>
      <li class="member">The <a href="#mongo.connecting" class="link">connection</a> documentation.</li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongopool.info" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoPool::info</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.2.3)</p><p class="refpurpose"><span class="refname">MongoPool::info</span> &mdash; <span class="dc-title">Returns information about all connection pools</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongopool.info-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoPool::info</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
  
    <p class="para rdfs-comment">
     Returns an array of information about all connection pools.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongopool.info-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongopool.info-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Each connection pool has an identifier, which starts with the host. For each
     pool, this function shows the following fields:
     <dl>
  
      
       <dt>
  
        <code class="parameter">in use</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of connections currently being used by
         <a href="#class.mongo" class="classname">Mongo</a> instances.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">in pool</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of connections currently in the pool (not being used).
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">remaining</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of connections that could be created by this pool. For
         example, suppose a pool had 5 connections remaining and 3 connections in
         the pool.  We could create 8 new instances of
         <a href="#class.mongoclient" class="classname">MongoClient</a> before we exhausted this pool
         (assuming no instances of <a href="#class.mongoclient" class="classname">MongoClient</a> went out of
         scope, returning their connections to the pool).
        </p>
        <p class="para">
         A negative number means that this pool will spawn unlimited connections.
        </p>
        <p class="para">
         Before a pool is created, you can change the max number of connections by
         calling <span class="function"><a href="#mongo.setpoolsize" class="function">Mongo::setPoolSize()</a></span>. Once a pool is showing
         up in the output of this function, its size cannot be changed.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">total</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The total number of connections allowed for this pool.  This should be
         greater than or equal to &quot;in use&quot; + &quot;in pool&quot; (or -1).
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">timeout</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The socket timeout for connections in this pool. This is how long
         connections in this pool will attempt to connect to a server before
         giving up.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">waiting</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If you have capped the pool size, workers requesting connections from
         the pool may block until other workers return their connections. This
         field shows how many milliseconds workers have blocked for connections to
         be released.  If this number keeps increasing, you may want to use
         <span class="function"><a href="#mongopool.setsize" class="function">MongoPool::setSize()</a></span> to add more connections to your
         pool.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 changelog" id="refsect1-mongopool.info-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongopool.setsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoPool::setSize</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.2.3)</p><p class="refpurpose"><span class="refname">MongoPool::setSize</span> &mdash; <span class="dc-title">Set the size for future connection pools</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongopool.setsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>MongoPool::setSize</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code></span>
     ) : <span class="type">bool</span></div>
  
  
    <p class="para rdfs-comment">
     Sets the max number of connections new pools will be able to create.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongopool.setsize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">size</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The max number of connections future pools will be able to create.
         Negative numbers mean that the pool will spawn an infinite number of
         connections.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongopool.setsize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the former value of pool size.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongopool.setsize-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongopool.setsize-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1724">
      <p><strong>Example #1 <span class="function"><a href="#mongo.setpoolsize" class="function">Mongo::setPoolSize()</a></span> example</strong></p>
      <div class="example-contents"><p>
       If you set the pool size to <code class="literal">n</code> and then create
       <code class="literal">n</code> connections, attempting to create an
       <code class="literal">n+1</code>st connection will throw a
       <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a>.
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;only&nbsp;allow&nbsp;one&nbsp;connection&nbsp;to&nbsp;a&nbsp;server<br /></span><span style="color: #0000BB">MongoPool</span><span style="color: #007700">::</span><span style="color: #0000BB">setSize</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;creates&nbsp;one&nbsp;connection&nbsp;to&nbsp;localhost:27017<br /></span><span style="color: #0000BB">$m1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;attempt&nbsp;to&nbsp;create&nbsp;a&nbsp;second&nbsp;connection&nbsp;to&nbsp;localhost:27017<br />//&nbsp;only&nbsp;one&nbsp;connection&nbsp;is&nbsp;allowed,&nbsp;so&nbsp;this&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception<br /></span><span style="color: #0000BB">$m2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  Fatal error: Uncaught exception &#039;MongoConnectionException&#039; with message &#039;no more connections in pool&#039; in /path/to/php/script.php:10
  Stack trace:
  #0 /path/to/php/script.php(10): Mongo-&gt;__construct()
  #1 {main}
    thrown in /path/to/php/script.php on line 10
  </pre></div>
      </div>
     </div>
    </p>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongopool.setsize-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongopool.getsize" class="function" rel="rdfs-seeAlso">MongoPool::getSize()</a> - Get pool size for connection pools</span></li>
      <li class="member"><span class="function"><a href="#mongopool.info" class="function" rel="rdfs-seeAlso">MongoPool::info()</a> - Returns information about all connection pools</span></li>
      <li class="member">The <a href="#mongo.connecting" class="link">connection</a> documentation.</li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongopool.getsize">MongoPool::getSize</a> — Get pool size for connection pools</li><li><a href="#mongopool.info">MongoPool::info</a> — Returns information about all connection pools</li><li><a href="#mongopool.setsize">MongoPool::setSize</a> — Set the size for future connection pools</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongo" class="reference"><hr />
  
   <h1 class="title">The Mongo class [deprecated]</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
    
    <div class="section" id="mongo.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      A connection between PHP and MongoDB.
     </p>
     <p class="para">
      This class extends <a href="#class.mongoclient" class="classname">MongoClient</a> and provides access to
      several deprecated methods.
     </p>
     <p class="para">
      For backwards compatibility, it also defaults the <code class="literal">&quot;w&quot;</code>
      option of its constructor argument to <code class="literal">0</code>, which does not
      require write operations to be acknowledged by the server. See
      <span class="function"><a href="#mongoclient.construct" class="function">MongoClient::__construct()</a></span> for more information.
     </p>
  
      <div class="warning"><strong class="warning">Warning</strong>
       <p class="simpara">
        This class has been <em class="emphasis">DEPRECATED</em> as of version
        1.3.0. Relying on this feature is highly discouraged. Please use
        <a href="#class.mongoclient" class="classname">MongoClient</a> instead.
       </p>
      </div>
    </div>
    
  
    <div class="section" id="mongo.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">Mongo</strong>
       </span>
  
      <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongoclient" class="classname">MongoClient</a>
       </span>
       {</div>
      
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">protected</span> <span class="methodname"><a href="#mongo.connectutil" class="methodname">connectUtil</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongo.getpoolsize" class="methodname">getPoolSize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongo.getslave" class="methodname">getSlave</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongo.getslaveokay" class="methodname">getSlaveOkay</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongo.pooldebug" class="methodname">poolDebug</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongo.setpoolsize" class="methodname">setPoolSize</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongo.setslaveokay" class="methodname">setSlaveOkay</a></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongo.switchslave" class="methodname">switchSlave</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.close" class="methodname">MongoClient::close</a></span>
      ([ <span class="methodparam"><span class="type"><span class="type boolean|string">boolean|string</span></span> <code class="parameter">$connection</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.connect" class="methodname">MongoClient::connect</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.dropdb" class="methodname">MongoClient::dropDB</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$db</code></span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.get" class="methodname">MongoClient::__get</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$dbname</code></span>
     ) : <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#mongoclient.getconnections" class="methodname">MongoClient::getConnections</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.gethosts" class="methodname">MongoClient::getHosts</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.getreadpreference" class="methodname">MongoClient::getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.getwriteconcern" class="methodname">MongoClient::getWriteConcern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.killcursor" class="methodname">MongoClient::killCursor</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$server_hash</code></span>
     , <span class="methodparam"><span class="type"><span class="type int|MongoInt64">int|MongoInt64</span></span> <code class="parameter">$id</code></span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.listdbs" class="methodname">MongoClient::listDBs</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.selectcollection" class="methodname">MongoClient::selectCollection</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
     ) : <span class="type"><a href="#class.mongocollection" class="type MongoCollection">MongoCollection</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.selectdb" class="methodname">MongoClient::selectDB</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
     ) : <span class="type"><a href="#class.mongodb" class="type MongoDB">MongoDB</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.setreadpreference" class="methodname">MongoClient::setReadPreference</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.setwriteconcern" class="methodname">MongoClient::setWriteConcern</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
    ] ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoclient.tostring" class="methodname">MongoClient::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
     
  
    </div>
  
  
   </div>
  
   
  
  
  <div id="mongo.connectutil" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::connectUtil</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">Mongo::connectUtil</span> &mdash; <span class="dc-title">Connects with a database server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.connectutil-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">protected</span> <span class="methodname"><strong>Mongo::connectUtil</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      This is an internal function that you should <em class="emphasis">never</em>
      call yourself.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.connectutil-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.connectutil-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     If the connection was successful.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongo.connectutil-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a> if it fails to connect
     to the databases.
    </p>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongo.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::__construct</h1>
    <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">Mongo::__construct</span> &mdash; <span class="dc-title">The __construct purpose</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.construct-description">
    <h3 class="title">Description</h3>
    <div class="constructorsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>Mongo::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$server</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ]] )</div>
  
    <p class="para rdfs-comment">
    This method overwrites the <a href="#class.mongoclient" class="classname">MongoClient</a> constructor
    and turns off acknowledged writes.
    </p>
    <p class="para">
     Please see <span class="methodname"><a href="#mongoclient.construct" class="methodname">MongoClient::__construct()</a></span> for
     description of the parameters.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongo.construct-errors">
    <h3 class="title">Return Values</h3>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      Instanciating this class will emit <strong><code>E_DEPRECATED</code></strong>
      warning, and turn off acknowledged writes.
     </p>
    </div>
    <p class="para">
     Please use the <a href="#class.mongoclient" class="classname">MongoClient</a> instead.
    </p>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongo.getpoolsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::getPoolSize</h1>
    <p class="verinfo">(PECL mongo &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">Mongo::getPoolSize</span> &mdash; <span class="dc-title">Get pool size for connection pools</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.getpoolsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>Mongo::getPoolSize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">This feature has been <em class="emphasis">DEPRECATED</em> as of version
      1.2.3. Relying on this feature is highly discouraged.  Please use
      <span class="function"><a href="#mongopool.getsize" class="function">MongoPool::getSize()</a></span> instead.
     </p>
    </div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.getpoolsize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.getpoolsize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the current pool size.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongo.getpoolsize-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongo.getpoolsize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1725">
     <p><strong>Example #1 Changing pool size</strong></p>
     <div class="example-contents"><p>
      This returns the default pool size, sets a new pool size, then prints the
      new pool size and the pool debugging information.  Note that changing the
      pool size only affects new connection pools, it does not change old ones.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$connection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">(</span><span style="color: #DD0000">"host1"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;pool&nbsp;size&nbsp;is&nbsp;-1<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"pool&nbsp;size&nbsp;is:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">::</span><span style="color: #0000BB">getPoolSize</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"setting&nbsp;pool&nbsp;size&nbsp;to&nbsp;200\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">Mongo</span><span style="color: #007700">::</span><span style="color: #0000BB">setPoolSize</span><span style="color: #007700">(</span><span style="color: #0000BB">200</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;pool&nbsp;size&nbsp;is&nbsp;200<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"pool&nbsp;size&nbsp;is:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">::</span><span style="color: #0000BB">getPoolSize</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$conn2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">(</span><span style="color: #DD0000">"host2"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;remaining&nbsp;for&nbsp;host1&nbsp;is&nbsp;-2<br />//&nbsp;remaining&nbsp;for&nbsp;host2&nbsp;is&nbsp;199<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">::</span><span style="color: #0000BB">poolDebug</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongo.getpoolsize-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongo.setpoolsize" class="function" rel="rdfs-seeAlso">Mongo::setPoolSize()</a> - Set the size for future connection pools</span></li>
      <li class="member"><span class="function"><a href="#mongo.pooldebug" class="function" rel="rdfs-seeAlso">Mongo::poolDebug()</a> - Returns information about all connection pools</span></li>
      <li class="member">The <a href="#mongo.connecting" class="link">connection</a> documentation.</li>
     </ul>
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongo.getslave" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::getSlave</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">Mongo::getSlave</span> &mdash; <span class="dc-title">Returns the address being used by this for slaveOkay reads</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.getslave-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>Mongo::getSlave</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
  
    <p class="para rdfs-comment">
     This finds the address of the secondary currently being used for reads. It is
     a read-only method: it does not change anything about the internal state of
     the object.
    </p>
  
    <p class="para">
     When you create a connection to the database, the driver will not immediately
     decide on a secondary to use. Thus, after you connect, this function will
     return <strong><code>NULL</code></strong> even if there are secondaries available. When you first do a
     query with slaveOkay set, at that point the driver will choose a secondary
     for this connection. At that point, this function will return the chosen
     secondary.
    </p>
  
    <p class="para">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.getslave-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.getslave-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The address of the secondary this connection is using for reads.
    </p>
    <p class="para">
     This returns <strong><code>NULL</code></strong> if this is not connected to a replica set or not yet
     initialized.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongo.getslave-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Issues <strong><code>E_DEPRECATED</code></strong> warning</p>
    <p class="para">
     The returned results aren&#039;t really useful as the secondary selection
     process is done on each query and database command execution.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongo.getslave-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongo.getslave-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongocursor.info" class="function" rel="rdfs-seeAlso">MongoCursor::info()</a> - Gets information about the cursor's creation and iteration</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongo.getslaveokay" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::getSlaveOkay</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">Mongo::getSlaveOkay</span> &mdash; <span class="dc-title">Get slaveOkay setting for this connection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.getslaveokay-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>Mongo::getSlaveOkay</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
  
    <p class="para rdfs-comment">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.getslaveokay-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.getslaveokay-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the value of slaveOkay for this instance.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongo.getslaveokay-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">Issues <strong><code>E_DEPRECATED</code></strong> warning</p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongo.getslaveokay-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongo.getslaveokay-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
     <li class="member"><span class="methodname"><a href="#mongoclient.getreadpreference" class="methodname" rel="rdfs-seeAlso">MongoClient::getReadPreference()</a> - Get the read preference for this connection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongo.pooldebug" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::poolDebug</h1>
    <p class="verinfo">(PECL mongo &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">Mongo::poolDebug</span> &mdash; <span class="dc-title">Returns information about all connection pools</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.pooldebug-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>Mongo::poolDebug</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">This feature has been <em class="emphasis">DEPRECATED</em> as of version
      1.2.3. Relying on this feature is highly discouraged.  Please use
      <span class="function"><a href="#mongopool.info" class="function">MongoPool::info()</a></span> instead.
     </p>
    </div>
  
    <p class="para">
     Returns an array of information about all connection pools.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.pooldebug-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.pooldebug-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Each connection pool has an identifier, which starts with the host. For each
     pool, this function shows the following fields:
     <dl>
  
      
       <dt>
  
        <code class="parameter">in use</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of connections currently being used by
         <a href="#class.mongoclient" class="classname">MongoClient</a> instances.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">in pool</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of connections currently in the pool (not being used).
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">remaining</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The number of connections that could be created by this pool. For
         example, suppose a pool had 5 connections remaining and 3 connections in
         the pool.  We could create 8 new instances of
         <a href="#class.mongoclient" class="classname">MongoClient</a> before we exhausted this pool
         (assuming no instances of <a href="#class.mongoclient" class="classname">MongoClient</a> went out of
         scope, returning their connections to the pool).
        </p>
        <p class="para">
         A negative number means that this pool will spawn unlimited connections.
        </p>
        <p class="para">
         Before a pool is created, you can change the max number of connections by
         calling <span class="function"><a href="#mongo.setpoolsize" class="function">Mongo::setPoolSize()</a></span>. Once a pool is showing
         up in the output of this function, its size cannot be changed.
        </p>
       </dd>
  
      
      
       <dt>
  
        <code class="parameter">timeout</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The socket timeout for connections in this pool. This is how long
         connections in this pool will attempt to connect to a server before
         giving up.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongo.pooldebug-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongo.setpoolsize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::setPoolSize</h1>
    <p class="verinfo">(PECL mongo &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">Mongo::setPoolSize</span> &mdash; <span class="dc-title">Set the size for future connection pools</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.setpoolsize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>Mongo::setPoolSize</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code></span>
     ) : <span class="type">bool</span></div>
  
  
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">This method has been <em class="emphasis">DEPRECATED</em> as of version
      1.2.3. Relying on this feature is highly discouraged.  Please use
      <span class="function"><a href="#mongopool.setsize" class="function">MongoPool::setSize()</a></span> instead.
     </p>
    </div>
  
    <p class="para">
     Sets the max number of connections new pools will be able to create.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.setpoolsize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">size</code>
       </dt>
  
       <dd>
  
        <p class="para">
         The max number of connections future pools will be able to create.
         Negative numbers mean that the pool will spawn an infinite number of
         connections.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.setpoolsize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the former value of pool size.
    </p>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongo.setpoolsize-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1726">
      <p><strong>Example #1 <span class="function"><strong>Mongo::setPoolSize()</strong></span> example</strong></p>
      <div class="example-contents"><p>
       If you set the pool size to <code class="literal">n</code> and then create
       <code class="literal">n</code> connections, attempting to create an
       <code class="literal">n+1</code>st connection will throw a
       <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a>.
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;only&nbsp;allow&nbsp;one&nbsp;connection&nbsp;to&nbsp;a&nbsp;server<br /></span><span style="color: #0000BB">Mongo</span><span style="color: #007700">::</span><span style="color: #0000BB">setPoolSize</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;creates&nbsp;one&nbsp;connection&nbsp;to&nbsp;localhost:27017<br /></span><span style="color: #0000BB">$m1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;attempt&nbsp;to&nbsp;create&nbsp;a&nbsp;second&nbsp;connection&nbsp;to&nbsp;localhost:27017<br />//&nbsp;only&nbsp;one&nbsp;connection&nbsp;is&nbsp;allowed,&nbsp;so&nbsp;this&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception<br /></span><span style="color: #0000BB">$m2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  Fatal error: Uncaught exception &#039;MongoConnectionException&#039; with message &#039;no more connections in pool&#039; in /path/to/php/script.php:10
  Stack trace:
  #0 /path/to/php/script.php(10): Mongo-&gt;__construct()
  #1 {main}
    thrown in /path/to/php/script.php on line 10
  </pre></div>
      </div>
     </div>
    </p>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongo.setpoolsize-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongo.getpoolsize" class="function" rel="rdfs-seeAlso">Mongo::getPoolSize()</a> - Get pool size for connection pools</span></li>
      <li class="member"><span class="function"><a href="#mongo.pooldebug" class="function" rel="rdfs-seeAlso">Mongo::poolDebug()</a> - Returns information about all connection pools</span></li>
      <li class="member">The <a href="#mongo.connecting" class="link">connection</a> documentation.</li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="mongo.setslaveokay" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::setSlaveOkay</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">Mongo::setSlaveOkay</span> &mdash; <span class="dc-title">Change slaveOkay setting for this connection</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.setslaveokay-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>Mongo::setSlaveOkay</strong></span>
      ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
    ] ) : <span class="type">bool</span></div>
  
  
    <p class="para rdfs-comment">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.setslaveokay-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  
        <code class="parameter">ok</code>
       </dt>
  
       <dd>
  
        <p class="para">
         If reads should be sent to secondary members of a replica set for all
         possible queries using this <a href="#class.mongoclient" class="classname">MongoClient</a> instance.
        </p>
       </dd>
  
         
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.setslaveokay-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the former value of slaveOkay for this instance.
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongo.setslaveokay-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongo.setslaveokay-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
     <li class="member"><span class="methodname"><a href="#mongoclient.setreadpreference" class="methodname" rel="rdfs-seeAlso">MongoClient::setReadPreference()</a> - Set the read preference for this connection</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
   
  
  
  
  
  <div id="mongo.switchslave" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">Mongo::switchSlave</h1>
    <p class="verinfo">(PECL mongo &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">Mongo::switchSlave</span> &mdash; <span class="dc-title">Choose a new secondary for slaveOkay reads</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongo.switchslave-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>Mongo::switchSlave</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
  
    <p class="para rdfs-comment">
     This choses a random secondary for a connection to read from.  It is called
     automatically by the driver and should not need to be used.  It calls
     <span class="function"><a href="#mongoclient.gethosts" class="function">MongoClient::getHosts()</a></span> (to refresh the status of hosts)
     and <span class="function"><a href="#mongo.getslave" class="function">Mongo::getSlave()</a></span> (to get the return value).
    </p>
  
    <p class="para">
     See <a href="#mongo.queries" class="link">the query section</a> of this manual for
     information on distributing reads to secondaries.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongo.switchslave-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongo.switchslave-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The address of the secondary this connection is using for reads. This may be
     the same as the previous address as addresses are randomly chosen. It may
     return only one address if only one secondary (or only the primary) is
     available.
    </p>
    <p class="para">
     For example, if we had a three member replica set with a primary, secondary,
     and arbiter this method would always return the address of the secondary.
     If the secondary became unavailable, this method would always return the
     address of the primary.  If the primary also became unavailable, this method
     would throw an exception, as an arbiter cannot handle reads.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongo.switchslave-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <p class="para">
     Throws a <a href="#class.mongoexception" class="classname">MongoException</a> (error code 15) if it is 
     called on a non-replica-set connection.  It will also throw 
     <a href="#class.mongoexception" class="classname">MongoException</a>s if it cannot find anyone (primary or
     secondary) to read from (error code 16).
    </p>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongo.switchslave-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.11</td>
         <td>Emits <strong><code>E_DEPRECATED</code></strong> when used.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongo.switchslave-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongo.readpreferences" class="xref">Read Preferences</a></li>
    </ul>
   </div>
  
  
  
  </div>
  <hr />
  
   
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongo.connectutil">Mongo::connectUtil</a> — Connects with a database server</li><li><a href="#mongo.construct">Mongo::__construct</a> — The __construct purpose</li><li><a href="#mongo.getpoolsize">Mongo::getPoolSize</a> — Get pool size for connection pools</li><li><a href="#mongo.getslave">Mongo::getSlave</a> — Returns the address being used by this for slaveOkay reads</li><li><a href="#mongo.getslaveokay">Mongo::getSlaveOkay</a> — Get slaveOkay setting for this connection</li><li><a href="#mongo.pooldebug">Mongo::poolDebug</a> — Returns information about all connection pools</li><li><a href="#mongo.setpoolsize">Mongo::setPoolSize</a> — Set the size for future connection pools</li><li><a href="#mongo.setslaveokay">Mongo::setSlaveOkay</a> — Change slaveOkay setting for this connection</li><li><a href="#mongo.switchslave">Mongo::switchSlave</a> — Choose a new secondary for slaveOkay reads</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
  </div>
  
  <hr />
  
  
   
  
  
  <div id="ref.mongo" class="reference"><hr />
   <h1 class="title">Mongo Functions</h1>
  
   
  
  <div id="function.bson-decode" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">bson_decode</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.1)</p><p class="refpurpose"><span class="refname">bson_decode</span> &mdash; <span class="dc-title">Deserializes a BSON object into a PHP array</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.bson-decode-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>bson_decode</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$bson</code></span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     This function is very beta and entirely useless for 99% of users.  It is only
     useful if you&#039;re doing something weird, such as writing your own driver on 
     top of the PHP driver.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.bson-decode-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">bson</code></dt>
  
       <dd>
  
        <p class="para">
         The BSON to be deserialized.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   
   <div class="refsect1 returnvalues" id="refsect1-function.bson-decode-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the deserialized BSON object.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.bson-encode" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">bson_encode</h1>
    <p class="verinfo">(PECL mongo &gt;=1.0.1)</p><p class="refpurpose"><span class="refname">bson_encode</span> &mdash; <span class="dc-title">Serializes a PHP variable into a BSON string</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.bson-encode-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>bson_encode</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$anything</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     This function is very beta and entirely useless for 99% of users.  It is only
     useful if you&#039;re doing something weird, such as writing your own driver on 
     top of the PHP driver.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.bson-encode-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">anything</code></dt>
  
       <dd>
  
        <p class="para">
         The variable to be serialized.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   
   <div class="refsect1 returnvalues" id="refsect1-function.bson-encode-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized string.
    </p>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#function.bson-decode">bson_decode</a> — Deserializes a BSON object into a PHP array</li><li><a href="#function.bson-encode">bson_encode</a> — Serializes a PHP variable into a BSON string</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongo.exceptions" class="part"><hr />
  
   <h1>Exceptions</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_part"><li><a href="#class.mongoexception">MongoException</a></li><li><a href="#class.mongoresultexception">MongoResultException</a></li><li><a href="#class.mongocursorexception">MongoCursorException</a></li><li><a href="#class.mongocursortimeoutexception">MongoCursorTimeoutException</a></li><li><a href="#class.mongoconnectionexception">MongoConnectionException</a></li><li><a href="#class.mongogridfsexception">MongoGridFSException</a></li><li><a href="#class.mongoduplicatekeyexception">MongoDuplicateKeyException</a></li><li><a href="#class.mongoprotocolexception">MongoProtocolException</a></li><li><a href="#class.mongoexecutiontimeoutexception">MongoExecutionTimeoutException</a></li><li><a href="#class.mongowriteconcernexception">MongoWriteConcernException</a></li></ul>
  
  
   <div class="partintro">
    <div class="section">
     <h2 class="title">VMWare Oddities</h2>
     <p class="para">
      If you are running VMWare on Windows and are using CIFS, pausing the VM will 
      cause CIFS to go out of sync and cause weird errors on un-pausing it (&quot;The 
      Mongo object has not been correctly initialized by its constructor&quot;).  
      Permanently mounting the Windows shares will fix this and you&#039;ll be able to
      pause and unpause at will.
     </p>
     <p class="para">
      To permanently mount the Windows shares, run:
     </p>
     <div class="example-contents">
      <div class="shellcode"><pre class="shellcode">$ sudo update-rc.d -f umountnfs.sh remove
  $ sudo update-rc.d umountnfs.sh stop 15 0 6 .</pre>
  </div>
     </div>
  
     <p class="para">
      See <a href="https://help.ubuntu.com/community/MountWindowsSharesPermanently" class="link external">&raquo;&nbsp;the Ubuntu docs</a> for the most
      up-to-date instructions.
     </p>
    </div>
   </div>
  
   
  
  
  <div id="class.mongoexception" class="reference"><hr />
  
   <h1 class="title">The MongoException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.0.0)</p>
  
    
    <div class="section" id="mongoexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Default Mongo exception.
     </p>
  
     <p class="para">
      This covers a bunch of different error conditions that may eventually be
      moved to more specific exceptions, but will always extend 
      <strong class="classname">MongoException</strong>.
     </p>
  
     <ul class="itemizedlist">
  
      <li class="listitem">
       <p class="para">
        <code class="literal">The MongoSomething object has not been correctly initialized by its constructor</code>
       </p>
       <p class="para">
        Code: 0
       </p>
       <p class="para">
        Probably your Mongo object is not connected to a database server.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">zero-length keys are not allowed, did you use $ with double quotes?</code>
       </p>
       <p class="para">
        Code: 1
       </p>
       <p class="para">
        You tried to save &quot;&quot; as a key.  You generally should not do this.  &quot;&quot; can 
        mess up subobject access and is used by MongoDB internally.  However, if 
        you really want, you can set 
        <a href="#ini.mongo.allow-empty-keys" class="link">mongo.allow_empty_keys</a> 
        to true in your php.ini file to override this sanity check.  If you 
        override this, it is highly recommended that you set error checking to 
        strict to avoid string interpolation errors.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">&#039;.&#039; not allowed in key: &lt;key&gt;</code>
       </p>
       <p class="para">
        Code: 2
       </p>
       <p class="para">
        You attempted to write a key with &#039;.&#039; in it, which is prohibited.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">insert too large: &lt;size&gt;, max: &lt;max&gt;</code>
       </p>
       <p class="para">
        Code: 3
       </p>
       <p class="para">
        You&#039;re attempting to send too much data to the database at once: the
        database will only accept inserts up to a certain size (currently 16 MB).
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">no elements in doc</code>
       </p>
       <p class="para">
        Code: 4
       </p>
       <p class="para">
        You&#039;re attempting to save a document with no fields.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">size of BSON doc is &lt;size&gt; bytes, max &lt;max&gt;MB</code>
       </p>
       <p class="para">
        Code: 5
       </p>
       <p class="para">
        You&#039;re attempting to save a document that is larger than MongoDB can save.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">no documents given</code>
       </p>
       <p class="para">
        Code: 6
       </p>
       <p class="para">
        You&#039;re attempting to batch insert an empty array of documents.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">MongoCollection::group takes an array, object, or MongoCode key</code>
       </p>
       <p class="para">
        Code: 7
       </p>
       <p class="para">
        Wrong type parameter send to <span class="function"><a href="#mongocollection.group" class="function">MongoCollection::group()</a></span>.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">field names must be strings</code>
       </p>
       <p class="para">
        Code: 8
       </p>
       <p class="para">
        You should format field selectors as 
        <code class="literal">array(&quot;field1&quot; =&gt; 1, &quot;field2&quot; =&gt; 1, ..., &quot;fieldN&quot; =&gt; 1)</code>.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">invalid regex</code>
       </p>
       <p class="para">
        Code: 9
       </p>
       <p class="para">
        The regex passed to <a href="#class.mongoregex" class="classname">MongoRegex</a> is not of the 
        correct form.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">MongoDBRef::get: $ref field must be a string</code>
       </p>
       <p class="para">
        Code: 10
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">MongoDBRef::get: $db field must be a string</code>
       </p>
       <p class="para">
        Code: 11
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">non-utf8 string: &lt;str&gt;</code>
       </p>
       <p class="para">
        Code: 12
       </p>
       <p class="para">
        This error occurs if you attempt to send a non-utf8 string to the 
        database.  All strings going into the database should be UTF8. See php.ini
        options for the transition option of quieting this exception.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">mutex error: &lt;err&gt;</code>
       </p>
       <p class="para">
        Code: 13
       </p>
       <p class="para">
        The driver uses mutexes for synchronizing requests and responses in 
        multithreaded environments.  This is a fairly serious error and may not
        have a stack trace.  It&#039;s unusual and should be reported to maintainers
        with any system information and steps to reproduce that you can provide.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">index name too long: &lt;len&gt;, max &lt;max&gt; characters</code>
       </p>
       <p class="para">
        Code: 14
       </p>
       <p class="para">
        Indexes with names longer than 128 characters cannot be created.  If you
        get this error, you should use 
        <span class="function"><a href="#mongocollection.ensureindex" class="function">MongoCollection::ensureIndex()</a></span>&#039;s &quot;name&quot; option to 
        create a shorter name for your index.
       </p>
      </li>
  
     </ul>
    </div>
    
  
    <div class="section" id="mongoexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoException</strong>
       </span>
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.exception" class="classname">Exception</a>
       </span>
       {</div>
      
      
     }</div>
     
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoresultexception" class="reference"><hr />
  
   <h1 class="title">The MongoResultException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;=1.3.0)</p>
  
  
    <div class="section" id="mongoresultexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The MongoResultException is thrown by several command helpers (such as
      <span class="methodname"><a href="#mongocollection.findandmodify" class="methodname">MongoCollection::findAndModify()</a></span>) in the event of
      failure. The original result document is available through
      <span class="methodname"><a href="#mongoresultexception.getdocument" class="methodname">MongoResultException::getDocument()</a></span>.
     </p>
    </div>
  
  
    <div class="section" id="mongoresultexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoResultException</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongoexception" class="classname">MongoException</a>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">public</span>
       <var class="varname">document</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongoresultexception.getdocument" class="methodname">getDocument</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
      
     }</div>
  
  
    </div>
  
    
  
    <div class="section" id="mongoresultexception.props">
     <h2 class="title">Properties</h2>
     <dl>
  
      
       <dt id="mongoresultexception.props.document"><var class="varname">document</var></dt>
  
       <dd>
  
        <p class="para">The raw result document as an array.</p>
       </dd>
  
      
     </dl>
  
    </div>
  
  
  
   </div>
  
   
  
  
  <div id="mongoresultexception.getdocument" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoResultException::getDocument</h1>
    <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoResultException::getDocument</span> &mdash; <span class="dc-title">Retrieve the full result document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongoresultexception.getdocument-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoResultException::getDocument</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Retrieves the full error result document.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongoresultexception.getdocument-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongoresultexception.getdocument-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The full result document as an array, including partial data if available and
     additional keys.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongoresultexception.getdocument-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1727">
     <p><strong>Example #1 <span class="methodname"><strong>MongoResultException::getDocument()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Next&nbsp;promo"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">"select&nbsp;product"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"add&nbsp;inventory"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"do&nbsp;placement"</span><span style="color: #007700">),<br />)&nbsp;);<br /><br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Biz&nbsp;report"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">"run&nbsp;sales&nbsp;report"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"email&nbsp;report"&nbsp;</span><span style="color: #007700">)<br />)&nbsp;);<br /><br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Biz&nbsp;report"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"tasks"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">"run&nbsp;marketing&nbsp;report"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"email&nbsp;report"&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$retval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAndModify</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"inprogress"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Biz&nbsp;report"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'inprogress'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"started"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">()))),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"sort"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"priority"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"new"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoResultException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDocument</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above examples will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  $set is not valid for storage.
  array(3) {
    [&quot;lastErrorObject&quot;]=&gt;
    array(5) {
      [&quot;connectionId&quot;]=&gt;
      int(6)
      [&quot;err&quot;]=&gt;
      string(30) &quot;$set is not valid for storage.&quot;
      [&quot;code&quot;]=&gt;
      int(52)
      [&quot;n&quot;]=&gt;
      int(0)
      [&quot;ok&quot;]=&gt;
      float(1)
    }
    [&quot;ok&quot;]=&gt;
    float(0)
    [&quot;errmsg&quot;]=&gt;
    string(30) &quot;$set is not valid for storage.&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongoresultexception.getdocument">MongoResultException::getDocument</a> — Retrieve the full result document</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongocursorexception" class="reference"><hr />
  
   <h1 class="title">The MongoCursorException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.0.0)</p>
  
    
    <div class="section" id="mongocursorexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Caused by accessing a cursor incorrectly or a error receiving a reply. Note
      that this can be thrown by any database request that receives a reply, not
      just queries.  Writes, commands, and any other operation that sends
      information to the database and waits for a response can throw a
      <strong class="classname">MongoCursorException</strong>.  The only exception is
      <code class="literal">new MongoClient()</code> (creating a new connection), which will
      only throw <a href="#class.mongoconnectionexception" class="classname">MongoConnectionException</a>s.
     </p>
  
     <p class="para">
      This returns a specific error message to help diagnose the problem and a
      numeric error code associated with the cause of the exception.
     </p>
  
     <p class="para">
      For example, suppose you tried to insert two documents with the same _id:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"_id"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br />catch&nbsp;(</span><span style="color: #0000BB">MongoCursorException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;message:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;code:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      This would produce output like:
      <div class="example-contents">
  <div class="txtcode"><pre class="txtcode">error message: E11000 duplicate key error index: foo.bar.$_id_  dup key: { : 1 }
  error code: 11000</pre>
  </div>
      </div>
  
      Note that the MongoDB error code (11000) is used for the PHP error code. The
      PHP driver uses the &quot;native&quot; error code wherever possible.
     </p>
  
     <p class="para">
      The following is a list of common errors, codes, and causes.  Exact errors
      are in italics, errors where the message can vary are described in obliques.
     </p>
  
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <code class="literal">cannot modify cursor after beginning iteration</code>
       </p>
       <p class="para">
        Code: 0
       </p>
       <p class="para">
        You are calling a method that sets up the query after executing the query.
        Reset the cursor and try again.
       </p>
       <p class="para">
        An example:
        <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">());<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;getNext()&nbsp;queried&nbsp;the&nbsp;database,&nbsp;it's&nbsp;too&nbsp;late&nbsp;to&nbsp;set&nbsp;a&nbsp;limit<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />}<br />catch&nbsp;(</span><span style="color: #0000BB">MongoCursorException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;message:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;code:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;this&nbsp;will&nbsp;work,&nbsp;though:<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">reset</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
        </div>
  
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        Get next batch send errors
       </p>
       <p class="para">
        Code: 1
       </p>
       <p class="para">
        Could not send the query to the database.  Make sure the database is
        still up and the network is okay.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">cursor not found</code>
       </p>
       <p class="para">
        Code: 2
       </p>
       <p class="para">
        The driver was trying to fetch more results from the database, but the
        database did not have a record of the query.  This usually means that the
        cursor timed out on the server side: after a few minutes of inactivity,
        the database will kill a cursor (see
        <span class="function"><a href="#mongocursor.immortal" class="function">MongoCursor::immortal()</a></span> for information on preventing
        this).
       </p>
       <p class="para">
        An example:
        <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;sleep&nbsp;for&nbsp;15&nbsp;minutes<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">60</span><span style="color: #007700">*</span><span style="color: #0000BB">15</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasNext</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br />catch&nbsp;(</span><span style="color: #0000BB">MongoCursorException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;message:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;code:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
        </div>
  
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">cursor-&gt;buf.pos is null</code>
       </p>
       <p class="para">
        Code: 3
       </p>
       <p class="para">
        This may indicate you are out of RAM or some other extraordinary
        circumstance.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">couldn&#039;t get response header</code>
       </p>
       <p class="para">
        Code: 4
       </p>
       <p class="para">
        A common error if the database or network goes down. This means that the
        driver couldn&#039;t get a response from the connection.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">no db response</code>
       </p>
       <p class="para">
        Code: 5
       </p>
       <p class="para">
        This may not even be an error, for example, the database command
        &quot;shutdown&quot; returns no response.  However, if you were expecting a
        response, this means the database didn&#039;t give one.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">bad response length: %d, did the db assert?</code>
       </p>
       <p class="para">
        Code: 6
       </p>
       <p class="para">
        This means that the database said that its response was less than 0.  This
        error probably indicates a network error or database corruption.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">incomplete header</code>
       </p>
       <p class="para">
        Code: 7
       </p>
       <p class="para">
        Highly unusual.  Occurs if the database response started out correctly,
        but broke off in the middle.  Probably indicates a network problem.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">incomplete response</code>
       </p>
       <p class="para">
        Code: 8
       </p>
       <p class="para">
        Highly unusual.  Occurs if the database response started out correctly,
        but broke off in the middle.  Probably indicates a network problem.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">couldn&#039;t find a response</code>
       </p>
       <p class="para">
        Code: 9
       </p>
       <p class="para">
        If the response was cached and now cannot be located.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">error getting socket</code>
       </p>
       <p class="para">
        Code: 10
       </p>
       <p class="para">
        The socket was closed or encountered an error.  The driver should
        automatically reconnect (if possible) on the next operation.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">couldn&#039;t find reply, please try again</code>
       </p>
       <p class="para">
        Code: 11
       </p>
       <p class="para">
        The driver saves any database responses it cannot immediately match with a
        request. This exception occurs if the driver has already passed your
        request&#039;s response and cannot find your response in its cache.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">error getting database response: errstr</code>
       </p>
       <p class="para">
        <code class="literal">WSA error getting database response: errstr</code>
       </p>
       <p class="para">
        &quot;errstr&quot; is an io error reported directly from the C socket
        subsystem.  On Windows, the error message is prefixed with &quot;WSA&quot;.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">Timeout error</code>
       </p>
       <p class="para">
        Code: 13
       </p>
       <p class="para">
        If there was an error while waiting for a query to complete.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">couldn&#039;t send query: &lt;various&gt;</code>
       </p>
       <p class="para">
        Code: 14
       </p>
       <p class="para">
        C socket error on send.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">max number of retries exhausted, couldn&#039;t send query</code>
       </p>
       <p class="para">
        Code: 19
       </p>
       <p class="para">
        The driver will automatically retry &quot;plain&quot; queries (not commands) a
        couple of times if the first attempt failed for certain reasons.  This is
        to cause fewer exceptions during replica set failover (although you will
        probably still have to deal with some) and gloss over transient network
        issues.
       </p>
       <p class="para">
        This can also be caused by the driver not being able to reconnect at all
        to the database (if, for example, the database is unreachable).
       </p>
       <p class="para">
        Version 1.2.2+.
       </p>
      </li>
     </ul>
    </div>
  
  
    <div class="section">
     <h2 class="title">Errors passed through by the database</h2>
     <p class="para">
      Database errors should always trigger
      <strong class="classname">MongoCursorExceptions</strong> on queries.
      Error messages and codes are sent directly from the database and you should
      be able to see matching errors in the database log.
     </p>
  
     <p class="para">
      A few common database errors are listed below:
     </p>
  
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <code class="literal">E11000 duplicate key error index: foo.bar.$X  dup key: { /* ... */ }</code>
       </p>
       <p class="para">
        Code: 11000
       </p>
       <p class="para">
        Database error for duplicate keys.
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">not master</code>
       </p>
       <p class="para">
        Codes: 10107, 13435, and 10058
       </p>
       <p class="para">
        Not master errors, piped through by the database.  ach of these will
        cause the driver to disconnect and attempt to find a new primary. The
        actual error you get on failover may not be a &quot;not master&quot; error,
        depending on when the change in primary occurs.
       </p>
      </li>
     </ul>
  
    </div>
    
  
    <div class="section" id="mongocursorexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoCursorException</strong>
       </span>
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongoexception" class="classname">MongoException</a>
       </span>
       {</div>
      
  
     }</div>
     
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongocursorexception.gethost" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoCursorException::getHost</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">MongoCursorException::getHost</span> &mdash; <span class="dc-title">The hostname of the server that encountered the error</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongocursorexception.gethost-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoCursorException::getHost</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
    Returns the hostname of the server the query was sent too.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongocursorexception.gethost-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongocursorexception.gethost-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the hostname, or <span class="type"><a href="#language.types.null" class="type NULL">NULL</a></span> if the hostname is unknown.
    </p>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongocursorexception.gethost">MongoCursorException::getHost</a> — The hostname of the server that encountered the error</li></ul>
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongocursortimeoutexception" class="reference"><hr />
  
   <h1 class="title">The MongoCursorTimeoutException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.0.0)</p>
  
    
    <div class="section" id="mongocursortimeoutexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Caused by a query timing out.  You can set the length of time to wait before
      this exception is thrown by calling 
      <span class="function"><a href="#mongocursor.timeout" class="function">MongoCursor::timeout()</a></span> on the cursor or setting
      <code class="literal">MongoCursor::$timeout</code>.  The static variable is useful for
      queries such as database commands and 
      <span class="function"><a href="#mongocollection.findone" class="function">MongoCollection::findOne()</a></span>, both of which implicitly use 
      cursors.
     </p>
    </div>
    
  
    <div class="section" id="mongocursortimeoutexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoCursorTimeoutException</strong>
       </span>
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongocursorexception" class="classname">MongoCursorException</a>
       </span>
       {</div>
      
      
     }</div>
     
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoconnectionexception" class="reference"><hr />
  
   <h1 class="title">The MongoConnectionException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.0.0)</p>
  
    
    <div class="section" id="mongoconnectionexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when the driver fails to connect to the database.
     </p>
  
     <p class="para">
      There are a number of possible error messages to help you diagnose the 
      connection problem.  These are:
     </p>
  
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <code class="literal">No candidate servers found</code>
       </p>
       <p class="para">
       Thrown when the driver cannot establish a connection to MongoDB
       (fulfilling the ReadPreferences, if specified).
       </p>
      </li>
  
      <li class="listitem">
       <p class="para">
        <code class="literal">No server name given.</code>
       </p>
       <p class="para">
        This error occurs if you pass in &quot;&quot; as the server name, 
        probably because of an typo with string interpolation, 
        e.g., &quot;$servr&quot; instead of &quot;$server&quot;.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">
         failed to get host [hostname] or port [portnum] 
         from [server].
        </code>
       </p>
       <p class="para">
         This indicated that the server string was malformed.  
         &quot;[hostname]&quot; and &quot;[portnum]&quot; will be as much as the 
         driver could dicipher of it.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">Operation in progress</code>
       </p>
       <p class="para">
        Connecting to the database timed out.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">Transport endpoint is not connected</code>
       </p>
       <p class="para">
        Generally means that the connection string isn&#039;t correct, the driver
        couldn&#039;t even find the database server.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">couldn&#039;t determine master</code>
       </p>
       <p class="para">
        No server in a replica set connection was identified as the primary.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">couldn&#039;t get host info for [server]</code>
       </p>
       <p class="para">
        This indicated that DNS could not resolve the server address 
        you gave.  This could easily be caused by a typo, for example, 
        &quot;server&quot; instead of &quot;$server&quot;.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">Invalid Argument</code>
       </p>
       <p class="para">
        This can be caused by attempting to connect to a machine that is up but
        that the database isn&#039;t actually running on.  Make sure that you&#039;ve
        started the database server before connecting.      
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">Permission denied</code>
       </p>
       <p class="para">
        This means that the socket could not be opened due to permissions issues.
        On Red Hat variants, this can be caused by a default setting that does not
        allow Apache to create network connections.  You can override this setting
        by running:
        <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">$ /usr/sbin/setsebool -P httpd_can_network_connect 1</pre>
  </div>
        </div>
  
        then restarting Apache.
       </p>
      </li>
     </ul>
  
     <p class="para">  
      If the error message is not listed above, it is probably an error 
      from the C socket, and you can search the web for its usual cause.
     </p>
    </div>
    
  
    <div class="section" id="mongoconnectionexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoConnectionException</strong>
       </span>
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongoexception" class="classname">MongoException</a>
       </span>
       {</div>
      
      
     }</div>
     
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongogridfsexception" class="reference"><hr />
  
   <h1 class="title">The MongoGridFSException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.0.0)</p>
  
    
    <div class="section" id="mongogridfsexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when there are errors reading or writing files
      to or from the database.
     </p>
    </div>
    
  
    <div class="section" id="mongogridfsexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoGridFSException</strong>
       </span>
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongoexception" class="classname">MongoException</a>
       </span>
       {</div>
      
      
     }</div>
     
  
    </div>
  
    <div class="section" id="mongogridfsexception.error-codes">
    <h2 class="title">Error codes</h2>
    <p class="para">
     <table class="doctable table">
      <caption><strong><strong class="classname">MongoGridFSException</strong> error codes</strong></caption>
      
       <thead>
        <tr>
         <th>Code</th>
         <th>Message</th>
         <th>Reason</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>3</td>
         <td>Could not open file <var class="varname">$filename</var></td>
         <td>Attempting to store an invalid file, such as directory</td>
        </tr>
  
        <tr>
         <td>4</td>
         <td>File <var class="varname">$filename</var> is too large: <var class="varname">$filesize</var> bytes</td>
         <td>Maximum filesize in GridFS is 4GB</td>
        </tr>
  
        <tr>
         <td>5</td>
         <td>could not find filehandle</td>
         <td>Resource doesn&#039;t have a filehandle</td>
        </tr>
  
        <tr>
         <td>6</td>
         <td>no file is associate with this filehandle</td>
         <td>Resource isn&#039;t a file resource</td>
        </tr>
  
        <tr>
         <td>7</td>
         <td>error setting up file: <var class="varname">$filename</var>s</td>
         <td>Could not open file for reading</td>
        </tr>
  
        <tr>
         <td>9</td>
         <td>error reading file <var class="varname">$filename</var>s</td>
         <td>Failed reading file</td>
        </tr>
  
        <tr>
         <td>10</td>
         <td>error reading filehandle</td>
         <td>Failed reading from a resource</td>
        </tr>
  
        <tr>
         <td>11</td>
         <td>could not find uploaded file %s</td>
         <td>Filename doesn&#039;t seem to be uploaded file</td>
        </tr>
  
        <tr>
         <td>12</td>
         <td>Couldn&#039;t find tmp_name in the $_FILES array. Are you sure the upload worked?</td>
         <td>Uploaded filename probably failed</td>
        </tr>
  
        <tr>
         <td>13</td>
         <td>tmp_name was not a string or an array</td>
         <td>Invalid filename given</td>
        </tr>
  
        <tr>
         <td>14</td>
         <td>couldn&#039;t find file size</td>
         <td>The <var class="varname">length</var> property is missing</td>
        </tr>
  
        <tr>
         <td>15</td>
         <td>Cannot find filename</td>
         <td>No filename provided, and no <var class="varname">filename</var> property set</td>
        </tr>
  
        <tr>
         <td>16</td>
         <td>could not open destination file %s</td>
         <td>Destination filename not writable</td>
        </tr>
  
        <tr>
         <td>17</td>
         <td>error reading chunk of file</td>
         <td>Chunk corruption</td>
        </tr>
  
        <tr>
         <td>18</td>
         <td>couldn&#039;t create a php_stream</td>
         <td>Couldn&#039;t create a stream resource</td>
        </tr>
  
        <tr>
         <td>19</td>
         <td>couldn&#039;t find <var class="varname">property</var></td>
         <td>Chunk corruption</td>
        </tr>
  
        <tr>
         <td>20</td>
         <td>chunk <var class="varname">number</var> has wrong size (<var class="varname">size</var>) when the max is <var class="varname">maxchunksize</var></td>
         <td>Chunk larger then expected</td>
        </tr>
  
        <tr>
         <td>21</td>
         <td>chunk has wrong format</td>
         <td>Chunk corruption</td>
        </tr>
  
       </tbody>
      
     </table>
  
     </p>
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoduplicatekeyexception" class="reference"><hr />
  
   <h1 class="title">The MongoDuplicateKeyException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.5.0)</p>
  
  
    <div class="section" id="mongoduplicatekeyexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when attempting to insert a document into a collection which already contains the same values for the <a href="#mongocollection.ensureindex" class="link">unique keys</a>.
     </p>
    </div>
  
  
    <div class="section" id="mongoduplicatekeyexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDuplicateKeyException</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongowriteconcernexception" class="classname">MongoWriteConcernException</a>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongowriteconcernexception.getdocument" class="methodname">MongoWriteConcernException::getDocument</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
  
     }</div>
  
  
    </div>
  
    <div class="section" id="mongoduplicatekeyexception.examples">
     <h2 class="title">Examples</h2>
     <div class="example" id="example-1728">
      <p><strong>Example #1 Catching MongoDuplicateKeyException</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoWriteConcernException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above examples will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  localhost:27017: insertDocument :: caused by :: 11000 E11000 duplicate key error index: test.test.$_id_  dup key: { : 1 }
  </pre></div>
      </div>
     </div>
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoprotocolexception" class="reference"><hr />
  
   <h1 class="title">The MongoProtocolException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.5.0)</p>
  
  
    <div class="section" id="mongoprotocolexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      When talking to MongoDB 2.6.0, and later, certain operations (such as writes) may throw MongoProtocolException when the response
      from the server did not make sense - for example during network failure (we could read the entire response) or data corruption.
     </p>
     <p class="para">
      This exception is also thrown when attempting to talk newer protocols then the server supports, for example using the
      <a href="#class.mongowritebatch" class="classname">MongoWriteBatch</a> when talking to a MongoDB server prior to 2.6.0.
     </p>
    </div>
  
  
    <div class="section" id="mongoprotocolexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoProtocolException</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongoexception" class="classname">MongoException</a>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
     }</div>
  
  
    </div>
  
    <div class="section" id="mongoprotocolexception.examples">
     <h2 class="title">Examples</h2>
     <div class="example" id="example-1729">
      <p><strong>Example #1 Catching MongoProtocolException</strong></p>
      <div class="example-contents"><p>
       Running the following example against MongoDB prior to 2.6.0 will throw an MongoProtocolException
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$mc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$batch&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoInsertBatch</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoProtocolException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>The above examples will output
  something similar to:</p></div>
      <div class="example-contents screen">
  <div class="cdata"><pre>
  Current primary does not have a Write API
  </pre></div>
      </div>
     </div>
    </div>
  
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongoexecutiontimeoutexception" class="reference"><hr />
  
   <h1 class="title">The MongoExecutionTimeoutException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.5.0)</p>
  
  
    <div class="section" id="mongoexecutiontimeoutexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when a operation times out server side (i.e. in MongoDB).
     </p>
     <p class="para">
      To configure the operation timeout threshold, use
      <span class="methodname"><a href="#mongocursor.maxtimems" class="methodname">MongoCursor::maxTimeMS()</a></span> or the
      <code class="literal">&quot;maxTimeMS&quot;</code> command option.
     </p>
    </div>
  
  
    <div class="section" id="mongoexecutiontimeoutexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoExecutionTimeoutException</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongoexception" class="classname">MongoException</a>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="class.mongowriteconcernexception" class="reference"><hr />
  
   <h1 class="title">The MongoWriteConcernException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(PECL mongo &gt;= 1.5.0)</p>
  
  
    <div class="section" id="mongowriteconcernexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      MongoWriteConcernException is thrown when a write fails. See <a href="#mongo.writeconcerns" class="xref">Write Concerns</a> for how to set failure thresholds.
     </p>
     <p class="para">
      Prior to MongoDB 2.6.0, the <a href="https://docs.mongodb.com/manual/reference/command/getLastError" class="link external">&raquo;&nbsp;getLastError</a> command would determine whether a write failed.
     </p>
    </div>
  
  
    <div class="section" id="mongowriteconcernexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoWriteConcernException</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongocursorexception" class="classname">MongoCursorException</a>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongowriteconcernexception.getdocument" class="methodname">getDocument</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongocursorexception.gethost" class="methodname">MongoCursorException::getHost</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongowriteconcernexception.getdocument" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoWriteConcernException::getDocument</h1>
    <p class="verinfo">(PECL mongo &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoWriteConcernException::getDocument</span> &mdash; <span class="dc-title">Get the error document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongowriteconcernexception.getdocument-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoWriteConcernException::getDocument</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Returns the actual response from the server that was interperated as an error.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongowriteconcernexception.getdocument-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongowriteconcernexception.getdocument-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     A MongoDB document, if available, as an array.
    </p>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongowriteconcernexception.getdocument">MongoWriteConcernException::getDocument</a> — Get the error document</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
  </div>
  
  <hr />
  
  
   
  
  
  <div id="changelog.mongo" class="appendix"><hr />
   <h1>Changelog</h1>
  
   <p class="para">The following changes have been made to classes/functions/methods of this extension.</p>
  
   <div class="simplesect" id="changelog.mongo.1.5">
    <h3 class="title">MongoDB PHP Driver 1.5.0</h3>
    <p class="para">
     It supports all new features for MongoDB 2.6, including: 
    
     <ul class="simplelist">
      <li class="member">Aggregate can now return a cursor</li>
      <li class="member">Aggregation pipelines can now be explained</li>
      <li class="member">Possible to set maxTimeMS for commands and queries</li>
      <li class="member">Transparent support for the new command-based MongoDB write API</li>
      <li class="member">New MongoWriteBatch classes (using the new MongoDB write API)</li>
      <li class="member">Support for MongoDB Enterprise features (e.g. Kerberos, LDAP, X509)</li>
      <li class="member">Option to tune acceptable server latency for secondary reads (secondaryAcceptableLatencyMS)</li>
     </ul>
    </p> 
    <p class="para">
     With this release, some driver functionality which was previously 
     documented as deprecated will now formally raise deprecation notices. This 
     includes: 
     <ul class="simplelist">
      <li class="member">Instantiating the Mongo class</li>
      <li class="member">Calling MongoCursor::slaveOkay()</li>
      <li class="member">&quot;wtimeout&quot; and &quot;safe&quot; options for MongoCollection write operations</li>
      <li class="member">Manipulating public properties on core classes (such as $collection-&gt;w)</li>
     </ul>
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      No previously deprecated features have been removed. 
     </p>
    </p></blockquote>
    <p class="para">
     Changes in behaviour: 
     <ul class="simplelist">
      <li class="member">Setting the mongo.native_long INI setting now raises an error on 32-bit 
       platforms, and now defaults to true for 64-bit platforms.</li>
     </ul>
    </p>
   </div>
  
   <div class="simplesect" id="changelog.mongo.1.4">
    <h3 class="title">MongoDB PHP Driver 1.4.0</h3>
    <p class="para">
     The 1.4 series introduced fundemental changes in how connections are created to the MongoDB servers.
     The driver now utilizes PHP native streams, so all normal PHP stream options apply.
     Furthermore, an experimental Stream Context Support was added.
    </p>
    <p class="para">
     The 1.4.x series also added support for MongoDB 2.4.x.
    </p>
    <p class="para">
     The most important improvements however deal with the handling of replica sets, 
     especially nodes that timeout and nodes that are unreachable for various 
     reasons. Besides the improvements to replica set handling, this release 
     addresses issues with read preferences through mongos nodes. It also 
     adds support for SSL enabled connections as well as journal and fsync 
     connection string options. 
    </p>
   </div>
  
   <div class="simplesect" id="changelog.mongo.1.3">
    <h3 class="title">MongoDB PHP Driver 1.3.0</h3>
    <p class="para">
     The 1.3 series introduced several major changes to the extension such as
     completely rewritten <a href="#mongo.connecting" class="link">connection
     handling</a> (and removal of the pooling mechanism), support for
     <a href="#mongo.readpreferences" class="link">ReadPreferences</a> and change the
     default <a href="#mongo.writes" class="link">WriteConcerns</a> to be
     <em class="emphasis">acknowledged</em> by introducing a new class
     <a href="#class.mongoclient" class="link">MongoClient</a> which serves as a
     replacement class for the now deprecated <a href="#class.mongo" class="classname">Mongo</a> class.
    </p>
    <p class="para">
     The driver now also supports connecting to multiple mongos instances (the
     Mongo Shard router) for loadbalancing.
    </p>
    <p class="para">
     Other enhancements include improved logging for easier connection handling
     debugging with <a href="#class.mongolog" class="classname">MongoLog</a> and support for the
     <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline/" class="link external">&raquo;&nbsp;Aggregation Framework</a>
     via the <span class="methodname"><a href="#mongocollection.aggregate" class="methodname">MongoCollection::aggregate()</a></span> method.
    </p>
   </div>
  
  
   <div class="simplesect">
    <h3 class="title">Changes to existing methods</h3>
    <p class="para">
    Following is a list of all improvements to existing methods since
    their inception.
    </p>
    <table class='doctable table' rules='groups'><thead><tr><th>Version</th><th>Function</th><th>Description</th></tr></thead><tbody class="gen-changelog v"><tr><td>1.7.0</td><td><a href='#mongodb.execute'>MongoDB::execute</a></td><td>This method has been deprecated as a result of the underlaying
          eval command
          being deprecated in MongoDB 3.0+.</td></tr></tbody><tbody class="gen-changelog v1-7-0"><tr><td>1.6.0</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added support for &quot;SCRAM-SHA-1&quot; in
           &quot;authMechanism&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.count'>MongoCollection::count</a></td><td>The second parameter is now an options array.
          Passing limit and skip as
          the second and third parameters, respectively, is deprecated.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.getcollectionnames'>MongoDB::getCollectionNames</a></td><td>Changed first parameter to be an array of options. Pre-1.6.0, the
         first parameter was a boolean indicating the
         &quot;includeSystemCollections&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.listcollections'>MongoDB::listCollections</a></td><td>Changed first parameter to be an array of options. Pre-1.6.0, the
         first parameter was a boolean indicating the
         &quot;includeSystemCollections&quot; option.</td></tr></tbody><tbody class="gen-changelog v1-6-0"><tr><td>1.5.0</td><td><a href='#function.log-cmd-delete'>log_cmd_delete</a></td><td>Only available when connected to MongoDB 2.6.0+</td></tr><tr><td>&nbsp;</td><td><a href='#function.log-cmd-insert'>log_cmd_insert</a></td><td>Only available when connected to MongoDB 2.6.0+</td></tr><tr><td>&nbsp;</td><td><a href='#function.log-cmd-update'>log_cmd_update</a></td><td>Only available when connected to MongoDB 2.6.0+</td></tr><tr><td>&nbsp;</td><td><a href='#function.log-write-batch'>log_write_batch</a></td><td>Only available when connected to MongoDB 2.6.0+</td></tr><tr><td>&nbsp;</td><td><a href='#mongobindata.construct'>MongoBinData::__construct</a></td><td>The default changed from 2
          (MongoBinData::BYTE_ARRAY) to
          0 (MongoBinData::GENERIC).</td></tr><tr><td>&nbsp;</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added &quot;authMechanism&quot;, &quot;gssapiServiceName&quot;, and &quot;secondaryAcceptableLatencyMS&quot;.</td></tr><tr><td>&nbsp;</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added &quot;authSource&quot;.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.aggregate'>MongoCollection::aggregate</a></td><td>Added optional options argument</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.batchinsert'>MongoCollection::batchInsert</a></td><td>Added the &quot;wTimeoutMS&quot; option, which replaces
           &quot;wtimeout&quot;. Emits E_DEPRECATED
           when &quot;wtimeout&quot; is used.
          
          
           Added the &quot;socketTimeoutMS&quot; option, which replaces
           &quot;timeout&quot;. Emits E_DEPRECATED
           when &quot;timeout&quot; is used.
          
          
           Emits E_DEPRECATED when &quot;safe&quot;
           is used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>Renamed the &quot;wtimeout&quot; option to
           &quot;wTimeoutMS&quot;. Emits
           E_DEPRECATED when &quot;wtimeout&quot; is
           used.
          
          
           Renamed the &quot;timeout&quot; option to
           &quot;socketTimeoutMS&quot;. Emits
           E_DEPRECATED when &quot;timeout&quot; is
           used.
          
          
           Emits E_DEPRECATED when &quot;safe&quot;
           is used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.findone'>MongoCollection::findOne</a></td><td>Added optional options argument.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.group'>MongoCollection::group</a></td><td>Added &quot;maxTimeMS&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Added the &quot;wTimeoutMS&quot; option, which replaces
           &quot;wtimeout&quot;. Emits E_DEPRECATED
           when &quot;wtimeout&quot; is used.
          
          
           Added the &quot;socketTimeoutMS&quot; option, which replaces
           &quot;timeout&quot;. Emits E_DEPRECATED
           when &quot;timeout&quot; is used.
          
          
           Emits E_DEPRECATED when &quot;safe&quot;
           is used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Added &quot;wTimeoutMS&quot; option, which replaces
           &quot;wtimeout&quot;. Emits E_DEPRECATED
           when &quot;wtimeout&quot; is used.
          
          
           Added &quot;socketTimeoutMS&quot; option, which replaces
           &quot;timeout&quot;. Emits E_DEPRECATED
           when &quot;timeout&quot; is used.
          
          
           Emits E_DEPRECATED when &quot;safe&quot;
           is used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.save'>MongoCollection::save</a></td><td>Added &quot;wTimeoutMS&quot; option, which replaces
           &quot;wtimeout&quot;. Emits E_DEPRECATED
           when &quot;wtimeout&quot; is used.
          
          
           Added &quot;socketTimeoutMS&quot; option, which replaces
           &quot;timeout&quot;. Emits E_DEPRECATED
           when &quot;timeout&quot; is used.
          
          
           Emits E_DEPRECATED when &quot;safe&quot;
           is used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.toindexstring'>MongoCollection::toIndexString</a></td><td>This method has been deprecated.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Added the &quot;wTimeoutMS&quot; option, which replaces
           &quot;wtimeout&quot;. Emits E_DEPRECATED
           when &quot;wtimeout&quot; is used.
          
          
           Added the &quot;socketTimeoutMS&quot; option, which replaces
           &quot;timeout&quot;. Emits E_DEPRECATED
           when &quot;timeout&quot; is used.
          
          
           Emits E_DEPRECATED when &quot;safe&quot;
           is used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocursor.slaveokay'>MongoCursor::slaveOkay</a></td><td>This method has been deprecated in favour of
          MongoCursor::setReadPreference and .</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.command'>MongoDB::command</a></td><td>Renamed the &quot;timeout&quot; option to
           &quot;socketTimeoutMS&quot;. Emits
           E_DEPRECATED when &quot;timeout&quot; is
           used.
          
          
           Added hash by-reference parameter.</td></tr></tbody><tbody class="gen-changelog v1-5-0"><tr><td>1.4.5</td><td><a href='#mongocursor.batchsize'>MongoCursor::batchSize</a></td><td>Before 1.4.5, this method would throw an
           MongoCursorException if the cursor had already
           started iterating.</td></tr></tbody><tbody class="gen-changelog v1-4-5"><tr><td>1.4.0</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added &quot;ssl&quot; option and support for
           connecting over SSL.
          
          
           Added &quot;wTimeoutMS&quot; option, which replaces
           &quot;wTimeout&quot;.
          
          
           Emits E_DEPRECATED when
           &quot;slaveOkay&quot; or &quot;timeout&quot; is used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocursor.hint'>MongoCursor::hint</a></td><td>The index argument now supports index names as
           string values. In versions before 1.4.0, only array or object values
           were accepted.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocursor.setflag'>MongoCursor::setFlag</a></td><td>Support for flag 3 (OPLOG_REPLAY) is added. Versions before 1.4.0
          would throw a warning saying that the flag is unsupported.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.createcollection'>MongoDB::createCollection</a></td><td>In versions before 1.4.0, the options were all arguments to the method. The
           function synopsis in those older versions is:
          
          
           
            public MongoCollectionMongoDB::createCollection
            stringname
            boolcappedFALSE
            intsize0
            intmax0
           
          
          
           The meaning of the options is the same as described under the
           options argument above.</td></tr><tr><td>&nbsp;</td><td><a href='#mongoid.construct'>MongoId::__construct</a></td><td>An exception is thrown when passed invalid string</td></tr></tbody><tbody class="gen-changelog v1-4-0"><tr><td>1.3.4</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added &quot;connectTimeoutMS&quot; and
           &quot;socketTimeoutMS&quot; options.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.batchinsert'>MongoCollection::batchInsert</a></td><td>Added &quot;wtimeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>Added &quot;wtimeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Added &quot;wtimeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Added &quot;wtimeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Added &quot;wtimeout&quot; option.</td></tr></tbody><tbody class="gen-changelog v1-3-4"><tr><td>1.3.3</td><td><a href='#mongoclient.getreadpreference'>MongoClient::getReadPreference</a></td><td>The return value has changed to be consistent with
          MongoClient::setReadPreference. The
          type value was changed from a number to a string,
          type_string was removed, and
          tagsets now expresses tags as key/value pairs instead
          of colon-delimited strings.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.getreadpreference'>MongoCollection::getReadPreference</a></td><td>The return value has changed to be consistent with
          MongoCollection::setReadPreference. The
          type value was changed from a number to a string,
          type_string was removed, and
          tagsets now expresses tags as key/value pairs instead
          of colon-delimited strings.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.getreadpreference'>MongoDB::getReadPreference</a></td><td>The return value has changed to be consistent with
          MongoDB::setReadPreference. The
          type value was changed from a number to a string,
          type_string was removed, and
          tagsets now expresses tags as key/value pairs instead
          of colon-delimited strings.</td></tr></tbody><tbody class="gen-changelog v1-3-3"><tr><td>1.3.0</td><td><a href='#mongoclient.close'>MongoClient::close</a></td><td>The connection parameter to this function was
           added in 1.3.0. Before that, only the write connection would be
           closed by this method.</td></tr><tr><td>&nbsp;</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added &quot;readPreference&quot;,
           &quot;readPreferenceTags&quot;, &quot;w&quot;, and
           &quot;wTimeout&quot; options.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.batchinsert'>MongoCollection::batchInsert</a></td><td>Added &quot;w&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>Added &quot;w&quot; option.
          
           The options parameter no longer accepts a
           boolean to signify a unique index. Instead, this now has to be done
           with array('unique' =&gt; true).</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Added &quot;w&quot; option.
          
           The options parameter no longer accepts a
           boolean to signify an acknowledged write. Instead, this now has to be
           done with array('w' =&gt; 1) (the default behaviour of
           MongoClient).</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Added &quot;w&quot; option.
          
           The options parameter no longer accepts a
           boolean to signify &quot;justOne&quot;. Instead, this now has
           to be done with array('justOne' =&gt; true).</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Added &quot;w&quot; option.
          
           The options parameter no longer accepts a boolean
           to signify an upsert. Instead, this now has to be done with
           array('upsert' =&gt; true).</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.listcollections'>MongoDB::listCollections</a></td><td>Added the includeSystemCollections parameter.</td></tr><tr><td>&nbsp;</td><td><a href='#mongogridfscursor.key'>MongoGridFSCursor::key</a></td><td>The document's _id is returned as a string value,
          since the key should be unique. Pre-1.3.0, filename
          was returned.</td></tr></tbody><tbody class="gen-changelog v1-3-0"><tr><td>1.2.11</td><td><a href='#mongo.getpoolsize'>Mongo::getPoolSize</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongo.getslave'>Mongo::getSlave</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongo.getslaveokay'>Mongo::getSlaveOkay</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongo.pooldebug'>Mongo::poolDebug</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongo.setslaveokay'>Mongo::setSlaveOkay</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongo.switchslave'>Mongo::switchSlave</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongobindata.construct'>MongoBinData::__construct</a></td><td>Emits E_DEPRECATED when the second argument is not
          used. The default value for type may change in
          the near future.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>Emits E_DEPRECATED when
          options is scalar.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.getslaveokay'>MongoCollection::getSlaveOkay</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.group'>MongoCollection::group</a></td><td>Emits E_DEPRECATED when
          options is scalar.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Emits E_DEPRECATED when
          options is scalar.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.setslaveokay'>MongoCollection::setSlaveOkay</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Emits E_DEPRECATED when
          options is scalar.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocursor.doquery'>MongoCursor::doQuery</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.authenticate'>MongoDB::authenticate</a></td><td>Emits E_DEPRECATED when used. Please pass in the
          authentication details to the constructor.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.forceerror'>MongoDB::forceError</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.getslaveokay'>MongoDB::getSlaveOkay</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.preverror'>MongoDB::prevError</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.reseterror'>MongoDB::resetError</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.setslaveokay'>MongoDB::setSlaveOkay</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongopool.getsize'>MongoPool::getSize</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongopool.info'>MongoPool::info</a></td><td>Emits E_DEPRECATED when used.</td></tr><tr><td>&nbsp;</td><td><a href='#mongopool.setsize'>MongoPool::setSize</a></td><td>Emits E_DEPRECATED when used.</td></tr></tbody><tbody class="gen-changelog v1-2-11"><tr><td>1.2.10</td><td><a href='#mongoclient.gethosts'>MongoClient::getHosts</a></td><td>Support for non-replicasets was added.
          
          
           The returned array elements now also include the
           hostname and port.</td></tr></tbody><tbody class="gen-changelog v1-2-10"><tr><td>1.2.7</td><td><a href='#mongocollection.batchinsert'>MongoCollection::batchInsert</a></td><td>Added &quot;continueOnError&quot; option.</td></tr></tbody><tbody class="gen-changelog v1-2-7"><tr><td>1.2.5</td><td><a href='#mongogridfs.storeupload'>MongoGridFS::storeUpload</a></td><td>Changed second parameter to an array of metadata. Pre-1.2.5, the
          second parameter was an optional string overriding the filename.</td></tr></tbody><tbody class="gen-changelog v1-2-5"><tr><td>1.2.0</td><td><a href='#mongoclient.close'>MongoClient::close</a></td><td>Before version 1.2.0 the driver would not use persistent connections
           by default, and all connections would be closed as soon as a MongoDB
           connection went out if scope. Since version 1.2.0 this is no longer
           the case and it is a bad idea to call close as you might end up
           overloading the server with connections under high load.</td></tr><tr><td>&nbsp;</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added &quot;username&quot; and &quot;password&quot;
           options.
          
          
           Removed &quot;persist&quot; option, as all connections are
           now persistent. It can still be used, but it doesn't affect anything.
          
          
           
            
             &quot;persist&quot;
            
            
             
              If the connection should be persistent. If set, the connection will
              be persistent. The string representation of the value is used as an
              ID for the connection, so two instances of
              MongoClient that are initialized with
              array(&quot;persist&quot; =&gt; &quot;foobar&quot;) will share the same
              database connection, whereas an instance initialized with
              array(&quot;persist&quot; =&gt; &quot;barbaz&quot;) will use a different
              database connection.
             
            
           
          
          
           The &quot;replicaSet&quot; option now takes a string, not a
           boolean.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>Added &quot;timeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Added &quot;timeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Added &quot;timeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.save'>MongoCollection::save</a></td><td>Added &quot;timeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Added &quot;timeout&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongodb.command'>MongoDB::command</a></td><td>Added options parameter with a single option: 
          &quot;timeout&quot;.</td></tr></tbody><tbody class="gen-changelog v1-2-0"><tr><td>1.1.0</td><td><a href='#mongocursor.info'>MongoCursor::info</a></td><td>Added a number of other fields, including id (the 
          cursor id), at (the driver's counter of which 
          document is current), numReturned (the number 
          returned by the server in the current batch), and 
          server (which server the query was sent 
          to&mdash;useful in conjunction with
          .</td></tr></tbody><tbody class="gen-changelog v1-1-0"><tr><td>1.0.11</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>The &quot;safe&quot; option will trigger a primary failover,
           if necessary.
          
          
           MongoException will be thrown if the index name
           (either generated or set) is longer than 128 bytes.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Disconnects on &quot;not master&quot; errors if &quot;safe&quot; is set.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Disconnects on &quot;not master&quot; errors if &quot;safe&quot; is set.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.save'>MongoCollection::save</a></td><td>Disconnects on &quot;not master&quot; errors if &quot;safe&quot; is set.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Disconnects on &quot;not master&quot; errors if &quot;safe&quot; is set.</td></tr></tbody><tbody class="gen-changelog v1-0-11"><tr><td>1.0.10</td><td><a href='#mongocursor.info'>MongoCursor::info</a></td><td>Added started_iterating field, a boolean indicating
          if cursor is pre- or post-query.</td></tr></tbody><tbody class="gen-changelog v1-0-10"><tr><td>1.0.9</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Added &quot;replicaSet&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.batchinsert'>MongoCollection::batchInsert</a></td><td>Added ability to pass integers to the &quot;safe&quot; option,
           which previously only accepted booleans.
          
          
           Added &quot;fsync&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Added ability to pass integers to the &quot;safe&quot; option,
           which previously only accepted booleans.
          
          
           Added &quot;fsync&quot; option.
          
          
           The return type was changed to be an array containing error information
           if the &quot;safe&quot; option is used. Otherwise, a boolean
           is returned as before.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Added ability to pass integers to the &quot;safe&quot; option,
           which previously only accepted booleans.
          
          
           Added &quot;fsync&quot; option.
          
          
           The return type was changed to be an array containing error information
           if the &quot;safe&quot; option is used. Otherwise, a boolean
           is returned as before.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.save'>MongoCollection::save</a></td><td>Added &quot;fsync&quot; option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Added ability to pass integers to the &quot;safe&quot; option,
           which previously only accepted booleans.
          
          
           Added &quot;fsync&quot; option.
          
          
           The return type was changed to be an array containing error information
           if the &quot;safe&quot; option is used. Otherwise, a boolean
           is returned as before.</td></tr></tbody><tbody class="gen-changelog v1-0-9"><tr><td>1.0.7</td><td><a href='#mongocollection.count'>MongoCollection::count</a></td><td>Added limit and skip as
          second and third parameters, respectively.</td></tr></tbody><tbody class="gen-changelog v1-0-7"><tr><td>1.0.5</td><td><a href='#mongocollection.batchinsert'>MongoCollection::batchInsert</a></td><td>Added options parameter.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>Added the &quot;name&quot; option to override index name
          creation.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.remove'>MongoCollection::remove</a></td><td>Changed second parameter to be an array of options. Pre-1.0.5, the
          second parameter was a boolean indicating the &quot;safe&quot;
          option.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.save'>MongoCollection::save</a></td><td>Added options parameter.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Added &quot;safe&quot; option.</td></tr></tbody><tbody class="gen-changelog v1-0-5"><tr><td>1.0.2</td><td><a href='#mongoclient.construct'>MongoClient::__construct</a></td><td>Changed constructor to take an array of options. Pre-1.0.2, the
           constructor took the following parameters:
          
          
           
            
             server
            
            
             
              The server name.
             
            
           
           
            
             connect
            
            
             
              Optional boolean parameter specifying if the constructor should
              connect to the database before returning.  Defaults to TRUE.
             
            
           
           
            
             persistent
            
            
             
              If the connection should be persistent.
             
            
           
           
            
             paired
            
            
             
              If the connection should be paired.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.ensureindex'>MongoCollection::ensureIndex</a></td><td>Changed options parameter from boolean to array.
          Pre-1.0.2, the second parameter was an optional boolean value specifying
          a unique index.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Changed second parameter to be an array of options. Pre-1.0.2, the
          second parameter was a boolean indicating the &quot;safe&quot;
          option.</td></tr></tbody><tbody class="gen-changelog v1-0-2"><tr><td>1.0.1</td><td><a href='#mongocollection.insert'>MongoCollection::insert</a></td><td>Throw a MongoCursorException if the
          &quot;safe&quot; option is set and the insert fails.</td></tr><tr><td>&nbsp;</td><td><a href='#mongocollection.update'>MongoCollection::update</a></td><td>Changed options parameter from boolean to array.
          Pre-1.0.1, the second parameter was an optional boolean value specifying
          an upsert.</td></tr></tbody></table>
   </div>
  
  
  </div>
  
  <hr />
  
  
  
  
  
  
  <ul class="chunklist chunklist_book"><li><a href="#mongo.setup">Installing/Configuring</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongo.requirements">Requirements</a></li><li><a href="#mongo.installation">Installation</a></li><li><a href="#mongo.configuration">Runtime Configuration</a></li></ul></li><li><a href="#mongo.constants">Predefined Constants</a></li><li><a href="#mongo.manual">Manual</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongo.tutorial">Tutorial</a></li><li><a href="#mongo.readpreferences">Read Preferences</a></li><li><a href="#mongo.writeconcerns">Write Concerns</a></li><li><a href="#mongo.sqltomongo">SQL to Mongo Mapping Chart</a></li><li><a href="#mongo.connecting">Connecting</a></li><li><a href="#mongo.context">Stream Context Options</a></li><li><a href="#mongo.writes">Writes</a></li><li><a href="#mongo.queries">Querying</a></li><li><a href="#mongo.updates">Updates</a></li><li><a href="#mongo.security">Security</a></li><li><a href="#mongo.trouble">Troubleshooting</a></li><li><a href="#mongo.testing">Running the Driver's Tests</a></li></ul></li><li><a href="#mongo.core">Core Classes</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.mongoclient">MongoClient</a> — The MongoClient class</li><li><a href="#class.mongodb">MongoDB</a> — The MongoDB class</li><li><a href="#class.mongocollection">MongoCollection</a> — The MongoCollection class</li><li><a href="#class.mongocursor">MongoCursor</a> — The MongoCursor class</li><li><a href="#class.mongocursorinterface">MongoCursorInterface</a> — The MongoCursorInterface interface</li><li><a href="#class.mongocommandcursor">MongoCommandCursor</a> — The MongoCommandCursor class</li></ul></li><li><a href="#mongo.types">Types</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.mongoid">MongoId</a> — The MongoId class</li><li><a href="#class.mongocode">MongoCode</a> — The MongoCode class</li><li><a href="#class.mongodate">MongoDate</a> — The MongoDate class</li><li><a href="#class.mongoregex">MongoRegex</a> — The MongoRegex class</li><li><a href="#class.mongobindata">MongoBinData</a> — The MongoBinData class</li><li><a href="#class.mongoint32">MongoInt32</a> — The MongoInt32 class</li><li><a href="#class.mongoint64">MongoInt64</a> — The MongoInt64 class</li><li><a href="#class.mongodbref">MongoDBRef</a> — The MongoDBRef class</li><li><a href="#class.mongominkey">MongoMinKey</a> — The MongoMinKey class</li><li><a href="#class.mongomaxkey">MongoMaxKey</a> — The MongoMaxKey class</li><li><a href="#class.mongotimestamp">MongoTimestamp</a> — The MongoTimestamp class</li></ul></li><li><a href="#mongo.gridfs">GridFS Classes</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.mongogridfs">MongoGridFS</a> — The MongoGridFS class</li><li><a href="#class.mongogridfsfile">MongoGridFSFile</a> — The MongoGridFSFile class</li><li><a href="#class.mongogridfscursor">MongoGridFSCursor</a> — The MongoGridFSCursor class</li></ul></li><li><a href="#mongo.batch">Batch Classes</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.mongowritebatch">MongoWriteBatch</a> — The MongoWriteBatch class</li><li><a href="#class.mongoinsertbatch">MongoInsertBatch</a> — The MongoInsertBatch class</li><li><a href="#class.mongoupdatebatch">MongoUpdateBatch</a> — The MongoUpdateBatch class</li><li><a href="#class.mongodeletebatch">MongoDeleteBatch</a> — The MongoDeleteBatch class</li></ul></li><li><a href="#mongo.miscellaneous">Miscellaneous</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.mongolog">MongoLog</a> — The MongoLog class</li><li><a href="#class.mongopool">MongoPool</a> — The MongoPool class</li><li><a href="#class.mongo">Mongo</a> — The Mongo class [deprecated]</li></ul></li><li><a href="#ref.mongo">Mongo Functions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#function.bson-decode">bson_decode</a> — Deserializes a BSON object into a PHP array</li><li><a href="#function.bson-encode">bson_encode</a> — Serializes a PHP variable into a BSON string</li></ul></li><li><a href="#mongo.exceptions">Exceptions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.mongoexception">MongoException</a> — The MongoException class</li><li><a href="#class.mongoresultexception">MongoResultException</a> — The MongoResultException class</li><li><a href="#class.mongocursorexception">MongoCursorException</a> — The MongoCursorException class</li><li><a href="#class.mongocursortimeoutexception">MongoCursorTimeoutException</a> — The MongoCursorTimeoutException class</li><li><a href="#class.mongoconnectionexception">MongoConnectionException</a> — The MongoConnectionException class</li><li><a href="#class.mongogridfsexception">MongoGridFSException</a> — The MongoGridFSException class</li><li><a href="#class.mongoduplicatekeyexception">MongoDuplicateKeyException</a> — The MongoDuplicateKeyException class</li><li><a href="#class.mongoprotocolexception">MongoProtocolException</a> — The MongoProtocolException class</li><li><a href="#class.mongoexecutiontimeoutexception">MongoExecutionTimeoutException</a> — The MongoExecutionTimeoutException class</li><li><a href="#class.mongowriteconcernexception">MongoWriteConcernException</a> — The MongoWriteConcernException class</li></ul></li><li><a href="#changelog.mongo">Changelog</a></li></ul></div>
  <hr />
  
  
  
  
  
      
  
  
  <div id="set.mongodb" class="set"><hr />
   <h1 class="title">MongoDB driver</h1>
   
  
   <div class="info">
    <div class="abstract">
     <p class="simpara">
      Unlike the <a href="#book.mongo" class="link">mongo</a> extension, this
      extension is developed atop the
      <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> and
      <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> libraries.
      It provides a minimal API for core driver functionality:
      <a href="#class.mongodb-driver-command" class="link">commands</a>,
      <a href="#class.mongodb-driver-query" class="link">queries</a>,
      <a href="#class.mongodb-driver-bulkwrite" class="link">writes</a>,
      <a href="#class.mongodb-driver-manager" class="link">connection management</a>,
      and <a href="#book.bson" class="link">BSON serialization</a>.
     </p>
     <p class="simpara">
      Userland PHP libraries that depend on this extension may provide higher
      level APIs, such as query builders, individual command helper methods, and
      GridFS. Application developers should consider using this extension in
      conjunction with the
      <a href="https://github.com/mongodb/mongo-php-library" class="link external">&raquo;&nbsp;MongoDB PHP library</a>, which
      implements the same higher level APIs found in MongoDB drivers for other
      languages. This separation of concerns allows the driver to focus on
      essential features for which an extension implementation is paramount for
      performance.
     </p>
    </div>
   </div>
  
    
  
  
  <div id="mongodb.setup" class="book"><hr />
   <h1 class="title">Installing/Configuring</h1>
  
   <div id="mongodb.requirements" class="article"><hr />
    <h1>Requirements</h1>
  
    <p class="para">
     As of version 1.8.0, the driver requires PHP 7.0 or higher. Previous versions
     of the driver allow compatibility with older PHP versions.
    </p>
    <p class="para">
     The driver requires <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a>
     and <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a>, and will use
     bundled versions of both libraries by default. System libraries may also be
     used, as discussed in the
     <a href="#mongodb.installation.manual" class="link">manual installation</a>
     documentation.
    </p>
    <p class="para">
     The driver, via libmongoc, optionally depends on a TLS library (e.g. OpenSSL)
     and will use it if available. If the build process fails to find a TLS
     library, users should check that the appropriate development package (e.g.
     <code class="literal">libssl-dev</code>) and
     <a href="https://en.wikipedia.org/wiki/Pkg-config" class="link external">&raquo;&nbsp;pkg-config</a> are both
     installed. The process for detecting and configuring TLS libraries is
     discussed in more detail in the
     <a href="#mongodb.installation.manual" class="link">manual installation</a>
     documentation.
    </p>
    <p class="para">
     <a href="http://cyrusimap.org/" class="link external">&raquo;&nbsp;Cyrus SASL</a> is an optional dependency to
     support Kerberos authentication and will be used if available.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Due to potential problems representing 64-bit integers on 32-bit platforms,
      users are advised to use 64-bit environments. When using a 32-bit platform,
      be aware that any 64-bit integer read from the database will be returned as
      a <a href="#class.mongodb-bson-int64" class="classname">MongoDB\BSON\Int64</a> instance instead of a PHP
      integer type.
     </span>
    </p></blockquote>
   </div>
  
  <hr />
  
  
   
  
  
  <div id="mongodb.installation" class="article"><hr />
   <h1>Installation</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_article"><li><a href="#mongodb.installation.pecl">Installing the MongoDB PHP Driver with PECL</a></li><li><a href="#mongodb.installation.homebrew">Installing the MongoDB PHP Driver on macOS with Homebrew</a></li><li><a href="#mongodb.installation.windows">Installing the MongoDB PHP Driver on Windows</a></li><li><a href="#mongodb.installation.manual">Building the MongoDB PHP Driver from source</a></li></ul>
  
  
   <div id="mongodb.installation.pecl" class="section"><hr />
    <h2 class="title">Installing the MongoDB PHP Driver with PECL</h2>
  
    <p class="para">
     Information for installing this PECL extension may be
  found in the manual chapter titled <a href="#install.pecl" class="link">Installation
  of PECL extensions</a>. Additional information such as new releases,
  downloads, source files, maintainer information, and a CHANGELOG, can be
  located here: 
     <a href="https://pecl.php.net/package/mongodb" class="link external">&raquo;&nbsp;https://pecl.php.net/package/mongodb</a>
    </p>
  
    <p class="para">
     Linux, Unix, and macOS users may run the following command to install the
     driver:
     <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">$ sudo pecl install mongodb</pre>
  </div>
     </div>
  
    </p>
  
    <p class="para">
     If your system has multiple version of PHP installed (e.g. macOS default,
     Homebrew, <a href="https://www.apachefriends.org/" class="link external">&raquo;&nbsp;XAMPP</a>), note that that each
     version of PHP has its own <a href="#install.pecl" class="link">pecl</a>
     command and <var class="filename">php.ini</var> file.
    </p>
  
    <p class="para">
     Installing the driver via PECL will use bundled versions of
     <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> and
     <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> and attempt to
     automatically configure them.
    </p>
  
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      If the build process fails to find an SSL library, check that the
      development packages (e.g. <code class="literal">libssl-dev</code>) and
      <a href="https://en.wikipedia.org/wiki/Pkg-config" class="link external">&raquo;&nbsp;pkg-config</a> are both
      installed. If that does not resolve the problem, consider using the
      <a href="#mongodb.installation.manual" class="link">manual installation</a>
      process.
     </span>
    </p></blockquote>
  
    <p class="para">
     Finally, add the following line to your <var class="filename">php.ini</var> file:
     <div class="example-contents">
  <div class="inicode"><pre class="inicode">extension=mongodb.so</pre>
  </div>
     </div>
  
    </p>
   </div>
  <hr />
  
  
   <div id="mongodb.installation.homebrew" class="section"><hr />
    <h2 class="title">Installing the MongoDB PHP Driver on macOS with Homebrew</h2>
  
    <p class="para">
     <a href="https://brew.sh/2018/01/19/homebrew-1.5.0/" class="link external">&raquo;&nbsp;Homebrew 1.5.0</a>
     deprecated the <a href="https://github.com/Homebrew/brew" class="link external">&raquo;&nbsp;Homebrew/php tap</a>
     and removed formulae for individual PHP extensions. Going forward, macOS
     users are advised to install the
     <a href="https://formulae.brew.sh/formula/php" class="link external">&raquo;&nbsp;php</a> formula
     and follow the standard
     <a href="#mongodb.installation.pecl" class="link">PECL installation instructions</a>
     using the <a href="#install.pecl" class="link">pecl</a> command provided by the
     Homebrew PHP installation.
    </p>
   </div>
  <hr />
  
  
   <div id="mongodb.installation.windows" class="section"><hr />
    <h2 class="title">Installing the MongoDB PHP Driver on Windows</h2>
  
    <p class="para">
     Precompiled binaries for each release are available from
     <a href="https://pecl.php.net/package/mongodb" class="link external">&raquo;&nbsp;PECL</a> for a variety of
     combinations of versions, thread safety, and VC libraries. Extract the
     archive and put <var class="filename">php_mongodb.dll</var> in your PHP extension
     directory (&quot;ext&quot; by default).
    </p>
  
    <p class="para">
     Add the following line to your <var class="filename">php.ini</var> file:
     <div class="example-contents">
  <div class="inicode"><pre class="inicode">extension=php_mongodb.dll</pre>
  </div>
     </div>
  
    </p>
  
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <strong>Additional DLL dependencies for Windows Users</strong><br />
     <p class="para">
      In order for this extension to work, there are
  <acronym title="Dynamic Link Library">DLL</acronym> files that must be available to the Windows
  system <var class="envar">PATH</var>. For information on how to do this, see the
  <acronym title="Frequently Asked Questions">FAQ</acronym> entitled &quot;<a href="#faq.installation.addtopath" class="link">How do I add my PHP directory to the PATH
  on Windows</a>&quot;. Although copying DLL
  files from the PHP folder into the Windows system directory also works
  (because the system directory is by default in the system&#039;s
  <var class="envar">PATH</var>), this is not recommended.
  <em class="emphasis">This extension requires the following files to be in the
  <var class="envar">PATH</var>:</em> 
      <var class="filename">libsasl.dll</var>
     </p>
    </p></blockquote>
   </div>
  <hr />
  
  
   <div id="mongodb.installation.manual" class="section"><hr />
    <h2 class="title">Building the MongoDB PHP Driver from source</h2>
  
    <p class="para">
     For driver developers and people interested in the latest bugfixes, you can
     compile the driver from the latest source code on
     <a href="https://github.com/mongodb/mongo-php-driver-legacy" class="link external">&raquo;&nbsp;Github</a>. Run the following
     commands to clone and build the project:
     <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">$ git clone https://github.com/mongodb/mongo-php-driver.git
  $ cd mongo-php-driver
  $ git submodule update --init
  $ phpize
  $ ./configure
  $ make all
  $ sudo make install</pre>
  </div>
     </div>
  
    </p>
  
    <p class="para">
     If your system has multiple version of PHP installed (e.g. macOS default
     <em class="emphasis">and</em> <a href="https://www.apachefriends.org/" class="link external">&raquo;&nbsp;XAMPP</a>), note
     that each version of PHP has its own
     <a href="#install.pecl.phpize" class="link">phpize</a> command and <var class="filename">php.ini</var> file.
    </p>
  
    <p class="para">
     By default, the driver will use bundled versions of
     <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a>,
     <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a>, and
     <a href="https://github.com/mongodb/libmongocrypt" class="link external">&raquo;&nbsp;libmongocrypt</a> and
     attempt to configure them on its own. If these libraries are already
     installed as system libraries, you can instruct the driver to utilize them by
     specifying <code class="literal">--with-libbson=yes --with--libmongoc=yes</code> as
     arguments to <code class="literal">configure</code>. Starting with version 1.7.0 of the
     extension, these arguments are deprecated and you should use
     <code class="literal">--with-mongodb-system-libs=yes</code> instead.
    </p>
  
    <p class="para">
     For a complete list of <code class="literal">configure</code> options, run
     <strong class="command">configure --help</strong>.
    </p>
  
    <p class="para">
     When using bundled versions of libbson and libmongoc, the driver will also
     attempt to select an SSL library according to the
     <code class="literal">--with-mongodb-ssl</code> option for
     <code class="literal">configure</code>. The default value is
     <code class="literal">--with-mongodb-ssl=auto</code>, which will search for Secure
     Transport (macOS only), OpenSSL, and LibreSSL, in that order. Additionally,
     you may specify <code class="literal">openssl</code>, <code class="literal">libressl</code>, or
     <code class="literal">darwin</code> to force selection of a particular library,
     respectively.
    </p>
  
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      If the build process fails to find an SSL library, check that the
      development packages (e.g. <code class="literal">libssl-dev</code>) and
      <a href="https://en.wikipedia.org/wiki/Pkg-config" class="link external">&raquo;&nbsp;pkg-config</a> are both
      installed.
     </p>
  
     <p class="para">
      When using Homebrew on macOS, it is common for a system to have multiple
      versions of OpenSSL installed. To ensure that the desired version of OpenSSL
      is selected, the <code class="literal">PKG_CONFIG_PATH</code> environment variable may
      be used to control the search path for <code class="literal">pkg-config</code>. If
      <code class="literal">pkg-config</code> is not used, <code class="literal">configure</code> also
      supports a <code class="literal">--with-openssl-dir=DIR</code> argument, which can be
      used to specify a manual search path (for OpenSSL only).
     </p>
    </p></blockquote>
  
    <p class="para">
     The final build step, <strong class="command">make install</strong>, will report where
     <var class="filename">mongodb.so</var> has been installed, similar to:
     <div class="example-contents">
  <div class="txtcode"><pre class="txtcode">Installing shared extensions:     /usr/lib/php/extensions/debug-non-zts-20151012/</pre>
  </div>
     </div>
  
    </p>
  
    <p class="para">
     Ensure that the <a href="#ini.extension-dir" class="link">extension_dir</a> option
     in <var class="filename">php.ini</var> points to the directory where <var class="filename">mongodb.so</var>
     was installed. You can query for the option by running:
     <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">$ php -i | grep extension_dir
    extension_dir =&gt; /usr/lib/php/extensions/debug-non-zts-20151012 =&gt;
                     /usr/lib/php/extensions/debug-non-zts-20151012</pre>
  </div>
     </div>
  
    </p>
  
    <p class="para">
     If the directories differ, either change
     <a href="#ini.extension-dir" class="link">extension_dir</a> in <var class="filename">php.ini</var> or
     manually move <var class="filename">mongodb.so</var> to the correct directory.
    </p>
  
    <p class="para">
     Finally, add the following line to your <var class="filename">php.ini</var> file:
     <div class="example-contents">
  <div class="inicode"><pre class="inicode">extension=mongodb.so</pre>
  </div>
     </div>
  
    </p>
   </div>
  <hr />
  
  
  </div>
  
  <hr />
  
  
  
  
  
   
  
  
  <div id="mongodb.configuration" class="article"><hr />
   <h1>Runtime Configuration</h1>
  
   <p class="simpara">
  The behaviour of these functions is affected by settings in <var class="filename">php.ini</var>.
  </p>
   <p class="para">
    <table class="doctable table">
     <caption><strong>mongodb Configure Options</strong></caption>
     
      <thead>
       <tr>
        <th>Name</th>
        <th>Default</th>
        <th>Changeable</th>
        <th>Changelog</th>
        <th>Comments</th>
       </tr>
  
      </thead>
  
      <tbody class="tbody">
       <tr>
        <td><a href="#ini.mongodb.debug" class="link">mongodb.debug</a></td>
        <td>&quot;&quot;</td>
        <td>PHP_INI_ALL</td>
        <td></td>
        <td class="empty">&nbsp;</td>
       </tr>
  
      </tbody>
     
    </table>
  
   </p>
  
   <p class="para">Here&#039;s a short explanation of
  the configuration directives.</p>
  
   <p class="para">
    <dl>
  
     
       <dt id="ini.mongodb.debug">
        <code class="parameter">mongodb.debug</code>
        <span class="type"><a href="#language.types.string" class="type string">string</a></span>
       </dt>
  
       <dd>
  
        <p class="para">
         Store full activity debug log in this directory or stream.
         The special value &quot;stderr&quot; can be provided to write to STDERR.
        </p>
  
        <blockquote class="note"><p><strong class="note">Note</strong>: 
         <p class="para">
          Please note that the debug log can contain sensitive information, such
          as credentials to the MongoDB server and full documents written to or
          read from the server. Please review any debug logs before sharing them
          with other people.
         </p>
        </p></blockquote>
       </dd>
  
      
  
    </dl>
  
   </p>
  </div>
  
  <hr />
  
  
  
  
  
    
  
  
  <div id="mongodb.constants" class="appendix"><hr />
   <h1>Predefined Constants</h1>
  
   <p class="simpara">
  The constants below are defined by this extension, and
  will only be available when the extension has either
  been compiled into PHP or dynamically loaded at runtime.
  </p>
   <p class="para">
    <dl>
  
     
      <dt id="constant.mongodb-version">
       <strong><code>MONGODB_VERSION</code></strong>
       (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)
      </dt>
  
      <dd>
  
       <span class="simpara">
        x.y.z style version number of the extension
       </span>
      </dd>
  
     
     
      <dt id="constant.mongodb-stability">
       <strong><code>MONGODB_STABILITY</code></strong>
       (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)
      </dt>
  
      <dd>
  
       <span class="simpara">
        Current stability (alpha/beta/stable)
       </span>
      </dd>
  
     
    </dl>
  
   </p>
  </div>
  
  <hr />
  
  
  
  
  
  <ul class="chunklist chunklist_book"><li><a href="#mongodb.requirements">Requirements</a></li><li><a href="#mongodb.installation">Installation</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb.installation.pecl">Installing the MongoDB PHP Driver with PECL</a></li><li><a href="#mongodb.installation.homebrew">Installing the MongoDB PHP Driver on macOS with Homebrew</a></li><li><a href="#mongodb.installation.windows">Installing the MongoDB PHP Driver on Windows</a></li><li><a href="#mongodb.installation.manual">Building the MongoDB PHP Driver from source</a></li></ul></li><li><a href="#mongodb.configuration">Runtime Configuration</a></li><li><a href="#mongodb.constants">Predefined Constants</a></li></ul></div>
  <hr />
  
  
  
  
    
  
  
   <div id="mongodb.tutorial" class="book"><hr />
    <h1 class="title">Tutorials</h1>
    
  
    <div class="info">
     <div class="abstract">
      <p class="para">
       In this section you will find several tutorials on how to use the MongoDB
       driver for PHP.
      </p>
     </div>
    </div>
  
    
  
  
  <div id="mongodb.tutorial.library" class="chapter"><hr />
   <h1>Using the PHP Library for MongoDB (PHPLIB)</h1>
  
  
   <p class="para">
    After the initial driver set-up, we will continue explaining how to get
    started with the MongoDB driver and corresponding userland library to write
    our first project.
   </p>
  
   <div class="section">
    <h2 class="title">Installing the PHP Library with Composer</h2>
  
    <p class="para">
     The last thing we still need to install to get started on the application
     itself, is the PHP library.
    </p>
  
    <p class="para">
     The library needs to be installed with
     <a href="https://getcomposer.org/" class="link external">&raquo;&nbsp;Composer</a>, a package manager
     for PHP. Instructions for installing Composer on various platforms may be
     found on its website.
     </p>
  
     <p class="para">
      Install the library by running:
      <div class="example-contents">
  <div class="shellcode"><pre class="shellcode">$ composer require mongodb/mongodb</pre>
  </div>
      </div>
  
     </p>
  
     <p class="para">
  It will output something akin to:
  
      <div class="example-contents">
  <div class="textcode"><pre class="textcode">./composer.json has been created
  Loading composer repositories with package information
  Updating dependencies (including require-dev)
    - Installing mongodb/mongodb (1.0.0)
      Downloading: 100%         
  
  Writing lock file
  Generating autoload files</pre>
  </div>
      </div>
  
     </p>
  
     <p class="para">
      Composer will create several files: <code class="code">composer.json</code>,
      <code class="code">composer.lock</code>, and a <code class="code">vendor</code> directory that will
      contain the library and any other dependencies your project might require.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Using the PHP Library</h2>
  
     <p class="para">
      In addition to managing your dependencies, Composer will also provide you
      with an autoloader (for those dependencies&#039; classes). Ensure that it is
      included at the start of your script or in your application&#039;s bootstrap
      code:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;This&nbsp;path&nbsp;should&nbsp;point&nbsp;to&nbsp;Composer's&nbsp;autoloader<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">'vendor/autoload.php'</span><span style="color: #007700">;</span>
  </span>
  </code></div>
      </div>
  
     </p>
  
     <p class="para">
      With this done, you can now use any of the functionality as described in the
      <a href="https://docs.mongodb.com/php-library" class="link external">&raquo;&nbsp;library documentation</a>.
     </p>
  
     <p class="para">
      If you have previously used the old driver (i.e. <code class="code">mongo</code>
      extension), the library&#039;s API should look familiar. It contains a
      <a href="https://docs.mongodb.com/php-library/master/reference/class/MongoDBClient/" class="link external">&raquo;&nbsp;Client</a>
      class for connecting to MongoDB, and
      <a href="https://docs.mongodb.com/php-library/master/reference/class/MongoDBDatabase/" class="link external">&raquo;&nbsp;Database</a>
      class for database-level operations (e.g. commands, collection management)
      and a
      <a href="https://docs.mongodb.com/php-library/master/reference/class/MongoDBCollection" class="link external">&raquo;&nbsp;Collection</a>
      class for collection-level operations (e.g.
      <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" class="link external">&raquo;&nbsp;CRUD</a> methods, index management).
      Various Collection methods have been renamed for clarity, and to be in
      accordance with a new language-agnostic
      <a href="https://github.com/mongodb/specifications/blob/master/source/crud/crud.rst" class="link external">&raquo;&nbsp;specification</a>.
     </p>
  
     <p class="para">
      As an example, this is how you insert a document into the
      <em class="emphasis">beers</em> collection of the <em class="emphasis">demo</em>
      database:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">'vendor/autoload.php'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;include&nbsp;Composer's&nbsp;autoloader<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Client</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beers</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertOne</span><span style="color: #007700">(&nbsp;[&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Hinterland'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'brewery'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'BrewDog'&nbsp;</span><span style="color: #007700">]&nbsp;);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Inserted&nbsp;with&nbsp;Object&nbsp;ID&nbsp;'</span><span style="color: #007700">{</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertedId</span><span style="color: #007700">()}</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </p>
  
     <p class="para">
      Instead of injecting the generated <code class="code">_id</code> field into the input
      document (as was done in the old driver), it is now made available through
      the result object returned by the <code class="code">insertOne</code> method.
     </p>
  
     <p class="para">
      After insertion, you can of course also query the data that you have just
      inserted. For that, you use the <code class="code">find</code> method, which returns an
      iterable cursor:
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">'vendor/autoload.php'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;include&nbsp;Composer's&nbsp;autoloader<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Client</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">demo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beers</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">(&nbsp;[&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Hinterland'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'brewery'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'BrewDog'&nbsp;</span><span style="color: #007700">]&nbsp;);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$entry</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$entry</span><span style="color: #007700">[</span><span style="color: #DD0000">'_id'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">':&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$entry</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </p>
  
     <p class="para">
      While it may not be apparent in the examples, BSON documents and arrays are
      unserialized as type classes in the library by default. These classes ensure
      that values preserve their type when being serialized back into BSON, which
      avoids a caveat in the old driver where arrays might turn into documents,
      and vice versa. Additionally, the classes extend
      <a href="#class.arrayobject" class="classname">ArrayObject</a> for enhanced usability. You can find more
      information on how serialization and deserialization between PHP variables
      and BSON is handled by the driver and library by reading the
      <a href="#mongodb.persistence" class="xref">Persisting Data</a> specification.
     </p>
    </div>
  </div>
  
  <hr />
  
  
  
    
  
  
  <div id="mongodb.tutorial.apm" class="chapter"><hr />
   <h1>Application Performance Monitoring (APM)</h1>
  
  
   <p class="para">
    Since version 1.3, the MongoDB driver contains an API for performance
    monitoring. This API allows you to find out how long specific operations
    take by setting up subscribers. Each subscriber is required to implement one
    or more interfaces under the <code class="literal">MongoDB\Driver\Monitoring</code>
    namespace. Currently, only the
    <a href="#class.mongodb-driver-monitoring-commandsubscriber" class="classname">MongoDB\Driver\Monitoring\CommandSubscriber</a> interface
    is available.
   </p>
  
   <p class="para">
    The <a href="#class.mongodb-driver-monitoring-commandsubscriber" class="classname">MongoDB\Driver\Monitoring\CommandSubscriber</a>
    interface defines three methods: <code class="literal">commandStarted</code>,
    <code class="literal">commandSucceeded</code>, and <code class="literal">commandFailed</code>.
    Each of these three methods accept a single <code class="parameter">event</code>
    argument of a specific class for the respective event. For example, the
    <code class="literal">commandSucceeded</code>&#039;s <code class="parameter">$event</code> argument
    is a <a href="#class.mongodb-driver-monitoring-commandsucceededevent" class="classname">MongoDB\Driver\Monitoring\CommandSucceededEvent</a>
    object.
   </p>
  
   <p class="para">
    In this tutorial we will implement a subscriber that creates a list of all
    the query profiles and the average time they took.
   </p>
  
   <div class="section">
    <h2 class="title">Subscriber Class Scaffolding</h2>
  
    <p class="para">
     We start with the framework for our subscriber:
    </p>
  
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">QueryTimeCollector&nbsp;</span><span style="color: #007700">implements&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandSubscriber<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">commandStarted</span><span style="color: #007700">(&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandStartedEvent&nbsp;$event&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">commandSucceeded</span><span style="color: #007700">(&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandSucceededEvent&nbsp;$event&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">commandFailed</span><span style="color: #007700">(&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandFailedEvent&nbsp;$event&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
   <div class="section">
    <h2 class="title">Registering the Subscriber</h2>
  
    <p class="para">
     Once a subscriber object is instantiated, it needs to be registered with the
     driver&#039;s monitoring system. This is done by calling
     <span class="methodname"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="methodname">MongoDB\Driver\Monitoring\addSubscriber()</a></span>.
    </p>
  
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">addSubscriber</span><span style="color: #007700">(&nbsp;new&nbsp;</span><span style="color: #0000BB">QueryTimeCollector</span><span style="color: #007700">()&nbsp;);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
   <div class="section">
    <h2 class="title">Implementing the Logic</h2>
  
    <p class="para">
     With the object registered, the only thing left is to implement the logic
     in the subscriber class. To correlate the two events that make up a
     successfully executed command (commandStarted and commandSucceeded), each
     event object exposes a <code class="literal">requestId</code> field.
    </p>
    <p class="para">
     To record the average time per query shape, we will start by checking for a
     <code class="literal">find</code> command in the commandStarted event. We will then add
     an item to the <code class="literal">pendingCommands</code> property indexed by its
     <code class="literal">requestId</code> and with its value representing the query shape.
    </p>
    <p class="para">
     If we receive a corresponding commandSucceeded event with the same
     <code class="literal">requestId</code>, we add the duration of the event (from
     <code class="literal">durationMicros</code>) to the total time and increment the
     operation count.
    </p>
    <p class="para">
     If a corresponding commandFailed event is encountered, we just remove the
     entry from the <code class="literal">pendingCommands</code> property.
    </p>
  
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">QueryTimeCollector&nbsp;</span><span style="color: #007700">implements&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandSubscriber<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$pendingCommands&nbsp;</span><span style="color: #007700">=&nbsp;[];<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$queryShapeStats&nbsp;</span><span style="color: #007700">=&nbsp;[];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Creates&nbsp;a&nbsp;query&nbsp;shape&nbsp;out&nbsp;of&nbsp;the&nbsp;filter&nbsp;argument.&nbsp;Right&nbsp;now&nbsp;it&nbsp;only<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;takes&nbsp;the&nbsp;top&nbsp;level&nbsp;fields&nbsp;into&nbsp;account&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">createQueryShape</span><span style="color: #007700">(&nbsp;array&nbsp;</span><span style="color: #0000BB">$filter&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$filter&nbsp;</span><span style="color: #007700">)&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">commandStarted</span><span style="color: #007700">(&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandStartedEvent&nbsp;$event&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'find'</span><span style="color: #007700">,&nbsp;(array)&nbsp;</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommand</span><span style="color: #007700">()&nbsp;)&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queryShape&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createQueryShape</span><span style="color: #007700">(&nbsp;(array)&nbsp;</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommand</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">filter&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pendingCommands</span><span style="color: #007700">[</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequestId</span><span style="color: #007700">()]&nbsp;=&nbsp;</span><span style="color: #0000BB">$queryShape</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">commandSucceeded</span><span style="color: #007700">(&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandSucceededEvent&nbsp;$event&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$requestId&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequestId</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$requestId</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pendingCommands&nbsp;</span><span style="color: #007700">)&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryShapeStats</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pendingCommands</span><span style="color: #007700">[</span><span style="color: #0000BB">$requestId</span><span style="color: #007700">]][</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]++;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryShapeStats</span><span style="color: #007700">[</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pendingCommands</span><span style="color: #007700">[</span><span style="color: #0000BB">$requestId</span><span style="color: #007700">]][</span><span style="color: #DD0000">'duration'</span><span style="color: #007700">]&nbsp;+=&nbsp;</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDurationMicros</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pendingCommands</span><span style="color: #007700">[</span><span style="color: #0000BB">$requestId</span><span style="color: #007700">]&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">commandFailed</span><span style="color: #007700">(&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">CommandFailedEvent&nbsp;$event&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequestId</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pendingCommands&nbsp;</span><span style="color: #007700">)&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pendingCommands</span><span style="color: #007700">[</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequestId</span><span style="color: #007700">()]&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__destruct</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryShapeStats&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$shape&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$stats&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Shape:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$shape</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&nbsp;("</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$stats</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">")\n&nbsp;&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stats</span><span style="color: #007700">[</span><span style="color: #DD0000">'duration'</span><span style="color: #007700">]&nbsp;/&nbsp;</span><span style="color: #0000BB">$stats</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"µs\n\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'mongodb://localhost:27016'&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Add&nbsp;the&nbsp;subscriber&nbsp;*/<br /></span><span style="color: #007700">\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Monitoring</span><span style="color: #007700">\</span><span style="color: #0000BB">addSubscriber</span><span style="color: #007700">(&nbsp;new&nbsp;</span><span style="color: #0000BB">QueryTimeCollector</span><span style="color: #007700">()&nbsp;);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Do&nbsp;a&nbsp;bunch&nbsp;of&nbsp;queries&nbsp;*/<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'region_slug'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'scotland-highlands'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'age'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$gte'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">20&nbsp;</span><span style="color: #007700">]<br />]&nbsp;);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'dramio.whisky'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'region_slug'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'scotland-lowlands'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'age'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'$gte'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">15&nbsp;</span><span style="color: #007700">]<br />]&nbsp;);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'dramio.whisky'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">(&nbsp;[&nbsp;</span><span style="color: #DD0000">'region_slug'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'scotland-lowlands'&nbsp;</span><span style="color: #007700">]&nbsp;);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'dramio.whisky'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   <ul class="chunklist chunklist_book"><li><a href="#mongodb.tutorial.library">Using the PHP Library for MongoDB (PHPLIB)</a></li><li><a href="#mongodb.tutorial.apm">Application Performance Monitoring (APM)</a></li></ul></div>
  <hr />
  
  
  
  
  
    
  
  
  <div id="mongodb.architecture" class="book"><hr />
   
   <h1 class="title">Explains the driver architecture, and special features</h1>
  
   <div id="mongodb.overview" class="article"><hr />
    
    <h1>Architecture Overview</h1>
  
  
    <p class="para">
     This section explains how all the different parts of the driver fit
     together. From the different language runtimes, through the extension and
     to the PHP libraries on top. This new architecture has replaced the old
     <a href="#book.mongo" class="link">mongo</a> extension. We refer to the new one
     as the <em class="emphasis">mongodb</em> extension.
    </p>
  
    <p class="para">
     <div class="mediaobject">
      
      <div class="imageobject">
       <img src="php-bigxhtml-data/images/f3bc48edf40d5e3e09a166c7fadc7efb-driver_arch.png" alt="Architecture Diagram" width="625" height="450" />
      </div>
     </div>
    </p>
  
    <p class="para">
     At the top of this stack sits a pure
     <a href="https://github.com/mongodb/mongo-php-library" class="link external">&raquo;&nbsp;PHP library</a>, which we will
     distribute as a Composer package. This library will provide an API similar
     to what users have come to expect from the old mongo driver (e.g. CRUD methods,
     database and collection objects, command helpers) and we expect it to be a
     common dependency for most applications built with MongoDB. This library
     will also implement common
     <a href="https://github.com/mongodb/specifications" class="link external">&raquo;&nbsp;specifications</a>, in the
     interest of improving API consistency across all of the
     <a href="https://docs.mongodb.com/ecosystem/drivers/" class="link external">&raquo;&nbsp;drivers</a> maintained by
     MongoDB (and hopefully some community drivers, too).
    </p>
  
    <p class="para">
     Sitting below that library we have the lower level driver.
     This extension will effectively form the glue between PHP and our
     system libraries (<a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> and
     <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a>). This extension
     will expose an identical public API for the most essential and
     performance-sensitive functionality:
  
     <ul class="simplelist">
      <li class="member">Connection management</li>
      <li class="member">BSON encoding and decoding</li>
      <li class="member">Object document serialization (to support ODM libraries)</li>
      <li class="member">Executing commands and write operations</li>
      <li class="member">Handling queries and cursors</li>
     </ul>
    </p>
  
    <p class="para">
     By decoupling the driver internals and a high-level API into an extension and
     PHP libraries, respectively, we hope to reduce our maintainence burden and
     allow for faster iteration on new features. As a welcome side effect, this
     also makes it easier for anyone to contribute to the driver. Additionally,
     an identical public API will make it that much easier to port an
     application across PHP runtimes, whether the application uses the low-level
     driver directly or a higher-level PHP library.
    </p>
    <p class="para">
     <a href="https://docs.mongodb.com/manual/core/gridfs/" class="link external">&raquo;&nbsp;GridFS</a> is a great example
     of why we chose this direction.
     Although we implemented GridFS in C for our old mongo driver, it is actually
     quite a high-level specification. Its API is just an abstraction for
     accessing two collections: files (i.e. metadata) and chunks (i.e. blocks of
     data). Likewise, all of the syntactic sugar found in the old mongo driver,
     such as processing uploaded files or exposing GridFS files as PHP streams,
     can be implemented in pure PHP. Provided we have performant methods for
     reading from and writing to GridFS&#039; collections – and thanks to our low
     level extensions, we will – shifting this API to PHP is win-win.
    </p>
    <p class="para">
     Earlier I mentioned that we expect the PHP library to be a common
     dependency for <em class="emphasis">most</em> applications, but not
     <em class="emphasis">all</em>. Some users may prefer to stick to the no-frills
     API offered by the extensions, or create their own high-level abstraction
     (akin to <a href="https://github.com/doctrine/mongodb" class="link external">&raquo;&nbsp;Doctrine MongoDB</a> for
     the old mongo driver). Future libraries could include a PHP library geared
     for MongoDB administration, which provides an API for various user
     management and ops commands. The next major version of
     <a href="https://github.com/doctrine/mongodb-odm" class="link external">&raquo;&nbsp;Doctrine MongoDB ODM</a> will
     likely also sit directly atop the extensions.
    </p>
    <p class="para">
     While we will continue to maintain and support the old mongo driver and its
     users for the foreseeable future, we invite everyone to use the
     next-generation driver and consider it for any new projects going forward.
     You can find all of the essential components across GitHub and JIRA:
  
     <table class="doctable table">
      <caption><strong>Driver Source Code and JIRA Locations</strong></caption>
      
       <thead>
        <tr>
         <th>Project</th>
         <th>GitHub</th>
         <th>JIRA</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>PHP Library</td>
         <td><a href="https://github.com/mongodb/mongo-php-library" class="link external">&raquo;&nbsp;mongodb/mongo-php-library</a></td>
         <td><a href="https://jira.mongodb.org/browse/PHPLIB" class="link external">&raquo;&nbsp;PHPLIB</a></td>
        </tr>
  
        <tr>
         <td>PHP 5 and PHP 7 Driver (phongo)</td>
         <td><a href="https://github.com/mongodb/mongo-php-driver" class="link external">&raquo;&nbsp;mongodb/mongo-php-driver</a></td>
         <td><a href="https://jira.mongodb.org/browse/PHPC" class="link external">&raquo;&nbsp;PHPC</a></td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
  
    <p class="para">
     The existing <a href="https://jira.mongodb.org/browse/PHP" class="link external">&raquo;&nbsp;PHP</a> project in JIRA
     will remain open for reporting bugs against the old mongo driver, but we
     would ask that you use the new projects above for anything pertaining to
     our next-generation drivers.
    </p>
   </div>
  
  <hr />
  
  
   <div id="mongodb.connection-handling" class="article"><hr />
    
    <h1>Connection handling and persistence</h1>
  
  
    
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       On Unix platforms, the MongoDB driver is sensitive to scripts that use the
       fork() system call without also calling exec(). Users are advised not to
       re-use <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a> instances in a forked
       child process.
      </span>
     </p></blockquote>
  
  
    <div class="section">
     <h2 class="title">Connection and topology persistence (PHP version since 1.2.0)</h2>
  
     <p class="para">
      All versions of the driver since 1.2.0 persist the
      <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> client object in
      the PHP worker process, which allows it to re-use database connections,
      authentication states, <em class="emphasis">and</em> topology information across
      multiple requests.
     </p>
  
     <p class="para">
      When <span class="methodname"><a href="#mongodb-driver-manager.construct" class="methodname">MongoDB\Driver\Manager::__construct()</a></span> is
      invoked, a hash is created from its arguments (i.e. URI string and array
      options). The driver will attempt to find a previously persisted
      <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> client object for
      that hash. If an existing client cannot be found for the hash, a new client
      will be created (and persisted for future use).
     </p>
  
     <p class="para">
      Each client contains its own database connections and a view of the server
      topology (e.g. standalone, replica set, shard cluster). By persisting the
      client between PHP requests, the driver is able to re-use established
      database connections and remove the need for
      <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst" class="link external">&raquo;&nbsp;discovering the server topology</a>
      on each request.
     </p>
  
     <p class="para">
      Consider the following example:
     </p>
  
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$managers&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1:27017'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com/'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'replicaSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'myReplicaSet'</span><span style="color: #007700">]),<br />];<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$managers&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">([</span><span style="color: #DD0000">'ping'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
  
     <p class="para">
      The first two Manager objects will share the same
      <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> client since
      their constructor arguments are identical. The third and fourth objects will
      each use their own client. In total, three clients will be created and the
      PHP worker executing this script will open two connections to
      <code class="literal">127.0.0.1</code> and one connection to each of
      <code class="literal">rs1.example.com</code> and <code class="literal">rs2.example.com</code>.
      If the driver discovers additional members of the replica set after issuing
      <code class="literal">isMaster</code> commands, it will open additional connections to
      those servers as well.
     </p>
  
     <p class="para">
      If the same worker executes the script again in a second request, the three
      clients will be re-used and no new connections should be made. Depending on
      how long ago the previous request was served, the driver may need to issue
      additional <code class="literal">isMaster</code> commands to update its view of the
      topologies.
     </p>
    </div>
  
    <div class="section">
     <h2 class="title">Socket persistence (PHP versions before 1.2.0)</h2>
  
     <p class="para">
      Versions of the PHP driver before 1.2.0 utilize PHP&#039;s Streams API for
      database connections, using an API within
      <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> to designate
      custom handlers for socket communication; however, a new libmongoc client is
      created for each <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a>. As a result,
      the driver persists individual database connections but not authentication
      state or topology information. This means that the driver needs to issue
      commands at the start of each request to authenticate and
      <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst" class="link external">&raquo;&nbsp;discover the server topology</a>.
     </p>
  
     <p class="para">
      Database connections are persisted by a hash derived from the server&#039;s
      host, port, and the URI string used to construct the
      <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a>. The constructor&#039;s array
      options are not included in this hash.
     </p>
  
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       Versions of the driver &gt;= 1.1.8 and &lt; 1.2.0 do not persist sockets
       for SSL connections. See
       <a href="https://jira.mongodb.org/browse/PHPC-720" class="link external">&raquo;&nbsp;PHPC-720</a> for
       additional information.
      </span>
     </p></blockquote>
  
     <p class="para">
      Despite its shortcomings with persisting SSL connections when and topology
      information, this version of the driver supports all
      <a href="#context.ssl" class="link">SSL context options</a> since it uses
      PHP&#039;s Streams API.
     </p>
    </div>
   </div>
  
  <hr />
  
  
   <div id="mongodb.persistence" class="article"><hr />
    
    <h1>Serialization and deserialization of PHP variables into MongoDB</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_article"><li><a href="#mongodb.persistence.serialization">Serialization to BSON</a></li><li><a href="#mongodb.persistence.deserialization">Deserialization from BSON</a></li></ul>
  
  
    <p class="para">
     This document discusses the methods how compound structures (documents,
     arrays, objects) are persisted through the drivers. And how they are brought
     back into PHP land.
    </p>
  
    <div id="mongodb.persistence.serialization" class="section"><hr />
     <h2 class="title">Serialization to BSON</h2>
  
     <div class="section">
      <h2 class="title">Arrays</h2>
  
      <p class="para">
       If an array is a <em class="emphasis">packed array</em> — i.e. the keys start
       at 0 and are sequential without gaps: <em class="emphasis">BSON array</em>. 
      </p>
  
      <p class="para">
       If the array is not packed — i.e. having associative (string) keys, the
       keys don&#039;t start at 0, or when there are gaps:: <em class="emphasis">BSON
       object</em>
      </p>
  
      <p class="para">
       A top-level (root) document, <em class="emphasis">always</em> serializes as a
       BSON document.
      </p>
  
      <div class="section">
       <h2 class="title">Examples</h2>
  
       <p class="para">
        These serialize as a BSON array:
       </p>
  
       <div class="example-contents">
  <div class="textcode"><pre class="textcode">[ 8, 5, 2, 3 ] =&gt; [ 8, 5, 2, 3 ]
  [ 0 =&gt; 4, 1 =&gt; 9 ] =&gt; [ 4, 9 ]</pre>
  </div>
       </div>
  
  
       <p class="para">
        These serialize as a BSON document:
       </p>
  
       <div class="example-contents">
  <div class="textcode"><pre class="textcode">[ 0 =&gt; 1, 2 =&gt; 8, 3 =&gt; 12 ] =&gt; { &quot;0&quot; : 1, &quot;2&quot; : 8, &quot;3&quot; : 12 }
  [ &quot;foo&quot; =&gt; 42 ] =&gt; { &quot;foo&quot; : 42 }
  [ 1 =&gt; 9, 0 =&gt; 10 ] =&gt; { &quot;1&quot; : 9, &quot;0&quot; : 10 }</pre>
  </div>
       </div>
  
  
       <p class="para">
        Note that the five examples are <em class="emphasis">extracts</em> of a full
        document, and represent only <em class="emphasis">one</em> value inside a
        document.
       </p>
  
      </div>
     </div>
  
     <div class="section">
      <h2 class="title">Objects</h2>
  
       <p class="para">
        If an object is of the <strong class="classname">stdClass</strong> class, serialize
        as a <em class="emphasis">BSON document</em>.
       </p>
  
       <p class="para">
        If an object is a supported class that implements
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>, then use the BSON
        serialization logic for that specific type.
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span> instances (excluding
        <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span> may only be
        serialized as a document field value. Attempting to serialize such an
        object as a root document will throw a
        <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a>
       </p>
  
       <p class="para">
        If an object is of an unknown class implementing the
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span> interface, then throw a
        <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a>
       </p>
  
       <p class="para">
        If an object is of any other class, without implementing any special
        interface, serialize as a <em class="emphasis">BSON document</em>. Keep only
        <em class="emphasis">public</em> properties, and ignore
        <em class="emphasis">protected</em> and <em class="emphasis">private</em>
        properties.
       </p>
  
       <p class="para">
        If an object is of a class that implements the
        <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span> interface, call
        <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">MongoDB\BSON\Serializable::bsonSerialize()</a></span> and use
        the returned array or <strong class="classname">stdClass</strong> to serialize as a
        BSON document or array. The BSON type will be determined by the following:
       </p>
  
       <p class="para">
        <ol type="1">
         <li class="listitem">
          <p class="para">Root documents must be serialized as a BSON
          document.
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           <span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span> objects must be
           serialized as a BSON document.
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           If <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">MongoDB\BSON\Serializable::bsonSerialize()</a></span>
           returns a packed array, serialize as a BSON array.
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           If <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">MongoDB\BSON\Serializable::bsonSerialize()</a></span>
           returns a non-packed array or <strong class="classname">stdClass</strong>,
           serialize as a BSON document.
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           If <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">MongoDB\BSON\Serializable::bsonSerialize()</a></span>
           did not return an array or <strong class="classname">stdClass</strong>, throw an
           <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a>
           exception.
          </p>
         </li>
        </ol>
       </p>
  
       <p class="para">
        If an object is of a class that implements the
        <span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span> interface (which
        implies <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>), obtain
        the properties in a similar way as in the previous paragraphs, but
        <em class="emphasis">also</em> add an additional property
        <span class="property">__pclass</span> as a Binary value, with subtype
        <code class="literal">0x80</code> and data bearing the fully qualified class name
        of the object that is being serialized.
       </p>
  
       <p class="para">
        The <span class="property">__pclass</span> property is added to the array or
        object returned by
        <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">MongoDB\BSON\Serializable::bsonSerialize()</a></span>, which
        means it will overwrite any <span class="property">__pclass</span> key/property in
        the <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">MongoDB\BSON\Serializable::bsonSerialize()</a></span>
        return value. If you want to avoid this behaviour and set your own
        <span class="property">__pclass</span> value, you must <em class="emphasis">not</em>
        implement <span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span> and
        should instead implement
        <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span> directly.
       </p>
  
       <div class="section">
        <h2 class="title">Examples</h2>
  
        <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">stdClass&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">42</span><span style="color: #007700">;<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"foo"&nbsp;:&nbsp;42&nbsp;}<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyClass&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">42</span><span style="color: #007700">;<br />&nbsp;&nbsp;protected&nbsp;</span><span style="color: #0000BB">$prot&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"wine"</span><span style="color: #007700">;<br />&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$fpr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"cheese"</span><span style="color: #007700">;<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"foo"&nbsp;:&nbsp;42&nbsp;}<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">AnotherClass1&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">42</span><span style="color: #007700">;<br />&nbsp;&nbsp;protected&nbsp;</span><span style="color: #0000BB">$prot&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"wine"</span><span style="color: #007700">;<br />&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$fpr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"cheese"</span><span style="color: #007700">;<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'prot'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prot&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;}<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"foo"&nbsp;:&nbsp;42,&nbsp;"prot"&nbsp;:&nbsp;"wine"&nbsp;}<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">AnotherClass2&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">42</span><span style="color: #007700">;<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;MongoDB\Driver\Exception\UnexpectedValueException("bsonSerialize()&nbsp;did&nbsp;not&nbsp;return&nbsp;an&nbsp;array&nbsp;or&nbsp;stdClass")<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">AnotherClass3&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$elements&nbsp;</span><span style="color: #007700">=&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"0"&nbsp;:&nbsp;"foo",&nbsp;"1"&nbsp;:&nbsp;"bar"&nbsp;}<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">ContainerClass&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$things&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">AnotherClass4&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$elements&nbsp;</span><span style="color: #007700">=&nbsp;[&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&nbsp;</span><span style="color: #DD0000">'things'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">things&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;}<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"things"&nbsp;:&nbsp;{&nbsp;"0"&nbsp;:&nbsp;"foo",&nbsp;"2"&nbsp;:&nbsp;"bar"&nbsp;}&nbsp;}<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">ContainerClass&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$things&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">AnotherClass5&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$elements&nbsp;</span><span style="color: #007700">=&nbsp;[&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">array_values</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&nbsp;</span><span style="color: #DD0000">'things'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">things&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;}<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"things"&nbsp;:&nbsp;[&nbsp;"foo",&nbsp;"bar"&nbsp;]&nbsp;}<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">ContainerClass&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$things&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">AnotherClass6&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$elements&nbsp;</span><span style="color: #007700">=&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(object)&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&nbsp;</span><span style="color: #DD0000">'things'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">things&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;}<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"things"&nbsp;:&nbsp;{&nbsp;"0"&nbsp;:&nbsp;"foo",&nbsp;"1"&nbsp;:&nbsp;"bar"&nbsp;}&nbsp;}<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">UpperClass&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Persistable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">42</span><span style="color: #007700">;<br />&nbsp;&nbsp;protected&nbsp;</span><span style="color: #0000BB">$prot&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"wine"</span><span style="color: #007700">;<br />&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$fpr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"cheese"</span><span style="color: #007700">;<br />&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'prot'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prot&nbsp;</span><span style="color: #007700">];<br />&nbsp;&nbsp;}<br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;=&gt;&nbsp;{&nbsp;"foo"&nbsp;:&nbsp;42,&nbsp;"prot"&nbsp;:&nbsp;"wine",&nbsp;"__pclass"&nbsp;:&nbsp;{&nbsp;"$type"&nbsp;:&nbsp;"80",&nbsp;"$binary"&nbsp;:&nbsp;"VXBwZXJDbGFzcw=="&nbsp;}&nbsp;}</span>
  </span>
  </code></div>
       </div>
  
      </div>
     </div>
    </div>
  <hr />
  
  
    <div id="mongodb.persistence.deserialization" class="section"><hr />
     <h2 class="title">Deserialization from BSON</h2>
  
     <p class="para">
      The legacy <a href="#book.mongo" class="link">mongo</a> extension deserialized
      both BSON documents and arrays as PHP arrays. While PHP arrays are
      convenient to work with, this behavior was problematic because different
      BSON types could deserialize to the same PHP value (e.g.
       <code class="literal">{&quot;0&quot;: &quot;foo&quot;}</code> and <code class="literal">[&quot;foo&quot;]</code>) and make it
      impossible to infer the original BSON type. By default, the current driver
      addresses this concern by ensuring that BSON arrays and documents are
      converted to PHP arrays and objects, respectively.
     </p>
  
     <p class="para">
      For compound types, there are three data types:
     </p>
  
     <p class="para">
      <dl>
  
       
        <dt>
  root</dt>
  
        <dd>
  
         <p class="para">
          refers to the top-level BSON document <em class="emphasis">only</em>
         </p>
        </dd>
  
       
       
        <dt>
  document</dt>
  
        <dd>
  
         <p class="para">
          refers to embedded BSON documents <em class="emphasis">only</em>
         </p>
        </dd>
  
       
       
        <dt>
  array</dt>
  
        <dd>
  
         <p class="para">
          refers to a BSON array
         </p>
        </dd>
  
       
      </dl>
  
     </p>
  
     <p class="para">
      Besides the three collective types, it is also possible to configure
      specific fields in your document to map to the data types mentioned below.
      As an example, the following type map allows you to
      map each embedded document within an <code class="literal">&quot;addresses&quot;</code> array to
      an <strong class="classname">Address</strong> class <em class="emphasis">and</em> each
      <code class="literal">&quot;city&quot;</code> field within those embedded address documents to
      a <strong class="classname">City</strong> class:
  
      <div class="example-contents">
  <div class="textcode"><pre class="textcode">[
      &#039;fieldPaths&#039; =&gt; [
          &#039;addresses.$&#039; =&gt; &#039;MyProject\Address&#039;,
          &#039;addresses.$.city&#039; =&gt; &#039;MyProject\City&#039;,
      ],
  ]</pre>
  </div>
      </div>
  
     </p>
  
     <p class="para">
      Each of those three data types, as well as the field specific mappings,
      can be mapped against different PHP types. The possible mapping values
      are:
     </p>
  
     <p class="para">
      <dl>
  
       
        <dt>
  <em class="emphasis">not set</em> or <span class="type"><a href="#language.types.null" class="type NULL">NULL</a></span> (default)</dt>
  
        <dd>
  
         <p class="para">
          <ul class="itemizedlist">
           <li class="listitem">
            <p class="para">
             A BSON array will be deserialized as a PHP <span class="type"><a href="#language.types.array" class="type array">array</a></span>.
            </p>
           </li>
           <li class="listitem">
            <p class="para">
             A BSON document (root or embedded) without a
             <span class="property">__pclass</span> property
             <a href="#fnidmongodb.pclass" name="fnmongodb.pclass"><sup>[1]</sup></a>
              
             
             becomes a PHP <strong class="classname">stdClass</strong> object, with each
             BSON document key set as a public <strong class="classname">stdClass</strong>
             property.
            </p>
           </li>
           <li class="listitem">
            <p class="para">
             A BSON document (root or embedded) with a
             <span class="property">__pclass</span> property <a href="#fnidmongodb.pclass"><sup>[1]</sup></a> becomes a PHP object of
             the class name as defined by the <span class="property">__pclass</span>
             property.
            </p>
            <p class="para">
             If the named class implements the
             <span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span> interface,
             then the properties of the BSON document, including the
             <span class="property">__pclass</span> property, are sent as an associative
             array to the
             <span class="methodname"><a href="#mongodb-bson-unserializable.bsonunserialize" class="methodname">MongoDB\BSON\Unserializable::bsonUnserialize()</a></span>
             function to initialise the object&#039;s properties.
            </p>
            <p class="para">
             If the named class does not exist or does not implement the
             <span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span> interface,
             <strong class="classname">stdClass</strong> will be used and each BSON document
             key (including <span class="property">__pclass</span>) will be set as a
             public <strong class="classname">stdClass</strong> property.
            </p>
            <p class="para">
             The <span class="property">__pclass</span> functionality relies on the
             property being part of a retrieved MongoDB document. If you use a
             <a href="#mongodb-driver-query.construct-queryOptions" class="link">projection</a>
             when querying for documents, you need to include the
             <span class="property">__pclass</span> field in the projection for this
             functionality to work.
            </p>
           </li>
          </ul>
         </p>
        </dd>
  
       
  
       
        <dt>
  <code class="literal">&quot;array&quot;</code></dt>
  
        <dd>
  
         <p class="para">
          Turns a BSON array or BSON document into a PHP array. There will be no
          special treatment of a <span class="property">__pclass</span> property <a href="#fnidmongodb.pclass"><sup>[1]</sup></a>,
          but it may be set as an element in the returned array if it was
          present in the BSON document.
         </p>
        </dd>
  
       
  
       
        <dt>
  <code class="literal">&quot;object&quot;</code> or <code class="literal">&quot;stdClass&quot;</code></dt>
  
        <dd>
  
         <p class="para">
          Turns a BSON array or BSON document into a
          <strong class="classname">stdClass</strong> object. There will be no special
          treatment of a <span class="property">__pclass</span> property <a href="#fnidmongodb.pclass"><sup>[1]</sup></a>, but it may
          be set as a public property in the returned object if it was present
          in the BSON document.
         </p>
        </dd>
  
       
  
       
        <dt>
  any other string</dt>
  
        <dd>
  
         <p class="para">
          Defines the class name that the BSON array or BSON object should be
          deserialized as. For BSON objects that include
          <span class="property">__pclass</span> properties, that class will take
          priority.
         </p>
  
         <p class="para">
          If the named class does not exist, is not concrete (i.e. it is
          abstract or an interface), or does not implement
          <span class="interfacename"><a href="#class.mongodb-bson-unserializable" class="interfacename">MongoDB\BSON\Unserializable</a></span> then an
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          exception is thrown.
         </p>
  
         <p class="para">
          If the BSON object has a <span class="property">__pclass</span> property and
          that class exists and implements
          <span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span> it will
          supersede the class provided in the type map.
         </p>
  
         <p class="para">
          The properties of the BSON document, <em class="emphasis">including</em>
          the <span class="property">__pclass</span> property if it exists, will be sent
          as an associative array to the
          <span class="methodname"><a href="#mongodb-bson-unserializable.bsonunserialize" class="methodname">MongoDB\BSON\Unserializable::bsonUnserialize()</a></span>
          function to initialise the object&#039;s properties.
         </p>
        </dd>
  
       
      </dl>
  
     </p>
  
     <div class="section" id="mongodb.persistence.typemaps">
      <h2 class="title">TypeMaps</h2>
  
       <p class="para">
        TypeMaps can be set through the
        <span class="methodname"><a href="#mongodb-driver-cursor.settypemap" class="methodname">MongoDB\Driver\Cursor::setTypeMap()</a></span> method on a
        <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> object, or the
        <code class="literal">$typeMap</code> argument of
        <span class="function"><a href="#function.mongodb.bson-tophp" class="function">MongoDB\BSON\toPHP()</a></span>. Each of the three
        classes (<em class="emphasis">root</em>, <em class="emphasis">document</em>, and
        <em class="emphasis">array</em>) can be individually set, in addition to the
        field specific types.
       </p>
  
       <p class="para">
        If the value in the map is <span class="type"><a href="#language.types.null" class="type NULL">NULL</a></span>, it means the same as the
        <em class="emphasis">default</em> value for that item.
       </p>
      </div>
  
      <div class="section">
       <h2 class="title">Examples</h2>
  
       <p class="para">
        These examples use the following classes:
       </p>
  
       <p class="para">
        <dl>
  
         
          <dt>
  MyClass</dt>
  
          <dd>
  
           <p class="para">
            which does <em class="emphasis">not</em> implement any interface
           </p>
          </dd>
  
         
         
          <dt>
  YourClass</dt>
  
          <dd>
  
           <p class="para">
            which implements
            <span class="interfacename"><a href="#class.mongodb-bson-unserializable" class="interfacename">MongoDB\BSON\Unserializable</a></span>
           </p>
          </dd>
  
         
         
          <dt>
  OurClass</dt>
  
          <dd>
  
           <p class="para">
            which implements
            <span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span>
           </p>
          </dd>
  
         
         
          <dt>
  TheirClass</dt>
  
          <dd>
  
           <p class="para">
            which extends OurClass
           </p>
          </dd>
  
         
        </dl>
  
       </p>
  
       <p class="para">
        The <span class="methodname"><a href="#mongodb-bson-unserializable.bsonunserialize" class="methodname">MongoDB\BSON\Unserializable::bsonUnserialize()</a></span>
        method of YourClass, OurClass, TheirClass iterate over the array and set
        the properties without modifications. It <em class="emphasis">also</em> sets
        the <code class="literal">$unserialized</code> property to <code class="literal">true</code>:
  
        <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">bsonUnserialize</span><span style="color: #007700">(&nbsp;array&nbsp;</span><span style="color: #0000BB">$map&nbsp;</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;</span><span style="color: #0000BB">$map&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">unserialized&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />}</span>
  </span>
  </code></div>
        </div>
  
       </p>
  
       <p class="para">
        <div class="example-contents">
  <div class="textcode"><pre class="textcode">/* typemap: [] (all defaults) */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;bar&quot; : false }
    -&gt; stdClass { $foo =&gt; &#039;yes&#039;, $bar =&gt; false }
  
  { &quot;foo&quot;: &quot;no&quot;, &quot;array&quot; : [ 5, 6 ] }
    -&gt; stdClass { $foo =&gt; &#039;no&#039;, $array =&gt; [ 5, 6 ] }
  
  { &quot;foo&quot;: &quot;no&quot;, &quot;obj&quot; : { &quot;embedded&quot; : 3.14 } }
    -&gt; stdClass { $foo =&gt; &#039;no&#039;, $obj =&gt; stdClass { $embedded =&gt; 3.14 } }
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot;: &quot;MyClass&quot; }
    -&gt; stdClass { $foo =&gt; &#039;yes&#039;, $__pclass =&gt; &#039;MyClass&#039; }
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot;: { &quot;$type&quot; : &quot;80&quot;, &quot;$binary&quot; : &quot;MyClass&quot; } }
    -&gt; stdClass { $foo =&gt; &#039;yes&#039;, $__pclass =&gt; Binary(0x80, &#039;MyClass&#039;) }
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot;: { &quot;$type&quot; : &quot;80&quot;, &quot;$binary&quot; : &quot;YourClass&quot;) }
    -&gt; stdClass { $foo =&gt; &#039;yes&#039;, $__pclass =&gt; Binary(0x80, &#039;YourClass&#039;) }
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot;: { &quot;$type&quot; : &quot;80&quot;, &quot;$binary&quot; : &quot;OurClass&quot;) }
    -&gt; OurClass { $foo =&gt; &#039;yes&#039;, $__pclass =&gt; Binary(0x80, &#039;OurClass&#039;), $unserialized =&gt; true }
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot;: { &quot;$type&quot; : &quot;44&quot;, &quot;$binary&quot; : &quot;YourClass&quot;) }
    -&gt; stdClass { $foo =&gt; &#039;yes&#039;, $__pclass =&gt; Binary(0x44, &#039;YourClass&#039;) }</pre>
  </div>
        </div>
  
       </p>
  
       <p class="para">
        <div class="example-contents">
  <div class="textcode"><pre class="textcode">/* typemap: [ &quot;root&quot; =&gt; &quot;MissingClass&quot; ] */
  { &quot;foo&quot;: &quot;yes&quot; }
    -&gt; MongoDB\Driver\Exception\InvalidArgumentException(&quot;MissingClass does not exist&quot;)
  
  /* typemap: [ &quot;root&quot; =&gt; &quot;MyClass&quot; ] */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;MyClass&quot; } }
    -&gt; MongoDB\Driver\Exception\InvalidArgumentException(&quot;MyClass does not implement Unserializable interface&quot;)
  
  /* typemap: [ &quot;root&quot; =&gt; &quot;MongoDB\BSON\Unserializable&quot; ] */
  { &quot;foo&quot;: &quot;yes&quot; }
    -&gt; MongoDB\Driver\Exception\InvalidArgumentException(&quot;Unserializable is not a concrete class&quot;)
  
  /* typemap: [ &quot;root&quot; =&gt; &quot;YourClass&quot; ] */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;MongoDB\BSON\Unserializable&quot; } }
    -&gt; YourClass { $foo =&gt; &quot;yes&quot;, $__pclass =&gt; Binary(0x80, &quot;MongoDB\BSON\Unserializable&quot;), $unserialized =&gt; true }
  
  /* typemap: [ &quot;root&quot; =&gt; &quot;YourClass&quot; ] */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;MyClass&quot; } }
    -&gt; YourClass { $foo =&gt; &quot;yes&quot;, $__pclass =&gt; Binary(0x80, &quot;MyClass&quot;), $unserialized =&gt; true }
  
  /* typemap: [ &quot;root&quot; =&gt; &quot;YourClass&quot; ] */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;OurClass&quot; } }
    -&gt; OurClass { $foo =&gt; &quot;yes&quot;, $__pclass =&gt; Binary(0x80, &quot;OurClass&quot;), $unserialized =&gt; true }
  
  /* typemap: [ &quot;root&quot; =&gt; &quot;YourClass&quot; ] */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;TheirClass&quot; } }
    -&gt; TheirClass { $foo =&gt; &quot;yes&quot;, $__pclass =&gt; Binary(0x80, &quot;TheirClass&quot;), $unserialized =&gt; true }
  
  /* typemap: [ &quot;root&quot; =&gt; &quot;OurClass&quot; ] */
  { foo: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;TheirClass&quot; } }
    -&gt; TheirClass { $foo =&gt; &quot;yes&quot;, $__pclass =&gt; Binary(0x80, &quot;TheirClass&quot;), $unserialized =&gt; true }</pre>
  </div>
        </div>
  
       </p>
  
       <p class="para">
        <div class="example-contents">
  <div class="textcode"><pre class="textcode">/* typemap: [ &#039;root&#039; =&gt; &#039;YourClass&#039; ] */
  { foo: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;YourClass&quot; } }
    -&gt; YourClass { $foo =&gt; &#039;yes&#039;, $__pclass =&gt; Binary(0x80, &#039;YourClass&#039;), $unserialized =&gt; true }</pre>
  </div>
        </div>
  
       </p>
  
       <p class="para">
        <div class="example-contents">
  <div class="textcode"><pre class="textcode">/* typemap: [ &#039;root&#039; =&gt; &#039;array&#039;, &#039;document&#039; =&gt; &#039;array&#039; ] */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;bar&quot; : false }
    -&gt; [ &quot;foo&quot; =&gt; &quot;yes&quot;, &quot;bar&quot; =&gt; false ]
  
  { &quot;foo&quot;: &quot;no&quot;, &quot;array&quot; : [ 5, 6 ] }
    -&gt; [ &quot;foo&quot; =&gt; &quot;no&quot;, &quot;array&quot; =&gt; [ 5, 6 ] ]
  
  { &quot;foo&quot;: &quot;no&quot;, &quot;obj&quot; : { &quot;embedded&quot; : 3.14 } }
    -&gt; [ &quot;foo&quot; =&gt; &quot;no&quot;, &quot;obj&quot; =&gt; [ &quot;embedded =&gt; 3.14 ] ]
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot;: &quot;MyClass&quot; }
    -&gt; [ &quot;foo&quot; =&gt; &quot;yes&quot;, &quot;__pclass&quot; =&gt; &quot;MyClass&quot; ]
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;MyClass&quot; } }
    -&gt; [ &quot;foo&quot; =&gt; &quot;yes&quot;, &quot;__pclass&quot; =&gt; Binary(0x80, &quot;MyClass&quot;) ]
  
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot; : { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;OurClass&quot; } }
    -&gt; [ &quot;foo&quot; =&gt; &quot;yes&quot;, &quot;__pclass&quot; =&gt; Binary(0x80, &quot;OurClass&quot;) ]</pre>
  </div>
        </div>
  
       </p>
  
       <p class="para">
        <div class="example-contents">
  <div class="textcode"><pre class="textcode">/* typemap: [ &#039;root&#039; =&gt; &#039;object&#039;, &#039;document&#039; =&gt; &#039;object&#039; ] */
  { &quot;foo&quot;: &quot;yes&quot;, &quot;__pclass&quot;: { &quot;$type&quot;: &quot;80&quot;, &quot;$binary&quot;: &quot;MyClass&quot; } }
    -&gt; stdClass { $foo =&gt; &quot;yes&quot;, &quot;__pclass&quot; =&gt; Binary(0x80, &quot;MyClass&quot;) }</pre>
  </div>
        </div>
  
       </p>
  
     </div>
    </div>
  <hr />
  
  
   </div>
  
  <hr />
  
  <ul class="chunklist chunklist_book"><li><a href="#mongodb.overview">Architecture</a> — Architecture Overview</li><li><a href="#mongodb.connection-handling">Connections</a> — Connection handling and persistence</li><li><a href="#mongodb.persistence">Persisting Data</a> — Serialization and deserialization of PHP variables into MongoDB<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb.persistence.serialization">Serialization to BSON</a></li><li><a href="#mongodb.persistence.deserialization">Deserialization from BSON</a></li></ul></li></ul></div>
  <hr />
  
  
  
  
    
  
  
  <div id="mongodb.security" class="book"><hr />
   <h1 class="title">Security</h1>
  
   <div id="mongodb.security.request_injection" class="article"><hr />
    <h1>Request Injection Attacks</h1>
  
    <p class="para">
     If you are passing <code class="literal">$_GET</code> (or <code class="literal">$_POST</code>)
     parameters to your queries, make sure that they are cast to strings first.
     Users can insert associative arrays in GET and POST requests, which could
     then become unwanted $-queries.
    </p>
  
    <p class="para">
     A fairly innocuous example: suppose you are looking up a user&#039;s information
     with the request <em class="emphasis">http://www.example.com?username=bob</em>.
     Your application creates the query
     <code class="literal">$q = new \MongoDB\Driver\Query( [ &#039;username&#039; =&gt; $_GET[&#039;username&#039;] ])</code>.
    </p>
  
    <p class="para">
     Someone could subvert this by getting
     <em class="emphasis">http://www.example.com?username[$ne]=foo</em>, which PHP
     will magically turn into an associative array, turning your query into
     <code class="literal">$q = new \MongoDB\Driver\Query( [ &#039;username&#039; =&gt; [ &#039;$ne&#039; =&gt; &#039;foo&#039; ] ] )</code>,
     which will return all users not named &quot;foo&quot; (all of your users, probably).
    </p>
  
    <p class="para">
     This is a fairly easy attack to defend against: make sure $_GET and $_POST
     parameters are the type you expect before you send them to the database.
     PHP has the <span class="function"><a href="#function.filter-var" class="function">filter_var()</a></span> function to assist with this.
    </p>
  
    <p class="para">
     Note that this type of attack can be used with any database interaction that
     locates a document, including updates, upserts, deletes, and findAndModify
     commands.
    </p>
  
    <p class="para">
     See <a href="https://docs.mongodb.com/manual/security/" class="link external">&raquo;&nbsp;the main documentation</a>
     for more information about SQL-injection-like issues with MongoDB.
    </p>
   </div>
  
  <hr />
  
  
   <div id="mongodb.security.script_injection" class="article"><hr />
    <h1>Script Injection Attacks</h1>
  
    <p class="para">
     If you are using JavaScript, make sure that any variables that cross the PHP-
     to-JavaScript boundry are passed in the <code class="literal">scope</code> field of
     <a href="#class.mongodb-bson-javascript" class="classname">MongoDB\BSON\Javascript</a>, not interpolated into the
     JavaScript string. This can come up when using <code class="literal">$where</code>
     clauses in queries, mapReduce and group commands, and any other time you may
     pass JavaScript into the database.
    </p>
    <p class="para">
     For example, suppose we have some JavaScript to greet a user in the database
     logs.  We could do:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Don't&nbsp;do&nbsp;this!!!<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'field'</span><span style="color: #007700">];&nbsp;<br /><br /></span><span style="color: #0000BB">$cmd&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'eval'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"print('Hello,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">!');"<br /></span><span style="color: #007700">]&nbsp;);<br /><br /></span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'dramio'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cmd&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     However, what if a malicious user passes in some JavaScript?
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Don't&nbsp;do&nbsp;this!!!<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'field'</span><span style="color: #007700">];&nbsp;<br /></span><span style="color: #FF8000">//&nbsp;$username&nbsp;is&nbsp;set&nbsp;to&nbsp;"');&nbsp;db.users.drop();&nbsp;print('"<br /><br /></span><span style="color: #0000BB">$cmd&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'eval'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"print('Hello,&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">!');"<br /></span><span style="color: #007700">]&nbsp;);<br /><br /></span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'dramio'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cmd&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     Now MongoDB executes the JavaScript string
     <code class="literal">&quot;print(&#039;Hello, &#039;); db.users.drop(); print(&#039;!&#039;);&quot;</code>.
     This attack is easy to avoid: use <code class="literal">args</code> to pass
     variables from PHP to JavaScript:
    </p>
    <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'field'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'derick'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$args&nbsp;</span><span style="color: #007700">=&nbsp;[&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'field'</span><span style="color: #007700">]&nbsp;];<br /><br /></span><span style="color: #0000BB">$cmd&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'eval'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"function&nbsp;greet(username)&nbsp;{&nbsp;print('Hello,&nbsp;'&nbsp;+&nbsp;username&nbsp;+&nbsp;'!');&nbsp;}"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'args'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$args</span><span style="color: #007700">,<br />]&nbsp;);<br /><br /></span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'dramio'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cmd&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
    </div>
  
    <p class="para">
     This adds an argument to the JavaScript scope, which gets used as argument
     for the <code class="literal">greet</code> function. Now if
     someone tries to send malicious code, MongoDB will harmlessly print
     <code class="literal">Hello, &#039;); db.dropDatabase(); print(&#039;!</code>.
    </p>
  
    <p class="para">
     Using arguments helps to prevent malicious input from being executed by the
     database.  However, you must make sure that your code does not turn around
     and execute the input anyway! It is best to avoid executing
     <em class="emphasis">any</em> JavaScript on the server in the first place.
    </p>
  
    <p class="para">
     You are strongly recommended to stay clear of the <a href="https://docs.mongodb.com/manual/reference/operator/query/where/#considerations" class="link external">&raquo;&nbsp;$where
     clause</a> with queries, as it impacts performance significantly. Where
     possible, use either normal query operators, or the <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline" class="link external">&raquo;&nbsp;Aggregation
     Framework</a>.
    </p>
  
    <p class="para">
     As alternative to <a href="https://docs.mongodb.com/manual/core/map-reduce/" class="link external">&raquo;&nbsp;MapReduce</a>, which uses
     JavaScript, consider using the <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline" class="link external">&raquo;&nbsp;Aggregation
     Framework</a>. Unlike Map/Reduce, it uses an idiomatic language to
     construct queries, without having to write, and use, the slower JavaScript
     approach that Map/Reduce requires.
    </p>
  
    <p class="para">
     The <a href="https://docs.mongodb.com/manual/reference/command/eval/" class="link external">&raquo;&nbsp;eval command</a>
     has been deprecated since MongoDB 3.0, and should also be avoided.
    </p>
   </div>
  
  <hr />
  
  <ul class="chunklist chunklist_book"><li><a href="#mongodb.security.request_injection">Request Injection Attacks</a></li><li><a href="#mongodb.security.script_injection">Script Injection Attacks</a></li></ul></div>
  <hr />
  
  
  
  
  
  
    
  
  
   <div id="book.mongodb" class="book"><hr />
    <h1 class="title">MongoDB driver classes</h1>
    
  
    
   
  
  <div id="class.mongodb-driver-manager" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Manager class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-manager.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Manager</strong> is the main entry point
      to the extension. It is responsible for maintaining connections to MongoDB
      (be it standalone server, replica set, or sharded cluster).
     </p>
     <p class="para">
      No connection to MongoDB is made upon instantiating the Manager.
      This means the <strong class="classname">MongoDB\Driver\Manager</strong> can always be
      constructed, even though one or more MongoDB servers are down.
     </p>
     <p class="para">
      Any write or query can throw connection exceptions as connections are created lazily.
      A MongoDB server may also become unavailable during the life time of the script.
      It is therefore important that all actions on the Manager to be wrapped in try/catch statements.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-manager.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Manager</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$uri</code><span class="initializer"> = &quot;mongodb://127.0.0.1/&quot;</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$uriOptions</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$driverOptions</code><span class="initializer"> = array()</span></span>
    ]]] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.createclientencryption" class="methodname">createClientEncryption</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
     ) : <span class="type"><a href="#class.mongodb-driver-clientencryption" class="type MongoDB\Driver\ClientEncryption">MongoDB\Driver\ClientEncryption</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname">executeBulkWrite</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-bulkwrite" class="type MongoDB\Driver\BulkWrite">MongoDB\Driver\BulkWrite</a></span> <code class="parameter">$bulk</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.executecommand" class="methodname">executeCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.executequery" class="methodname">executeQuery</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-query" class="type MongoDB\Driver\Query">MongoDB\Driver\Query</a></span> <code class="parameter">$query</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.executereadcommand" class="methodname">executeReadCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.executereadwritecommand" class="methodname">executeReadWriteCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.executewritecommand" class="methodname">executeWriteCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.getreadconcern" class="methodname">getReadConcern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-readconcern" class="type MongoDB\Driver\ReadConcern">MongoDB\Driver\ReadConcern</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.getreadpreference" class="methodname">getReadPreference</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-readpreference" class="type MongoDB\Driver\ReadPreference">MongoDB\Driver\ReadPreference</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.getservers" class="methodname">getServers</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.getwriteconcern" class="methodname">getWriteConcern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-writeconcern" class="type MongoDB\Driver\WriteConcern">MongoDB\Driver\WriteConcern</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.selectserver" class="methodname">selectServer</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-readpreference" class="type MongoDB\Driver\ReadPreference">MongoDB\Driver\ReadPreference</a></span> <code class="parameter">$readPreference</code></span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname">startSession</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-session" class="type MongoDB\Driver\Session">MongoDB\Driver\Session</a></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section" id="mongodb-driver-manager.examples">
     <h2 class="title">Examples</h2>
  
     <div class="example" id="mongowritebatch.example.basic">
      <p><strong>Example #1 <span class="function"><a href="#mongodb-driver-manager.construct" class="function">MongoDB\Driver\Manager::__construct()</a></span> basic example</strong></p>
      <div class="example-contents"><p>
       <span class="function"><a href="#function.var-dump" class="function">var_dump()</a></span>ing a
       <strong class="classname">MongoDB\Driver\Manager</strong> will print out various
       details about the manager that are otherwise not normally exposed.
       This can be useful to debug how the driver views your MongoDB setup, and 
       which options are used.
      </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\Manager)#1 (3) {
    [&quot;request_id&quot;]=&gt;
    int(1714636915)
    [&quot;uri&quot;]=&gt;
    string(25) &quot;mongodb://localhost:27017&quot;
    [&quot;cluster&quot;]=&gt;
    array(13) {
      [&quot;mode&quot;]=&gt;
      string(6) &quot;direct&quot;
      [&quot;state&quot;]=&gt;
      string(4) &quot;born&quot;
      [&quot;request_id&quot;]=&gt;
      int(0)
      [&quot;sockettimeoutms&quot;]=&gt;
      int(300000)
      [&quot;last_reconnect&quot;]=&gt;
      int(0)
      [&quot;uri&quot;]=&gt;
      string(25) &quot;mongodb://localhost:27017&quot;
      [&quot;requires_auth&quot;]=&gt;
      int(0)
      [&quot;nodes&quot;]=&gt;
      array(...)
      [&quot;max_bson_size&quot;]=&gt;
      int(16777216)
      [&quot;max_msg_size&quot;]=&gt;
      int(50331648)
      [&quot;sec_latency_ms&quot;]=&gt;
      int(15)
      [&quot;peers&quot;]=&gt;
      array(0) {
      }
      [&quot;replSet&quot;]=&gt;
      NULL
    }
  }
  </pre></div>
      </div>
     </div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-driver-manager.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::__construct</span> &mdash; <span class="dc-title">Create new MongoDB Manager</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$uri</code><span class="initializer"> = &quot;mongodb://127.0.0.1/&quot;</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$uriOptions</code><span class="initializer"> = array()</span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$driverOptions</code><span class="initializer"> = array()</span></span>
    ]]] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a> object with the specified options.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Per the <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#single-threaded-client-construction" class="link external">&raquo;&nbsp;Server Discovery and Monitoring Specification</a>,
      this constructor performs no I/O. Connections will be initialized on demand,
      when the first operation is executed.
     </span>
    </p></blockquote>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      When specifying any SSL or TLS URI options via the connection string or
      <code class="parameter">uriOptions</code> parameter, the driver will implicitly
      enable TLS for its connections. To avoid this, either explicitly disable the
      <code class="literal">tls</code> option or don&#039;t specify any TLS options.
     </span>
    </p></blockquote>
    
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       On Unix platforms, the MongoDB driver is sensitive to scripts that use the
       fork() system call without also calling exec(). Users are advised not to
       re-use <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a> instances in a forked
       child process.
      </span>
     </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt id="mongodb-driver-manager.construct-uri"><code class="parameter">uri</code></dt>
  
      <dd>
  
       <p class="para">
        A <a href="https://docs.mongodb.com/manual/reference/connection-string/" class="link external">&raquo;&nbsp;mongodb://</a> connection URI:
        <div class="example-contents">
  <div class="txtcode"><pre class="txtcode">mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[defaultAuthDb][?options]]</pre>
  </div>
        </div>
  
       </p>
       <p class="para">
        For details on supported URI options, see
        <a href="https://docs.mongodb.com/manual/reference/connection-string/#connections-connection-options" class="link external">&raquo;&nbsp;Connection String Options</a>
        in the MongoDB manual.
        <a href="https://docs.mongodb.com/manual/reference/connection-string/#connection-pool-options" class="link external">&raquo;&nbsp;Connection pool options</a>
        are not supported, as the PHP driver does not implement connection pools.
       </p>
       <p class="para">
        The <code class="parameter">uri</code> is a URL, hence any special characters in
        its components need to be URL encoded according to
        <a href="http://www.faqs.org/rfcs/rfc3986" class="link external">&raquo;&nbsp;RFC 3986</a>. This is particularly
        relevant to the username and password, which can often include special
        characters such as <code class="literal">@</code>, <code class="literal">:</code>, or
        <code class="literal">%</code>. When connecting via a Unix domain socket, the socket
        path may contain special characters such as slashes and must be encoded.
        The <span class="function"><a href="#function.rawurlencode" class="function">rawurlencode()</a></span> function may be used to encode
        constituent parts of the URI.
       </p>
       <p class="para">
        The <code class="literal">defaultAuthDb</code> component may be used to specify the
        database name associated with the user&#039;s credentials; however the
        <code class="literal">authSource</code> URI option will take priority if specified.
        If neither <code class="literal">defaultAuthDb</code> nor
        <code class="literal">authSource</code> are specified, the <code class="literal">admin</code>
        database will be used by default. The <code class="literal">defaultAuthDb</code>
        component has no effect in the absence of user credentials.
       </p>
      </dd>
  
     
     
      <dt id="mongodb-driver-manager.construct-urioptions"><code class="parameter">uriOptions</code></dt>
  
      <dd>
  
       <p class="para">
        Additional
        <a href="https://docs.mongodb.com/manual/reference/connection-string/#connections-connection-options" class="link external">&raquo;&nbsp;connection string options</a>,
        which will overwrite any options with the same name in the
        <code class="parameter">uri</code> parameter.
       </p>
       <p class="para">
        <table class="doctable table">
         <caption><strong>uriOptions</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>appname</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              MongoDB 3.4+ has the ability to annotate connections with metadata
              provided by the connecting client. This metadata is included in the
              server&#039;s logs upon establishing a connection and also recorded in
              slow query logs when database profiling is enabled.
             </p>
             <p class="para">
              This option may be used to specify an application name, which will
              be included in the metadata. The value cannot exceed 128 characters
              in length.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>authMechanism</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              The authentication mechanism that MongoDB will use to authenticate
              the connection. For additional details and a list of supported
              values, see
              <a href="https://docs.mongodb.com/manual/reference/connection-string/#urioption.authMechanism" class="link external">&raquo;&nbsp;Authentication Options</a>
              in the MongoDB manual.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>authMechanismProperties</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              Properties for the selected authentication mechanism. For additional
              details and a list of supported properties, see the
              <a href="https://github.com/mongodb/specifications/blob/master/source/auth/auth.rst#auth-related-options" class="link external">&raquo;&nbsp;Driver Authentication Specification</a>.
             </p>
             <blockquote class="note"><p><strong class="note">Note</strong>: 
              <span class="simpara">
               When not specified in the URI string, this option is expressed as
               an array of key/value pairs. The keys and values in this array
               should be strings.
              </span>
             </p></blockquote>
            </td>
           </tr>
  
           <tr>
            <td>authSource</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              The database name associated with the user&#039;s credentials. Defaults
              to the database component of the connection URI, or the
              <code class="literal">admin</code> database if both are unspecified.
             </p>
             <p class="para">
              For authentication mechanisms that delegate credential storage to
              other services (e.g. GSSAPI), this should be
              <code class="literal">&quot;$external&quot;</code>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>canonicalizeHostname</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              If <strong><code>TRUE</code></strong>, the driver will resolve the real hostname for the server
              IP address before authenticating via SASL. Some underlying GSSAPI
              layers already do this, but the functionality may be disabled in
              their config (e.g. <code class="literal">krb.conf</code>). Defaults to
              <strong><code>FALSE</code></strong>.
             </p>
             <p class="para">
              This option is a deprecated alias for the
              <code class="literal">&quot;CANONICALIZE_HOST_NAME&quot;</code> property of the
              <code class="literal">&quot;authMechanismProperties&quot;</code> URI option.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>compressors</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              A prioritized, comma-delimited list of compressors that the client
              wants to use. Messages are only compressed if the client and server
              share any compressors in common, and the compressor used in each
              direction will depend on the individual configuration of the server
              or driver. See the
              <a href="https://github.com/mongodb/specifications/blob/master/source/compression/OP_COMPRESSED.rst#compressors" class="link external">&raquo;&nbsp;Driver Compression Specification</a>
              for more information.
             </p>
            </td>
           </tr>
  
           <tr id="mongodb-driver-manager.construct-urioptions.connecttimeoutms">
            <td>connectTimeoutMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              The time in milliseconds to attempt a connection before timing out.
              Defaults to 10,000 milliseconds.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>directConnection</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              This option can be used to control replica set discovery behavior
              when only a single host is provided in the connection string. By
              default, providing a single member in the connection string will
              establish a direct connection or discover additional members
              depending on whether the <code class="literal">&quot;replicaSet&quot;</code> URI option
              is omitted or present, respectively. Specify <strong><code>FALSE</code></strong> to force
              discovery to occur (if <code class="literal">&quot;replicaSet&quot;</code> is omitted)
              or specify <strong><code>TRUE</code></strong> to force a direct connection (if
              <code class="literal">&quot;replicaSet&quot;</code> is present).
             </p>
            </td>
           </tr>
  
           <tr>
            <td>gssapiServiceName</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Set the Kerberos service name when connecting to Kerberized MongoDB
              instances. This value must match the service name set on MongoDB
              instances (i.e.
              <a href="https://docs.mongodb.com/manual/reference/parameters/#param.saslServiceName" class="link external">&raquo;&nbsp;saslServiceName</a>
              server parameter). Defaults to <code class="literal">&quot;mongodb&quot;</code>.
             </p>
             <p class="para">
              This option is a deprecated alias for the
              <code class="literal">&quot;SERVICE_NAME&quot;</code> property of the
              <code class="literal">&quot;authMechanismProperties&quot;</code> URI option.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>heartbeatFrequencyMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              Specifies the interval in milliseconds between the driver&#039;s checks
              of the MongoDB topology, counted from the end of the previous check
              until the beginning of the next one. Defaults to 60,000
              milliseconds.
             </p>
             <p class="para">
              Per the
              <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#heartbeatfrequencyms" class="link external">&raquo;&nbsp;Server Discovery and Monitoring Specification</a>,
              this value cannot be less than 500 milliseconds.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>journal</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Corresponds to the default write concern&#039;s
              <code class="parameter">journal</code> parameter. If <strong><code>TRUE</code></strong>, writes will
              require acknowledgement from MongoDB that the operation has been
              written to the journal. For details, see
              <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>localThresholdMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              The size in milliseconds of the latency window for selecting among
              multiple suitable MongoDB instances while resolving a read
              preference. Defaults to 15 milliseconds.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>maxStalenessSeconds</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              Corresponds to the read preference&#039;s
              <code class="literal">&quot;maxStalenessSeconds&quot;</code>. Specifies, in seconds, how
              stale a secondary can be before the client stops using it for read
              operations. By default, there is no maximum staleness and clients
              will not consider a secondary’s lag when choosing where to direct a
              read operation. For details, see
              <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>.
             </p>
             <p class="para">
              If specified, the max staleness must be a signed 32-bit integer
              greater than or equal to
              <strong><code>MongoDB\Driver\ReadPreference::SMALLEST_MAX_STALENESS_SECONDS</code></strong>
              (i.e. 90 seconds).
             </p>
            </td>
           </tr>
  
           <tr>
            <td>password</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             The password for the user being authenticated. This option is useful
             if the password contains special characters, which would otherwise
             need to be URL encoded for the connection URI.
            </td>
           </tr>
  
           <tr>
            <td>readConcernLevel</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             Corresponds to the read concern&#039;s <code class="parameter">level</code>
             parameter. Specifies the level of read isolation. For details, see
             <a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a>.
            </td>
           </tr>
  
           <tr>
            <td>readPreference</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Corresponds to the read preference&#039;s <code class="parameter">mode</code>
              parameter. Defaults to <code class="literal">&quot;primary&quot;</code>. For details,
              see <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>readPreferenceTags</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              Corresponds to the read preference&#039;s <code class="parameter">tagSets</code>
              parameter. Tag sets allow you to target read operations to specific
              members of a replica set. For details, see
              <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>.
             </p>
             <blockquote class="note"><p><strong class="note">Note</strong>: 
              <span class="simpara">
               When not specified in the URI string, this option is expressed as
               an array consistent with the format expected by
               <span class="function"><a href="#mongodb-driver-readpreference.construct" class="function">MongoDB\Driver\ReadPreference::__construct()</a></span>.
              </span>
             </p></blockquote>
            </td>
           </tr>
  
           <tr>
            <td>replicaSet</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Specifies the name of the replica set.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>retryReads</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Specifies whether or not the driver should automatically retry
              certain read operations that fail due to transient network errors
              or replica set elections. This functionality requires MongoDB 3.6+.
              Defaults to <strong><code>TRUE</code></strong>.
             </p>
             <p class="para">
              See the
              <a href="https://github.com/mongodb/specifications/blob/master/source/retryable-reads/retryable-reads.rst" class="link external">&raquo;&nbsp;Retryable Reads Specification</a>
              for more information.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>retryWrites</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Specifies whether or not the driver should automatically retry
              certain write operations that fail due to transient network errors
              or replica set elections. This functionality requires MongoDB 3.6+.
              Defaults to <strong><code>TRUE</code></strong>.
             </p>
             <p class="para">
              See
              <a href="https://docs.mongodb.com/manual/core/retryable-writes/" class="link external">&raquo;&nbsp;Retryable Writes</a>
              in the MongoDB manual for more information.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>safe</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              If <strong><code>TRUE</code></strong>, specifies <code class="literal">1</code> for the default write
              concern&#039;s <code class="parameter">w</code> parameter. If <strong><code>FALSE</code></strong>,
              <code class="literal">0</code> is specified. For details, see
              <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>.
             </p>
             <p class="para">
              This option is deprecated and should not be used.
             </p>
            </td>
           </tr>
  
           <tr id="mongodb-driver-manager.construct-urioptions.serverselectiontimeoutms">
            <td>serverSelectionTimeoutMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              Specifies how long in milliseconds to block for server selection
              before throwing an exception. Defaults to 30,000 milliseconds.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>serverSelectionTryOnce</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              When <strong><code>TRUE</code></strong>, instructs the driver to scan the MongoDB deployment
              exactly once after server selection fails and then either select a
              server or raise an error. When <strong><code>FALSE</code></strong>, the driver blocks and
              searches for a server up to the
              <code class="literal">&quot;serverSelectionTimeoutMS&quot;</code> value. Defaults to
              <strong><code>TRUE</code></strong>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>slaveOk</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Specifies <code class="literal">&quot;secondaryPreferred&quot;</code> for the read
              preference mode if <strong><code>TRUE</code></strong>. For details, see
              <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>.
             </p>
             <p class="para">
              This option is deprecated and should not be used.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>socketCheckIntervalMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              If a socket has not been used recently, the driver must check it via
              an <code class="literal">isMaster</code> command before using it for any
              operation. Defaults to 5,000 milliseconds.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>socketTimeoutMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              The time in milliseconds to attempt a send or receive on a socket
              before timing out. Defaults to 300,000 milliseconds (i.e. five
              minutes).
             </p>
            </td>
           </tr>
  
           <tr>
            <td>ssl</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Initiates the connection with TLS/SSL if <strong><code>TRUE</code></strong>. Defaults to
              <strong><code>FALSE</code></strong>.
             </p>
             <p class="para">
              This option is a deprecated alias for the <code class="literal">&quot;tls&quot;</code>
              URI option.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tls</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Initiates the connection with TLS/SSL if <strong><code>TRUE</code></strong>. Defaults to
              <strong><code>FALSE</code></strong>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tlsAllowInvalidCertificates</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Specifies whether or not the driver should error when the server&#039;s
              TLS certificate is invalid. Defaults to <strong><code>FALSE</code></strong>.
             </p>
             <div class="warning"><strong class="warning">Warning</strong>
              <p class="simpara">
               Disabling certificate validation creates a vulnerability.
              </p>
             </div>
            </td>
           </tr>
  
           <tr>
            <td>tlsAllowInvalidHostnames</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Specifies whether or not the driver should error when there is a
              mismatch between the server&#039;s hostname and the hostname specified by
              the TLS certificate. Defaults to <strong><code>FALSE</code></strong>.
             </p>
             <div class="warning"><strong class="warning">Warning</strong>
              <p class="simpara">
               Disabling certificate validation creates a vulnerability. Allowing
               invalid hostnames may expose the driver to a
               <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" class="link external">&raquo;&nbsp;man-in-the-middle attack</a>.
              </p>
             </div>
            </td>
           </tr>
  
           <tr>
            <td>tlsCAFile</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Path to file with either a single or bundle of certificate
              authorities to be considered trusted when making a TLS connection.
              The system certificate store will be used by default.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tlsCertificateKeyFile</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Path to the client certificate file or the client private key file;
              in the case that they both are needed, the files should be
              concatenated.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tlsCertificateKeyFilePassword</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Password to decrypt the client private key (i.e.
              <code class="literal">&quot;tlsCertificateKeyFile&quot;</code> URI option) to be used
              for TLS connections.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tlsDisableCertificateRevocationCheck</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              If <strong><code>TRUE</code></strong>, the driver will not attempt to check certificate
              revocation status (e.g. OCSP, CRL). Defaults to <strong><code>FALSE</code></strong>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tlsDisableOCSPEndpointCheck</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              If <strong><code>TRUE</code></strong>, the driver will not attempt to contact an OCSP responder
              endpoint if needed (i.e. an OCSP response is not stapled). Defaults
              to <strong><code>FALSE</code></strong>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tlsInsecure</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Relax TLS constraints as much as possible. Specifying <strong><code>TRUE</code></strong> for
              this option has the same effect as specifying <strong><code>TRUE</code></strong> for both the
              <code class="literal">&quot;tlsAllowInvalidCertificates&quot;</code> and
              <code class="literal">&quot;tlsAllowInvalidHostnames&quot;</code> URI options. Defaults
              to <strong><code>FALSE</code></strong>.
             </p>
             <div class="warning"><strong class="warning">Warning</strong>
              <p class="simpara">
               Disabling certificate validation creates a vulnerability. Allowing
               invalid hostnames may expose the driver to a
               <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" class="link external">&raquo;&nbsp;man-in-the-middle attack</a>.
              </p>
             </div>
            </td>
           </tr>
  
           <tr>
            <td>username</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             The username for the user being authenticated. This option is useful
             if the username contains special characters, which would otherwise
             need to be URL encoded for the connection URI.
            </td>
           </tr>
  
           <tr>
            <td>w</td>
            <td><span class="type"><span class="type integer|string">integer|string</span></span></td>
            <td>
             <p class="para">
              Corresponds to the default write concern&#039;s <code class="parameter">w</code>
              parameter. For details, see
              <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>wTimeoutMS</td>
            <td><span class="type"><span class="type integer|string">integer|string</span></span></td>
            <td>
             <p class="para">
              Corresponds to the default write concern&#039;s
              <code class="parameter">wtimeout</code> parameter. Specifies a time limit,
              in milliseconds, for the write concern. For details, see
              <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>.
             </p>
             <p class="para">
              If specified, <code class="literal">wTimeoutMS</code> must be a signed 32-bit
              integer greater than or equal to zero.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>zlibCompressionLevel</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              Specifies the compression level to use for the zlib compressor. This
              option has no effect if <code class="literal">zlib</code> is not included in
              the <code class="literal">&quot;compressors&quot;</code> URI option. See the
              <a href="https://github.com/mongodb/specifications/blob/master/source/compression/OP_COMPRESSED.rst#zlibcompressionlevel" class="link external">&raquo;&nbsp;Driver Compression Specification</a>
              for more information.
             </p>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
     
      <dt id="mongodb-driver-manager.construct-driveroptions"><code class="parameter">driverOptions</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>driverOptions</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>allow_invalid_hostname</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Disables hostname validation if <strong><code>TRUE</code></strong>. Defaults to <strong><code>FALSE</code></strong>.
             </p>
             <p class="para">
              Allowing invalid hostnames may expose the driver to a
              <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" class="link external">&raquo;&nbsp;man-in-the-middle attack</a>.
             </p>
             <p class="para">
              This option is a deprecated alias for the
              <code class="literal">&quot;tlsAllowInvalidHostnames&quot;</code> URI option.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>autoEncryption</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              Provides options to enable automatic client-side field level encryption.
              The following options are supported:
  
              <table class="doctable table">
               <caption><strong>Options for automatic encryption</strong></caption>
               
                <thead>
                 <tr>
                  <th>Option</th>
                  <th>Type</th>
                  <th>Description</th>
                 </tr>
  
                </thead>
  
                <tbody class="tbody">
                 
           <tr>
            <td>keyVaultClient</td>
            <td><a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a></td>
            <td>The Manager used to route data key queries to a separate MongoDB cluster. By default, the current Manager and cluster is used.</td>
           </tr>
  
  
                 
           <tr>
            <td>keyVaultNamespace</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>A fully qualified namespace (e.g. <code class="literal">&quot;databaseName.collectionName&quot;</code>) denoting the collection that contains all data keys used for encryption and decryption.</td>
           </tr>
  
  
                 
           <tr>
            <td>kmsProviders</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              A document containing the configuration for one or more KMS providers, which are used to encrypt data keys. Currently <code class="literal">aws</code> or <code class="literal">local</code>are supported and at least one must be specified.
             </p>
             <p class="para">
              The format for <code class="literal">aws</code> is as follows:
             </p>
             <div class="example-contents">
  <div class="javascriptcode"><pre class="javascriptcode">aws: {
      accessKeyId: &lt;string&gt;,
      secretAccessKey: &lt;string&gt;
  }</pre>
  </div>
             </div>
  
             <p class="para">
              The format for <code class="literal">local</code> is as follows:
             </p>
             <div class="example-contents">
  <div class="javascriptcode"><pre class="javascriptcode">local: {
      // The master key used to encrypt/decrypt data keys
      key: &lt;96-byte MongoDB\BSON\Binary with subtype 0&gt;
  }</pre>
  </div>
             </div>
  
            </td>
           </tr>
  
  
                 <tr>
                  <td>schemaMap</td>
                  <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
                  <td>
                   <p class="para">
                    Allows specifying a local JSON schema that is used to configure encryption.
                   </p>
                   <blockquote class="note"><p><strong class="note">Note</strong>: 
                    <span class="simpara">
                     Supplying a <code class="literal">schemaMap</code> provides more
                     security than relying on JSON schemas obtained from the
                     server. It protects against a malicious server advertising a
                     false JSON schema, which could trick the client into sending
                     unencrypted data that should be encrypted.
                    </span>
                   </p></blockquote>
                   <blockquote class="note"><p><strong class="note">Note</strong>: 
                    <span class="simpara">
                     Schemas supplied in the <code class="literal">schemaMap</code> only
                     apply to configuring automatic encryption for client side
                     encryption. Other validation rules in the JSON schema will
                     not be enforced by the driver and will result in an error.
                    </span>
                   </p></blockquote>
                  </td>
                 </tr>
  
                 <tr>
                  <td>bypassAutoEncryption</td>
                  <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
                  <td>
                   With this option set to <strong><code>TRUE</code></strong>, <code class="literal">mongocryptd</code>
                   will not be spawned automatically. This is used to disable
                   automatic encryption.
                  </td>
                 </tr>
  
                 <tr>
                  <td>extraOptions</td>
                  <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
                  <td>
                   The <code class="literal">extraOptions</code> relate to the
                   <code class="literal">mongocryptd</code> process. See the
                   <a href="https://github.com/mongodb/specifications/blob/master/source/client-side-encryption/client-side-encryption.rst#extraoptions" class="link external">&raquo;&nbsp;Client-Side Encryption Specification</a>
                   for more information.
                  </td>
                 </tr>
  
                </tbody>
               
              </table>
  
             </p>
  
             <blockquote class="note"><p><strong class="note">Note</strong>: 
              <span class="simpara">
               Automatic encryption is an enterprise only feature that only
               applies to operations on a collection. Automatic encryption is not
               supported for operations on a database or view, and operations that
               are not bypassed will result in error. To bypass automatic
               encryption for all operations, set <code class="literal">bypassAutoEncryption=true</code>
               in <code class="literal">autoEncryption</code>. For more information on
               whitelisted operations, see the
               <a href="https://github.com/mongodb/specifications/blob/master/source/client-side-encryption/client-side-encryption.rst#libmongocrypt-auto-encryption-whitelist" class="link external">&raquo;&nbsp;Client-Side Encryption Specification</a>.
              </span>
             </p></blockquote>
            </td>
           </tr>
  
           <tr>
            <td>ca_dir</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Path to a correctly hashed certificate directory. The system
              certificate store will be used by default.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>ca_file</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Path to file with either a single or bundle of certificate
              authorities to be considered trusted when making a TLS connection.
              The system certificate store will be used by default.
             </p>
             <p class="para">
              This option is a deprecated alias for the
              <code class="literal">&quot;tlsCAFile&quot;</code> URI option.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>context</td>
            <td><span class="type"><a href="#language.types.resource" class="type resource">resource</a></span></td>
            <td>
             <p class="para">
              <a href="#context.ssl" class="link">SSL context options</a> to be used as
              fallbacks if a driver option or its equivalent URI option, if any,
              is not specified. Note that the driver does not consult the default
              stream context (i.e.
              <span class="function"><a href="#function.stream-context-get-default" class="function">stream_context_get_default()</a></span>). The following
              context options are supported:
             </p>
  
             <table class="doctable table">
              <caption><strong>SSL context option fallbacks</strong></caption>
              
               <thead>
                <tr>
                 <th>Driver option</th>
                 <th>Context option (fallback)</th>
                </tr>
  
               </thead>
  
               <tbody class="tbody">
                <tr>
                 <td>ca_dir</td>
                 <td>capath</td>
                </tr>
  
                <tr>
                 <td>ca_file</td>
                 <td>cafile</td>
                </tr>
  
                <tr>
                 <td>pem_file</td>
                 <td>local_cert</td>
                </tr>
  
                <tr>
                 <td>pem_pwd</td>
                 <td>passphrase</td>
                </tr>
  
                <tr>
                 <td>weak_cert_validation</td>
                 <td>allow_self_signed</td>
                </tr>
  
               </tbody>
              
             </table>
  
             <p class="para">
              This option is supported for backwards compatibility, but should be
              considered deprecated.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>crl_file</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>Path to a certificate revocation list file.</td>
           </tr>
  
           <tr>
            <td>driver</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              Allows custom drivers to append their own metadata to the server
              handshake. By default, the driver submits its own name, version, and
              platform (i.e. PHP version) in the handshake. Custom drivers can
              specify strings for the <code class="literal">&quot;name&quot;</code>,
              <code class="literal">&quot;version&quot;</code>, and
              <code class="literal">&quot;platform&quot;</code> keys of this array, which will be
              appended to the respective field(s) in the handshake document.
             </p>
             <blockquote class="note"><p><strong class="note">Note</strong>: 
              <span class="simpara">
               Handshake information is limited to 512 bytes. The driver will
               truncate handshake data to fit within this 512-byte string. Drivers
               and ODMs are encouraged to keep their own metadata concise.
              </span>
             </p></blockquote>
            </td>
           </tr>
  
           <tr>
            <td>pem_file</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Path to a PEM encoded certificate to use for client authentication.
             </p>
             <p class="para">
              This option is a deprecated alias for the
              <code class="literal">&quot;tlsCertificateKeyFile&quot;</code> URI option.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>pem_pwd</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Passphrase for the PEM encoded certificate (if applicable).
             </p>
             <p class="para">
              This option is a deprecated alias for the
              <code class="literal">&quot;tlsCertificateKeyFilePassword&quot;</code> URI option.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>weak_cert_validation</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Disables certificate validation if <strong><code>TRUE</code></strong>. Defaults to <strong><code>FALSE</code></strong>
             </p>
             <p class="para">
              This option is a deprecated alias for the
              <code class="literal">&quot;tlsAllowInvalidHostnames&quot;</code> URI option.
             </p>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> if the <code class="parameter">uri</code> format is invalid</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-manager.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.8.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;directConnection&quot;</code>,
           <code class="literal">&quot;tlsDisableCertificateRevocationCheck&quot;</code>, and
           <code class="literal">&quot;tlsDisableOCSPEndpointCheck&quot;</code> URI options.
          </p>
          <p class="para">
           Added the <code class="literal">&quot;driver&quot;</code> driver option.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.7.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;autoEncryption&quot;</code> driver option.
          </p>
          <p class="para">
           Specifying any SSL or TLS option via the <code class="parameter">driverOptions</code>
           parameter will now implicitly enable TLS, as is done for the
           corresponding URI options.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.6.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;retryReads&quot;</code>, <code class="literal">&quot;tls&quot;</code>,
           <code class="literal">&quot;tlsAllowInvalidCertificates&quot;</code>,
           <code class="literal">&quot;tlsAllowInvalidHostnames&quot;</code>,
           <code class="literal">&quot;tlsCAFile&quot;</code>,
           <code class="literal">&quot;tlsCertificateKeyFile&quot;</code>,
           <code class="literal">&quot;tlsCertificateKeyFilePassword&quot;</code>, and
           <code class="literal">&quot;tlsInsecure&quot;</code> URI options.
          </p>
          <p class="para">
           The <code class="literal">&quot;retryWrites&quot;</code> URI option defaults to <strong><code>TRUE</code></strong>.
          </p>
          <p class="para">
           Specifying any SSL or TLS URI option via the connection string or
           <code class="parameter">uriOptions</code> parameter will now implicitly enable
           TLS unless <code class="literal">ssl</code> or <code class="literal">tls</code> is <strong><code>FALSE</code></strong>.
           TLS is <em class="emphasis">not</em> implicitly enabled for any options in
           the <code class="parameter">driverOptions</code> parameter, which is unchanged
           from previous versions.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           <code class="literal">&quot;wtimeoutMS&quot;</code> is now always validated and applied to
           the write concern. Previously, the option was ignored if
           <code class="literal">&quot;w&quot;</code> was &lt;= 1, since the timeout only applies to
           replication.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.4.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;compressors&quot;</code>,
           <code class="literal">&quot;retryWrites&quot;</code>, and
           <code class="literal">&quot;zlibCompressionLevel&quot;</code> URI options.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">
           The <code class="parameter">uriOptions</code> argument now accepts
           <code class="literal">&quot;authMechanism&quot;</code> and
           <code class="literal">&quot;authMechanismProperties&quot;</code> options. Previously, these
           options were only supported in the <code class="parameter">uri</code> argument.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           The <code class="parameter">uri</code> argument defaults to
           <code class="literal">&quot;mongodb://127.0.0.1/&quot;</code>. The default port remains
           <code class="literal">27017</code>.
          </p>
          <p class="para">
           Added the <code class="literal">&quot;appname&quot;</code> URI option.
          </p>
          <p class="para">
           Added the <code class="literal">&quot;allow_invalid_hostname&quot;</code>,
           <code class="literal">&quot;ca_file&quot;</code>, <code class="literal">&quot;ca_dir&quot;</code>,
           <code class="literal">&quot;clr_file&quot;</code>, <code class="literal">&quot;pem_file&quot;</code>,
           <code class="literal">&quot;pem_pwd&quot;</code>, and
           <code class="literal">&quot;weak_cert_validation&quot;</code> driver options.
          </p>
          <p class="para">
           The PHP Streams API is no longer used for socket communication. The
           <code class="literal">&quot;connectTimeoutMS&quot;</code> URI option now defaults to 10
           seconds instead of
           <a href="#ini.default-socket-timeout" class="link">default_socket_timeout</a>
           in previous versions. Additionally, the driver no longer supports all
           <a href="#context.ssl" class="link">SSL context options</a> via the
           <code class="literal">&quot;context&quot;</code> driver option.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.1.0</td>
         <td>
          <p class="para">
           The <code class="parameter">uri</code> argument is optional and defaults to
           <code class="literal">&quot;mongodb://localhost:27017/&quot;</code>.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongowritebatch.add.example.insert">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::__construct()</strong></span> basic examples</strong></p>
     <div class="example-contents"><p>Connecting to standalone MongoDB node:</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://example.com:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      Connecting to standalone MongoDB node via a Unix domain socket. The socket
      path may include special characters such as slashes and should be encoded
      with <span class="function"><a href="#function.rawurlencode" class="function">rawurlencode()</a></span>.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">rawurlencode</span><span style="color: #007700">(</span><span style="color: #DD0000">"/tmp/mongodb-27017.sock"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>Connecting to a replica set:</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com,rs2.example.com/?replicaSet=myReplicaSet"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>Connecting to a sharded cluster (i.e. one or more mongos instances):</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://mongos1.example.com,mongos2.example.com/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>Connecting to MongoDB with authentication credentials for a particular user and database:</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://myusername:mypassword@example.com/?authSource=databaseName"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
  
     <div class="example-contents"><p>
      Connecting to MongoDB with authentication credentials for a particular
      user and database, where the username or password includes special
      characters (e.g. <code class="literal">@</code>, <code class="literal">:</code>,
      <code class="literal">%</code>). In the following example, the password string
      <code class="literal">myp@ss:w%rd</code> has been manually escaped; however,
      <span class="function"><a href="#function.rawurlencode" class="function">rawurlencode()</a></span> may also be used to escape URI components
      that may contain special characters.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://myusername:myp%40ss%3Aw%25rd@example.com/?authSource=databaseName"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
  
     <div class="example-contents"><p>Connecting to MongoDB with X509 authentication:</p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"mongodb://example.com/?ssl=true&amp;authMechanism=MONGODB-X509"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;[],<br />&nbsp;&nbsp;&nbsp;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"pem_file"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"/path/to/client.pem"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;]<br />);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.connection-handling" class="link">Connection handling and persistence</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/connection-string/" class="link external">&raquo;&nbsp;MongoDB Connection String Format</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.createclientencryption" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::createClientEncryption</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::createClientEncryption</span> &mdash; <span class="dc-title">Create a new ClientEncryption object</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.createclientencryption-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::createClientEncryption</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
     ) : <span class="type"><a href="#class.mongodb-driver-clientencryption" class="type MongoDB\Driver\ClientEncryption">MongoDB\Driver\ClientEncryption</a></span></div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-clientencryption" class="classname">MongoDB\Driver\ClientEncryption</a> object with the specified options.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.createclientencryption-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>keyVaultClient</td>
            <td><a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a></td>
            <td>The Manager used to route data key queries to a separate MongoDB cluster. By default, the current Manager and cluster is used.</td>
           </tr>
  
  
           
           <tr>
            <td>keyVaultNamespace</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>A fully qualified namespace (e.g. <code class="literal">&quot;databaseName.collectionName&quot;</code>) denoting the collection that contains all data keys used for encryption and decryption.</td>
           </tr>
  
  
           
           <tr>
            <td>kmsProviders</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              A document containing the configuration for one or more KMS providers, which are used to encrypt data keys. Currently <code class="literal">aws</code> or <code class="literal">local</code>are supported and at least one must be specified.
             </p>
             <p class="para">
              The format for <code class="literal">aws</code> is as follows:
             </p>
             <div class="example-contents">
  <div class="javascriptcode"><pre class="javascriptcode">aws: {
      accessKeyId: &lt;string&gt;,
      secretAccessKey: &lt;string&gt;
  }</pre>
  </div>
             </div>
  
             <p class="para">
              The format for <code class="literal">local</code> is as follows:
             </p>
             <div class="example-contents">
  <div class="javascriptcode"><pre class="javascriptcode">local: {
      // The master key used to encrypt/decrypt data keys
      key: &lt;96-byte MongoDB\BSON\Binary with subtype 0&gt;
  }</pre>
  </div>
             </div>
  
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.createclientencryption-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a new <a href="#class.mongodb-driver-clientencryption" class="classname">MongoDB\Driver\ClientEncryption</a> instance.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.createclientencryption-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> if the extension was compiled without libmongocrypt support</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.createclientencryption-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-clientencryption" class="classname">MongoDB\Driver\ClientEncryption</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/core/security-explicit-client-side-encryption/" class="link external">&raquo;&nbsp;Explicit (Manual) Client-Side Field Level Encryption</a> in the MongoDB manual</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.executebulkwrite" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::executeBulkWrite</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::executeBulkWrite</span> &mdash; <span class="dc-title">Execute one or more write operations</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.executebulkwrite-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::executeBulkWrite</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-bulkwrite" class="type MongoDB\Driver\BulkWrite">MongoDB\Driver\BulkWrite</a></span> <code class="parameter">$bulk</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span></div>
  
    <p class="para rdfs-comment">
     Executes one or more write operations on the primary server.
    </p>
    <p class="para">
     A <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> can be constructed with
     one or more write operations of varying types (e.g. updates, deletes, and
     inserts). The driver will attempt to send operations of the same type to the
     server in as few requests as possible to optimize round trips.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.executebulkwrite-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">namespace</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A fully qualified namespace (e.g. <code class="literal">&quot;databaseName.collectionName&quot;</code>).
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">bulk</code> (<a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>)</dt>
  
      <dd>
  
       <p class="para">
        The write(s) to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.executebulkwrite-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.executebulkwrite-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">bulk</code> does not contain any write operations.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">bulk</code> has already been executed. <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> objects may not be executed multiple times.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-bulkwriteexception" class="classname">MongoDB\Driver\Exception\BulkWriteException</a> on any write failure (e.g. write error, failure to apply a write concern)</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-manager.executebulkwrite-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
        <tr>
         <td>1.4.0</td>
         <td>
          The third parameter is now an <code class="parameter">options</code> array.
          For backwards compatibility, this paramater will still accept a
          <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a> object.
         </td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          is now thrown if <code class="parameter">bulk</code> does not contain any write
          operations. Previously, a
          <a href="#class.mongodb-driver-exception-bulkwriteexception" class="classname">MongoDB\Driver\Exception\BulkWriteException</a> was
          thrown.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.executebulkwrite-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongowritebatch.add.example.update">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::executeBulkWrite()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'multi'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'multi'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'multi'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'limit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$writeConcern&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcern</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Inserted&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Matched&nbsp;&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMatchedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Updated&nbsp;&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModifiedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Upserted&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUpsertedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Deleted&nbsp;&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDeletedCount</span><span style="color: #007700">());<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUpsertedIds</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$index&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">'upsertedId[%d]:&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$index</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;If&nbsp;the&nbsp;WriteConcern&nbsp;could&nbsp;not&nbsp;be&nbsp;fulfilled&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$writeConcernError&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%d):&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInfo</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;If&nbsp;a&nbsp;write&nbsp;could&nbsp;not&nbsp;happen&nbsp;at&nbsp;all&nbsp;*/<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Operation#%d:&nbsp;%s&nbsp;(%d)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIndex</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">());<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Inserted 3 document(s)
  Matched  1 document(s)
  Updated  1 document(s)
  Upserted 2 document(s)
  Deleted  1 document(s)
  upsertedId[3]: object(MongoDB\BSON\ObjectId)#5 (1) {
    [&quot;oid&quot;]=&gt;
    string(24) &quot;54d3adc3ce7a792f4d703756&quot;
  }
  upsertedId[4]: int(3)
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.executebulkwrite-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a></li>
     <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
     <li class="member"><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executebulkwrite" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeBulkWrite()</a> - Execute one or more write operations on this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.executecommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::executeCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::executeCommand</span> &mdash; <span class="dc-title">Execute a database command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.executecommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::executeCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Selects a server according to the <code class="literal">&quot;readPreference&quot;</code> option
     and executes the command on that server. By default, the read preference from
     the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB Connection
     URI</a> will be used.
    </p>
    <p class="para">
     This method applies no special logic to the command. Although this method
     accepts <code class="literal">&quot;readConcern&quot;</code> and
     <code class="literal">&quot;writeConcern&quot;</code> options, which will be incorporated into
     the command document, those options will not default to corresponding values
     from the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB
     Connection URI</a> nor will the MongoDB server version be taken into
     account. Users are therefore encouraged to use specific read and/or write
     command methods if possible.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.executecommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.executecommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.executecommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command, issuing a write command to a secondary).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-manager.executecommand-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
        <tr>
         <td>1.4.0</td>
         <td>
          The third parameter is now an <code class="parameter">options</code> array.
          For backwards compatibility, this paramater will still accept a
          <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a> object.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.executecommand-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongowritebatch.add.example.delete">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::executeCommand()</strong></span> with a command returning a single result document</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">([</span><span style="color: #DD0000">'ping'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'admin'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;The&nbsp;ping&nbsp;command&nbsp;returns&nbsp;a&nbsp;single&nbsp;result&nbsp;document,&nbsp;so&nbsp;we&nbsp;need&nbsp;to&nbsp;access&nbsp;the<br />&nbsp;*&nbsp;first&nbsp;result&nbsp;in&nbsp;the&nbsp;cursor.&nbsp;*/<br /></span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(1) {
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="mongowritebatch.execute.example.insert">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\Driver\Manager::executeCommand()</strong></span> with a command returning a cursor</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'aggregate'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'collection'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pipeline'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'$group'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'$sum'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'$x'</span><span style="color: #007700">]]],<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">,<br />]);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'db'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;The&nbsp;aggregate&nbsp;command&nbsp;can&nbsp;optionally&nbsp;return&nbsp;its&nbsp;results&nbsp;in&nbsp;a&nbsp;cursor&nbsp;instead<br />&nbsp;*&nbsp;of&nbsp;a&nbsp;single&nbsp;result&nbsp;document.&nbsp;In&nbsp;this&nbsp;case,&nbsp;we&nbsp;can&nbsp;iterate&nbsp;on&nbsp;the&nbsp;cursor<br />&nbsp;*&nbsp;directly&nbsp;to&nbsp;access&nbsp;those&nbsp;results.&nbsp;*/<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#6 (2) {
    [&quot;_id&quot;]=&gt;
    string(3) &quot;bar&quot;
    [&quot;sum&quot;]=&gt;
    int(10)
  }
  object(stdClass)#7 (2) {
    [&quot;_id&quot;]=&gt;
    string(3) &quot;foo&quot;
    [&quot;sum&quot;]=&gt;
    int(2)
  }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="mongowritebatch.execute.example.update">
     <p><strong>Example #3 Limiting execution time for a command</strong></p>
     <div class="example-contents"><p>
      The execution time of a command may be limited by specifying a value for
      <code class="literal">&quot;maxTimeMS&quot;</code> in the
      <a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a> document. Note that this time
      limit is enforced on the server side and does not take network latency into
      account. See
      <a href="https://docs.mongodb.com/manual/tutorial/terminate-running-operations/#maxtimems" class="link external">&raquo;&nbsp;Terminate Running Operations</a>
      in the MongoDB manual for more information.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'count'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'collection'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'query'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'$gt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'maxTimeMS'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">,<br />]);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'db'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      If the command fails to complete after one second of execution time on the
      server, a
      <a href="#class.mongodb-driver-exception-executiontimeoutexception" class="classname">MongoDB\Driver\Exception\ExecutionTimeoutException</a>
      will be thrown.
     </p></div>
    </div>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongodb-driver-manager.executecommand-notes">
    <h3 class="title">Notes</h3>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      If a secondary <code class="parameter">readPreference</code> is used, it is the
      caller&#039;s responsibility to ensure that the
      <code class="parameter">command</code> can be executed on a secondary. No validation
      is done by the driver.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.executecommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadCommand()</a> - Execute a database command that reads</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadWriteCommand()</a> - Execute a database command that reads and writes</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeWriteCommand()</a> - Execute a database command that writes</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeCommand()</a> - Execute a database command on this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.executequery" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::executeQuery</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::executeQuery</span> &mdash; <span class="dc-title">Execute a database query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.executequery-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::executeQuery</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-query" class="type MongoDB\Driver\Query">MongoDB\Driver\Query</a></span> <code class="parameter">$query</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Selects a server according to the <code class="literal">&quot;readPreference&quot;</code> option
     and executes the query on that server. By default, the read preference from
     the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB Connection
     URI</a> will be used.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.executequery-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">namespace</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A fully qualified namespace (e.g. <code class="literal">&quot;databaseName.collectionName&quot;</code>).
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">query</code> (<a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a>)</dt>
  
      <dd>
  
       <p class="para">
        The query to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.executequery-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.executequery-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid query operators).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-manager.executequery-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.0</td>
         <td>
          The third parameter is now an <code class="parameter">options</code> array.
          For backwards compatibility, this paramater will still accept a
          <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a> object.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.executequery-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongowritebatch.execute.example.delete">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::executeQuery()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$filter&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'$gt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]];<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'projection'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">],<br />];<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">(</span><span style="color: #0000BB">$filter</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#6 (1) {
    [&quot;x&quot;]=&gt;
    int(3)
  }
  object(stdClass)#7 (1) {
    [&quot;x&quot;]=&gt;
    int(2)
  }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="mongolog.setcallback.example.basic">
     <p><strong>Example #2 Limiting execution time for a query</strong></p>
     <div class="example-contents"><p>
      The <code class="literal">&quot;maxTimeMS&quot;</code>
      <a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a> option may be used to limit the
      execution time of a query. Note that this time limit is enforced on the
      server side and does not take network latency into account. See
      <a href="https://docs.mongodb.com/manual/tutorial/terminate-running-operations/#maxtimems" class="link external">&raquo;&nbsp;Terminate Running Operations</a>
      in the MongoDB manual for more information.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$filter&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'$gt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]];<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'maxTimeMS'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">,<br />];<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">(</span><span style="color: #0000BB">$filter</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>
      If the query fails to complete after one second of execution time on the
      server, a
      <a href="#class.mongodb-driver-exception-executiontimeoutexception" class="classname">MongoDB\Driver\Exception\ExecutionTimeoutException</a>
      will be thrown.
     </p></div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.executequery-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a></li>
     <li class="member"><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executequery" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeQuery()</a> - Execute a database query on this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.executereadcommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::executeReadCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::executeReadCommand</span> &mdash; <span class="dc-title">Execute a database command that reads</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.executereadcommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::executeReadCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Selects a server according to the <code class="literal">&quot;readPreference&quot;</code> option
     and executes the command on that server. By default, the read preference from
     the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB Connection
     URI</a> will be used.
    </p>
    <p class="para">
     This method will apply logic that is specific to commands that read (e.g.
     <a href="https://docs.mongodb.com/manual/reference/command/count/" class="link external">&raquo;&nbsp;count</a>)
     and take the MongoDB server version into account. The
     <code class="literal">&quot;readConcern&quot;</code> option will default to the corresponding
     value from the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB
     Connection URI</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.executereadcommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.executereadcommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.executereadcommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.executereadcommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadWriteCommand()</a> - Execute a database command that reads and writes</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeWriteCommand()</a> - Execute a database command that writes</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadCommand()</a> - Execute a database command that reads on this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.executereadwritecommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::executeReadWriteCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::executeReadWriteCommand</span> &mdash; <span class="dc-title">Execute a database command that reads and writes</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.executereadwritecommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::executeReadWriteCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Executes the command on the primary server.
    </p>
    <p class="para">
     This method will apply logic that is specific to commands that read and write
     (e.g.
     <a href="https://docs.mongodb.com/manual/reference/command/aggregate/" class="link external">&raquo;&nbsp;aggregate</a>)
     and take the MongoDB server version into account. The
     <code class="literal">&quot;readConcern&quot;</code> and <code class="literal">&quot;writeConcern&quot;</code>
     options will default to the corresponding values from the
     <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB Connection
     URI</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.executereadwritecommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.executereadwritecommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.executereadwritecommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-manager.executereadwritecommand-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.executereadwritecommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadCommand()</a> - Execute a database command that reads</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeWriteCommand()</a> - Execute a database command that writes</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadWriteCommand()</a> - Execute a database command that reads and writes on this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.executewritecommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::executeWriteCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::executeWriteCommand</span> &mdash; <span class="dc-title">Execute a database command that writes</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.executewritecommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::executeWriteCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Executes the command on the primary server.
    </p>
    <p class="para">
     This method will apply logic that is specific to commands that write (e.g.
     <a href="https://docs.mongodb.com/manual/reference/command/drop/" class="link external">&raquo;&nbsp;drop</a>) and
     take the MongoDB server version into account. The
     <code class="literal">&quot;writeConcern&quot;</code> option will default to the corresponding
     value from the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB
     Connection URI</a>.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      This method is not intended to be used to execute
      <a href="https://docs.mongodb.com/manual/reference/command/insert/" class="link external">&raquo;&nbsp;insert</a>,
      <a href="https://docs.mongodb.com/manual/reference/command/update/" class="link external">&raquo;&nbsp;update</a>,
      or <a href="https://docs.mongodb.com/manual/reference/command/delete/" class="link external">&raquo;&nbsp;delete</a>
      commands. Users are encouraged to use
      <span class="function"><a href="#mongodb-driver-manager.executebulkwrite" class="function">MongoDB\Driver\Manager::executeBulkWrite()</a></span> for those
      commands.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.executewritecommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.executewritecommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.executewritecommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-manager.executewritecommand-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.executewritecommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadCommand()</a> - Execute a database command that reads</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadWriteCommand()</a> - Execute a database command that reads and writes</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeWriteCommand()</a> - Execute a database command that writes on this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.getreadconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::getReadConcern</h1>
    <p class="verinfo">(mongodb &gt;=1.1.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::getReadConcern</span> &mdash; <span class="dc-title">Return the ReadConcern for the Manager</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.getreadconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::getReadConcern</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-readconcern" class="type MongoDB\Driver\ReadConcern">MongoDB\Driver\ReadConcern</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a> for the
     Manager, which is derived from its URI options. This is the default read
     concern for queries and commands executed on the Manager.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.getreadconcern-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.getreadconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The <a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a> for the Manager.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.getreadconcern-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.getreadconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1738">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::getReadConcern()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadConcern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017/?readConcernLevel=local'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadConcern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\ReadConcern)#2 (0) {
  }
  object(MongoDB\Driver\ReadConcern)#1 (1) {
    [&quot;level&quot;]=&gt;
    string(5) &quot;local&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.getreadconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.construct" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::__construct()</a> - Create new MongoDB Manager</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.getreadpreference" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::getReadPreference</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::getReadPreference</span> &mdash; <span class="dc-title">Return the ReadPreference for the Manager</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.getreadpreference-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::getReadPreference</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-readpreference" class="type MongoDB\Driver\ReadPreference">MongoDB\Driver\ReadPreference</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a> for the
     Manager, which is derived from its URI options. This is the default read
     preference for queries and commands executed on the Manager.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.getreadpreference-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.getreadpreference-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a> for the Manager.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.getreadpreference-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.getreadpreference-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongopool.setpoolsize.example.basic">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::getReadPreference()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadPreference</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017/?readPreference=secondaryPreferred&amp;readPreferenceTags=dc:ny,rack:1&amp;readPreferenceTags=dc:ny&amp;readPreferenceTags='</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadPreference</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\ReadPreference)#2 (1) {
    [&quot;mode&quot;]=&gt;
    string(7) &quot;primary&quot;
  }
  object(MongoDB\Driver\ReadPreference)#1 (2) {
    [&quot;mode&quot;]=&gt;
    string(18) &quot;secondaryPreferred&quot;
    [&quot;tags&quot;]=&gt;
    array(3) {
      [0]=&gt;
      object(stdClass)#3 (2) {
        [&quot;dc&quot;]=&gt;
        string(2) &quot;ny&quot;
        [&quot;rack&quot;]=&gt;
        string(1) &quot;1&quot;
      }
      [1]=&gt;
      object(stdClass)#4 (1) {
        [&quot;dc&quot;]=&gt;
        string(2) &quot;ny&quot;
      }
      [2]=&gt;
      object(stdClass)#5 (0) {
      }
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.getreadpreference-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.construct" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::__construct()</a> - Create new MongoDB Manager</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.getservers" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::getServers</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::getServers</span> &mdash; <span class="dc-title">Return the servers to which this manager is connected</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.getservers-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::getServers</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Returns an <span class="type"><a href="#language.types.array" class="type array">array</a></span> of <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a>
     instances to which this manager is connected.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Since the driver connects to the database lazily, this method may return an
      empty <span class="type"><a href="#language.types.array" class="type array">array</a></span> if called before executing an operation on the
      <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a>.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.getservers-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.getservers-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an <span class="type"><a href="#language.types.array" class="type array">array</a></span> of <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a>
     instances to which this manager is connected.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.getservers-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.getservers-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1740">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::getServers()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;The&nbsp;driver&nbsp;connects&nbsp;to&nbsp;the&nbsp;database&nbsp;server&nbsp;lazily,&nbsp;so&nbsp;Manager::getServers()<br />&nbsp;*&nbsp;may&nbsp;initially&nbsp;return&nbsp;an&nbsp;empty&nbsp;array.&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getServers</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">([</span><span style="color: #DD0000">'ping'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'db'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getServers</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(0) {
  }
  array(1) {
    [0]=&gt;
    object(MongoDB\Driver\Server)#3 (10) {
      [&quot;host&quot;]=&gt;
      string(9) &quot;localhost&quot;
      [&quot;port&quot;]=&gt;
      int(27017)
      [&quot;type&quot;]=&gt;
      int(1)
      [&quot;is_primary&quot;]=&gt;
      bool(false)
      [&quot;is_secondary&quot;]=&gt;
      bool(false)
      [&quot;is_arbiter&quot;]=&gt;
      bool(false)
      [&quot;is_hidden&quot;]=&gt;
      bool(false)
      [&quot;is_passive&quot;]=&gt;
      bool(false)
      [&quot;last_is_master&quot;]=&gt;
      array(8) {
        [&quot;ismaster&quot;]=&gt;
        bool(true)
        [&quot;maxBsonObjectSize&quot;]=&gt;
        int(16777216)
        [&quot;maxMessageSizeBytes&quot;]=&gt;
        int(48000000)
        [&quot;maxWriteBatchSize&quot;]=&gt;
        int(1000)
        [&quot;localTime&quot;]=&gt;
        object(MongoDB\BSON\UTCDateTime)#4 (1) {
          [&quot;milliseconds&quot;]=&gt;
          int(1447267964517)
        }
        [&quot;maxWireVersion&quot;]=&gt;
        int(3)
        [&quot;minWireVersion&quot;]=&gt;
        int(0)
        [&quot;ok&quot;]=&gt;
        float(1)
      }
      [&quot;round_trip_time&quot;]=&gt;
      int(554)
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.getservers-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.selectserver" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::selectServer()</a> - Select a server matching a read preference</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-manager.getwriteconcern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::getWriteConcern</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::getWriteConcern</span> &mdash; <span class="dc-title">Return the WriteConcern for the Manager</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.getwriteconcern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::getWriteConcern</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-writeconcern" class="type MongoDB\Driver\WriteConcern">MongoDB\Driver\WriteConcern</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a> for the
     Manager, which is derived from its URI options. This is the default write
     concern for writes and commands executed on the Manager.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.getwriteconcern-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.getwriteconcern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a> for the Manager.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.getwriteconcern-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-manager.getwriteconcern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongo.setpoolsize.example.basic">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Manager::getWriteConcern()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017/?w=majority&amp;wtimeoutMS=2000'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\WriteConcern)#2 (0) {
  }
  object(MongoDB\Driver\WriteConcern)#1 (2) {
    [&quot;w&quot;]=&gt;
    string(8) &quot;majority&quot;
    [&quot;wtimeout&quot;]=&gt;
    int(2000)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.getwriteconcern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.construct" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::__construct()</a> - Create new MongoDB Manager</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-manager.selectserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::selectServer</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::selectServer</span> &mdash; <span class="dc-title">Select a server matching a read preference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.selectserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::selectServer</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-readpreference" class="type MongoDB\Driver\ReadPreference">MongoDB\Driver\ReadPreference</a></span> <code class="parameter">$readPreference</code></span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
    <p class="para rdfs-comment">
     Selects a <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> matching
     <code class="parameter">readPreference</code>. This may be used to preselect a server
     in order to perform version checking before executing an operation.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Unlike <span class="function"><a href="#mongodb-driver-manager.getservers" class="function">MongoDB\Driver\Manager::getServers()</a></span>, this method
      will initialize database connections and perform server discovery if
      necessary. See the
      <a href="https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst#single-threaded-server-selection" class="link external">&raquo;&nbsp;Server Selection Specification</a>
      for additional information.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.selectserver-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">readPreference</code> (<a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>)</dt>
  
      <dd>
  
       <p class="para">
        The read preference to use for selecting a server.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.selectserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> matching the read
     preference.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.selectserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> if a server matching the read preference could not be found.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.selectserver-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.getservers" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::getServers()</a> - Return the servers to which this manager is connected</span></li>
     <li class="member"><a href="https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst" class="link external">&raquo;&nbsp;Server Selection Specification</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-manager.startsession" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Manager::startSession</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Manager::startSession</span> &mdash; <span class="dc-title">Start a new client session for use with this client</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-manager.startsession-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Manager::startSession</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-session" class="type MongoDB\Driver\Session">MongoDB\Driver\Session</a></span></div>
  
    <p class="para rdfs-comment">
     Creates a <a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a> for the given
     options. The session may then be specified when executing commands, queries,
     and write operations.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      A <a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a> can only be used with the
      <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a> from which it was created.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-manager.startsession-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
            <th>Default</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>causalConsistency</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Configure causal consistency in a session. If <strong><code>TRUE</code></strong>, each operation
              in the session will be causally ordered after the previous read or
              write operation. Set to <strong><code>FALSE</code></strong> to disable causal consistency.
             </p>
             <p class="para">
              See
              <a href="https://docs.mongodb.com/manual/core/read-isolation-consistency-recency/#causal-consistency" class="link external">&raquo;&nbsp;Casual Consistency</a>
              in the MongoDB manual for more information.
             </p>
            </td>
            <td><strong><code>TRUE</code></strong></td>
           </tr>
  
           <tr>
            <td>defaultTransactionOptions</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              Default options to apply to newly created transactions. These
              options are used unless they are overridden when a transaction is
              started with different value for each option.
             </p>
             <p class="para">
              <table class="doctable table">
               <caption><strong>options</strong></caption>
               
                <thead>
                 <tr>
                  <th>Option</th>
                  <th>Type</th>
                  <th>Description</th>
                 </tr>
  
                </thead>
  
                <tbody class="tbody">
                 
           <tr>
            <td>maxCommitTimeMS</td>
            <td>integer</td>
            <td>
             <p class="para">
              The maximum amount of time in milliseconds to allow a single
              <code class="literal">commitTransaction</code> command to run.
             </p>
             <p class="para">
              If specified, <code class="literal">maxCommitTimeMS</code> must be a signed
              32-bit integer greater than or equal to zero.
             </p>
            </td>
           </tr>
  
  
                 
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
                 
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
                 
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
                </tbody>
               
              </table>
  
             </p>
             <p class="para">
              This option is available in MongoDB 4.0+.
             </p>
            </td>
            <td><code class="literal">[]</code></td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-manager.startsession-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a <a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-manager.startsession-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> if the session could not be created (e.g. libmongoc does not support crypto).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-manager.startsession-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.6.0</td>
         <td>
          <p class="para">
           The <code class="literal">&quot;maxCommitTimeMS&quot;</code> option was added to
           <code class="literal">&quot;defaultTransactionOptions&quot;</code>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           The <code class="literal">&quot;defaultTransactionOptions&quot;</code> option was added.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-manager.startsession-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-isolation-consistency-recency/#causal-consistency" class="link external">&raquo;&nbsp;Casual Consistency</a> in the MongoDB manual</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-manager.construct">MongoDB\Driver\Manager::__construct</a> — Create new MongoDB Manager</li><li><a href="#mongodb-driver-manager.createclientencryption">MongoDB\Driver\Manager::createClientEncryption</a> — Create a new ClientEncryption object</li><li><a href="#mongodb-driver-manager.executebulkwrite">MongoDB\Driver\Manager::executeBulkWrite</a> — Execute one or more write operations</li><li><a href="#mongodb-driver-manager.executecommand">MongoDB\Driver\Manager::executeCommand</a> — Execute a database command</li><li><a href="#mongodb-driver-manager.executequery">MongoDB\Driver\Manager::executeQuery</a> — Execute a database query</li><li><a href="#mongodb-driver-manager.executereadcommand">MongoDB\Driver\Manager::executeReadCommand</a> — Execute a database command that reads</li><li><a href="#mongodb-driver-manager.executereadwritecommand">MongoDB\Driver\Manager::executeReadWriteCommand</a> — Execute a database command that reads and writes</li><li><a href="#mongodb-driver-manager.executewritecommand">MongoDB\Driver\Manager::executeWriteCommand</a> — Execute a database command that writes</li><li><a href="#mongodb-driver-manager.getreadconcern">MongoDB\Driver\Manager::getReadConcern</a> — Return the ReadConcern for the Manager</li><li><a href="#mongodb-driver-manager.getreadpreference">MongoDB\Driver\Manager::getReadPreference</a> — Return the ReadPreference for the Manager</li><li><a href="#mongodb-driver-manager.getservers">MongoDB\Driver\Manager::getServers</a> — Return the servers to which this manager is connected</li><li><a href="#mongodb-driver-manager.getwriteconcern">MongoDB\Driver\Manager::getWriteConcern</a> — Return the WriteConcern for the Manager</li><li><a href="#mongodb-driver-manager.selectserver">MongoDB\Driver\Manager::selectServer</a> — Select a server matching a read preference</li><li><a href="#mongodb-driver-manager.startsession">MongoDB\Driver\Manager::startSession</a> — Start a new client session for use with this client</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-command" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Command class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-command.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Command</strong> class is a value object
      that represents a database command.
     </p>
     <p class="para">
      To provide <q class="quote">Command Helpers</q> the <strong class="classname">MongoDB\Driver\Command</strong> object should be composed.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-command.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Command</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-command.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$commandOptions</code></span>
    ] )</div>
  
     }</div>
  
  
    </div>
  
    <div class="section" id="mongodb-driver-command.examples">
     <h2 class="title">Examples</h2>
  
     <div class="example" id="mongoresultexception.getdocument.example.basic">
      <p><strong>Example #1 Composing <strong class="classname">MongoDB\Driver\Command</strong> to provide a helper to create collections</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">CreateCollection&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;</span><span style="color: #0000BB">$cmd&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$collectionName</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"create"</span><span style="color: #007700">]&nbsp;=&nbsp;(string)</span><span style="color: #0000BB">$collectionName</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">setCappedCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">$maxBytes</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$maxDocuments&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"capped"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"size"</span><span style="color: #007700">]&nbsp;&nbsp;&nbsp;=&nbsp;(int)</span><span style="color: #0000BB">$maxBytes</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$maxDocuments</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"max"</span><span style="color: #007700">]&nbsp;=&nbsp;(int)</span><span style="color: #0000BB">$maxDocuments</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">usePowerOf2Sizes</span><span style="color: #007700">(</span><span style="color: #0000BB">$bool</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$bool</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"flags"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"flags"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">setFlags</span><span style="color: #007700">(</span><span style="color: #0000BB">$flags</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"flags"</span><span style="color: #007700">]&nbsp;=&nbsp;(int)</span><span style="color: #0000BB">$flags</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">getCommand</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">getCollectionName</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cmd</span><span style="color: #007700">[</span><span style="color: #DD0000">"create"</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$createCollection&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">CreateCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"cappedCollection"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$createCollection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setCappedCollection</span><span style="color: #007700">(</span><span style="color: #0000BB">64&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$createCollection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommand</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"databaseName"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$collstats&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">"collstats"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$createCollection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCollectionName</span><span style="color: #007700">()];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"databaseName"</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(</span><span style="color: #0000BB">$collstats</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
     <p class="para">The above example will output:</p>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\Command)#3 (1) {
    [&quot;command&quot;]=&gt;
    array(3) {
      [&quot;create&quot;]=&gt;
      string(16) &quot;cappedCollection&quot;
      [&quot;capped&quot;]=&gt;
      bool(true)
      [&quot;size&quot;]=&gt;
      int(65536)
    }
  }
  array(1) {
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  array(16) {
    [&quot;ns&quot;]=&gt;
    string(29) &quot;databaseName.cappedCollection&quot;
    [&quot;count&quot;]=&gt;
    int(0)
    [&quot;size&quot;]=&gt;
    int(0)
    [&quot;numExtents&quot;]=&gt;
    int(1)
    [&quot;storageSize&quot;]=&gt;
    int(65536)
    [&quot;nindexes&quot;]=&gt;
    int(1)
    [&quot;lastExtentSize&quot;]=&gt;
    float(65536)
    [&quot;paddingFactor&quot;]=&gt;
    float(1)
    [&quot;paddingFactorNote&quot;]=&gt;
    string(101) &quot;paddingFactor is unused and unmaintained in 2.8. It remains hard coded to 1.0 for compatibility only.&quot;
    [&quot;userFlags&quot;]=&gt;
    int(0)
    [&quot;capped&quot;]=&gt;
    bool(true)
    [&quot;max&quot;]=&gt;
    int(9223372036854775807)
    [&quot;maxSize&quot;]=&gt;
    int(65536)
    [&quot;totalIndexSize&quot;]=&gt;
    int(8176)
    [&quot;indexSizes&quot;]=&gt;
    object(stdClass)#4 (1) {
      [&quot;_id_&quot;]=&gt;
      int(8176)
    }
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-command.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Command::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Command::__construct</span> &mdash; <span class="dc-title">Create a new Command</span></p>
  
   </div>
   
   <div class="refsect1 description" id="refsect1-mongodb-driver-command.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Command::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$commandOptions</code></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>, which is an
     immutable value object that represents a database command. The command may
     then be executed with
     <span class="methodname"><a href="#mongodb-driver-manager.executecommand" class="methodname">MongoDB\Driver\Manager::executeCommand()</a></span>.
    </p>
    <p class="para">
     The complete command document, which includes the command name and its
     options, should be expressed in the <code class="parameter">document</code>
     parameter. The <code class="parameter">commandOptions</code> parameter is only used
     to specify options related to the execution of the command and the resulting
     <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a>.
    </p>
   </div>
  
   
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-command.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">document</code></dt>
  
      <dd>
  
       <p class="para">
        The complete command document, which will be sent to the server.
       </p>
      </dd>
  
     
     
     
      <dt>
  <code class="parameter">commandOptions</code></dt>
  
      <dd>
  
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
         Do not use this parameter to specify options described in the command&#039;s
         reference in the MongoDB manual. This parameter should only be used for
         the options explicitly listed below.
        </span>
       </p></blockquote>
       <p class="para">
        <table class="doctable table">
         <caption><strong>commandOptions</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>maxAwaitTimeMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              Positive integer denoting the time limit in milliseconds for the
              server to block a getMore operation if no data is available. This
              option should only be used in conjunction with commands that return
              a tailable cursor (e.g. <a href="https://docs.mongodb.com/manual/changeStreams/" class="link external">&raquo;&nbsp;Change
              Streams</a>).
             </p>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
   
   <div class="refsect1 errors" id="refsect1-mongodb-driver-command.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
   
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-command.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.0</td>
         <td>
          <p class="para">
           Added a second <code class="parameter">commandOptions</code> argument, which supports
           the <code class="literal">&quot;maxAwaitTimeMS&quot;</code> option.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
   
   <div class="refsect1 examples" id="refsect1-mongodb-driver-command.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongoduplicatekeyexception.example.catch">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Command::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"buildinfo"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"admin"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  
  array(13) {
    [&quot;version&quot;]=&gt;
    string(14) &quot;2.8.0-rc2-pre-&quot;
    [&quot;gitVersion&quot;]=&gt;
    string(62) &quot;b743d7158f7642f4da6b7eac8320374b3b88dc2e modules: subscription&quot;
    [&quot;OpenSSLVersion&quot;]=&gt;
    string(25) &quot;OpenSSL 1.0.1f 6 Jan 2014&quot;
    [&quot;sysInfo&quot;]=&gt;
    string(104) &quot;Linux infant 3.16.0-24-generic #32-Ubuntu SMP Tue Oct 28 13:07:32 UTC 2014 x86_64 BOOST_LIB_VERSION=1_49&quot;
    [&quot;loaderFlags&quot;]=&gt;
    string(91) &quot;-fPIC -pthread -Wl,-z,now -rdynamic -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -Wl,-E&quot;
    [&quot;compilerFlags&quot;]=&gt;
    string(301) &quot;-Wnon-virtual-dtor -Woverloaded-virtual -std=c++11 -fPIC -fno-strict-aliasing -ggdb -pthread -Wall -Wsign-compare -Wno-unknown-pragmas -Winvalid-pch -pipe -Werror -O3 -Wno-unused-local-typedefs -Wno-unused-function -Wno-deprecated-declarations -Wno-unused-but-set-variable -fno-builtin-memcmp -std=c99&quot;
    [&quot;allocator&quot;]=&gt;
    string(8) &quot;tcmalloc&quot;
    [&quot;versionArray&quot;]=&gt;
    array(4) {
      [0]=&gt;
      int(2)
      [1]=&gt;
      int(8)
      [2]=&gt;
      int(0)
      [3]=&gt;
      int(-8)
    }
    [&quot;javascriptEngine&quot;]=&gt;
    string(2) &quot;V8&quot;
    [&quot;bits&quot;]=&gt;
    int(64)
    [&quot;debug&quot;]=&gt;
    bool(false)
    [&quot;maxBsonObjectSize&quot;]=&gt;
    int(16777216)
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  
  </pre></div>
     </div>
    </div>
    
    <div class="example" id="mongoprotocolexception.example.catch">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\Driver\Command::__construct()</strong></span> example</strong></p>
     <div class="example-contents"><p>
      Commands can accept options as well, as part of the normal structure that
      you create to send to the server. For example, the
      <code class="literal">maxTimeMS</code> option can be passed with most commands to
      restrict the amount of time a specific command can run for on the server.
     </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"distinct"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"beer"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"key"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"beer_name"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"maxTimeMS"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;)<br />);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"beerdb"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen"><br />
      operation exceeded time limit<br />
     </div>
    </div>
   </div>
  
   
   
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-command.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.executecommand" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
    </ul>
   </div>
  
   
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-command.construct">MongoDB\Driver\Command::__construct</a> — Create a new Command</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-query" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Query class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-query.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Query</strong> class is a value object that
      represents a database query.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-query.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Query</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-query.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$filter</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$queryOptions</code></span>
    ] )</div>
  
     }</div>
  
  
    </div>
    
  
   </div>
  
   
   
  
  <div id="mongodb-driver-query.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Query::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Query::__construct</span> &mdash; <span class="dc-title">Create a new Query</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-query.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Query::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$filter</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$queryOptions</code></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a>, which is an
     immutable value object that represents a database query. The query may then
     be executed with
     <span class="methodname"><a href="#mongodb-driver-manager.executequery" class="methodname">MongoDB\Driver\Manager::executeQuery()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-query.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">filter</code> (<span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The <a href="https://docs.mongodb.com/manual/tutorial/query-documents/" class="link external">&raquo;&nbsp;query predicate</a>.
        An empty predicate will match all documents in the collection.
       </p>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
         When evaluating query criteria, MongoDB compares types and values according to its own <a href="https://docs.mongodb.com/manual/reference/bson-type-comparison-order/" class="link external">&raquo;&nbsp;comparison rules for BSON types</a>, which differs from PHP&#039;s <a href="#types.comparisons" class="link">comparison</a> and <a href="#language.types.type-juggling" class="link">type juggling</a> rules. When matching a special BSON type the query criteria should use the respective <a href="#book.bson" class="link">BSON class</a> (e.g. use <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> to match an <a href="https://docs.mongodb.com/manual/reference/object-id/" class="link external">&raquo;&nbsp;ObjectId</a>).
        </span>
       </p></blockquote>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">queryOptions</code></dt>
  
      <dd>
  
       <p class="para">
        <table id="mongodb-driver-query.construct-queryOptions" class="doctable table">
         <caption><strong>queryOptions</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>allowDiskUse</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Allows MongoDB to use temporary disk files to store data exceeding
              the 100 megabyte system memory limit while processing a blocking
              sort operation.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>allowPartialResults</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              For queries against a sharded collection, returns partial results
              from the mongos if some shards are unavailable instead of throwing
              an error.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;partial&quot;</code> option if
              not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>awaitData</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Use in conjunction with the <code class="literal">&quot;tailable&quot;</code> option to
             block a getMore operation on the cursor temporarily if at the end of
             data rather than returning no data. After a timeout period, the query
             returns as normal.
            </td>
           </tr>
  
           <tr>
            <td>batchSize</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              The number of documents to return in the first batch. Defaults to
              101. A batch size of 0 means that the cursor will be established,
              but no documents will be returned in the first batch.
             </p>
             <p class="para">
              In versions of MongoDB before 3.2, where queries use the legacy wire
              protocol OP_QUERY, a batch size of 1 will close the cursor
              irrespective of the number of matched documents.
             </p>
            </td>
           </tr>
  
           
           <tr>
            <td>collation</td>
            <td><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></td>
            <td>
             <p class="para">
              <a href="https://docs.mongodb.com/master/reference/collation/" class="link external">&raquo;&nbsp;Collation</a> allows users to specify language-specific rules for string comparison, such as rules for lettercase and accent marks. When specifying collation, the <code class="literal">&quot;locale&quot;</code> field is mandatory; all other collation fields are optional. For descriptions of the fields, see <a href="https://docs.mongodb.com/master/reference/collation/#collation-document" class="link external">&raquo;&nbsp;Collation Document</a>.
             </p>
             <p class="para">
              If the collation is unspecified but the collection has a default collation, the operation uses the collation specified for the collection. If no collation is specified for the collection or for the operation, MongoDB uses the simple binary comparison used in prior versions for string comparisons.
             </p>
             <p class="para">
              This option is available in MongoDB 3.4+ and will result in an exception at execution time if specified for an older server version.
             </p>
            </td>
           </tr>
  
  
           <tr>
            <td>comment</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              A comment to attach to the query to help interpret and trace query
              profile data.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$comment&quot;</code> modifier
              if not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>exhaust</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Stream the data down full blast in multiple &quot;more&quot; packages, on the
              assumption that the client will fully read all data queried. Faster
              when you are pulling a lot of data and know you want to pull it all
              down. Note: the client is not allowed to not read all the data
              unless it closes the connection.
             </p>
             <p class="para">
              This option is not supported by the find command in MongoDB 3.2+ and
              will force the driver to use the legacy wire protocol version (i.e.
              OP_QUERY).
             </p>
            </td>
           </tr>
  
           <tr>
            <td>explain</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              If <strong><code>TRUE</code></strong>, the returned <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a>
              will contain a single document that describes the process and
              indexes used to return the query.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$explain&quot;</code> modifier
              if not specified.
             </p>
             <p class="para">
              This option is not supported by the find command in MongoDB 3.2+ and
              will only be respected when using the legacy wire protocol version
              (i.e. OP_QUERY). The
              <a href="https://docs.mongodb.com/manual/reference/command/explain/" class="link external">&raquo;&nbsp;explain</a>
              command should be used on MongoDB 3.0+.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>hint</td>
            <td><span class="type"><span class="type string|array|object">string|array|object</span></span></td>
            <td>
             <p class="para">
              Index specification. Specify either the index name as a string or
              the index key pattern. If specified, then the query system will only
              consider plans using the hinted index.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;hint&quot;</code> option if not
              specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>limit</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              The maximum number of documents to return. If unspecified, then
              defaults to no limit. A limit of 0 is equivalent to setting no
              limit.
             </p>
             <p class="para">
              A negative limit is will be interpreted as a positive limit with the
              <code class="literal">&quot;singleBatch&quot;</code> option set to <strong><code>TRUE</code></strong>. This behavior
              is supported for backwards compatibility, but should be considered
              deprecated.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>max</td>
            <td><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></td>
            <td>
             <p class="para">
              The <em class="emphasis">exclusive</em> upper bound for a specific index.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$max&quot;</code> modifier if
              not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>maxAwaitTimeMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              Positive integer denoting the time limit in milliseconds for the
              server to block a getMore operation if no data is available. This
              option should only be used in conjunction with the
              <code class="literal">&quot;tailable&quot;</code> and <code class="literal">&quot;awaitData&quot;</code>
              options.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>maxScan</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <div class="warning"><strong class="warning">Warning</strong>
              <p class="simpara">
               This option is deprecated and should not be used.
              </p>
             </div>
             <p class="para">
              Positive integer denoting the maximum number of documents or index
              keys to scan when executing the query.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$maxScan&quot;</code> modifier
              if not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>maxTimeMS</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              The cumulative time limit in milliseconds for processing operations
              on the cursor. MongoDB aborts the operation at the earliest
              following interrupt point.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$maxTimeMS&quot;</code>
              modifier if not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>min</td>
            <td><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></td>
            <td>
             <p class="para">
              The <em class="emphasis">inclusive</em> lower bound for a specific index.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$min&quot;</code> modifier if
              not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>modifiers</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <a href="https://docs.mongodb.com/manual/reference/operator/query-modifier/" class="link external">&raquo;&nbsp;Meta operators</a>
             modifying the output or behavior of a query. Use of these operators
             is deprecated in favor of named options.
            </td>
           </tr>
  
           <tr>
            <td>noCursorTimeout</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Prevents the server from timing out idle cursors after an inactivity
             period (10 minutes).
            </td>
           </tr>
  
           <tr>
            <td>oplogReplay</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Internal use for replica sets. To use oplogReplay, you must include
              the following condition in the filter:
             </p>
             <p class="para">
              <div class="example-contents">
  <div class="textcode"><pre class="textcode">[ &#039;ts&#039; =&gt; [ &#039;$gte&#039; =&gt; &lt;timestamp&gt; ] ]</pre>
  </div>
              </div>
  
             </p>
             <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This option is deprecated as of the 1.8.0 release.</span></p></blockquote>
            </td>
           </tr>
  
           <tr>
            <td>projection</td>
            <td><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></td>
            <td>
             <p class="para">
              The <a href="https://docs.mongodb.com/manual/tutorial/project-fields-from-query-results/" class="link external">&raquo;&nbsp;projection specification</a>
              to determine which fields to include in the returned documents.
             </p>
             <p class="para">
              If you are using the <a href="#mongodb.persistence.deserialization" class="link">ODM
              functionality</a> to deserialise documents as their original
              PHP class, make sure that you include the
              <span class="property">__pclass</span> field in the projection. This is
              required for the deserialization to work and without it, the
              driver will return (by default) a <strong class="classname">stdClass</strong>
              object instead.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation. By default, the read
              concern from the
              <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB
              Connection URI</a> will be used.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>returnKey</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              If <strong><code>TRUE</code></strong>, returns only the index keys in the resulting documents.
              Default value is <strong><code>FALSE</code></strong>. If <strong><code>TRUE</code></strong> and the find command does not
              use an index, the returned documents will be empty.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$returnKey&quot;</code>
              modifier if not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>showRecordId</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              Determines whether to return the record identifier for each
              document. If <strong><code>TRUE</code></strong>, adds a top-level <code class="literal">&quot;$recordId&quot;</code>
              field to the returned documents.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$showDiskLoc&quot;</code>
              modifier if not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>singleBatch</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Determines whether to close the cursor after the first batch.
             Defaults to <strong><code>FALSE</code></strong>.
            </td>
           </tr>
  
           <tr>
            <td>skip</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>Number of documents to skip. Defaults to 0.</td>
           </tr>
  
           <tr>
            <td>slaveOk</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>Allow query of replica set secondaries</td>
           </tr>
  
           <tr>
            <td>snapshot</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <div class="warning"><strong class="warning">Warning</strong>
              <p class="simpara">
               This option is deprecated and should not be used.
              </p>
             </div>
             <p class="para">
              Prevents the cursor from returning a document more than once because
              of an intervening write operation.
             </p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$snapshot&quot;</code> modifier
              if not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>sort</td>
            <td><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></td>
            <td>
             <p class="para">The sort specification for the ordering of the results.</p>
             <p class="para">
              Falls back to the deprecated <code class="literal">&quot;$orderby&quot;</code> modifier
              if not specified.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>tailable</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>Returns a tailable cursor for a capped collection.</td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-query.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-query.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.8.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;allowDiskUse&quot;</code> option.
          </p>
          <p class="para">
           The <code class="literal">&quot;oplogReplay&quot;</code> option is deprecated.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.5.0</td>
         <td>
          <p class="para">
           The <code class="literal">&quot;maxScan&quot;</code> and <code class="literal">&quot;snapshot&quot;</code>
           options are deprecated.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;maxAwaitTimeMS&quot;</code> option.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           Added the <code class="literal">&quot;allowPartialResults&quot;</code>,
           <code class="literal">&quot;collation&quot;</code>, <code class="literal">&quot;comment&quot;</code>,
           <code class="literal">&quot;hint&quot;</code>, <code class="literal">&quot;max&quot;</code>,
           <code class="literal">&quot;maxScan&quot;</code>, <code class="literal">&quot;maxTimeMS&quot;</code>,
           <code class="literal">&quot;min&quot;</code>, <code class="literal">&quot;returnKey&quot;</code>,
           <code class="literal">&quot;showRecordId&quot;</code>, and <code class="literal">&quot;snapshot&quot;</code>
           options.
          </p>
          <p class="para">
           Renamed the <code class="literal">&quot;partial&quot;</code> option to
           <code class="literal">&quot;allowPartialResults&quot;</code>. For backwards compatibility,
           <code class="literal">&quot;partial&quot;</code> will still be read if
           <code class="literal">&quot;allowPartialResults&quot;</code> is not specified.
          </p>
          <p class="para">
           Removed the <code class="literal">&quot;slaveOk&quot;</code> option, which is obsolete.
           For queries using the legacy wire protocol OP_QUERY, the driver will
           set the <code class="literal">slaveOk</code> bit as needed in accordance with the
           <a href="https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst" class="link external">&raquo;&nbsp;Server Selection Specification</a>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.1.0</td>
         <td>Added the <code class="literal">&quot;readConcern&quot;</code> option.</td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-query.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1745">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Query::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Select&nbsp;only&nbsp;documents&nbsp;authord&nbsp;by&nbsp;"bjori"&nbsp;with&nbsp;at&nbsp;least&nbsp;100&nbsp;views&nbsp;*/<br /></span><span style="color: #0000BB">$filter&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bjori'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'views'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'$gte'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />];<br /><br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Only&nbsp;return&nbsp;the&nbsp;following&nbsp;fields&nbsp;in&nbsp;the&nbsp;matching&nbsp;documents&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'projection'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'article'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Return&nbsp;the&nbsp;documents&nbsp;in&nbsp;descending&nbsp;order&nbsp;of&nbsp;views&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'sort'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'views'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">],<br />];<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">(</span><span style="color: #0000BB">$filter</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$readPreference&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'databaseName.collectionName'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$readPreference</span><span style="color: #007700">);<br /><br />foreach(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-query.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.executequery" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeQuery()</a> - Execute a database query</span></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-query.construct">MongoDB\Driver\Query::__construct</a> — Create a new Query</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-bulkwrite" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\BulkWrite class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-bulkwrite.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\BulkWrite</strong> collects one or more
      write operations that should be sent to the server. After adding any
      number of insert, update, and delete operations, the collection may be
      executed via
      <span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname">MongoDB\Driver\Manager::executeBulkWrite()</a></span>.
     </p>
     <p class="para">
      Write operations may either be ordered (default) or unordered. Ordered write
      operations are sent to the server, in the order provided, for serial
      execution. If a write fails, any remaining operations will be aborted.
      Unordered operations are sent to the server in an arbitrary order
      where they may be executed in parallel. Any errors that occur are reported
      after all operations have been attempted.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-bulkwrite.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\BulkWrite</strong>
       </span>
       
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.countable" class="interfacename">Countable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-bulkwrite.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-bulkwrite.count" class="methodname">count</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-bulkwrite.delete" class="methodname">delete</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$filter</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$deleteOptions</code></span>
    ] ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-bulkwrite.insert" class="methodname">insert</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-bulkwrite.update" class="methodname">update</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$filter</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$newObj</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$updateOptions</code></span>
    ] ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section" id="mongodb-driver-bulkwrite.examples">
     <h2 class="title">Examples</h2>
  
     <div class="example" id="example-1746">
      <p><strong>Example #1 Mixed write operations are grouped by type</strong></p>
      <div class="example-contents"><p>
       Mixed write operations (i.e. inserts, updates, and deletes) will be
       assembled into typed write commands to be sent sequentially to the server.
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">([</span><span style="color: #DD0000">'ordered'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>
       Will result in four write commands (i.e. roundtrips) being executed. Since
       the operations are ordered, the third insertion cannot be sent until the
       preceding update is executed.
      </p></div>
     </div>
     <div class="example" id="example-1747">
      <p><strong>Example #2 Ordered write operations causing an error</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">([</span><span style="color: #DD0000">'ordered'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'hello'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'world'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'hello'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'earth'</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'hello'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'pluto'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'hello'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'moon'</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$writeConcern&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcern</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Check&nbsp;if&nbsp;the&nbsp;write&nbsp;concern&nbsp;could&nbsp;not&nbsp;be&nbsp;fulfilled<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$writeConcernError&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%d):&nbsp;%s\n"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInfo</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Check&nbsp;if&nbsp;any&nbsp;write&nbsp;operations&nbsp;did&nbsp;not&nbsp;complete&nbsp;at&nbsp;all<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Operation#%d:&nbsp;%s&nbsp;(%d)\n"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIndex</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Other&nbsp;error:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Inserted&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Updated&nbsp;&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModifiedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
     <p class="para">The above example will output:</p>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Operation#7: E11000 duplicate key error index: db.collection.$_id_ dup key: { : 3 } (11000)
  Inserted 4 document(s)
  Updated  2 document(s)
  </pre></div>
     </div>
     <p class="para">
      If the write concern could not be fullfilled, the example above would output
      something like:
     </p>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  waiting for replication timed out (64): array (
    &#039;wtimeout&#039; =&gt; true,
  )
  Operation#7: E11000 duplicate key error index: databaseName.collectionName.$_id_ dup key: { : 3 } (11000)
  Inserted 4 document(s)
  Updated  2 document(s)
  </pre></div>
     </div>
     <p class="para">
      If we execute the example above, but allow for unordered writes:
     </p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">([</span><span style="color: #DD0000">'ordered'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">]);<br /></span><span style="color: #FF8000">/*&nbsp;...&nbsp;*/<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <p class="para">The above example will output:</p>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Operation#7: E11000 duplicate key error index: db.collection.$_id_ dup key: { : 3 } (11000)
  Operation#8: E11000 duplicate key error index: db.collection.$_id_ dup key: { : 4 } (11000)
  Inserted 5 document(s)
  Updated  2 document(s)
  </pre></div>
     </div>
    </div>
  
    <div class="section" id="mongodb-driver-bulkwrite.seealso">
     <h2 class="title">See Also</h2>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname">MongoDB\Driver\Manager::executeBulkWrite()</a></span></li>
      <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
      <li class="member"><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></li>
      <li class="member"><a href="#class.mongodb-driver-writeconcernerror" class="classname">MongoDB\Driver\WriteConcernError</a></li>
      <li class="member"><a href="#class.mongodb-driver-writeerror" class="classname">MongoDB\Driver\WriteError</a></li>
     </ul>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-bulkwrite.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\BulkWrite::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\BulkWrite::__construct</span> &mdash; <span class="dc-title">Create a new BulkWrite</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-bulkwrite.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\BulkWrite::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>, which is a
     mutable object to which one or more write operations may be added. The
     write(s) may then be executed with
     <span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname">MongoDB\Driver\Manager::executeBulkWrite()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-bulkwrite.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">options</code> (<span class="type"><a href="#language.types.array" class="type array">array</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
            <th>Default</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>bypassDocumentValidation</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             <p class="para">
              If <strong><code>TRUE</code></strong>, allows insert and update operations to circumvent
              document level validation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and is ignored for older
              server versions, which do not support document level validation.
             </p>
            </td>
            <td><strong><code>FALSE</code></strong></td>
           </tr>
  
           <tr>
            <td>ordered</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Ordered operations (<strong><code>TRUE</code></strong>) are executed serially on the MongoDB
             server, while unordered operations (<strong><code>FALSE</code></strong>) are sent to the server
             in an arbitrary order and may be executed in parallel.
            </td>
            <td><strong><code>TRUE</code></strong></td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-bulkwrite.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-bulkwrite.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.1.0</td>
         <td>
          Added the <code class="literal">&quot;bypassDocumentValidation&quot;</code> option.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-bulkwrite.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1748">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\BulkWrite::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">([</span><span style="color: #DD0000">'ordered'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'limit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">]<br />);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'limit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'limit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]<br />);<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$writeConcern&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcern</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Check&nbsp;if&nbsp;the&nbsp;write&nbsp;concern&nbsp;could&nbsp;not&nbsp;be&nbsp;fulfilled<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$writeConcernError&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%d):&nbsp;%s\n"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInfo</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Check&nbsp;if&nbsp;any&nbsp;write&nbsp;operations&nbsp;did&nbsp;not&nbsp;complete&nbsp;at&nbsp;all<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Operation#%d:&nbsp;%s&nbsp;(%d)\n"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getIndex</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeError</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Other&nbsp;error:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Inserted&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Updated&nbsp;&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModifiedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Upserted&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUpsertedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Deleted&nbsp;&nbsp;%d&nbsp;document(s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDeletedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  Inserted 2 document(s)
  Updated  1 document(s)
  Upserted 1 document(s)
  Deleted  1 document(s)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-bulkwrite.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeBulkWrite()</a> - Execute one or more write operations</span></li>
     <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-bulkwrite.count" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\BulkWrite::count</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\BulkWrite::count</span> &mdash; <span class="dc-title">Count number of write operations in the bulk</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-bulkwrite.count-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\BulkWrite::count</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     Returns the number of write operations added to the
     <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> object.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-bulkwrite.count-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-bulkwrite.count-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns number of write operations added to the
     <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-bulkwrite.count-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-bulkwrite.count-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.0</td>
         <td>
          Returns the number of write operations added to the
          <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> object. Earlier versions
          returned the expected number of client-to-server roundtrips required to
          execute all write operations.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-bulkwrite.count-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1749">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\BulkWrite::count()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(4)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-bulkwrite.delete" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\BulkWrite::delete</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\BulkWrite::delete</span> &mdash; <span class="dc-title">Add a delete operation to the bulk</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-bulkwrite.delete-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\BulkWrite::delete</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$filter</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$deleteOptions</code></span>
    ] ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Adds a delete operation to the
     <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-bulkwrite.delete-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">filter</code> (<span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The <a href="https://docs.mongodb.com/manual/tutorial/query-documents/" class="link external">&raquo;&nbsp;query predicate</a>.
        An empty predicate will match all documents in the collection.
       </p>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
         When evaluating query criteria, MongoDB compares types and values according to its own <a href="https://docs.mongodb.com/manual/reference/bson-type-comparison-order/" class="link external">&raquo;&nbsp;comparison rules for BSON types</a>, which differs from PHP&#039;s <a href="#types.comparisons" class="link">comparison</a> and <a href="#language.types.type-juggling" class="link">type juggling</a> rules. When matching a special BSON type the query criteria should use the respective <a href="#book.bson" class="link">BSON class</a> (e.g. use <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> to match an <a href="https://docs.mongodb.com/manual/reference/object-id/" class="link external">&raquo;&nbsp;ObjectId</a>).
        </span>
       </p></blockquote>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">deleteOptions</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>deleteOptions</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
            <th>Default</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>collation</td>
            <td><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></td>
            <td>
             <p class="para">
              <a href="https://docs.mongodb.com/master/reference/collation/" class="link external">&raquo;&nbsp;Collation</a> allows users to specify language-specific rules for string comparison, such as rules for lettercase and accent marks. When specifying collation, the <code class="literal">&quot;locale&quot;</code> field is mandatory; all other collation fields are optional. For descriptions of the fields, see <a href="https://docs.mongodb.com/master/reference/collation/#collation-document" class="link external">&raquo;&nbsp;Collation Document</a>.
             </p>
             <p class="para">
              If the collation is unspecified but the collection has a default collation, the operation uses the collation specified for the collection. If no collation is specified for the collection or for the operation, MongoDB uses the simple binary comparison used in prior versions for string comparisons.
             </p>
             <p class="para">
              This option is available in MongoDB 3.4+ and will result in an exception at execution time if specified for an older server version.
             </p>
            </td>
           </tr>
  
  
           <tr>
            <td>hint</td>
            <td><span class="type"><span class="type string|array|object">string|array|object</span></span></td>
            <td>
             <p class="para">
              Index specification. Specify either the index name as a string or
              the index key pattern. If specified, then the query system will only
              consider plans using the hinted index.
             </p>
             <p class="para">
              This option is available in MongoDB 4.4+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>limit</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>Delete all matching documents (<strong><code>FALSE</code></strong>), or only the first matching document (<strong><code>TRUE</code></strong>)</td>
            <td><strong><code>FALSE</code></strong></td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-bulkwrite.delete-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-bulkwrite.delete-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-bulkwrite.delete-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.8.0</td>
         <td>
          Added the <code class="literal">&quot;hint&quot;</code> option.
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          Added the <code class="literal">&quot;collation&quot;</code> option.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-bulkwrite.delete-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1750">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\BulkWrite::delete()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'limit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'limit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-bulkwrite.delete-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeBulkWrite()</a> - Execute one or more write operations</span></li>
     <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-bulkwrite.insert" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\BulkWrite::insert</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\BulkWrite::insert</span> &mdash; <span class="dc-title">Add an insert operation to the bulk</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-bulkwrite.insert-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\BulkWrite::insert</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
    <p class="para rdfs-comment">
     Adds an insert operation to the
     <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-bulkwrite.insert-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">document</code> (<span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A document to insert.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-bulkwrite.insert-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <code class="literal">_id</code> of the inserted document. If the
     <code class="parameter">document</code> did not have an <code class="literal">_id</code>, the
     <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> generated for the insert will
     be returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-bulkwrite.insert-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-bulkwrite.insert-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.3.0</td>
         <td>
          The <code class="literal">_id</code> of the inserted document is always returned.
          Previously, the method only returned a value if a
          <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> was generated.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-bulkwrite.insert-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1751">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\BulkWrite::insert()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$document1&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'one'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$document2&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'custom&nbsp;ID'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'two'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$document3&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'three'</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">$_id1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$document1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$_id2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$document2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$_id3&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$document3</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$_id1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_id2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_id3</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\ObjectId)#3 (1) {
    [&quot;oid&quot;]=&gt;
    string(24) &quot;54d51146bd21b91405401d92&quot;
  }
  NULL
  NULL
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-bulkwrite.insert-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeBulkWrite()</a> - Execute one or more write operations</span></li>
     <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
     <li class="member"><a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a></li>
     <li class="member"><span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-bulkwrite.update" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\BulkWrite::update</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\BulkWrite::update</span> &mdash; <span class="dc-title">Add an update operation to the bulk</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-bulkwrite.update-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\BulkWrite::update</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$filter</code></span>
     , <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$newObj</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$updateOptions</code></span>
    ] ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Adds an update operation to the
     <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-bulkwrite.update-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">filter</code> (<span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The <a href="https://docs.mongodb.com/manual/tutorial/query-documents/" class="link external">&raquo;&nbsp;query predicate</a>.
        An empty predicate will match all documents in the collection.
       </p>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
         When evaluating query criteria, MongoDB compares types and values according to its own <a href="https://docs.mongodb.com/manual/reference/bson-type-comparison-order/" class="link external">&raquo;&nbsp;comparison rules for BSON types</a>, which differs from PHP&#039;s <a href="#types.comparisons" class="link">comparison</a> and <a href="#language.types.type-juggling" class="link">type juggling</a> rules. When matching a special BSON type the query criteria should use the respective <a href="#book.bson" class="link">BSON class</a> (e.g. use <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> to match an <a href="https://docs.mongodb.com/manual/reference/object-id/" class="link external">&raquo;&nbsp;ObjectId</a>).
        </span>
       </p></blockquote>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">newObj</code> (<span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A document containing either update operators (e.g.
        <code class="literal">$set</code>), a replacement document (i.e.
        <em class="emphasis">only</em> <code class="literal">field:value</code> expressions), or
        an <a href="https://docs.mongodb.com/manual/reference/command/update/#update-with-an-aggregation-pipeline" class="link external">&raquo;&nbsp;aggregation pipeline</a>.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">updateOptions</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>updateOptions</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
            <th>Default</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>arrayFilters</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              An array of filter documents that determines which array elements to
              modify for an update operation on an array field. See
              <a href="https://docs.mongodb.com/manual/reference/command/update/#update-command-arrayfilters" class="link external">&raquo;&nbsp;Specify arrayFilters for Array Update Operations</a>
              in the MongoDB manual for more information.
             </p>
             <p class="para">
              This option is available in MongoDB 3.6+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
           
           <tr>
            <td>collation</td>
            <td><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></td>
            <td>
             <p class="para">
              <a href="https://docs.mongodb.com/master/reference/collation/" class="link external">&raquo;&nbsp;Collation</a> allows users to specify language-specific rules for string comparison, such as rules for lettercase and accent marks. When specifying collation, the <code class="literal">&quot;locale&quot;</code> field is mandatory; all other collation fields are optional. For descriptions of the fields, see <a href="https://docs.mongodb.com/master/reference/collation/#collation-document" class="link external">&raquo;&nbsp;Collation Document</a>.
             </p>
             <p class="para">
              If the collation is unspecified but the collection has a default collation, the operation uses the collation specified for the collection. If no collation is specified for the collection or for the operation, MongoDB uses the simple binary comparison used in prior versions for string comparisons.
             </p>
             <p class="para">
              This option is available in MongoDB 3.4+ and will result in an exception at execution time if specified for an older server version.
             </p>
            </td>
           </tr>
  
  
           <tr>
            <td>hint</td>
            <td><span class="type"><span class="type string|array|object">string|array|object</span></span></td>
            <td>
             <p class="para">
              Index specification. Specify either the index name as a string or
              the index key pattern. If specified, then the query system will only
              consider plans using the hinted index.
             </p>
             <p class="para">
              This option is available in MongoDB 4.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>multi</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             Update only the first matching document if <strong><code>FALSE</code></strong>, or all
             matching documents <strong><code>TRUE</code></strong>. This option cannot be <strong><code>TRUE</code></strong> if
             <code class="parameter">newObj</code> is a replacement document.
            </td>
            <td><strong><code>FALSE</code></strong></td>
           </tr>
  
           <tr>
            <td>upsert</td>
            <td><span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span></td>
            <td>
             If <code class="parameter">filter</code> does not match an existing document,
             insert a <em class="emphasis">single</em> document. The document will be
             created from <code class="parameter">newObj</code> if it is a replacement
             document (i.e. no update operators); otherwise, the operators in
             <code class="parameter">newObj</code> will be applied to
             <code class="parameter">filter</code> to create the new document.
            </td>
            <td><strong><code>FALSE</code></strong></td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-bulkwrite.update-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-bulkwrite.update-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-bulkwrite.update-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.7.0</td>
         <td>
          Added the <code class="literal">&quot;hint&quot;</code> option.
         </td>
        </tr>
  
        <tr>
         <td>1.6.0</td>
         <td>
          The <code class="parameter">newObj</code> parameter now accepts an aggregation
          pipeline. This feature requires MongoDB 4.2+ and will result in an
          exception at execution time if specified for an older server version.
         </td>
        </tr>
  
        <tr>
         <td>1.5.0</td>
         <td>
          Using the <code class="literal">&quot;arrayFilters&quot;</code> option will result in an
          exception at execution time if unsupported by the server. Previously,
          no exception would be thrown and the option may have been ignored.
         </td>
        </tr>
  
        <tr>
         <td>1.4.0</td>
         <td>
          Added the <code class="literal">&quot;arrayFilters&quot;</code> option.
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          Added the <code class="literal">&quot;collation&quot;</code> option.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-bulkwrite.update-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1752">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\BulkWrite::update()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'multi'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">]<br />);<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost:27017'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-bulkwrite.update-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeBulkWrite()</a> - Execute one or more write operations</span></li>
     <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-bulkwrite.construct">MongoDB\Driver\BulkWrite::__construct</a> — Create a new BulkWrite</li><li><a href="#mongodb-driver-bulkwrite.count">MongoDB\Driver\BulkWrite::count</a> — Count number of write operations in the bulk</li><li><a href="#mongodb-driver-bulkwrite.delete">MongoDB\Driver\BulkWrite::delete</a> — Add a delete operation to the bulk</li><li><a href="#mongodb-driver-bulkwrite.insert">MongoDB\Driver\BulkWrite::insert</a> — Add an insert operation to the bulk</li><li><a href="#mongodb-driver-bulkwrite.update">MongoDB\Driver\BulkWrite::update</a> — Add an update operation to the bulk</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-session" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Session class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.4.0)</p>
  
  
    <div class="section" id="mongodb-driver-session.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Session</strong> class represents a
      client session and is returned by
      <span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname">MongoDB\Driver\Manager::startSession()</a></span>. Commands,
      queries, and write operations may then be associated the session.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-session.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Session</strong>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">TRANSACTION_NONE</var>
       <span class="initializer"> = none</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">TRANSACTION_STARTING</var>
       <span class="initializer"> = starting</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">TRANSACTION_IN_PROGRESS</var>
       <span class="initializer"> = in_progress</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">TRANSACTION_COMMITTED</var>
       <span class="initializer"> = committed</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">TRANSACTION_ABORTED</var>
       <span class="initializer"> = aborted</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.aborttransaction" class="methodname">abortTransaction</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.advanceclustertime" class="methodname">advanceClusterTime</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$clusterTime</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.advanceoperationtime" class="methodname">advanceOperationTime</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-bson-timestampinterface" class="type MongoDB\BSON\TimestampInterface">MongoDB\BSON\TimestampInterface</a></span> <code class="parameter">$operationTime</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.committransaction" class="methodname">commitTransaction</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-driver-session.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.endsession" class="methodname">endSession</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.getclustertime" class="methodname">getClusterTime</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.getlogicalsessionid" class="methodname">getLogicalSessionId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.getoperationtime" class="methodname">getOperationTime</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type MongoDB\BSON\Timestamp|null">MongoDB\BSON\Timestamp|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.getserver" class="methodname">getServer</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type MongoDB\Driver\Server|null">MongoDB\Driver\Server|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.gettransactionoptions" class="methodname">getTransactionOptions</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type array|null">array|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.gettransactionstate" class="methodname">getTransactionState</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.isintransaction" class="methodname">isInTransaction</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">boolean</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">startTransaction</a></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    
    <div class="section" id="mongodb-driver-session.constants">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
  
      
       <dt id="mongodb-driver-session.constants.transaction-none"><strong><code>MongoDB\Driver\Session::TRANSACTION_NONE</code></strong></dt>
  
       <dd>
  
        <p class="para">
         There is no transaction in progress.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-session.constants.transaction-starting"><strong><code>MongoDB\Driver\Session::TRANSACTION_STARTING</code></strong></dt>
  
       <dd>
  
        <p class="para">
         A transaction has been started, but no operation has been sent to the server.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-session.constants.transaction-in-progress"><strong><code>MongoDB\Driver\Session::TRANSACTION_IN_PROGRESS</code></strong></dt>
  
       <dd>
  
        <p class="para">
         A transaction is in progress.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-session.constants.transaction-committed"><strong><code>MongoDB\Driver\Session::TRANSACTION_COMMITTED</code></strong></dt>
  
       <dd>
  
        <p class="para">
         The transaction was committed.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-session.constants.transaction-aborted"><strong><code>MongoDB\Driver\Session::TRANSACTION_ABORTED</code></strong></dt>
  
       <dd>
  
        <p class="para">
         The transaction was aborted.
        </p>
       </dd>
  
      
  
     </dl>
  
    </div>
    
  
   </div>
  
   
   
  
  <div id="mongodb-driver-session.aborttransaction" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::abortTransaction</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::abortTransaction</span> &mdash; <span class="dc-title">Aborts a transaction</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.aborttransaction-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::abortTransaction</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Terminates the multi-document transaction and rolls back any data changes
     made by the operations within the transaction. That is, the transaction ends
     without saving any of the changes made by the operations in the transaction.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.aborttransaction-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.aborttransaction-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.aborttransaction-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> if the transaction could not be aborted (e.g. a transaction was not started).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.aborttransaction-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::startSession()</a> - Start a new client session for use with this client</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.committransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::commitTransaction()</a> - Commits a transaction</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::startTransaction()</a> - Starts a transaction</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.advanceclustertime" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::advanceClusterTime</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::advanceClusterTime</span> &mdash; <span class="dc-title">Advances the cluster time for this session</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.advanceclustertime-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::advanceClusterTime</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$clusterTime</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Advances the cluster time for this session. If the cluster time is less than
     or equal to the session&#039;s current cluster time, this function is a no-op.
    </p>
    <p class="para">
     By using this method in conjunction with
     <span class="methodname"><a href="#mongodb-driver-session.advanceoperationtime" class="methodname">MongoDB\Driver\Session::advanceOperationTime()</a></span> to copy
     the cluster and operation times from another session, you can ensure that
     operations in this session are causally consistent with the last operation in
     the other session.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.advanceclustertime-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">clusterTime</code></dt>
  
      <dd>
  
       <p class="para">
        The cluster time is a document containing a logical timestamp and server
        signature. Typically, this value will be obtained by calling
        <span class="methodname"><a href="#mongodb-driver-session.getclustertime" class="methodname">MongoDB\Driver\Session::getClusterTime()</a></span> on another
        session object.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.advanceclustertime-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.advanceclustertime-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.advanceclustertime-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.advanceoperationtime" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::advanceOperationTime()</a> - Advances the operation time for this session</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.getclustertime" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::getClusterTime()</a> - Returns the cluster time for this session</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.advanceoperationtime" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::advanceOperationTime</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::advanceOperationTime</span> &mdash; <span class="dc-title">Advances the operation time for this session</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.advanceoperationtime-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::advanceOperationTime</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-bson-timestampinterface" class="type MongoDB\BSON\TimestampInterface">MongoDB\BSON\TimestampInterface</a></span> <code class="parameter">$operationTime</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Advances the operation time for this session. If the operation time is less
     than or equal to the session&#039;s current operation time, this function is a
     no-op.
    </p>
    <p class="para">
     By using this method in conjunction with
     <span class="methodname"><a href="#mongodb-driver-session.advanceclustertime" class="methodname">MongoDB\Driver\Session::advanceClusterTime()</a></span> to copy
     the operation and cluster times from another session, you can ensure that
     operations in this session are causally consistent with the last operation in
     the other session.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.advanceoperationtime-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">operationTime</code></dt>
  
      <dd>
  
       <p class="para">
        The operation time is a logical timestamp. Typically, this value will be
        obtained by calling
        <span class="methodname"><a href="#mongodb-driver-session.getoperationtime" class="methodname">MongoDB\Driver\Session::getOperationTime()</a></span> on
        another session object.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.advanceoperationtime-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.advanceoperationtime-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.advanceoperationtime-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.advanceclustertime" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::advanceClusterTime()</a> - Advances the cluster time for this session</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.getclustertime" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::getClusterTime()</a> - Returns the cluster time for this session</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.committransaction" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::commitTransaction</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::commitTransaction</span> &mdash; <span class="dc-title">Commits a transaction</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.committransaction-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::commitTransaction</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Saves the changes made by the operations in the multi-document transaction
     and ends the transaction. Until the commit, none of the data changes made
     from within the transaction are visible outside the transaction.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.committransaction-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.committransaction-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.committransaction-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws
     <a href="#class.mongodb-driver-exception-commandexception" class="classname">MongoDB\Driver\Exception\CommandException</a> if the
     server could not commit the transaction (e.g. due to conflicts, network
     issues). In case the exception&#039;s
     <span class="methodname"><a href="#mongodb-driver-commandexception.getresultdocument" class="methodname">MongoDB\Driver\Exception\CommandException::getResultDocument()</a></span>
     has a <code class="literal">&quot;errorLabels&quot;</code> element, and this array contains a
     <code class="literal">&quot;TransientTransactionError&quot;</code> or
     <code class="literal">&quot;UnUnknownTransactionCommitResult&quot;</code> value, it is safe to re-try
     the <em class="emphasis">whole</em> transaction. In newer versions of the
     driver,
     <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel()</a></span>
     should be used to test for this situation instead.</li>
     <li class="member">Throws
     <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> if the
     transaction could not be commited (e.g. a transaction was not
     started).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.committransaction-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::startSession()</a> - Start a new client session for use with this client</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.aborttransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::abortTransaction()</a> - Aborts a transaction</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::startTransaction()</a> - Starts a transaction</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel()</a> - Returns whether an error label is associated with an exception</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::__construct</span> &mdash; <span class="dc-title">Create a new Session (not used)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\Driver\Session::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a> objects are returned by
     <span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname">MongoDB\Driver\Manager::startSession()</a></span> and cannot be
     constructed directly.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.startsession" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::startSession()</a> - Start a new client session for use with this client</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.endsession" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::endSession</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::endSession</span> &mdash; <span class="dc-title">Terminates a session</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.endsession-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::endSession</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     This method closes an existing session. If a transaction was associated
     with this session, the transaction will be aborted. After calling this
     method, applications should not invoke other methods on the session.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Sessions are also closed during garbage collection. It should not be
      necessary to call this method under normal circumstances.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.endsession-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.endsession-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.endsession-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.endsession-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::startSession()</a> - Start a new client session for use with this client</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.aborttransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::abortTransaction()</a> - Aborts a transaction</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.committransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::commitTransaction()</a> - Commits a transaction</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::startTransaction()</a> - Starts a transaction</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.getclustertime" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::getClusterTime</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::getClusterTime</span> &mdash; <span class="dc-title">Returns the cluster time for this session</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.getclustertime-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::getClusterTime</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  
    <p class="para rdfs-comment">
     Returns the cluster time for this session. If the session has not been used
     for any operation and
     <span class="methodname"><a href="#mongodb-driver-session.advanceclustertime" class="methodname">MongoDB\Driver\Session::advanceClusterTime()</a></span> has not
     been called, the cluster time will be <strong><code>NULL</code></strong>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.getclustertime-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.getclustertime-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the cluster time for this session, or <strong><code>NULL</code></strong> if the session has no
     cluster time.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.getclustertime-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.getclustertime-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.advanceclustertime" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::advanceClusterTime()</a> - Advances the cluster time for this session</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.getlogicalsessionid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::getLogicalSessionId</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::getLogicalSessionId</span> &mdash; <span class="dc-title">Returns the logical session ID for this session</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.getlogicalsessionid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::getLogicalSessionId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
    <p class="para rdfs-comment">
     Returns the logical session ID for this session, which may be used to
     identify this session&#039;s operations on the server.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.getlogicalsessionid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.getlogicalsessionid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the logical session ID for this session.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.getlogicalsessionid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.getoperationtime" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::getOperationTime</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::getOperationTime</span> &mdash; <span class="dc-title">Returns the operation time for this session</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.getoperationtime-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::getOperationTime</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type MongoDB\BSON\Timestamp|null">MongoDB\BSON\Timestamp|null</span></span></div>
  
    <p class="para rdfs-comment">
     Returns the operation time for this session. If the session has not been used
     for any operation and
     <span class="methodname"><a href="#mongodb-driver-session.advanceoperationtime" class="methodname">MongoDB\Driver\Session::advanceOperationTime()</a></span> has not
     been called, the operation time will be <strong><code>NULL</code></strong>
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.getoperationtime-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.getoperationtime-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the operation time for this session, or <strong><code>NULL</code></strong> if the session has no
     operation time.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.getoperationtime-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.getoperationtime-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.advanceoperationtime" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::advanceOperationTime()</a> - Advances the operation time for this session</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.getserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::getServer</h1>
    <p class="verinfo">(mongodb &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::getServer</span> &mdash; <span class="dc-title">Returns the server to which this session is pinned</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.getserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::getServer</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type MongoDB\Driver\Server|null">MongoDB\Driver\Server|null</span></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> to which this
     session is pinned. If the session is not pinned to a server, <strong><code>NULL</code></strong> will be
     returned.
    </p>
    <p class="para">
     Session pinning is primarily used for sharded transactions, as all commands
     within a sharded transaction must be sent to the same mongos instance. This
     method is intended to be used by libraries built atop the extension to allow
     use of a pinned server instead of invoking server selection.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.getserver-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.getserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> to which this
     session is pinned, or <strong><code>NULL</code></strong> if the session is not pinned to any server.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.getserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.gettransactionoptions" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::getTransactionOptions</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::getTransactionOptions</span> &mdash; <span class="dc-title">Returns options for the currently running transaction</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.gettransactionoptions-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::getTransactionOptions</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type array|null">array|null</span></span></div>
  
    <p class="para rdfs-comment">
     Returns options for the currently running transaction.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.gettransactionoptions-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.gettransactionoptions-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a <span class="type"><a href="#language.types.array" class="type array">array</a></span> containing current transaction options, or
     <strong><code>NULL</code></strong> if no transaction is running.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.gettransactionoptions-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.gettransactionoptions-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.gettransactionstate" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::getTransactionState()</a> - Returns the current transaction state for this session</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.gettransactionstate" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::getTransactionState</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::getTransactionState</span> &mdash; <span class="dc-title">Returns the current transaction state for this session</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.gettransactionstate-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::getTransactionState</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the transaction state for this session.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.gettransactionstate-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.gettransactionstate-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the current transaction state for this session.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.gettransactionstate-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.gettransactionstate-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.isintransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::isInTransaction()</a> - Returns whether a multi-document transaction is in progress</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.gettransactionoptions" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::getTransactionOptions()</a> - Returns options for the currently running transaction</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.isintransaction" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::isInTransaction</h1>
    <p class="verinfo">(mongodb &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::isInTransaction</span> &mdash; <span class="dc-title">Returns whether a multi-document transaction is in progress</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.isintransaction-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::isInTransaction</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">boolean</span></div>
  
    <p class="para rdfs-comment">
     Returns whether a multi-document transaction is currently in progress for
     this session. A transaction is considered &quot;in progress&quot; if it has been
     started but has not been committed or aborted.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.isintransaction-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.isintransaction-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if a transaction is currently in progress for this session,
     and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.isintransaction-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.isintransaction-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.gettransactionstate" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::getTransactionState()</a> - Returns the current transaction state for this session</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-session.starttransaction" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Session::startTransaction</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Session::startTransaction</span> &mdash; <span class="dc-title">Starts a transaction</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-session.starttransaction-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Session::startTransaction</strong></span>
      ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Starts a multi-document transaction associated with the session. At any given
     time, you can have at most one open transaction for a session. After starting
     a transaction, the session object must be passed to each operation via
     the <code class="literal">&quot;session&quot;</code> option (e.g.
     <span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname">MongoDB\Driver\Manager::executeBulkWrite()</a></span>) in order
     to associate that operation with the transaction.
    </p>
    <p class="para">
     Transactions can be committed through
     <span class="methodname"><a href="#mongodb-driver-session.committransaction" class="methodname">MongoDB\Driver\Session::commitTransaction()</a></span>, and
     aborted with
     <span class="methodname"><a href="#mongodb-driver-session.aborttransaction" class="methodname">MongoDB\Driver\Session::abortTransaction()</a></span>.
     Transactions are also automatically aborted when the session is closed from
     garbage collection or by explicitly calling
     <span class="methodname"><a href="#mongodb-driver-session.endsession" class="methodname">MongoDB\Driver\Session::endSession()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-session.starttransaction-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        Options can be passed as argument to this method. Each element in this
        options array overrides the corresponding option from the
        <code class="literal">&quot;defaultTransactionOptions&quot;</code> option, if set when
        starting the session with
        <span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname">MongoDB\Driver\Manager::startSession()</a></span>.
       </p>
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>maxCommitTimeMS</td>
            <td>integer</td>
            <td>
             <p class="para">
              The maximum amount of time in milliseconds to allow a single
              <code class="literal">commitTransaction</code> command to run.
             </p>
             <p class="para">
              If specified, <code class="literal">maxCommitTimeMS</code> must be a signed
              32-bit integer greater than or equal to zero.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-session.starttransaction-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-session.starttransaction-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-commandexception" class="classname">MongoDB\Driver\Exception\CommandException</a> if the transaction could not be started because of a server-side problem (e.g. a lock could not be obtained).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> if the transaction could not be started (e.g. a transaction was already started).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-session.starttransaction-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.6.0</td>
         <td>
          <p class="para">
           The <code class="literal">&quot;maxCommitTimeMS&quot;</code> option was added.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-session.starttransaction-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.startsession" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::startSession()</a> - Start a new client session for use with this client</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.committransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::commitTransaction()</a> - Commits a transaction</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-session.aborttransaction" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Session::abortTransaction()</a> - Aborts a transaction</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-session.aborttransaction">MongoDB\Driver\Session::abortTransaction</a> — Aborts a transaction</li><li><a href="#mongodb-driver-session.advanceclustertime">MongoDB\Driver\Session::advanceClusterTime</a> — Advances the cluster time for this session</li><li><a href="#mongodb-driver-session.advanceoperationtime">MongoDB\Driver\Session::advanceOperationTime</a> — Advances the operation time for this session</li><li><a href="#mongodb-driver-session.committransaction">MongoDB\Driver\Session::commitTransaction</a> — Commits a transaction</li><li><a href="#mongodb-driver-session.construct">MongoDB\Driver\Session::__construct</a> — Create a new Session (not used)</li><li><a href="#mongodb-driver-session.endsession">MongoDB\Driver\Session::endSession</a> — Terminates a session</li><li><a href="#mongodb-driver-session.getclustertime">MongoDB\Driver\Session::getClusterTime</a> — Returns the cluster time for this session</li><li><a href="#mongodb-driver-session.getlogicalsessionid">MongoDB\Driver\Session::getLogicalSessionId</a> — Returns the logical session ID for this session</li><li><a href="#mongodb-driver-session.getoperationtime">MongoDB\Driver\Session::getOperationTime</a> — Returns the operation time for this session</li><li><a href="#mongodb-driver-session.getserver">MongoDB\Driver\Session::getServer</a> — Returns the server to which this session is pinned</li><li><a href="#mongodb-driver-session.gettransactionoptions">MongoDB\Driver\Session::getTransactionOptions</a> — Returns options for the currently running transaction</li><li><a href="#mongodb-driver-session.gettransactionstate">MongoDB\Driver\Session::getTransactionState</a> — Returns the current transaction state for this session</li><li><a href="#mongodb-driver-session.isintransaction">MongoDB\Driver\Session::isInTransaction</a> — Returns whether a multi-document transaction is in progress</li><li><a href="#mongodb-driver-session.starttransaction">MongoDB\Driver\Session::startTransaction</a> — Starts a transaction</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
  
  
  <div id="class.mongodb-driver-clientencryption" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\ClientEncryption class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.7.0)</p>
  
    
    <div class="section" id="mongodb-driver-clientencryption.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\ClientEncryption</strong> class handles
      creation of data keys for client-side encryption, as well as manually
      encrypting and decrypting values.
     </p>
    </div>
    
  
    <div class="section" id="mongodb-driver-clientencryption.synopsis">
     <h2 class="title">Class synopsis</h2>
  
     
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
      
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\ClientEncryption</strong>
       </span>
       {</div>
      
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">AEAD_AES_256_CBC_HMAC_SHA_512_DETERMINISTIC</var>
       <span class="initializer"> = AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">AEAD_AES_256_CBC_HMAC_SHA_512_RANDOM</var>
       <span class="initializer"> = AEAD_AES_256_CBC_HMAC_SHA_512-Random</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-clientencryption.createdatakey" class="methodname">createDataKey</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$kmsProvider</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongodb-bson-binary" class="type MongoDB\BSON\Binary">MongoDB\BSON\Binary</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-clientencryption.decrypt" class="methodname">decrypt</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-bson-binary" class="type MongoDB\BSON\Binary">MongoDB\BSON\Binary</a></span> <code class="parameter">$value</code></span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-clientencryption.encrypt" class="methodname">encrypt</a></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongodb-bson-binary" class="type MongoDB\BSON\Binary">MongoDB\BSON\Binary</a></span></div>
  
     }</div>
     
  
    </div>
  
    
    <div class="section" id="mongodb-driver-clientencryption.constants">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
  
      
       <dt id="mongodb-driver-clientencryption.constants.deterministic"><strong><code>MongoDB\Driver\ClientEncryption::AEAD_AES_256_CBC_HMAC_SHA_512_DETERMINISTIC</code></strong></dt>
  
       <dd>
  
        <p class="para">Uses randomized encryption.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-clientencryption.constants.random"><strong><code>MongoDB\Driver\ClientEncryption::AEAD_AES_256_CBC_HMAC_SHA_512_RANDOM</code></strong></dt>
  
       <dd>
  
        <p class="para">Uses deterministic (queryable) encryption.</p>
       </dd>
  
      
  
     </dl>
  
    </div>
    
  
    <div class="section" id="mongodb-driver-clientencryption.seealso">
     <h2 class="title">See Also</h2>
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#mongodb-driver-manager.createclientencryption" class="function">MongoDB\Driver\Manager::createClientEncryption()</a></span></li>
     </ul>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-clientencryption.createdatakey" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ClientEncryption::createDataKey</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ClientEncryption::createDataKey</span> &mdash; <span class="dc-title">Create a new encryption data key</span></p>
  
   </div>
   
   <div class="refsect1 description" id="refsect1-mongodb-driver-clientencryption.createdatakey-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ClientEncryption::createDataKey</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$kmsProvider</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongodb-bson-binary" class="type MongoDB\BSON\Binary">MongoDB\BSON\Binary</a></span></div>
  
    <p class="para rdfs-comment">
     Creates a new key document and inserts it into the key vault collection.
    </p>
   </div>
  
   
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-clientencryption.createdatakey-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">kmsProvider</code></dt>
  
      <dd>
  
       <p class="para">
        The KMS provider (<code class="literal">&quot;local&quot;</code> or <code class="literal">&quot;aws&quot;</code>) that
        will be used to encrypt the new encryption key.
       </p>
      </dd>
  
     
     
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>Data key options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>masterKey</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              The masterKey identifies a KMS-specific key used to encrypt the new
              data key. If the kmsProvider is <code class="literal">aws</code> it is
              required and has the following fields:
              <table class="doctable table">
               <caption><strong>AWS masterKey options</strong></caption>
               
                <thead>
                 <tr>
                  <th>Option</th>
                  <th>Type</th>
                  <th>Description</th>
                 </tr>
  
                </thead>
  
                <tbody class="tbody">
                 <tr>
                  <td>region</td>
                  <td>string</td>
                  <td>Required.</td>
                 </tr>
  
                 <tr>
                  <td>key</td>
                  <td>string</td>
                  <td>Required. The Amazon Resource Name (ARN) to the AWS customer master key (CMK).</td>
                 </tr>
  
                 <tr>
                  <td>endpoint</td>
                  <td>string</td>
                  <td>Optional. An alternate host identifier to send KMS requests to. May include port number.</td>
                 </tr>
  
                </tbody>
               
              </table>
  
             </p>
            </td>
           </tr>
  
           <tr>
            <td>keyAltNames</td>
            <td><span class="type"><a href="#language.types.array" class="type array">array</a></span></td>
            <td>
             <p class="para">
              An optional list of string alternate names used to reference a key.
              If a key is created with alternate names, then encryption may refer
              to the key by the unique alternate name instead of by
              <code class="literal">_id</code>.
             </p>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-clientencryption.createdatakey-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the identifier of the new key as a
     <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a> object with subtype 4 (UUID).
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-clientencryption.createdatakey-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-encryptionexception" class="classname">MongoDB\Driver\Exception\EncryptionException</a> if an error occurs while creating the data key</li>
    </ul>
   </div>
  
   
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-clientencryption.decrypt" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ClientEncryption::decrypt</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ClientEncryption::decrypt</span> &mdash; <span class="dc-title">Decrypt a value</span></p>
  
   </div>
   
   <div class="refsect1 description" id="refsect1-mongodb-driver-clientencryption.decrypt-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ClientEncryption::decrypt</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-bson-binary" class="type MongoDB\BSON\Binary">MongoDB\BSON\Binary</a></span> <code class="parameter">$value</code></span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
    <p class="para rdfs-comment">
     Decrypts the value.
    </p>
   </div>
  
   
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-clientencryption.decrypt-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">value</code></dt>
  
      <dd>
  
       <p class="para">
        A <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a> instance with subtype 6
        containing the encrypted value.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-clientencryption.decrypt-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the decrypted value as it was passed to
     <span class="function"><a href="#mongodb-driver-clientencryption.encrypt" class="function">MongoDB\Driver\ClientEncryption::encrypt()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-clientencryption.decrypt-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-encryptionexception" class="classname">MongoDB\Driver\Exception\EncryptionException</a> if an error occurs while decrypting the value</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-clientencryption.decrypt-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-clientencryption.encrypt" class="function" rel="rdfs-seeAlso">MongoDB\Driver\ClientEncryption::encrypt()</a> - Encrypt a value</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-clientencryption.encrypt" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ClientEncryption::encrypt</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ClientEncryption::encrypt</span> &mdash; <span class="dc-title">Encrypt a value</span></p>
  
   </div>
   
   <div class="refsect1 description" id="refsect1-mongodb-driver-clientencryption.encrypt-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ClientEncryption::encrypt</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
    ] ) : <span class="type"><a href="#class.mongodb-bson-binary" class="type MongoDB\BSON\Binary">MongoDB\BSON\Binary</a></span></div>
  
    <p class="para rdfs-comment">
     Encrypts the value.
    </p>
   </div>
  
   
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-clientencryption.encrypt-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">value</code></dt>
  
      <dd>
  
       <p class="para">
        The value to be encrypted. Any value that can be inserted into MongoDB can
        be encrypted using this method.
       </p>
      </dd>
  
     
     
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>Encryption options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>algorithm</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              The encryption algorithm to be used. Use the constants defined in
              <a href="#class.mongodb-driver-clientencryption" class="classname">MongoDB\Driver\ClientEncryption</a>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>keyAltName</td>
            <td><span class="type"><a href="#language.types.string" class="type string">string</a></span></td>
            <td>
             <p class="para">
              Identifies a key vault collection document by
              <code class="literal">keyAltName</code>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>keyId</td>
            <td><a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a></td>
            <td>
             <p class="para">
              Identifies a data key by <code class="literal">_id</code>. The value is a UUID
              (binary subtype 4).
             </p>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
         Exactly one of <code class="literal">keyId</code> and <code class="literal">keyAltName</code>
         must be provided. The <code class="literal">algorithm</code> option is required.
        </span>
       </p></blockquote>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-clientencryption.encrypt-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the encrypted value as
     <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a> object with subtype 6.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-clientencryption.encrypt-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-encryptionexception" class="classname">MongoDB\Driver\Exception\EncryptionException</a> if an error occurs while encrypting the value</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-clientencryption.encrypt-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-clientencryption.decrypt" class="function" rel="rdfs-seeAlso">MongoDB\Driver\ClientEncryption::decrypt()</a> - Decrypt a value</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-clientencryption.createdatakey">MongoDB\Driver\ClientEncryption::createDataKey</a> — Create a new encryption data key</li><li><a href="#mongodb-driver-clientencryption.decrypt">MongoDB\Driver\ClientEncryption::decrypt</a> — Decrypt a value</li><li><a href="#mongodb-driver-clientencryption.encrypt">MongoDB\Driver\ClientEncryption::encrypt</a> — Encrypt a value</li></ul>
  </div>
  
  <hr />
  
  
          
  
  
    
   
  
  <div id="class.mongodb-driver-writeconcern" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\WriteConcern class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-writeconcern.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      <strong class="classname">MongoDB\Driver\WriteConcern</strong> describes the level of
      acknowledgement requested from MongoDB for write operations to a standalone
      <code class="literal">mongod</code> or to replica sets or to sharded clusters. In
      sharded clusters, <code class="literal">mongos</code> instances will pass the write
      concern on to the shards.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-writeconcern.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\WriteConcern</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">MAJORITY</var>
       <span class="initializer"> = &quot;majority&quot;</span>
      ;</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.bsonserialize" class="methodname">bsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><span class="type string|integer">string|integer</span></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$journal</code></span>
    ]] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.getjournal" class="methodname">getJournal</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type boolean|null">boolean|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.getw" class="methodname">getW</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type string|integer|null">string|integer|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.getwtimeout" class="methodname">getWtimeout</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type int|MongoDB\BSON\Int64">int|MongoDB\BSON\Int64</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.isdefault" class="methodname">isDefault</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcern.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
    
  
    <div class="section" id="mongodb-driver-writeconcern.constants">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
  
      
       <dt id="mongodb-driver-writeconcern.constants.majority"><strong><code>MongoDB\Driver\WriteConcern::MAJORITY</code></strong></dt>
  
       <dd>
  
        <p class="para">
         Majority of all the members in the set; arbiters, non-voting members,
         passive members, hidden members and delayed members are all included in
         the definition of majority write concern.
        </p>
       </dd>
  
      
  
     </dl>
  
    </div>
  
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.7.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-writeconcern.bsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::bsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::bsonSerialize</span> &mdash; <span class="dc-title">Returns an object for BSON serialization</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.bsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::bsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.bsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcern.bsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an object for serializing the WriteConcern as BSON.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.bsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcern.bsonserialize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1753">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcern::bsonSerialize()</strong></span> with majority write concern</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (1) {
    [&quot;w&quot;]=&gt;
    string(8) &quot;majority&quot;
  }
  
  { &quot;w&quot; : &quot;majority&quot; }
  </pre></div>
     </div>
    </div><div class="example" id="example-1754">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\Driver\WriteConcern::bsonSerialize()</strong></span> with wtimeout and journal</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (3) {
    [&quot;w&quot;]=&gt;
    int(2)
    [&quot;j&quot;]=&gt;
    bool(true)
    [&quot;wtimeout&quot;]=&gt;
    int(1000)
  }
  
  { &quot;w&quot; : 2, &quot;j&quot; : true, &quot;wtimeout&quot; : 1000 }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.bsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Serializable::bsonSerialize()</a> - Provides an array or document to serialize as BSON</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeconcern.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::__construct</span> &mdash; <span class="dc-title">Create a new WriteConcern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><span class="type string|integer">string|integer</span></span> <code class="parameter">$w</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$journal</code></span>
    ]] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>, which is
     an immutable value object.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">w</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>Write concern</strong></caption>
         
          <thead>
           <tr>
            <th>Value</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>1</td>
            <td>
              Requests acknowledgement that the write operation has propagated to
              the standalone <code class="literal">mongod</code> or the primary in a replica
              set. This is the default write concern for MongoDB.
            </td>
           </tr>
  
           <tr>
            <td>0</td>
            <td>
             Requests no acknowledgment of the write operation. However, this may
             return information about socket exceptions and networking errors to
             the application.
            </td>
           </tr>
  
           <tr>
            <td>&lt;integer greater than 1&gt;</td>
            <td>
             Numbers greater than 1 are valid only for replica sets to request
             acknowledgement from specified number of members, including the
             primary.
            </td>
           </tr>
  
           <tr>
            <td><strong><code>MongoDB\Driver\WriteConcern::MAJORITY</code></strong></td>
            <td>
             <p class="para">
              Requests acknowledgment that write operations have propagated to the
              majority of voting nodes, including the primary, and have been
              written to the on-disk journal for these nodes.
             </p>
             <p class="para">
              Prior to MongoDB 3.0, this refers to the majority of replica set
              members (not just voting nodes).
             </p>
            </td>
           </tr>
  
           <tr>
            <td>string</td>
            <td>
             A string value is interpereted as a tag set. Requests acknowledgement
             that the write operations have propagated to a replica set member
             with the specified tag.
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">wtimeout</code></dt>
  
      <dd>
  
       <p class="para">
        How long to wait (in milliseconds) for secondaries before failing.
       </p>
       <p class="para">
        <code class="literal">wtimeout</code> causes write operations to return with an
        error (<strong class="classname">WriteConcernError</strong>) after the specified
        limit, even if the required write concern will eventually succeed. When
        these write operations return, MongoDB does not undo successful data
        modifications performed before the write concern exceeded the
        <code class="literal">wtimeout</code> time limit.
       </p>
       <p class="para">
        If specified, <code class="literal">wtimeout</code> must be a signed 64-bit integer
        greater than or equal to zero.
       </p>
       <p class="para">
        <table class="doctable table">
         <caption><strong>Write concern timeout</strong></caption>
         
          <thead>
           <tr>
            <th>Value</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>0</td>
            <td>Block indefinitely. This is the default.</td>
           </tr>
  
           <tr>
            <td>&lt;integer greater than 0&gt;</td>
            <td>
             Milliseconds to wait until returning.
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">journal</code></dt>
  
      <dd>
  
       <p class="para">
        Wait until mongod has applied the write to the journal.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">w</code> is invalid or <code class="parameter">wtimeout</code> is either negative or greater than the bounds of a signed 32-bit integer.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-writeconcern.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.7.0</td>
         <td>
          The <code class="parameter">wTimeout</code> parameter now accepts 64-bit values.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcern.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1755">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcern::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;Request&nbsp;write&nbsp;acknowledgement&nbsp;from&nbsp;the&nbsp;majority&nbsp;of&nbsp;the&nbsp;replica&nbsp;set&nbsp;nodes&nbsp;*/<br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">500</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Request&nbsp;write&nbsp;acknowledgement&nbsp;from&nbsp;a&nbsp;node&nbsp;configured&nbsp;with&nbsp;the&nbsp;"MultipleDC"&nbsp;tag&nbsp;*/<br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #DD0000">"MultipleDC"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">500</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeconcern.getjournal" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::getJournal</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::getJournal</span> &mdash; <span class="dc-title">Returns the WriteConcern&#039;s &quot;journal&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.getjournal-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::getJournal</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type boolean|null">boolean|null</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.getjournal-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcern.getjournal-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the WriteConcern&#039;s &quot;journal&quot; option.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.getjournal-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcern.getjournal-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1756">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcern::getJournal()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJournal</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJournal</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getJournal</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  NULL
  bool(true)
  bool(false)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.getjournal-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeconcern.getw" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::getW</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::getW</span> &mdash; <span class="dc-title">Returns the WriteConcern&#039;s &quot;w&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.getw-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::getW</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type string|integer|null">string|integer|null</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.getw-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcern.getw-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the WriteConcern&#039;s &quot;w&quot; option.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.getw-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcern.getw-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1757">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcern::getW()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getW</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getW</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(1)
  string(8) &quot;majority&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.getw-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeconcern.getwtimeout" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::getWtimeout</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::getWtimeout</span> &mdash; <span class="dc-title">Returns the WriteConcern&#039;s &quot;wtimeout&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.getwtimeout-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::getWtimeout</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type int|MongoDB\BSON\Int64">int|MongoDB\BSON\Int64</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.getwtimeout-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcern.getwtimeout-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the WriteConcern&#039;s &quot;wtimeout&quot; option.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.getwtimeout-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-writeconcern.getwtimeout-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.7.0</td>
         <td>
          On 32-bit systems, this method will return a <a href="#class.mongodb-bson-int64" class="classname">MongoDB\BSON\Int64</a>
          instance if the WriteConcern object was created with a <code class="literal">wTimeout</code>
          that exceeds the 32-bit range. On 64-bit systems, this method will
          always return an integer value.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcern.getwtimeout-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1758">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcern::getWtimeout()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWtimeout</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWtimeout</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(0)
  int(3000)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.getwtimeout-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeconcern.isdefault" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::isDefault</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::isDefault</span> &mdash; <span class="dc-title">Checks if this is the default write concern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.isdefault-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::isDefault</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether this is the default write concern (i.e. no options are
     specified). This method is primarily intended to be used in conjunction with
     <span class="methodname"><a href="#mongodb-driver-manager.getwriteconcern" class="methodname">MongoDB\Driver\Manager::getWriteConcern()</a></span> to determine
     whether the Manager has been constructed without any write concern options.
    </p>
    <p class="para">
     The driver will not include a default write concern in its write operations
     (e.g. <span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname">MongoDB\Driver\Manager::executeBulkWrite()</a></span>) in
     order to allow the server to apply its own default, which may have been
     <a href="https://docs.mongodb.com/manual/core/replica-set-write-concern/#modify-default-write-concern" class="link external">&raquo;&nbsp;modified</a>.
     Libraries that access the Manager&#039;s write concern to include it in their own
     write commands should use this method to ensure that default write concerns
     are left unset.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.isdefault-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcern.isdefault-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if this is the default write concern and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.isdefault-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcern.isdefault-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1759">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcern::isDefault()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$wc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDefault</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1/?w=majority'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDefault</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$wc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcern</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$wc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDefault</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  bool(false)
  bool(false)
  bool(true)
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.isdefault-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.getwriteconcern" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::getWriteConcern()</a> - Return the WriteConcern for the Manager</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/core/replica-set-write-concern/#modify-default-write-concern" class="link external">&raquo;&nbsp;Modify Default Write Concern</a> in the MongoDB manual</li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
     
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-writeconcern.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::serialize</span> &mdash; <span class="dc-title">Serialize a WriteConcern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcern.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeconcern.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteConcern::unserialize()</a> - Unserialize a WriteConcern</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-writeconcern.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcern::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::unserialize</span> &mdash; <span class="dc-title">Unserialize a WriteConcern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcern::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcern.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeconcern.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteConcern::serialize()</a> - Serialize a WriteConcern</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-writeconcern.bsonserialize">MongoDB\Driver\WriteConcern::bsonSerialize</a> — Returns an object for BSON serialization</li><li><a href="#mongodb-driver-writeconcern.construct">MongoDB\Driver\WriteConcern::__construct</a> — Create a new WriteConcern</li><li><a href="#mongodb-driver-writeconcern.getjournal">MongoDB\Driver\WriteConcern::getJournal</a> — Returns the WriteConcern's &quot;journal&quot; option</li><li><a href="#mongodb-driver-writeconcern.getw">MongoDB\Driver\WriteConcern::getW</a> — Returns the WriteConcern's &quot;w&quot; option</li><li><a href="#mongodb-driver-writeconcern.getwtimeout">MongoDB\Driver\WriteConcern::getWtimeout</a> — Returns the WriteConcern's &quot;wtimeout&quot; option</li><li><a href="#mongodb-driver-writeconcern.isdefault">MongoDB\Driver\WriteConcern::isDefault</a> — Checks if this is the default write concern</li><li><a href="#mongodb-driver-writeconcern.serialize">MongoDB\Driver\WriteConcern::serialize</a> — Serialize a WriteConcern</li><li><a href="#mongodb-driver-writeconcern.unserialize">MongoDB\Driver\WriteConcern::unserialize</a> — Unserialize a WriteConcern</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-readpreference" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\ReadPreference class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-readpreference.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
  
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-readpreference.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\ReadPreference</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">RP_PRIMARY</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">RP_PRIMARY_PREFERRED</var>
       <span class="initializer"> = 5</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">RP_SECONDARY</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">RP_SECONDARY_PREFERRED</var>
       <span class="initializer"> = 6</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">RP_NEAREST</var>
       <span class="initializer"> = 10</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">PRIMARY</var>
       <span class="initializer"> = primary</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">PRIMARY_PREFERRED</var>
       <span class="initializer"> = primaryPreferred</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">SECONDARY</var>
       <span class="initializer"> = secondary</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">SECONDARY_PREFERRED</var>
       <span class="initializer"> = secondaryPreferred</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">NEAREST</var>
       <span class="initializer"> = nearest</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">NO_MAX_STALENESS</var>
       <span class="initializer"> = -1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">SMALLEST_MAX_STALENESS_SECONDS</var>
       <span class="initializer"> = 90</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.bsonserialize" class="methodname">bsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type"><span class="type string|integer">string|integer</span></span> <code class="parameter">$mode</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tagSets</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.gethedge" class="methodname">getHedge</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.getmaxstalenessseconds" class="methodname">getMaxStalenessSeconds</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.getmode" class="methodname">getMode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.getmodestring" class="methodname">getModeString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.gettagsets" class="methodname">getTagSets</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readpreference.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
    
  
    <div class="section" id="mongodb-driver-readpreference.constants">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
  
      
       <dt id="mongodb-driver-readpreference.constants.rp-primary"><strong><code>MongoDB\Driver\ReadPreference::RP_PRIMARY</code></strong></dt>
  
       <dd>
  
        <p class="para">
         All operations read from the current replica set primary. This is the
         default read preference for MongoDB.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.rp-primary-preferred"><strong><code>MongoDB\Driver\ReadPreference::RP_PRIMARY_PREFERRED</code></strong></dt>
  
       <dd>
  
        <p class="para">
         In most situations, operations read from the primary but if it is
         unavailable, operations read from secondary members.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.rp-secondary"><strong><code>MongoDB\Driver\ReadPreference::RP_SECONDARY</code></strong></dt>
  
       <dd>
  
        <p class="para">
         All operations read from the secondary members of the replica set.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.rp-secondary-preferred"><strong><code>MongoDB\Driver\ReadPreference::RP_SECONDARY_PREFERRED</code></strong></dt>
  
       <dd>
  
        <p class="para">
         In most situations, operations read from secondary members but if no
         secondary members are available, operations read from the primary.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.rp-nearest"><strong><code>MongoDB\Driver\ReadPreference::RP_NEAREST</code></strong></dt>
  
       <dd>
  
        <p class="para">
         Operations read from member of the replica set with the least network
         latency, irrespective of the member&#039;s type.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.primary"><strong><code>MongoDB\Driver\ReadPreference::PRIMARY</code></strong></dt>
  
       <dd>
  
        <p class="para">
         All operations read from the current replica set primary. This is the
         default read preference for MongoDB.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.primary-preferred"><strong><code>MongoDB\Driver\ReadPreference::PRIMARY_PREFERRED</code></strong></dt>
  
       <dd>
  
        <p class="para">
         In most situations, operations read from the primary but if it is
         unavailable, operations read from secondary members.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.secondary"><strong><code>MongoDB\Driver\ReadPreference::SECONDARY</code></strong></dt>
  
       <dd>
  
        <p class="para">
         All operations read from the secondary members of the replica set.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.secondary-preferred"><strong><code>MongoDB\Driver\ReadPreference::SECONDARY_PREFERRED</code></strong></dt>
  
       <dd>
  
        <p class="para">
         In most situations, operations read from secondary members but if no
         secondary members are available, operations read from the primary.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.nearest"><strong><code>MongoDB\Driver\ReadPreference::NEAREST</code></strong></dt>
  
       <dd>
  
        <p class="para">
         Operations read from member of the replica set with the least network
         latency, irrespective of the member&#039;s type.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.no-max-staleness"><strong><code>MongoDB\Driver\ReadPreference::NO_MAX_STALENESS</code></strong></dt>
  
       <dd>
  
        <p class="para">
         The default value for the <code class="literal">&quot;maxStalenessSeconds&quot;</code>
         option is to specify no limit on maximum staleness, which means that the
         driver will not consider a secondary&#039;s lag when choosing where to
         direct a read operation.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readpreference.constants.smallest-max-staleness-seconds"><strong><code>MongoDB\Driver\ReadPreference::SMALLEST_MAX_STALENESS_SECONDS</code></strong></dt>
  
       <dd>
  
        <p class="para">
         The minimum value for the <code class="literal">&quot;maxStalenessSeconds&quot;</code> option
         is 90 seconds. The driver estimates secondaries&#039; staleness by
         periodically checking the latest write date of each replica set member.
         Since these checks are infrequent, the staleness estimate is coarse.
         Thus, the driver cannot enforce a max staleness value of less than 90
         seconds.
        </p>
       </dd>
  
      
  
     </dl>
  
    </div>
  
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.7.0</td>
          <td>
           <p class="para">
            Added the
            <strong><code>MongoDB\Driver\ReadPreference::PRIMARY</code></strong>,
            <strong><code>MongoDB\Driver\ReadPreference::PRIMARY_PREFERRED</code></strong>,
            <strong><code>MongoDB\Driver\ReadPreference::SECONDARY</code></strong>,
            <strong><code>MongoDB\Driver\ReadPreference::SECONDARY_PREFERRED</code></strong>,
            <strong><code>MongoDB\Driver\ReadPreference::NEAREST</code></strong> constants.
           </p>
           <p class="para">
            Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>.
           </p>
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           <p class="para">
            Added the
            <strong><code>MongoDB\Driver\ReadPreference::NO_MAX_STALENESS</code></strong>
            and
            <strong><code>MongoDB\Driver\ReadPreference::SMALLEST_MAX_STALENESS_SECONDS</code></strong>
            constants.
           </p>
           <p class="para">
            Implements <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>.
           </p>
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-readpreference.bsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::bsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::bsonSerialize</span> &mdash; <span class="dc-title">Returns an object for BSON serialization</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.bsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::bsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.bsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.bsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an object for serializing the ReadPreference as BSON.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.bsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readpreference.bsonserialize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1760">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadPreference::bsonSerialize()</strong></span> with primary read preference</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (1) {
    [&quot;mode&quot;]=&gt;
    string(7) &quot;primary&quot;
  }
  
  { &quot;mode&quot; : &quot;primary&quot; }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1761">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\Driver\ReadPreference::bsonSerialize()</strong></span> with secondary read preference and tag sets</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'ny'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'sf'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]<br />&nbsp;&nbsp;&nbsp;&nbsp;]<br />);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (2) {
    [&quot;mode&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;tags&quot;]=&gt;
    array(3) {
      [0]=&gt;
      object(stdClass)#1 (1) {
        [&quot;dc&quot;]=&gt;
        string(2) &quot;ny&quot;
      }
      [1]=&gt;
      object(stdClass)#5 (2) {
        [&quot;dc&quot;]=&gt;
        string(2) &quot;sf&quot;
        [&quot;use&quot;]=&gt;
        string(9) &quot;reporting&quot;
      }
      [2]=&gt;
      object(stdClass)#4 (0) {
      }
    }
  }
  
  { &quot;mode&quot; : &quot;secondary&quot;, &quot;tags&quot; : [ { &quot;dc&quot; : &quot;ny&quot; }, { &quot;dc&quot; : &quot;sf&quot;, &quot;use&quot; : &quot;reporting&quot; }, {  } ] }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1762">
     <p><strong>Example #3 <span class="function"><strong>MongoDB\Driver\ReadPreference::bsonSerialize()</strong></span> with secondary read preference and max staleness</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'maxStalenessSeconds'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">120</span><span style="color: #007700">]<br />);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (2) {
    [&quot;mode&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;maxStalenessSeconds&quot;]=&gt;
    int(120)
  }
  
  { &quot;mode&quot; : &quot;secondary&quot;, &quot;maxStalenessSeconds&quot; : 120 }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.bsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Serializable::bsonSerialize()</a> - Provides an array or document to serialize as BSON</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-preference/" class="link external">&raquo;&nbsp;Read Preference reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-readpreference.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::__construct</span> &mdash; <span class="dc-title">Create a new ReadPreference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::__construct</strong></span>
      ( <span class="methodparam"><span class="type"><span class="type string|integer">string|integer</span></span> <code class="parameter">$mode</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tagSets</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ]] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>, which
     is an immutable value object.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">mode</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>Read preference mode</strong></caption>
         
          <thead>
           <tr>
            <th>Value</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td><strong><code>MongoDB\Driver\ReadPreference::RP_PRIMARY</code></strong> or <code class="literal">&quot;primary&quot;</code></td>
            <td>
             <p class="para">
              All operations read from the current replica set primary. This is
              the default read preference for MongoDB.
             </p>
            </td>
           </tr>
  
           <tr>
            <td><strong><code>MongoDB\Driver\ReadPreference::RP_PRIMARY_PREFERRED</code></strong> or <code class="literal">&quot;primaryPreferred&quot;</code></td>
            <td>
             <p class="para">
              In most situations, operations read from the primary but if it is
              unavailable, operations read from secondary members.
             </p>
            </td>
           </tr>
  
           <tr>
            <td><strong><code>MongoDB\Driver\ReadPreference::RP_SECONDARY</code></strong> or <code class="literal">&quot;secondary&quot;</code></td>
            <td>
             <p class="para">
              All operations read from the secondary members of the replica set.
             </p>
            </td>
           </tr>
  
           <tr>
            <td><strong><code>MongoDB\Driver\ReadPreference::RP_SECONDARY_PREFERRED</code></strong> or <code class="literal">&quot;secondaryPreferred&quot;</code></td>
            <td>
             <p class="para">
              In most situations, operations read from secondary members but if no
              secondary members are available, operations read from the primary.
             </p>
            </td>
           </tr>
  
           <tr>
            <td><strong><code>MongoDB\Driver\ReadPreference::RP_NEAREST</code></strong> or <code class="literal">&quot;nearest&quot;</code></td>
            <td>
             <p class="para">
              Operations read from member of the replica set with the least
              network latency, irrespective of the member&#039;s type.
             </p>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">tagSets</code></dt>
  
      <dd>
  
       <p class="para">
        Tag sets allow you to target read operations to specific members of a
        replica set. This parameter should be an array of associative arrays, each
        of which contain zero or more key/value pairs. When selecting a server for
        a read operation, the driver attempt to select a node having all tags in a
        set (i.e. the associative array of key/value pairs). If selection fails,
        the driver will attempt subsequent sets. An empty tag set
        (<code class="literal">array()</code>) will match any node and may be used as a
        fallback.
       </p>
       <p class="para">
        Tags are not compatible with the
        <strong><code>MongoDB\Driver\ReadPreference::RP_PRIMARY</code></strong> mode and,
        in general, only apply when selecting a secondary member of a set for a
        read operation. However, the
        <strong><code>MongoDB\Driver\ReadPreference::RP_NEAREST</code></strong> mode, when
        combined with a tag set, selects the matching member with the lowest
        network latency. This member may be a primary or secondary.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           <tr>
            <td>hedge</td>
            <td><span class="type"><span class="type object|array">object|array</span></span></td>
            <td>
             <p class="para">Specifies whether to use <a href="https://docs.mongodb.com/manual/core/sharded-cluster-query-router/#mongos-hedged-reads" class="link external">&raquo;&nbsp;hedged reads</a>, which are supported by MongoDB 4.4+ for sharded queries.</p>
             <p class="para">
              Server hedged reads are available for all non-primary read preferences
              and are enabled by default when using the <code class="literal">&quot;nearest&quot;</code>
              mode. This option allows explicitly enabling server hedged reads for
              non-primary read preferences by specifying
              <code class="literal">[&#039;enabled&#039; =&gt; true]</code>, or explicitly disabling
              server hedged reads for the <code class="literal">&quot;nearest&quot;</code> read
              preference by specifying <code class="literal">[&#039;enabled&#039; =&gt; false]</code>.
             </p>
            </td>
           </tr>
  
           <tr>
            <td>maxStalenessSeconds</td>
            <td><span class="type"><a href="#language.types.integer" class="type integer">integer</a></span></td>
            <td>
             <p class="para">
              Specifies a maximum replication lag, or &quot;staleness&quot;, for reads from
              secondaries. When a secondary&#039;s estimated staleness exceeds
              this value, the driver stops using it for read operations.
             </p>
             <p class="para">
              If specified, the max staleness must be a signed 32-bit integer
              greater than or equal to
              <strong><code>MongoDB\Driver\ReadPreference::SMALLEST_MAX_STALENESS_SECONDS</code></strong>.
             </p>
             <p class="para">
              Defaults to
              <strong><code>MongoDB\Driver\ReadPreference::NO_MAX_STALENESS</code></strong>,
              which means that the driver will not consider a secondary&#039;s lag
              when choosing where to direct a read operation.
             </p>
             <p class="para">
              This option is not compatible with the
              <strong><code>MongoDB\Driver\ReadPreference::RP_PRIMARY</code></strong> mode.
              Specifying a max staleness also requires all MongoDB instances in
              the deployment to be using MongoDB 3.4+. An exception will be thrown
              at execution time if any MongoDB instances in the deployment are of
              an older server version.
             </p>
            </td>
           </tr>
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">mode</code> is invalid.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">tagSets</code> is provided for a primary read preference or is malformed (i.e. not an array of zero or more documents).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;maxStalenessSeconds&quot;</code> option is provided for a primary read preference or is out of range.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-readpreference.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.8.0</td>
         <td>
          Added the <code class="literal">&quot;hedge&quot;</code> option.
         </td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">
           The <code class="parameter">mode</code> argument now accepts a string value,
           which is consistent with the <code class="literal">&quot;readPreference&quot;</code> URI
           option for <span class="function"><a href="#mongodb-driver-manager.construct" class="function">MongoDB\Driver\Manager::__construct()</a></span>.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           Added a third <code class="parameter">options</code> argument, which supports
           the <code class="literal">&quot;maxStalenessSeconds&quot;</code> option.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readpreference.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1763">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadPreference::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;Prefer&nbsp;a&nbsp;secondary&nbsp;node&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;primary.&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY_PREFERRED</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;Prefer&nbsp;a&nbsp;node&nbsp;in&nbsp;the&nbsp;New&nbsp;York&nbsp;data&nbsp;center&nbsp;with&nbsp;lowest&nbsp;latency.&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_NEAREST</span><span style="color: #007700">,&nbsp;[[</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'ny'</span><span style="color: #007700">]]));<br /><br /></span><span style="color: #FF8000">/*&nbsp;Require&nbsp;a&nbsp;secondary&nbsp;node&nbsp;whose&nbsp;replication&nbsp;lag&nbsp;is&nbsp;within&nbsp;two&nbsp;minutes&nbsp;of&nbsp;the&nbsp;primary&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'maxStalenessSeconds'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">120</span><span style="color: #007700">]));<br /><br /></span><span style="color: #FF8000">/*&nbsp;Explicitly&nbsp;enable&nbsp;server&nbsp;hedged&nbsp;reads&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'hedge'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'enabled'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]]));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\ReadPreference)#1 (1) {
    [&quot;mode&quot;]=&gt;
    string(18) &quot;secondaryPreferred&quot;
  }
  object(MongoDB\Driver\ReadPreference)#1 (2) {
    [&quot;mode&quot;]=&gt;
    string(7) &quot;nearest&quot;
    [&quot;tags&quot;]=&gt;
    array(1) {
      [0]=&gt;
      object(stdClass)#2 (1) {
        [&quot;dc&quot;]=&gt;
        string(2) &quot;ny&quot;
      }
    }
  }
  object(MongoDB\Driver\ReadPreference)#1 (2) {
    [&quot;mode&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;maxStalenessSeconds&quot;]=&gt;
    int(120)
  }
  object(MongoDB\Driver\ReadPreference)#1 (2) {
    [&quot;mode&quot;]=&gt;
    string(9) &quot;secondary&quot;
    [&quot;hedge&quot;]=&gt;
    object(stdClass)#1 (1) {
      [&quot;enabled&quot;]=&gt;
      bool(true)
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-preference/" class="link external">&raquo;&nbsp;Read Preference reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readpreference.gethedge" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::getHedge</h1>
    <p class="verinfo">(mongodb &gt;=1.8.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::getHedge</span> &mdash; <span class="dc-title">Returns the ReadPreference&#039;s &quot;hedge&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.gethedge-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::getHedge</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.gethedge-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.gethedge-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the ReadPreference&#039;s &quot;hedge&quot; option.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.gethedge-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.gethedge-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-preference/" class="link external">&raquo;&nbsp;Read Preference reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readpreference.getmaxstalenessseconds" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::getMaxStalenessSeconds</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::getMaxStalenessSeconds</span> &mdash; <span class="dc-title">Returns the ReadPreference&#039;s &quot;maxStalenessSeconds&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.getmaxstalenessseconds-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::getMaxStalenessSeconds</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.getmaxstalenessseconds-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.getmaxstalenessseconds-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the ReadPreference&#039;s &quot;maxStalenessSeconds&quot; option. If no max
     staleness has been specified,
     <strong><code>MongoDB\Driver\ReadPreference::NO_MAX_STALENESS</code></strong> will be
     returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.getmaxstalenessseconds-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readpreference.getmaxstalenessseconds-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1764">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadPreference::getMaxStalenessSeconds()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMaxStalenessSeconds</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'maxStalenessSeconds'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">NO_MAX_STALENESS</span><span style="color: #007700">,<br />]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMaxStalenessSeconds</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'maxStalenessSeconds'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">SMALLEST_MAX_STALENESS_SECONDS</span><span style="color: #007700">,<br />]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMaxStalenessSeconds</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'maxStalenessSeconds'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">,<br />]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMaxStalenessSeconds</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(-1)
  int(-1)
  int(90)
  int(1000)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.getmaxstalenessseconds-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-preference/" class="link external">&raquo;&nbsp;Read Preference reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readpreference.getmode" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::getMode</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::getMode</span> &mdash; <span class="dc-title">Returns the ReadPreference&#039;s &quot;mode&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.getmode-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::getMode</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.getmode-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.getmode-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the ReadPreference&#039;s &quot;mode&quot; option.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.getmode-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readpreference.getmode-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1765">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadPreference::getMode()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMode</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY_PREFERRED</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMode</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMode</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY_PREFERRED</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMode</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_NEAREST</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMode</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(1)
  int(5)
  int(2)
  int(6)
  int(10)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.getmode-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-readpreference.getmodestring" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\ReadPreference::getModeString()</a> - Returns the ReadPreference's &quot;mode&quot; option as a string</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-preference/" class="link external">&raquo;&nbsp;Read Preference reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readpreference.getmodestring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::getModeString</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::getModeString</span> &mdash; <span class="dc-title">Returns the ReadPreference&#039;s &quot;mode&quot; option as a string</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.getmodestring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::getModeString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.getmodestring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.getmodestring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the ReadPreference&#039;s &quot;mode&quot; option as a string.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.getmodestring-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readpreference.getmodestring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1766">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadPreference::getModeString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModeString</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">PRIMARY_PREFERRED</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModeString</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">SECONDARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModeString</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">SECONDARY_PREFERRED</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModeString</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">NEAREST</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModeString</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(7) &quot;primary&quot;
  string(16) &quot;primaryPreferred&quot;
  string(9) &quot;secondary&quot;
  string(18) &quot;secondaryPreferred&quot;
  string(7) &quot;nearest&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.getmodestring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-readpreference.getmode" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\ReadPreference::getMode()</a> - Returns the ReadPreference's &quot;mode&quot; option</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-preference/" class="link external">&raquo;&nbsp;Read Preference reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readpreference.gettagsets" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::getTagSets</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::getTagSets</span> &mdash; <span class="dc-title">Returns the ReadPreference&#039;s &quot;tagSets&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.gettagsets-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::getTagSets</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.gettagsets-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.gettagsets-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the ReadPreference&#039;s &quot;tagSets&quot; option.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.gettagsets-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readpreference.gettagsets-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1767">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadPreference::getTagSets()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$mode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_SECONDARY_PREFERRED</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;Null&nbsp;and&nbsp;an&nbsp;empty&nbsp;array&nbsp;both&nbsp;denote&nbsp;no&nbsp;tag&nbsp;set&nbsp;preference.&nbsp;*/<br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTagSets</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">,&nbsp;[]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTagSets</span><span style="color: #007700">());<br /><br /></span><span style="color: #FF8000">/*&nbsp;Prefer&nbsp;a&nbsp;node&nbsp;in&nbsp;New&nbsp;York,&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;any&nbsp;available&nbsp;node.&nbsp;*/<br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">,&nbsp;[[</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'ny'</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTagSets</span><span style="color: #007700">());<br /><br /></span><span style="color: #FF8000">/*&nbsp;Prefer&nbsp;a&nbsp;node&nbsp;in&nbsp;the&nbsp;New&nbsp;York,&nbsp;followed&nbsp;by&nbsp;a&nbsp;node&nbsp;in&nbsp;San&nbsp;Francisco&nbsp;that&nbsp;is<br />&nbsp;&nbsp;&nbsp;labeled&nbsp;for&nbsp;reporting&nbsp;usage,&nbsp;and&nbsp;finally&nbsp;fall&nbsp;back&nbsp;to&nbsp;any&nbsp;available&nbsp;node.&nbsp;*/<br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;[</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'ny'</span><span style="color: #007700">],<br />&nbsp;&nbsp;[</span><span style="color: #DD0000">'dc'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'sf'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'use'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'reporting'</span><span style="color: #007700">],<br />&nbsp;&nbsp;[],<br />]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTagSets</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(0) {
  }
  array(0) {
  }
  array(2) {
    [0]=&gt;
    array(1) {
      [&quot;dc&quot;]=&gt;
      string(2) &quot;ny&quot;
    }
    [1]=&gt;
    array(0) {
    }
  }
  array(3) {
    [0]=&gt;
    array(1) {
      [&quot;dc&quot;]=&gt;
      string(2) &quot;ny&quot;
    }
    [1]=&gt;
    array(2) {
      [&quot;dc&quot;]=&gt;
      string(2) &quot;sf&quot;
      [&quot;use&quot;]=&gt;
      string(9) &quot;reporting&quot;
    }
    [2]=&gt;
    array(0) {
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.gettagsets-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/core/read-preference/" class="link external">&raquo;&nbsp;Read Preference reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-readpreference.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::serialize</span> &mdash; <span class="dc-title">Serialize a ReadPreference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-readpreference.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\ReadPreference::unserialize()</a> - Unserialize a ReadPreference</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-readpreference.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadPreference::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadPreference::unserialize</span> &mdash; <span class="dc-title">Unserialize a ReadPreference</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readpreference.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadPreference::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readpreference.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readpreference.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readpreference.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readpreference.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-readpreference.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\ReadPreference::serialize()</a> - Serialize a ReadPreference</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-readpreference.bsonserialize">MongoDB\Driver\ReadPreference::bsonSerialize</a> — Returns an object for BSON serialization</li><li><a href="#mongodb-driver-readpreference.construct">MongoDB\Driver\ReadPreference::__construct</a> — Create a new ReadPreference</li><li><a href="#mongodb-driver-readpreference.gethedge">MongoDB\Driver\ReadPreference::getHedge</a> — Returns the ReadPreference's &quot;hedge&quot; option</li><li><a href="#mongodb-driver-readpreference.getmaxstalenessseconds">MongoDB\Driver\ReadPreference::getMaxStalenessSeconds</a> — Returns the ReadPreference's &quot;maxStalenessSeconds&quot; option</li><li><a href="#mongodb-driver-readpreference.getmode">MongoDB\Driver\ReadPreference::getMode</a> — Returns the ReadPreference's &quot;mode&quot; option</li><li><a href="#mongodb-driver-readpreference.getmodestring">MongoDB\Driver\ReadPreference::getModeString</a> — Returns the ReadPreference's &quot;mode&quot; option as a string</li><li><a href="#mongodb-driver-readpreference.gettagsets">MongoDB\Driver\ReadPreference::getTagSets</a> — Returns the ReadPreference's &quot;tagSets&quot; option</li><li><a href="#mongodb-driver-readpreference.serialize">MongoDB\Driver\ReadPreference::serialize</a> — Serialize a ReadPreference</li><li><a href="#mongodb-driver-readpreference.unserialize">MongoDB\Driver\ReadPreference::unserialize</a> — Unserialize a ReadPreference</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-readconcern" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\ReadConcern class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.1.0)</p>
  
  
    <div class="section" id="mongodb-driver-readconcern.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      <strong class="classname">MongoDB\Driver\ReadConcern</strong> controls the level of
      isolation for read operations for replica sets and replica set shards. This
      option requires MongoDB 3.2 or later.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-readconcern.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\ReadConcern</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">AVAILABLE</var>
       <span class="initializer"> = &quot;available&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">LINEARIZABLE</var>
       <span class="initializer"> = &quot;linearizable&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">LOCAL</var>
       <span class="initializer"> = &quot;local&quot;</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">string</span>
       <var class="varname">MAJORITY</var>
       <span class="initializer"> = &quot;majority&quot;</span>
      ;</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readconcern.bsonserialize" class="methodname">bsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readconcern.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$level</code></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readconcern.getlevel" class="methodname">getLevel</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type string|null">string|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readconcern.isdefault" class="methodname">isDefault</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readconcern.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-readconcern.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
    
  
    <div class="section" id="mongodb-driver-readconcern.constants">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
  
      
       <dt id="mongodb-driver-readconcern.constants.available"><strong><code>MongoDB\Driver\ReadConcern::AVAILABLE</code></strong></dt>
  
       <dd>
  
        <p class="para">
         Default for reads against secondaries when
         <code class="literal">afterClusterTime</code>and <code class="literal">level</code> are
         unspecified.
        </p>
        <p class="para">
         The query returns the instance&#039;s most recent data. Provides no
         guarantee that the data has been written to a majority of the replica set
         members (i.e. may be rolled back).
        </p>
        <p class="para">
         For unsharded collections (including collections in a standalone
         deployment or a replica set deployment), <code class="literal">&quot;local&quot;</code> and
         <code class="literal">&quot;available&quot;</code> read concerns behave identically.
        </p>
        <p class="para">
         For a sharded cluster, <code class="literal">&quot;available&quot;</code> read concern
         provides greater tolerance for partitions since it does not wait to
         ensure consistency guarantees. However, a query with
         <code class="literal">&quot;available&quot;</code> read concern may return orphan documents
         if the shard is undergoing chunk migrations since the
         <code class="literal">&quot;available&quot;</code> read concern, unlike
         <code class="literal">&quot;local&quot;</code> read concern, does not contact the
         shard&#039;s primary nor the config servers for updated metadata.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readconcern.constants.linearizable"><strong><code>MongoDB\Driver\ReadConcern::LINEARIZABLE</code></strong></dt>
  
       <dd>
  
        <p class="para">
         The query returns data that reflects all successful writes issued with a
         write concern of <code class="literal">&quot;majority&quot;</code> <em class="emphasis">and</em>
         acknowledged prior to the start of the read operation. For replica sets
         that run with <code class="literal">writeConcernMajorityJournalDefault</code> set
         to <strong><code>TRUE</code></strong>, linearizable read concern returns data that will never be
         rolled back.
        </p>
        <p class="para">
         With <code class="literal">writeConcernMajorityJournalDefault</code> set to
         <strong><code>FALSE</code></strong>, MongoDB will not wait for <code class="literal">w: &quot;majority&quot;</code>
         writes to be durable before acknowledging the writes. As such,
         <code class="literal">&quot;majority&quot;</code> write operations could possibly roll back
         in the event of a loss of a replica set member.
        </p>
        <p class="para">
         You can specify linearizable read concern for read operations on the
         primary only.
        </p>
        <p class="para">
         Linearizable read concern guarantees only apply if read
         operations specify a query filter that uniquely identifies a single
         document.
        </p>
        <div class="tip"><strong class="tip">Tip</strong>
         <p class="simpara">
          Always use <code class="literal">maxTimeMS</code> with linearizable read concern
          in case a majority of data bearing members are unavailable.
          <code class="literal">maxTimeMS</code> ensures that the operation does not block
          indefinitely and instead ensures that the operation returns an error if
          the read concern cannot be fulfilled.
         </p>
        </div>
        <p class="para">
         Linearizable read concern requires MongoDB 3.4.
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readconcern.constants.local"><strong><code>MongoDB\Driver\ReadConcern::LOCAL</code></strong></dt>
  
       <dd>
  
        <p class="para">
         Default for reads against primary if <code class="literal">level</code> is
         unspecified and for reads against secondaries if <code class="literal">level</code>
         is unspecified but <code class="literal">afterClusterTime</code> is specified.
        </p>
        <p class="para">
         The query returns the instance&#039;s most recent data. Provides no
         guarantee that the data has been written to a majority of the replica set
         members (i.e. may be rolled back).
        </p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-readconcern.constants.majority"><strong><code>MongoDB\Driver\ReadConcern::MAJORITY</code></strong></dt>
  
       <dd>
  
        <p class="para">
         The query returns the instance&#039;s most recent data acknowledged as
         having been written to a majority of members in the replica set.
        </p>
        <p class="para">
         To use read concern level of <code class="literal">&quot;majority&quot;</code>, replica sets
         must use WiredTiger storage engine and election protocol version 1.
        </p>
       </dd>
  
      
  
     </dl>
  
    </div>
  
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.7.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.4.0</td>
          <td>
           <p class="para">
            Added the <strong><code>MongoDB\Driver\ReadConcern::AVAILABLE</code></strong>
            constant.
           </p>
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           <p class="para">
            Added the
            <strong><code>MongoDB\Driver\ReadConcern::LINEARIZABLE</code></strong>
            constant.
           </p>
           <p class="para">
            Implements <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>.
           </p>
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
    <div class="section" id="mongodb-driver-readconcern.seealso">
     <h2 class="title">See Also</h2>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/read-concern/" class="link external">&raquo;&nbsp;Read Concern reference</a></li>
    </ul>
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-readconcern.bsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadConcern::bsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadConcern::bsonSerialize</span> &mdash; <span class="dc-title">Returns an object for BSON serialization</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readconcern.bsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadConcern::bsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readconcern.bsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readconcern.bsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an object for serializing the ReadConcern as BSON.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readconcern.bsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readconcern.bsonserialize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1768">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadConcern::bsonSerialize()</strong></span> with empty read concern</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (0) {
  }
  
  { }
  </pre></div>
     </div>
    </div><div class="example" id="example-1769">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\Driver\ReadConcern::bsonSerialize()</strong></span> with local read concern</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">LOCAL</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">());<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (1) {
    [&quot;level&quot;]=&gt;
    string(5) &quot;local&quot;
  }
  
  { &quot;level&quot; : &quot;local&quot; }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readconcern.bsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Serializable::bsonSerialize()</a> - Provides an array or document to serialize as BSON</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/read-concern/" class="link external">&raquo;&nbsp;Read Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readconcern.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadConcern::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadConcern::__construct</span> &mdash; <span class="dc-title">Create a new ReadConcern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readconcern.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadConcern::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$level</code></span>
    ] )</div>
  
    <p class="para rdfs-comment">
     Constructs a new <a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a>, which is
     an immutable value object.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readconcern.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">level</code></dt>
  
      <dd>
  
       <p class="para">
        The <a href="https://docs.mongodb.com/manual/reference/read-concern/#read-concern-levels" class="link external">&raquo;&nbsp;read concern level</a>.
        You may use, but are not limited to, one of the
        <a href="#mongodb-driver-readconcern.constants" class="link">class constants</a>.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readconcern.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readconcern.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1770">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadConcern::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;Unspecified&nbsp;read&nbsp;isolation&nbsp;level&nbsp;(uses&nbsp;the&nbsp;server's&nbsp;default&nbsp;behavior)&nbsp;*/<br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;Request&nbsp;read&nbsp;isolation&nbsp;from&nbsp;a&nbsp;single&nbsp;replica&nbsp;set&nbsp;node&nbsp;*/<br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">LOCAL</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Request&nbsp;read&nbsp;isolation&nbsp;from&nbsp;a&nbsp;majority&nbsp;of&nbsp;the&nbsp;replica&nbsp;set&nbsp;nodes&nbsp;*/<br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readconcern.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/read-concern/" class="link external">&raquo;&nbsp;Read Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readconcern.getlevel" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadConcern::getLevel</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadConcern::getLevel</span> &mdash; <span class="dc-title">Returns the ReadConcern&#039;s &quot;level&quot; option</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readconcern.getlevel-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadConcern::getLevel</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type string|null">string|null</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readconcern.getlevel-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readconcern.getlevel-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the ReadConcern&#039;s &quot;level&quot; option.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readconcern.getlevel-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readconcern.getlevel-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1771">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadConcern::getLevel()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLevel</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">LOCAL</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLevel</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLevel</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  NULL
  string(5) &quot;local&quot;
  string(8) &quot;majority&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readconcern.getlevel-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/read-concern/" class="link external">&raquo;&nbsp;Read Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-readconcern.isdefault" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadConcern::isDefault</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadConcern::isDefault</span> &mdash; <span class="dc-title">Checks if this is the default read concern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readconcern.isdefault-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadConcern::isDefault</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether this is the default read concern (i.e. no options are
     specified). This method is primarily intended to be used in conjunction with
     <span class="methodname"><a href="#mongodb-driver-manager.getreadconcern" class="methodname">MongoDB\Driver\Manager::getReadConcern()</a></span> to determine
     whether the Manager has been constructed without any read concern options.
    </p>
    <p class="para">
     The driver will not include a default read concern in its read operations
     (e.g. <span class="methodname"><a href="#mongodb-driver-manager.executequery" class="methodname">MongoDB\Driver\Manager::executeQuery()</a></span>) in order
     order to allow the server to apply its own default. Libraries that access the
     Manager&#039;s read concern to include it in their own read commands should use
     this method to ensure that default read concerns are left unset.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readconcern.isdefault-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readconcern.isdefault-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if this is the default read concern and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readconcern.isdefault-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-readconcern.isdefault-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1772">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\ReadConcern::isDefault()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDefault</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadConcern</span><span style="color: #007700">::</span><span style="color: #0000BB">MAJORITY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDefault</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1/?readConcernLevel=majority'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadConcern</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDefault</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://127.0.0.1/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReadConcern</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$rc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDefault</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  bool(true)
  bool(false)
  bool(false)
  bool(true)
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readconcern.isdefault-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-manager.getreadconcern" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::getReadConcern()</a> - Return the ReadConcern for the Manager</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/read-concern/" class="link external">&raquo;&nbsp;Read Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-readconcern.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadConcern::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadConcern::serialize</span> &mdash; <span class="dc-title">Serialize a ReadConcern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readconcern.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadConcern::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readconcern.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readconcern.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readconcern.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readconcern.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-readconcern.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\ReadConcern::unserialize()</a> - Unserialize a ReadConcern</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-readconcern.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\ReadConcern::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\ReadConcern::unserialize</span> &mdash; <span class="dc-title">Unserialize a ReadConcern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-readconcern.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\ReadConcern::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-readconcern.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-readconcern.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-readconcern.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-readconcern.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-readconcern.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\ReadConcern::serialize()</a> - Serialize a ReadConcern</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-readconcern.bsonserialize">MongoDB\Driver\ReadConcern::bsonSerialize</a> — Returns an object for BSON serialization</li><li><a href="#mongodb-driver-readconcern.construct">MongoDB\Driver\ReadConcern::__construct</a> — Create a new ReadConcern</li><li><a href="#mongodb-driver-readconcern.getlevel">MongoDB\Driver\ReadConcern::getLevel</a> — Returns the ReadConcern's &quot;level&quot; option</li><li><a href="#mongodb-driver-readconcern.isdefault">MongoDB\Driver\ReadConcern::isDefault</a> — Checks if this is the default read concern</li><li><a href="#mongodb-driver-readconcern.serialize">MongoDB\Driver\ReadConcern::serialize</a> — Serialize a ReadConcern</li><li><a href="#mongodb-driver-readconcern.unserialize">MongoDB\Driver\ReadConcern::unserialize</a> — Unserialize a ReadConcern</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-cursor" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Cursor class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-cursor.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Cursor</strong> class encapsulates
      the results of a MongoDB command or query and may be returned by
      <span class="methodname"><a href="#mongodb-driver-manager.executecommand" class="methodname">MongoDB\Driver\Manager::executeCommand()</a></span> or
      <span class="methodname"><a href="#mongodb-driver-manager.executequery" class="methodname">MongoDB\Driver\Manager::executeQuery()</a></span>, respectively.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-cursor.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Cursor</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-cursorinterface" class="interfacename">MongoDB\Driver\CursorInterface</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-driver-cursor.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursor.getid" class="methodname">getId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-cursorid" class="type MongoDB\Driver\CursorId">MongoDB\Driver\CursorId</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursor.getserver" class="methodname">getServer</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursor.isdead" class="methodname">isDead</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursor.settypemap" class="methodname">setTypeMap</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$typemap</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursor.toarray" class="methodname">toArray</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.6.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-driver-cursorinterface" class="interfacename">MongoDB\Driver\CursorInterface</a></span>,
           which extends <span class="interfacename"><a href="#class.traversable" class="interfacename">Traversable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
    <div class="section" id="mongodb-driver-cursor.examples">
     <h2 class="title">Examples</h2>
  
     <div class="example" id="example-1773">
      <p><strong>Example #1 Reading a result set</strong></p>
      <div class="example-contents"><p>
       <span class="methodname"><a href="#mongodb-driver-manager.executecommand" class="methodname">MongoDB\Driver\Manager::executeCommand()</a></span> and
       <span class="methodname"><a href="#mongodb-driver-manager.executequery" class="methodname">MongoDB\Driver\Manager::executeQuery()</a></span> both return
       their result(s) as a <strong class="classname">MongoDB\Driver\Cursor</strong> object.
       This object can be used to iterate over the result set of the command or
       query.
      </p></div>
      <div class="example-contents"><p>
       Because <strong class="classname">MongoDB\Driver\Cursor</strong> implements the
       <span class="interfacename"><a href="#class.traversable" class="interfacename">Traversable</a></span> interface, you can simply
       iterate over the result set with
       <a href="#control-structures.foreach" class="link"><code class="literal">foreach</code></a>.
      </p></div>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;Insert&nbsp;some&nbsp;documents&nbsp;so&nbsp;that&nbsp;our&nbsp;query&nbsp;returns&nbsp;information&nbsp;*/<br /></span><span style="color: #0000BB">$bulkWrite&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulkWrite</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Ceres'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'size'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">946</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'distance'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2.766</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulkWrite</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Vesta'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'size'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">525</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'distance'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2.362</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">"test.asteroids"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulkWrite</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Query&nbsp;for&nbsp;all&nbsp;the&nbsp;items&nbsp;in&nbsp;the&nbsp;collection&nbsp;*/<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">(&nbsp;[]&nbsp;);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Query&nbsp;the&nbsp;"asteroids"&nbsp;collection&nbsp;of&nbsp;the&nbsp;"test"&nbsp;database&nbsp;*/<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">"test.asteroids"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;$cursor&nbsp;now&nbsp;contains&nbsp;an&nbsp;object&nbsp;that&nbsp;wraps&nbsp;around&nbsp;the&nbsp;result&nbsp;set.&nbsp;Use<br />&nbsp;*&nbsp;foreach()&nbsp;to&nbsp;iterate&nbsp;over&nbsp;all&nbsp;the&nbsp;result&nbsp;*/<br /></span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  stdClass Object
  (
      [_id] =&gt; MongoDB\BSON\ObjectId Object
          (
              [oid] =&gt; 5a4cff2f122d3321565d8cc2
          )
  
      [name] =&gt; Ceres
      [size] =&gt; 946
      [distance] =&gt; 2.766
  )
  stdClass Object
  (
      [_id] =&gt; MongoDB\BSON\ObjectId Object
          (
              [oid] =&gt; 5a4cff2f122d3321565d8cc3
          )
  
      [name] =&gt; Vesta
      [size] =&gt; 525
      [distance] =&gt; 2.362
  }
  </pre></div>
      </div>
     </div>
  
     <div class="example" id="example-1774">
      <p><strong>Example #2 Reading a result set for a tailable cursor</strong></p>
      <div class="example-contents"><p>
       <a href="https://docs.mongodb.com/manual/core/tailable-cursors" class="link external">&raquo;&nbsp;Tailable cursors</a>
       are a special type of MongoDB cursor that allows the client to read some
       results and then wait until more documents become available. These cursors
       are primarily used with
       <a href="https://docs.mongodb.com/manual/core/capped-collections" class="link external">&raquo;&nbsp;Capped Collections</a>
       and <a href="https://docs.mongodb.com/manual/changeStreams" class="link external">&raquo;&nbsp;Change Streams</a>.
      </p></div>
      <div class="example-contents"><p>
       While normal cursors can be iterated once with <code class="literal">foreach</code>,
       that approach will not work with tailable cursors. When
       <code class="literal">foreach</code> is used with a tailable cursor, the loop will
       stop upon reaching the end of the initial result set. Attempting to
       continue iteration on the cursor with a second
       <code class="literal">foreach</code> would throw an exception, since PHP attempts to
       rewind the cursor. Similar to result objects in other database drivers,
       cursors in MongoDB only support forward iteration, which means they cannot
       be rewound.
      </p></div>
      <div class="example-contents"><p>
       In order to continuously read from a tailable cursor, the Cursor object
       must be wrapped with an <a href="#class.iteratoriterator" class="classname">IteratorIterator</a>. This
       allows the application to directly control the cursor&#039;s iteration, avoid
       inadvertently rewinding the cursor, and decide when to wait for new results
       or stop iteration entirely.
      </p></div>
      <div class="example-contents"><p>
       In order to demonstrate a tailable cursor in action, two scripts will be
       used: a &quot;producer&quot; and a &quot;consumer&quot;. The producer script will create a new
       capped collection using the
       <a href="https://docs.mongodb.com/manual/reference/command/create" class="link external">&raquo;&nbsp;create</a> command
       and proceed to insert a new document into that collection each second.
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'create'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'asteroids'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'capped'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1048576</span><span style="color: #007700">,<br />]));<br /><br />while&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bulkWrite&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bulkWrite</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'createdAt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.asteroids'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulkWrite</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>
       With the producer script still running, a second consumer script may be
       executed to read the inserted documents using a tailable cursor, indicated
       by the <code class="literal">tailable</code> and <code class="literal">awaitData</code> options
       to <span class="function"><a href="#mongodb-driver-query.construct" class="function">MongoDB\Driver\Query::__construct()</a></span>.
      </p></div>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">([],&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'tailable'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'awaitData'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />]);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.asteroids'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$iterator&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">IteratorIterator</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">();<br /><br />while&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">valid</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$document&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Consumed&nbsp;document&nbsp;created&nbsp;at:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createdAt</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
      <div class="example-contents"><p>
       The consumer script will start by quickly printing all available documents
       in the capped collection (as if <code class="literal">foreach</code> had been used);
       however, it will not terminate upon reaching the end of the initial result
       set. Since the cursor is tailable, calling
       <span class="function"><a href="#iteratoriterator.next" class="function">IteratorIterator::next()</a></span> will block and wait for
       additional results. <span class="function"><a href="#iteratoriterator.valid" class="function">IteratorIterator::valid()</a></span> is also
       used to check if there is actually data available to read at each step.
      </p></div>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <span class="simpara">
        This example uses the <code class="literal">awaitData</code> query option to
        instruct the server to block for a short period (e.g. one second) at the
        end of the result set before returning a response to the driver. This is
        used to prevent the driver from aggressively polling the server when there
        are no results available. The <code class="literal">maxAwaitTimeMS</code> option may
        be used in conjunction with <code class="literal">tailable</code> and
        <code class="literal">awaitData</code> to specify the amount of time that the server
        should block when it reaches the end of the result set.
       </span>
      </p></blockquote>
     </div>
    </div>
  
    <div class="section">
     <h2 class="title">Errors/Exceptions</h2>
     <p class="simpara">
      When iterating over the cursor object, BSON data is converted into PHP
      variables. This iteration can cause the following Exceptions:
     </p>
     <ul class="simplelist">
      <li class="member">
       Throws
       <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if
       a class in the type map cannot be instantiated or does not implement
       <span class="interfacename"><a href="#class.mongodb-bson-unserializable" class="interfacename">MongoDB\BSON\Unserializable</a></span>.
      </li>
      <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the input did not contain exactly one BSON document. Possible reasons include, but are not limited to, invalid BSON, extra data (after reading one BSON document), or an unexpected <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> error.</li>
     </ul>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-cursor.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Cursor::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Cursor::__construct</span> &mdash; <span class="dc-title">Create a new Cursor (not used)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursor.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\Driver\Cursor::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> objects are returned as the
     result of an executed command or query and cannot be constructed directly.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursor.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursor.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executequery" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeQuery()</a> - Execute a database query</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeCommand()</a> - Execute a database command on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executequery" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeQuery()</a> - Execute a database query on this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursor.getid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Cursor::getId</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Cursor::getId</span> &mdash; <span class="dc-title">Returns the ID for this cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursor.getid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Cursor::getId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-cursorid" class="type MongoDB\Driver\CursorId">MongoDB\Driver\CursorId</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a> associated with
     this cursor. A cursor ID uniquely identifies the cursor on the server.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursor.getid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursor.getid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a> for this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursor.getid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-cursor.getid-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1775">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Cursor::getId()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;In&nbsp;this&nbsp;example,&nbsp;we&nbsp;insert&nbsp;several&nbsp;documents&nbsp;into&nbsp;the&nbsp;collection&nbsp;and&nbsp;specify<br />&nbsp;*&nbsp;a&nbsp;smaller&nbsp;batchSize&nbsp;to&nbsp;ensure&nbsp;that&nbsp;the&nbsp;first&nbsp;batch&nbsp;contains&nbsp;only&nbsp;a&nbsp;subset&nbsp;of<br />&nbsp;*&nbsp;our&nbsp;results&nbsp;and&nbsp;the&nbsp;cursor&nbsp;remains&nbsp;open&nbsp;on&nbsp;the&nbsp;server.&nbsp;*/<br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">([],&nbsp;[</span><span style="color: #DD0000">'batchSize'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getId</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\CursorId)#5 (1) {
    [&quot;id&quot;]=&gt;
    int(94810124093)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursor.getid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-cursorid.tostring" class="function" rel="rdfs-seeAlso">MongoDB\Driver\CursorId::__toString()</a> - String representation of the cursor ID</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursor.getserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Cursor::getServer</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Cursor::getServer</span> &mdash; <span class="dc-title">Returns the server associated with this cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursor.getserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Cursor::getServer</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> associated with this
     cursor. This is the server that executed the
     <a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a> or
     <a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursor.getserver-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursor.getserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> associated with this
     cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursor.getserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-cursor.getserver-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1776">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Cursor::getServer()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">([]);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getServer</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\Server)#5 (10) {
    [&quot;host&quot;]=&gt;
    string(9) &quot;localhost&quot;
    [&quot;port&quot;]=&gt;
    int(27017)
    [&quot;type&quot;]=&gt;
    int(1)
    [&quot;is_primary&quot;]=&gt;
    bool(false)
    [&quot;is_secondary&quot;]=&gt;
    bool(false)
    [&quot;is_arbiter&quot;]=&gt;
    bool(false)
    [&quot;is_hidden&quot;]=&gt;
    bool(false)
    [&quot;is_passive&quot;]=&gt;
    bool(false)
    [&quot;last_is_master&quot;]=&gt;
    array(8) {
      [&quot;ismaster&quot;]=&gt;
      bool(true)
      [&quot;maxBsonObjectSize&quot;]=&gt;
      int(16777216)
      [&quot;maxMessageSizeBytes&quot;]=&gt;
      int(48000000)
      [&quot;maxWriteBatchSize&quot;]=&gt;
      int(1000)
      [&quot;localTime&quot;]=&gt;
      object(MongoDB\BSON\UTCDateTime)#6 (1) {
        [&quot;milliseconds&quot;]=&gt;
        int(1446505367907)
      }
      [&quot;maxWireVersion&quot;]=&gt;
      int(3)
      [&quot;minWireVersion&quot;]=&gt;
      int(0)
      [&quot;ok&quot;]=&gt;
      float(1)
    }
    [&quot;round_trip_time&quot;]=&gt;
    int(584)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursor.getserver-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursor.isdead" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Cursor::isDead</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Cursor::isDead</span> &mdash; <span class="dc-title">Checks if the cursor is exhausted or may have additional results</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursor.isdead-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Cursor::isDead</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Checks whether there are definitely no additional results available on the
     cursor. This method is similar to the
     <a href="https://docs.mongodb.com/manual/reference/method/cursor.isExhausted/" class="link external">&raquo;&nbsp;cursor.isExhausted()</a>
     method in the MongoDB shell and is primarily useful when iterating
     <a href="https://docs.mongodb.com/manual/core/tailable-cursors/" class="link external">&raquo;&nbsp;tailable cursors</a>.
    </p>
    <p class="para">
     A cursor has no additional results and is considered &quot;dead&quot; when one of the
     following is true:
     <ul class="simplelist">
      <li class="member">
       The current batch has been fully iterated <em class="emphasis">and</em> the
       cursor ID is zero (i.e. a 
       <a href="https://docs.mongodb.com/manual/reference/command/getMore/" class="link external">&raquo;&nbsp;getMore</a>
       cannot be issued).
      </li>
      <li class="member">An error was encountered while iterating the cursor.</li>
      <li class="member">The cursor reached its configured limit.</li>
     </ul>
    </p>
    <p class="para">
     By design, it is not possible to always determine whether a cursor has
     additional results. The cases where a cursor <em class="emphasis">may</em> have
     more data available is as follows:
     <ul class="simplelist">
      <li class="member">
       There are additional documents in the current batch, which are buffered on
       the client side. Iterating will fetch a document from the local buffer.
      </li>
      <li class="member">
       There are no additional documents in the current batch (i.e. local buffer),
       but the cursor ID is non-zero. Iterating will request more documents from
       the server via a
       <a href="https://docs.mongodb.com/manual/reference/command/getMore/" class="link external">&raquo;&nbsp;getMore</a>
       operation, which may or may not return additional results and/or indicate
       that the cursor has been closed on the server by returning zero for its ID.
      </li>
     </ul>
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursor.isdead-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursor.isdead-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if there are definitely no additional results available on the
     cursor, and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursor.isdead-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-cursor.isdead-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1777">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Cursor::isDead()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">([]);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$iterator&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">IteratorIterator</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDead</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDead</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDead</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$iterator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">next</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDead</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  bool(false)
  bool(false)
  bool(false)
  bool(true)
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursor.isdead-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/core/tailable-cursors/" class="link external">&raquo;&nbsp;Tailable Cursors</a> in the MongoDB manual</li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/method/cursor.isExhausted/" class="link external">&raquo;&nbsp;cursor.isExhausted()</a> in the MongoDB manual</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursor.settypemap" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Cursor::setTypeMap</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Cursor::setTypeMap</span> &mdash; <span class="dc-title">Sets a type map to use for BSON unserialization</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursor.settypemap-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Cursor::setTypeMap</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$typemap</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Sets the <a href="#mongodb.persistence.typemaps" class="link">type map
     configuration</a> to use when unserializing the BSON results into PHP
     values.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursor.settypemap-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">typeMap</code> (<span class="type"><a href="#language.types.array" class="type array">array</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        <a href="#mongodb.persistence.typemaps" class="link">Type map configuration</a>.
       </p>
      </dd>
  
     
  
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursor.settypemap-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursor.settypemap-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
    <p class="para">
     When iterating over the cursor, the following exceptions can also be thrown
     due to an incorrect type map configuration:
     <ul class="simplelist">
      <li class="member">
       Throws
       <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if
       a class in the type map cannot be instantiated or does not implement
       <span class="interfacename"><a href="#class.mongodb-bson-unserializable" class="interfacename">MongoDB\BSON\Unserializable</a></span>.
      </li>
     </ul>
    </p>
  
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-cursor.settypemap-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1778">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Cursor::setTypeMap()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setTypeMap</span><span style="color: #007700">([</span><span style="color: #DD0000">'root'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'array'</span><span style="color: #007700">]);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [&quot;_id&quot;]=&gt;
    object(MongoDB\BSON\ObjectId)#6 (1) {
      [&quot;oid&quot;]=&gt;
      string(24) &quot;56424fb76118fd3267180741&quot;
    }
    [&quot;x&quot;]=&gt;
    int(1)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursor.settypemap-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursor.toarray" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Cursor::toArray</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Cursor::toArray</span> &mdash; <span class="dc-title">Returns an array containing all results for this cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursor.toarray-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Cursor::toArray</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Iterates the cursor and returns its results in an array.
     <span class="function"><a href="#mongodb-driver-cursor.settypemap" class="function">MongoDB\Driver\Cursor::setTypeMap()</a></span> may be used to control
     how documents are unserialized into PHP values.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursor.toarray-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursor.toarray-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an <span class="type"><a href="#language.types.array" class="type array">array</a></span> containing all results for this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursor.toarray-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-cursor.toarray-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1779">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Cursor::toArray()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">([]);<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(3) {
    [0]=&gt;
    object(stdClass)#6 (2) {
      [&quot;_id&quot;]=&gt;
      object(MongoDB\BSON\ObjectId)#5 (1) {
        [&quot;oid&quot;]=&gt;
        string(24) &quot;564259a96118fd40b41bcf61&quot;
      }
      [&quot;x&quot;]=&gt;
      int(1)
    }
    [1]=&gt;
    object(stdClass)#8 (2) {
      [&quot;_id&quot;]=&gt;
      object(MongoDB\BSON\ObjectId)#7 (1) {
        [&quot;oid&quot;]=&gt;
        string(24) &quot;564259a96118fd40b41bcf62&quot;
      }
      [&quot;x&quot;]=&gt;
      int(2)
    }
    [2]=&gt;
    object(stdClass)#10 (2) {
      [&quot;_id&quot;]=&gt;
      object(MongoDB\BSON\ObjectId)#9 (1) {
        [&quot;oid&quot;]=&gt;
        string(24) &quot;564259a96118fd40b41bcf63&quot;
      }
      [&quot;x&quot;]=&gt;
      int(3)
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursor.toarray-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-cursor.settypemap" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::setTypeMap()</a> - Sets a type map to use for BSON unserialization</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-cursor.construct">MongoDB\Driver\Cursor::__construct</a> — Create a new Cursor (not used)</li><li><a href="#mongodb-driver-cursor.getid">MongoDB\Driver\Cursor::getId</a> — Returns the ID for this cursor</li><li><a href="#mongodb-driver-cursor.getserver">MongoDB\Driver\Cursor::getServer</a> — Returns the server associated with this cursor</li><li><a href="#mongodb-driver-cursor.isdead">MongoDB\Driver\Cursor::isDead</a> — Checks if the cursor is exhausted or may have additional results</li><li><a href="#mongodb-driver-cursor.settypemap">MongoDB\Driver\Cursor::setTypeMap</a> — Sets a type map to use for BSON unserialization</li><li><a href="#mongodb-driver-cursor.toarray">MongoDB\Driver\Cursor::toArray</a> — Returns an array containing all results for this cursor</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-cursorid" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\CursorId class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-cursorid.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\CursorID</strong> class is a value object
      that represents a cursor ID. Instances of this class are returned by
      <span class="function"><a href="#mongodb-driver-cursor.getid" class="function">MongoDB\Driver\Cursor::getId()</a></span>.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-cursorid.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\CursorId</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-driver-cursorid.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorid.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorid.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorid.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.7.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-cursorid.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorId::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorId::__construct</span> &mdash; <span class="dc-title">Create a new CursorId (not used)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorid.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\Driver\CursorId::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a> objects are returned from
     <span class="function"><a href="#mongodb-driver-cursor.getid" class="function">MongoDB\Driver\Cursor::getId()</a></span> and cannot be constructed
     directly.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorid.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorid.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-cursor.getid" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::getId()</a> - Returns the ID for this cursor</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursorid.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorId::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorId::serialize</span> &mdash; <span class="dc-title">Serialize a CursorId</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorid.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorId::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorid.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorid.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursorid.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorid.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursorid.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\CursorId::unserialize()</a> - Unserialize a CursorId</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursorid.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorId::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorId::__toString</span> &mdash; <span class="dc-title">String representation of the cursor ID</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorid.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorId::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the <span class="type"><a href="#language.types.string" class="type string">string</a></span> representation of the cursor ID.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorid.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorid.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <span class="type"><a href="#language.types.string" class="type string">string</a></span> representation of the cursor ID.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-cursorid.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1780">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\CursorId::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;In&nbsp;this&nbsp;example,&nbsp;we&nbsp;insert&nbsp;several&nbsp;documents&nbsp;into&nbsp;the&nbsp;collection&nbsp;and&nbsp;specify<br />&nbsp;*&nbsp;a&nbsp;smaller&nbsp;batchSize&nbsp;to&nbsp;ensure&nbsp;that&nbsp;the&nbsp;first&nbsp;batch&nbsp;contains&nbsp;only&nbsp;a&nbsp;subset&nbsp;of<br />&nbsp;*&nbsp;our&nbsp;results&nbsp;and&nbsp;the&nbsp;cursor&nbsp;remains&nbsp;open&nbsp;on&nbsp;the&nbsp;server.&nbsp;*/<br /></span><span style="color: #0000BB">$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">([],&nbsp;[</span><span style="color: #DD0000">'batchSize'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeQuery</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getId</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(11) &quot;98061641158&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorid.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-cursor.getid" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::getId()</a> - Returns the ID for this cursor</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursorid.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorId::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.7.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorId::unserialize</span> &mdash; <span class="dc-title">Unserialize a CursorId</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorid.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorId::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorid.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorid.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursorid.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorid.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursorid.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\CursorId::serialize()</a> - Serialize a CursorId</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-cursorid.construct">MongoDB\Driver\CursorId::__construct</a> — Create a new CursorId (not used)</li><li><a href="#mongodb-driver-cursorid.serialize">MongoDB\Driver\CursorId::serialize</a> — Serialize a CursorId</li><li><a href="#mongodb-driver-cursorid.tostring">MongoDB\Driver\CursorId::__toString</a> — String representation of the cursor ID</li><li><a href="#mongodb-driver-cursorid.unserialize">MongoDB\Driver\CursorId::unserialize</a> — Unserialize a CursorId</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-cursorinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\CursorInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.6.0)</p>
  
    
    <div class="section" id="mongodb-driver-cursorinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by
      <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> but may also be used for
      type-hinting and userland classes.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-cursorinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\CursorInterface</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.traversable" class="interfacename">Traversable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorinterface.getid" class="methodname">getId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-cursorid" class="type MongoDB\Driver\CursorId">MongoDB\Driver\CursorId</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorinterface.getserver" class="methodname">getServer</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorinterface.isdead" class="methodname">isDead</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorinterface.settypemap" class="methodname">setTypeMap</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$typemap</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-cursorinterface.toarray" class="methodname">toArray</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-cursorinterface.getid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorInterface::getId</h1>
    <p class="verinfo">(mongodb &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorInterface::getId</span> &mdash; <span class="dc-title">Returns the ID for this cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorinterface.getid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorInterface::getId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-cursorid" class="type MongoDB\Driver\CursorId">MongoDB\Driver\CursorId</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a> associated with
     this cursor. A cursor ID uniquely identifies the cursor on the server.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorinterface.getid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorinterface.getid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a> for this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursorinterface.getid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorinterface.getid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursor.getid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::getId()</a> - Returns the ID for this cursor</span></li>
     <li class="member"><a href="#class.mongodb-driver-cursorid" class="classname">MongoDB\Driver\CursorId</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-cursorid.tostring" class="function" rel="rdfs-seeAlso">MongoDB\Driver\CursorId::__toString()</a> - String representation of the cursor ID</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursorinterface.getserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorInterface::getServer</h1>
    <p class="verinfo">(mongodb &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorInterface::getServer</span> &mdash; <span class="dc-title">Returns the server associated with this cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorinterface.getserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorInterface::getServer</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> associated with this
     cursor. This is the server that executed the
     <a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a> or
     <a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorinterface.getserver-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorinterface.getserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> associated with this
     cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursorinterface.getserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorinterface.getserver-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursor.getserver" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::getServer()</a> - Returns the server associated with this cursor</span></li>
     <li class="member"><a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursorinterface.isdead" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorInterface::isDead</h1>
    <p class="verinfo">(mongodb &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorInterface::isDead</span> &mdash; <span class="dc-title">Checks if the cursor may have additional results</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorinterface.isdead-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorInterface::isDead</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Checks whether the cursor may have additional results available to read. A
     cursor is initially &quot;alive&quot; but may become &quot;dead&quot; for any of the following
     reasons:
     <ul class="simplelist">
      <li class="member">Advancing a non-tailable cursor did not return a document</li>
      <li class="member">The cursor encountered an error</li>
      <li class="member">The cursor read its last batch to completion</li>
      <li class="member">The cursor reached its configured limit</li>
     </ul>
     This is primarily useful with tailable cursors.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorinterface.isdead-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorinterface.isdead-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if additional results are not available, and <strong><code>FALSE</code></strong>
     otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursorinterface.isdead-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorinterface.isdead-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursor.isdead" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::isDead()</a> - Checks if the cursor is exhausted or may have additional results</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursorinterface.settypemap" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorInterface::setTypeMap</h1>
    <p class="verinfo">(mongodb &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorInterface::setTypeMap</span> &mdash; <span class="dc-title">Sets a type map to use for BSON unserialization</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorinterface.settypemap-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorInterface::setTypeMap</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$typemap</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Sets the <a href="#mongodb.persistence.typemaps" class="link">type map
     configuration</a> to use when unserializing the BSON results into PHP
     values.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorinterface.settypemap-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">typeMap</code> (<span class="type"><a href="#language.types.array" class="type array">array</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        <a href="#mongodb.persistence.typemaps" class="link">Type map configuration</a>.
       </p>
      </dd>
  
     
  
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorinterface.settypemap-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursorinterface.settypemap-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorinterface.settypemap-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursor.settypemap" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::setTypeMap()</a> - Sets a type map to use for BSON unserialization</span></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-cursorinterface.toarray" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\CursorInterface::toArray</h1>
    <p class="verinfo">(mongodb &gt;=1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\CursorInterface::toArray</span> &mdash; <span class="dc-title">Returns an array containing all results for this cursor</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-cursorinterface.toarray-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\CursorInterface::toArray</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Iterates the cursor and returns its results in an array.
     <span class="function"><a href="#mongodb-driver-cursorinterface.settypemap" class="function">MongoDB\Driver\CursorInterface::setTypeMap()</a></span> may be used
     to control how documents are unserialized into PHP values.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-cursorinterface.toarray-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-cursorinterface.toarray-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an <span class="type"><a href="#language.types.array" class="type array">array</a></span> containing all results for this cursor.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-cursorinterface.toarray-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-cursorinterface.toarray-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursor.toarray" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::toArray()</a> - Returns an array containing all results for this cursor</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-cursorinterface.settypemap" class="function" rel="rdfs-seeAlso">MongoDB\Driver\CursorInterface::setTypeMap()</a> - Sets a type map to use for BSON unserialization</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-cursorinterface.getid">MongoDB\Driver\CursorInterface::getId</a> — Returns the ID for this cursor</li><li><a href="#mongodb-driver-cursorinterface.getserver">MongoDB\Driver\CursorInterface::getServer</a> — Returns the server associated with this cursor</li><li><a href="#mongodb-driver-cursorinterface.isdead">MongoDB\Driver\CursorInterface::isDead</a> — Checks if the cursor may have additional results</li><li><a href="#mongodb-driver-cursorinterface.settypemap">MongoDB\Driver\CursorInterface::setTypeMap</a> — Sets a type map to use for BSON unserialization</li><li><a href="#mongodb-driver-cursorinterface.toarray">MongoDB\Driver\CursorInterface::toArray</a> — Returns an array containing all results for this cursor</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-server" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Server class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-server.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
  
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-server.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Server</strong>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_UNKNOWN</var>
       <span class="initializer"> = 0</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_STANDALONE</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_MONGOS</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_POSSIBLE_PRIMARY</var>
       <span class="initializer"> = 3</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_RS_PRIMARY</var>
       <span class="initializer"> = 4</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_RS_SECONDARY</var>
       <span class="initializer"> = 5</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_RS_ARBITER</var>
       <span class="initializer"> = 6</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_RS_OTHER</var>
       <span class="initializer"> = 7</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_RS_GHOST</var>
       <span class="initializer"> = 8</span>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-driver-server.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.executebulkwrite" class="methodname">executeBulkWrite</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-bulkwrite" class="type MongoDB\Driver\BulkWrite">MongoDB\Driver\BulkWrite</a></span> <code class="parameter">$bulk</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.executecommand" class="methodname">executeCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.executequery" class="methodname">executeQuery</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-query" class="type MongoDB\Driver\Query">MongoDB\Driver\Query</a></span> <code class="parameter">$query</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.executereadcommand" class="methodname">executeReadCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.executereadwritecommand" class="methodname">executeReadWriteCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.executewritecommand" class="methodname">executeWriteCommand</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.gethost" class="methodname">getHost</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.getinfo" class="methodname">getInfo</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.getlatency" class="methodname">getLatency</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.getport" class="methodname">getPort</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.gettags" class="methodname">getTags</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">getType</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.isarbiter" class="methodname">isArbiter</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.ishidden" class="methodname">isHidden</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.ispassive" class="methodname">isPassive</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.isprimary" class="methodname">isPrimary</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-server.issecondary" class="methodname">isSecondary</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
     }</div>
  
  
    </div>
    
  
    <div class="section" id="mongodb-driver-server.constants">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
  
      
       <dt id="mongodb-driver-server.constants.type-unknown"><strong><code>MongoDB\Driver\Server::TYPE_UNKNOWN</code></strong></dt>
  
       <dd>
  
        <p class="para">Unknown server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-standalone"><strong><code>MongoDB\Driver\Server::TYPE_STANDALONE</code></strong></dt>
  
       <dd>
  
        <p class="para">Standalone server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-mongos"><strong><code>MongoDB\Driver\Server::TYPE_MONGOS</code></strong></dt>
  
       <dd>
  
        <p class="para">Mongos server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-possible-primary"><strong><code>MongoDB\Driver\Server::TYPE_POSSIBLE_PRIMARY</code></strong></dt>
  
       <dd>
  
        <p class="para">Replica set possible primary server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
        <p class="para">A server may be identified as a possible primary if it has not yet been checked but another memory of the replica set thinks it is the primary.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-rs-primary"><strong><code>MongoDB\Driver\Server::TYPE_RS_PRIMARY</code></strong></dt>
  
       <dd>
  
        <p class="para">Replica set primary server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-rs-secondary"><strong><code>MongoDB\Driver\Server::TYPE_RS_SECONDARY</code></strong></dt>
  
       <dd>
  
        <p class="para">Replica set secondary server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-rs-arbiter"><strong><code>MongoDB\Driver\Server::TYPE_RS_ARBITER</code></strong></dt>
  
       <dd>
  
        <p class="para">Replica set arbiter server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-rs-other"><strong><code>MongoDB\Driver\Server::TYPE_RS_OTHER</code></strong></dt>
  
       <dd>
  
        <p class="para">Replica set other server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
        <p class="para">Such servers may be hidden, starting up, or recovering. They cannot be queried, but their hosts lists are useful for discovering the current replica set configuration.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-driver-server.constants.type-rs-ghost"><strong><code>MongoDB\Driver\Server::TYPE_RS_GHOST</code></strong></dt>
  
       <dd>
  
        <p class="para">Replica set ghost server type, returned by <span class="methodname"><a href="#mongodb-driver-server.gettype" class="methodname">MongoDB\Driver\Server::getType()</a></span>.</p>
        <p class="para">Servers may be identified as such in at least three situations: briefly during server startup; in an uninitialized replica set; or when the server is shunned (i.e. removed from the replica set config). They cannot be queried, nor can their host list be used to discover the current replica set configuration; however, the client may monitor this server in hope that it transitions to a more useful state.</p>
       </dd>
  
      
  
     </dl>
  
    </div>
  
  
  
   </div>
  
   
   
  
  <div id="mongodb-driver-server.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::__construct</span> &mdash; <span class="dc-title">Create a new Server (not used)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\Driver\Server::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> objects are created internally
     by <a href="#class.mongodb-driver-manager" class="classname">MongoDB\Driver\Manager</a> when a database connection
     is established and may be returned by
     <span class="function"><a href="#mongodb-driver-manager.getservers" class="function">MongoDB\Driver\Manager::getServers()</a></span> and
     <span class="function"><a href="#mongodb-driver-manager.selectserver" class="function">MongoDB\Driver\Manager::selectServer()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.getservers" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::getServers()</a> - Return the servers to which this manager is connected</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.selectserver" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::selectServer()</a> - Select a server matching a read preference</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.executebulkwrite" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::executeBulkWrite</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeBulkWrite</span> &mdash; <span class="dc-title">Execute one or more write operations on this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.executebulkwrite-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::executeBulkWrite</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-bulkwrite" class="type MongoDB\Driver\BulkWrite">MongoDB\Driver\BulkWrite</a></span> <code class="parameter">$bulk</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span></div>
  
    <p class="para rdfs-comment">
     Executes one or more write operations on this server.
    </p>
    <p class="para">
     A <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> can be constructed with
     one or more write operations of varying types (e.g. updates, deletes, and
     inserts). The driver will attempt to send operations of the same type to the
     server in as few requests as possible to optimize round trips.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executebulkwrite-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">namespace</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A fully qualified namespace (e.g. <code class="literal">&quot;databaseName.collectionName&quot;</code>).
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">bulk</code> (<a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>)</dt>
  
      <dd>
  
       <p class="para">
        The write(s) to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executebulkwrite-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.executebulkwrite-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">bulk</code> does not contain any write operations.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">bulk</code> has already been executed. <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> objects may not be executed multiple times.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-bulkwriteexception" class="classname">MongoDB\Driver\Exception\BulkWriteException</a> on any write failure (e.g. write error, failure to apply a write concern)</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-server.executebulkwrite-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
        <tr>
         <td>1.4.0</td>
         <td>
          The third parameter is now an <code class="parameter">options</code> array.
          For backwards compatibility, this paramater will still accept a
          <a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a> object.
         </td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          is now thrown if <code class="parameter">bulk</code> does not contain any write
          operations. Previously, a
          <a href="#class.mongodb-driver-exception-bulkwriteexception" class="classname">MongoDB\Driver\Exception\BulkWriteException</a> was
          thrown.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongodb-driver-server.executebulkwrite-notes">
    <h3 class="title">Notes</h3>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      It is the caller&#039;s responsibility to ensure that the server is capable
      of executing the write operation. For example, executing a write operation
      on a secondary (excluding its &quot;local&quot; database) will fail.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executebulkwrite-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a></li>
     <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
     <li class="member"><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executebulkwrite" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeBulkWrite()</a> - Execute one or more write operations</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.executecommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::executeCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeCommand</span> &mdash; <span class="dc-title">Execute a database command on this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.executecommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::executeCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Executes the command on this server.
    </p>
    <p class="para">
     This method applies no special logic to the command. Although this method
     accepts <code class="literal">&quot;readConcern&quot;</code> and
     <code class="literal">&quot;writeConcern&quot;</code> options, which will be incorporated into
     the command document, those options will not default to corresponding values
     from the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB
     Connection URI</a> nor will the MongoDB server version be taken into
     account. Users are therefore encouraged to use specific read and/or write
     command methods if possible.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The <code class="literal">&quot;readPreference&quot;</code> option does not control the server
      to which the driver issues the operation; it will always be executed on
      this server object. Instead, it may be used when issuing the operation to a
      secondary (from a replica set connection, not standalone) or mongos node to
      ensure that the driver sets the wire protocol accordingly or adds the read
      preference to the operation, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executecommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executecommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.executecommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command, issuing a write command to a secondary).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-server.executecommand-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
        <tr>
         <td>1.4.0</td>
         <td>
          The third parameter is now an <code class="parameter">options</code> array.
          For backwards compatibility, this paramater will still accept a
          <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a> object.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongodb-driver-server.executecommand-notes">
    <h3 class="title">Notes</h3>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      It is the caller&#039;s responsibility to ensure that the server is capable
      of executing the write operation. For example, executing a write operation
      on a secondary (excluding its &quot;local&quot; database) will fail.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executecommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadCommand()</a> - Execute a database command that reads on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadWriteCommand()</a> - Execute a database command that reads and writes on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeWriteCommand()</a> - Execute a database command that writes on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.executequery" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::executeQuery</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeQuery</span> &mdash; <span class="dc-title">Execute a database query on this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.executequery-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::executeQuery</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-query" class="type MongoDB\Driver\Query">MongoDB\Driver\Query</a></span> <code class="parameter">$query</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Executes the query on this server.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The <code class="literal">&quot;readPreference&quot;</code> option does not control the server
      to which the driver issues the operation; it will always be executed on
      this server object. Instead, it may be used when issuing the operation to a
      secondary (from a replica set connection, not standalone) or mongos node to
      ensure that the driver sets the wire protocol accordingly or adds the read
      preference to the operation, respectively.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executequery-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">namespace</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A fully qualified namespace (e.g. <code class="literal">&quot;databaseName.collectionName&quot;</code>).
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">query</code> (<a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a>)</dt>
  
      <dd>
  
       <p class="para">
        The query to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executequery-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.executequery-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid query operators).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-server.executequery-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.0</td>
         <td>
          The third parameter is now an <code class="parameter">options</code> array.
          For backwards compatibility, this paramater will still accept a
          <a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a> object.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executequery-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><a href="#class.mongodb-driver-query" class="classname">MongoDB\Driver\Query</a></li>
     <li class="member"><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executequery" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeQuery()</a> - Execute a database query</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.executereadcommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::executeReadCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeReadCommand</span> &mdash; <span class="dc-title">Execute a database command that reads on this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.executereadcommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::executeReadCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Executes the command on this server.
    </p>
    <p class="para">
     This method will apply logic that is specific to commands that read (e.g.
     <a href="https://docs.mongodb.com/manual/reference/command/count/" class="link external">&raquo;&nbsp;count</a>)
     and take the MongoDB server version into account. The
     <code class="literal">&quot;readConcern&quot;</code> option will default to the corresponding
     value from the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB
     Connection URI</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The <code class="literal">&quot;readPreference&quot;</code> option does not control the server
      to which the driver issues the operation; it will always be executed on
      this server object. Instead, it may be used when issuing the operation to a
      secondary (from a replica set connection, not standalone) or mongos node to
      ensure that the driver sets the wire protocol accordingly or adds the read
      preference to the operation, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executereadcommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>readPreference</td>
            <td><a href="#class.mongodb-driver-readpreference" class="classname">MongoDB\Driver\ReadPreference</a></td>
            <td>
             <p class="para">
              A read preference to use for selecting a server for the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executereadcommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.executereadcommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executereadcommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeCommand()</a> - Execute a database command on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadWriteCommand()</a> - Execute a database command that reads and writes on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeWriteCommand()</a> - Execute a database command that writes on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadCommand()</a> - Execute a database command that reads</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.executereadwritecommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::executeReadWriteCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeReadWriteCommand</span> &mdash; <span class="dc-title">Execute a database command that reads and writes on this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.executereadwritecommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::executeReadWriteCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Executes the command on this server.
    </p>
    <p class="para">
     This method will apply logic that is specific to commands that read and write
     (e.g.
     <a href="https://docs.mongodb.com/manual/reference/command/aggregate/" class="link external">&raquo;&nbsp;aggregate</a>)
     and take the MongoDB server version into account. The
     <code class="literal">&quot;readConcern&quot;</code> and <code class="literal">&quot;writeConcern&quot;</code>
     options will default to the corresponding values from the
     <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB Connection
     URI</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executereadwritecommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>readConcern</td>
            <td><a href="#class.mongodb-driver-readconcern" class="classname">MongoDB\Driver\ReadConcern</a></td>
            <td>
             <p class="para">
              A read concern to apply to the operation.
             </p>
             <p class="para">
              This option is available in MongoDB 3.2+ and will result in an
              exception at execution time if specified for an older server
              version.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executereadwritecommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.executereadwritecommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-server.executereadwritecommand-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongodb-driver-server.executereadwritecommand-notes">
    <h3 class="title">Notes</h3>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      It is the caller&#039;s responsibility to ensure that the server is capable
      of executing the write operation. For example, executing a write operation
      on a secondary (excluding its &quot;local&quot; database) will fail.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executereadwritecommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeCommand()</a> - Execute a database command on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadCommand()</a> - Execute a database command that reads on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeWriteCommand()</a> - Execute a database command that writes on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeReadWriteCommand()</a> - Execute a database command that reads and writes</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.executewritecommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::executeWriteCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeWriteCommand</span> &mdash; <span class="dc-title">Execute a database command that writes on this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.executewritecommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::executeWriteCommand</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
     , <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-command" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#class.mongodb-driver-cursor" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>
  
    <p class="para rdfs-comment">
     Executes the command on this server.
    </p>
    <p class="para">
     This method will apply logic that is specific to commands that write (e.g.
     <a href="https://docs.mongodb.com/manual/reference/command/drop/" class="link external">&raquo;&nbsp;drop</a>) and
     take the MongoDB server version into account. The
     <code class="literal">&quot;writeConcern&quot;</code> option will default to the corresponding
     value from the <a href="#mongodb-driver-manager.construct-uri" class="link">MongoDB
     Connection URI</a>.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      This method is not intended to be used to execute
      <a href="https://docs.mongodb.com/manual/reference/command/insert/" class="link external">&raquo;&nbsp;insert</a>,
      <a href="https://docs.mongodb.com/manual/reference/command/update/" class="link external">&raquo;&nbsp;update</a>,
      or <a href="https://docs.mongodb.com/manual/reference/command/delete/" class="link external">&raquo;&nbsp;delete</a>
      commands. Users are encouraged to use
      <span class="function"><a href="#mongodb-driver-server.executebulkwrite" class="function">MongoDB\Driver\Server::executeBulkWrite()</a></span> for those
      commands.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executewritecommand-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
     
      <dt>
  <code class="parameter">db</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The name of the database on which to execute the command.
       </p>
      </dd>
  
     
  
     
     
      <dt>
  <code class="parameter">command</code> (<a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a>)</dt>
  
      <dd>
  
       <p class="para">
        The command to execute.
       </p>
      </dd>
  
     
  
     
      <dt>
  <code class="parameter">options</code></dt>
  
      <dd>
  
       <p class="para">
        <table class="doctable table">
         <caption><strong>options</strong></caption>
         
          <thead>
           <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
           </tr>
  
          </thead>
  
          <tbody class="tbody">
           
           <tr>
            <td>session</td>
            <td><a href="#class.mongodb-driver-session" class="classname">MongoDB\Driver\Session</a></td>
            <td>
             <p class="para">
              A session to associate with the operation.
             </p>
            </td>
           </tr>
  
  
           
           <tr>
            <td>writeConcern</td>
            <td><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></td>
            <td>
             <p class="para">
              A write concern to apply to the operation.
             </p>
            </td>
           </tr>
  
  
          </tbody>
         
        </table>
  
       </p>
       
       <div class="warning"><strong class="warning">Warning</strong>
        <p class="para">
         If you are using a <code class="literal">&quot;session&quot;</code> which has a transaction
         in progress, you cannot specify a <code class="literal">&quot;readConcern&quot;</code> or
         <code class="literal">&quot;writeConcern&quot;</code> option. This will result in an
         <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
         being thrown. Instead, you should set these two options when you create
         the transaction with
         <span class="methodname"><a href="#mongodb-driver-session.starttransaction" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
        </p>
       </div>
  
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executewritecommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">Returns <a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a> on success.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.executewritecommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used with an associated transaction in combination with a <code class="literal">&quot;readConcern&quot;</code> or <code class="literal">&quot;writeConcern&quot;</code> option.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the <code class="literal">&quot;session&quot;</code> option is used in combination with an unacknowledged write concern.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li><li class="member">Throws <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a> if authentication is needed and fails.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> on other errors (e.g. invalid command).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-driver-server.executewritecommand-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.4</td>
         <td>
          <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
          will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
          combination with an unacknowledged write concern.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 notes" id="refsect1-mongodb-driver-server.executewritecommand-notes">
    <h3 class="title">Notes</h3>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      It is the caller&#039;s responsibility to ensure that the server is capable
      of executing the write operation. For example, executing a write operation
      on a secondary (excluding its &quot;local&quot; database) will fail.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executewritecommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-command" class="classname">MongoDB\Driver\Command</a></li>
     <li class="member"><a href="#class.mongodb-driver-cursor" class="classname">MongoDB\Driver\Cursor</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeCommand()</a> - Execute a database command on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadcommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadCommand()</a> - Execute a database command that reads on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-server.executereadwritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadWriteCommand()</a> - Execute a database command that reads and writes on this server</span></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executewritecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeWriteCommand()</a> - Execute a database command that writes</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.gethost" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::getHost</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::getHost</span> &mdash; <span class="dc-title">Returns the hostname of this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.gethost-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::getHost</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the hostname of this server.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.gethost-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.gethost-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the hostname of this server.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.gethost-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-server.gethost-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1781">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Server::getHost()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectServer</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getHost</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(9) &quot;localhost&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.gethost-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.getinfo" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::getInfo</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::getInfo</span> &mdash; <span class="dc-title">Returns an array of information about this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.getinfo-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::getInfo</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Returns an array of information about this server.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.getinfo-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.getinfo-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array of information about this server.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.getinfo-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-server.getinfo-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1782">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Server::getInfo()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectServer</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInfo</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(8) {
    [&quot;ismaster&quot;]=&gt;
    bool(true)
    [&quot;maxBsonObjectSize&quot;]=&gt;
    int(16777216)
    [&quot;maxMessageSizeBytes&quot;]=&gt;
    int(48000000)
    [&quot;maxWriteBatchSize&quot;]=&gt;
    int(1000)
    [&quot;localTime&quot;]=&gt;
    object(MongoDB\BSON\UTCDateTime)#4 (1) {
      [&quot;milliseconds&quot;]=&gt;
      int(1447276242774)
    }
    [&quot;maxWireVersion&quot;]=&gt;
    int(3)
    [&quot;minWireVersion&quot;]=&gt;
    int(0)
    [&quot;ok&quot;]=&gt;
    float(1)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.getlatency" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::getLatency</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::getLatency</span> &mdash; <span class="dc-title">Returns the latency of this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.getlatency-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::getLatency</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the latency of this server (i.e. the client&#039;s measured
     <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#round-trip-time" class="link external">&raquo;&nbsp;round trip time</a>
     of an <code class="literal">ismaster</code> command).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.getlatency-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.getlatency-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the latency of this server.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.getlatency-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-server.getlatency-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1783">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Server::getLatency()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectServer</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLatency</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(592)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.getlatency-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
     <li class="member"><a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst" class="link external">&raquo;&nbsp;Server Discovery and Monitoring Specification</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.getport" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::getPort</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::getPort</span> &mdash; <span class="dc-title">Returns the port on which this server is listening</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.getport-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::getPort</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     Returns the port on which this server is listening.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.getport-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.getport-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the port on which this server is listening.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.getport-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-server.getport-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1784">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Server::getPort()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$rp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectServer</span><span style="color: #007700">(</span><span style="color: #0000BB">$rp</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPort</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(27017)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.getport-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.gettags" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::getTags</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::getTags</span> &mdash; <span class="dc-title">Returns an array of tags describing this server in a replica set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.gettags-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::getTags</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     Returns an <span class="type"><a href="#language.types.array" class="type array">array</a></span> of
     <a href="https://docs.mongodb.com/manual/reference/glossary/#term-tag" class="link external">&raquo;&nbsp;tags</a> used to
     describe this server in a replica set. The array will contain zero or more
     <span class="type"><a href="#language.types.string" class="type string">string</a></span> key and value pairs.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.gettags-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.gettags-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an <span class="type"><a href="#language.types.array" class="type array">array</a></span> of tags used to describe this server in a
     replica set.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.gettags-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.gettags-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.gettype" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::getType</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::getType</span> &mdash; <span class="dc-title">Returns an integer denoting the type of this server</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.gettype-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::getType</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     Returns an <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span> denoting the type of this server. The value
     will correlate with a <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> constant.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.gettype-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.gettype-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span> denoting the type of this server.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.gettype-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.gettype-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.isarbiter" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::isArbiter</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::isArbiter</span> &mdash; <span class="dc-title">Checks if this server is an arbiter member of a replica set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.isarbiter-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::isArbiter</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether this server is an
     <a href="https://docs.mongodb.com/manual/reference/glossary/#term-arbiter" class="link external">&raquo;&nbsp;arbiter member</a>
     of a replica set.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.isarbiter-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.isarbiter-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if this server is an arbiter member of a replica set, and
     <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.isarbiter-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.isarbiter-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.ishidden" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::isHidden</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::isHidden</span> &mdash; <span class="dc-title">Checks if this server is a hidden member of a replica set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.ishidden-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::isHidden</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether this server is a
     <a href="https://docs.mongodb.com/manual/reference/glossary/#term-hidden-member" class="link external">&raquo;&nbsp;hidden member</a>
     of a replica set.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.ishidden-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.ishidden-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if this server is a hidden member of a replica set, and
     <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.ishidden-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.ishidden-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.ispassive" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::isPassive</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::isPassive</span> &mdash; <span class="dc-title">Checks if this server is a passive member of a replica set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.ispassive-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::isPassive</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether this server is a
     <a href="https://docs.mongodb.com/manual/reference/glossary/#term-passive-member" class="link external">&raquo;&nbsp;passive member</a>
     of a replica set (i.e. its priority is <code class="literal">0</code>).
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.ispassive-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.ispassive-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if this server is a passive member of a replica set, and
     <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.ispassive-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.ispassive-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.isprimary" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::isPrimary</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::isPrimary</span> &mdash; <span class="dc-title">Checks if this server is a primary member of a replica set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.isprimary-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::isPrimary</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether this server is a
     <a href="https://docs.mongodb.com/manual/reference/glossary/#term-primary" class="link external">&raquo;&nbsp;primary member</a>
     of a replica set.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.isprimary-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.isprimary-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if this server is a primary member of a replica set, and
     <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.isprimary-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.isprimary-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-server.issecondary" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Server::isSecondary</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::isSecondary</span> &mdash; <span class="dc-title">Checks if this server is a secondary member of a replica set</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-server.issecondary-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::isSecondary</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether this server is a
     <a href="https://docs.mongodb.com/manual/reference/glossary/#term-secondary" class="link external">&raquo;&nbsp;secondary member</a>
     of a replica set.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.issecondary-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.issecondary-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if this server is a secondary member of a replica set, and
     <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-server.issecondary-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.issecondary-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-server.getinfo" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::getInfo()</a> - Returns an array of information about this server</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-server.construct">MongoDB\Driver\Server::__construct</a> — Create a new Server (not used)</li><li><a href="#mongodb-driver-server.executebulkwrite">MongoDB\Driver\Server::executeBulkWrite</a> — Execute one or more write operations on this server</li><li><a href="#mongodb-driver-server.executecommand">MongoDB\Driver\Server::executeCommand</a> — Execute a database command on this server</li><li><a href="#mongodb-driver-server.executequery">MongoDB\Driver\Server::executeQuery</a> — Execute a database query on this server</li><li><a href="#mongodb-driver-server.executereadcommand">MongoDB\Driver\Server::executeReadCommand</a> — Execute a database command that reads on this server</li><li><a href="#mongodb-driver-server.executereadwritecommand">MongoDB\Driver\Server::executeReadWriteCommand</a> — Execute a database command that reads and writes on this server</li><li><a href="#mongodb-driver-server.executewritecommand">MongoDB\Driver\Server::executeWriteCommand</a> — Execute a database command that writes on this server</li><li><a href="#mongodb-driver-server.gethost">MongoDB\Driver\Server::getHost</a> — Returns the hostname of this server</li><li><a href="#mongodb-driver-server.getinfo">MongoDB\Driver\Server::getInfo</a> — Returns an array of information about this server</li><li><a href="#mongodb-driver-server.getlatency">MongoDB\Driver\Server::getLatency</a> — Returns the latency of this server</li><li><a href="#mongodb-driver-server.getport">MongoDB\Driver\Server::getPort</a> — Returns the port on which this server is listening</li><li><a href="#mongodb-driver-server.gettags">MongoDB\Driver\Server::getTags</a> — Returns an array of tags describing this server in a replica set</li><li><a href="#mongodb-driver-server.gettype">MongoDB\Driver\Server::getType</a> — Returns an integer denoting the type of this server</li><li><a href="#mongodb-driver-server.isarbiter">MongoDB\Driver\Server::isArbiter</a> — Checks if this server is an arbiter member of a replica set</li><li><a href="#mongodb-driver-server.ishidden">MongoDB\Driver\Server::isHidden</a> — Checks if this server is a hidden member of a replica set</li><li><a href="#mongodb-driver-server.ispassive">MongoDB\Driver\Server::isPassive</a> — Checks if this server is a passive member of a replica set</li><li><a href="#mongodb-driver-server.isprimary">MongoDB\Driver\Server::isPrimary</a> — Checks if this server is a primary member of a replica set</li><li><a href="#mongodb-driver-server.issecondary">MongoDB\Driver\Server::isSecondary</a> — Checks if this server is a secondary member of a replica set</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-writeconcernerror" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\WriteConcernError class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-writeconcernerror.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\WriteConcernError</strong> class
      encapsulates information about a write concern error and may be returned by
      <span class="methodname"><a href="#mongodb-driver-writeresult.getwriteconcernerror" class="methodname">MongoDB\Driver\WriteResult::getWriteConcernError()</a></span>.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-writeconcernerror.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\WriteConcernError</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcernerror.getcode" class="methodname">getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcernerror.getinfo" class="methodname">getInfo</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeconcernerror.getmessage" class="methodname">getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-writeconcernerror.getcode" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcernError::getCode</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcernError::getCode</span> &mdash; <span class="dc-title">Returns the WriteConcernError&#039;s error code</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcernerror.getcode-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcernError::getCode</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcernerror.getcode-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcernerror.getcode-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the WriteConcernError&#039;s error code.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcernerror.getcode-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcernerror.getcode-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1785">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcernError::getCode()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com,rs2.example.com/?replicaSet=myReplicaSet"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$writeConcern&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcern</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(64)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcernerror.getcode-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeconcernerror.getinfo" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcernError::getInfo</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcernError::getInfo</span> &mdash; <span class="dc-title">Returns metadata document for the WriteConcernError</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcernerror.getinfo-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcernError::getInfo</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcernerror.getinfo-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcernerror.getinfo-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the metadata document for the WriteConcernError, or <strong><code>NULL</code></strong> if
     no metadata is available.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcernerror.getinfo-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcernerror.getinfo-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1786">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcernError::getInfo()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com,rs2.example.com/?replicaSet=myReplicaSet"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$writeConcern&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcern</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getInfo</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#1 (1) {
    [&quot;wtimeout&quot;]=&gt;
    bool(true)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcernerror.getinfo-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeconcernerror.getmessage" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteConcernError::getMessage</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcernError::getMessage</span> &mdash; <span class="dc-title">Returns the WriteConcernError&#039;s error message</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeconcernerror.getmessage-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteConcernError::getMessage</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcernerror.getmessage-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeconcernerror.getmessage-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the WriteConcernError&#039;s error message.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcernerror.getmessage-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcernerror.getmessage-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1787">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteConcernError::getMessage()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com,rs2.example.com/?replicaSet=myReplicaSet"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$writeConcern&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcern</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(33) &quot;waiting for replication timed out&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcernerror.getmessage-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-writeconcernerror.getcode">MongoDB\Driver\WriteConcernError::getCode</a> — Returns the WriteConcernError's error code</li><li><a href="#mongodb-driver-writeconcernerror.getinfo">MongoDB\Driver\WriteConcernError::getInfo</a> — Returns metadata document for the WriteConcernError</li><li><a href="#mongodb-driver-writeconcernerror.getmessage">MongoDB\Driver\WriteConcernError::getMessage</a> — Returns the WriteConcernError's error message</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-writeerror" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\WriteError class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-writeerror.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\WriteError</strong> class encapsulates
      information about a write error and may be returned as an array element from
      <span class="methodname"><a href="#mongodb-driver-writeresult.getwriteerrors" class="methodname">MongoDB\Driver\WriteResult::getWriteErrors()</a></span>.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-writeerror.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\WriteError</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeerror.getcode" class="methodname">getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeerror.getindex" class="methodname">getIndex</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeerror.getinfo" class="methodname">getInfo</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeerror.getmessage" class="methodname">getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-writeerror.getcode" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteError::getCode</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteError::getCode</span> &mdash; <span class="dc-title">Returns the WriteError&#039;s error code</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeerror.getcode-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteError::getCode</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeerror.getcode-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeerror.getcode-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the WriteError&#039;s error code.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeerror.getcode-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeerror.getcode-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongodb-driver-cursor.examples.foreach">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteError::getCode()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(11000)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeerror.getindex" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteError::getIndex</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteError::getIndex</span> &mdash; <span class="dc-title">Returns the index of the write operation corresponding to this WriteError</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeerror.getindex-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteError::getIndex</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeerror.getindex-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeerror.getindex-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the index of the write operation (from
     <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>) corresponding to this
     WriteError.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeerror.getindex-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeerror.getindex-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="mongodb-driver-cursor.examples.tailable">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteError::getIndex()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getIndex</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(1)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeerror.getindex-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeerror.getinfo" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteError::getInfo</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteError::getInfo</span> &mdash; <span class="dc-title">Returns metadata document for the WriteError</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeerror.getinfo-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteError::getInfo</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeerror.getinfo-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeerror.getinfo-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the metadata document for the WriteError, or <strong><code>NULL</code></strong> if no metadata is
     available.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeerror.getinfo-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeerror.getmessage" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteError::getMessage</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteError::getMessage</span> &mdash; <span class="dc-title">Returns the WriteError&#039;s error message</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeerror.getmessage-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteError::getMessage</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeerror.getmessage-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeerror.getmessage-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the WriteError&#039;s error message.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeerror.getmessage-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeerror.getmessage-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1790">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteError::getMessage()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(70) &quot;E11000 duplicate key error index: db.collection.$_id_ dup key: { : 1 }&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-writeerror.getcode">MongoDB\Driver\WriteError::getCode</a> — Returns the WriteError's error code</li><li><a href="#mongodb-driver-writeerror.getindex">MongoDB\Driver\WriteError::getIndex</a> — Returns the index of the write operation corresponding to this WriteError</li><li><a href="#mongodb-driver-writeerror.getinfo">MongoDB\Driver\WriteError::getInfo</a> — Returns metadata document for the WriteError</li><li><a href="#mongodb-driver-writeerror.getmessage">MongoDB\Driver\WriteError::getMessage</a> — Returns the WriteError's error message</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-writeresult" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\WriteResult class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-writeresult.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\WriteResult</strong> class encapsulates
      information about an executed
      <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a> and may be returned by
      <span class="methodname"><a href="#mongodb-driver-manager.executebulkwrite" class="methodname">MongoDB\Driver\Manager::executeBulkWrite()</a></span>.
  
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-writeresult.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\WriteResult</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getdeletedcount" class="methodname">getDeletedCount</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getinsertedcount" class="methodname">getInsertedCount</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getmatchedcount" class="methodname">getMatchedCount</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getmodifiedcount" class="methodname">getModifiedCount</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getserver" class="methodname">getServer</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getupsertedcount" class="methodname">getUpsertedCount</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getupsertedids" class="methodname">getUpsertedIds</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getwriteconcernerror" class="methodname">getWriteConcernError</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type MongoDB\Driver\WriteConcernError|null">MongoDB\Driver\WriteConcernError|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.getwriteerrors" class="methodname">getWriteErrors</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeresult.isacknowledged" class="methodname">isAcknowledged</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-writeresult.getdeletedcount" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getDeletedCount</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getDeletedCount</span> &mdash; <span class="dc-title">Returns the number of documents deleted</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getdeletedcount-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getDeletedCount</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getdeletedcount-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getdeletedcount-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of documents deleted, or <strong><code>NULL</code></strong> if the write was not
     acknowledged.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getdeletedcount-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getdeletedcount-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1791">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getDeletedCount()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDeletedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(1)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getdeletedcount-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.isacknowledged" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::isAcknowledged()</a> - Returns whether the write was acknowledged</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getinsertedcount" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getInsertedCount</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getInsertedCount</span> &mdash; <span class="dc-title">Returns the number of documents inserted (excluding upserts)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getinsertedcount-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getInsertedCount</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getinsertedcount-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getinsertedcount-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of documents inserted (excluding upserts), or <strong><code>NULL</code></strong> if
     the write was not acknowledged.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getinsertedcount-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getinsertedcount-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1792">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getInsertedCount()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(1)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getinsertedcount-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.isacknowledged" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::isAcknowledged()</a> - Returns whether the write was acknowledged</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getmatchedcount" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getMatchedCount</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getMatchedCount</span> &mdash; <span class="dc-title">Returns the number of documents selected for update</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getmatchedcount-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getMatchedCount</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  
    <p class="para rdfs-comment">
     If the update operation results in no change to the document (e.g. setting
     the value of a field to its current value), the matched count may be greater
     than the value returned by
     <span class="methodname"><a href="#mongodb-driver-writeresult.getmodifiedcount" class="methodname">MongoDB\Driver\WriteResult::getModifiedCount()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getmatchedcount-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getmatchedcount-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of documents selected for update, or <strong><code>NULL</code></strong> if the write
     was not acknowledged.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getmatchedcount-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getmatchedcount-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1793">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getMatchedCount()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMatchedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(1)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getmatchedcount-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.getmodifiedcount" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::getModifiedCount()</a> - Returns the number of existing documents updated</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.isacknowledged" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::isAcknowledged()</a> - Returns whether the write was acknowledged</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getmodifiedcount" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getModifiedCount</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getModifiedCount</span> &mdash; <span class="dc-title">Returns the number of existing documents updated</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getmodifiedcount-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getModifiedCount</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  
    <p class="para rdfs-comment">
     If the update operation results in no change to the document (e.g. setting
     the value of a field to its current value), the modified count may be less
     than the value returned by
     <span class="methodname"><a href="#mongodb-driver-writeresult.getmatchedcount" class="methodname">MongoDB\Driver\WriteResult::getMatchedCount()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getmodifiedcount-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getmodifiedcount-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of existing documents updated, or <strong><code>NULL</code></strong> if the write was
     not acknowledged.
    </p>
    <p class="para">
     The modified count is not available on versions of MongoDB before 2.6, which
     used the legacy wire protocol version (i.e. OP_UPDATE). If this is the case,
     the modified count will also be <strong><code>NULL</code></strong>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getmodifiedcount-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getmodifiedcount-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1794">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getModifiedCount()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModifiedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(1)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getmodifiedcount-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.getmatchedcount" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::getMatchedCount()</a> - Returns the number of documents selected for update</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.isacknowledged" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::isAcknowledged()</a> - Returns whether the write was acknowledged</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getServer</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getServer</span> &mdash; <span class="dc-title">Returns the server associated with this write result</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getServer</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> associated with this
     write result. This is the server that executed the
     <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getserver-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> associated with this
     write result.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getserver-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1795">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getServer()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectServer</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">ReadPreference</span><span style="color: #007700">::</span><span style="color: #0000BB">RP_PRIMARY</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getServer</span><span style="color: #007700">()&nbsp;==&nbsp;</span><span style="color: #0000BB">$server</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  bool(true)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getserver-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getupsertedcount" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getUpsertedCount</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getUpsertedCount</span> &mdash; <span class="dc-title">Returns the number of documents inserted by an upsert</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getupsertedcount-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getUpsertedCount</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type integer|null">integer|null</span></span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getupsertedcount-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getupsertedcount-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the number of documents inserted by an upsert.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getupsertedcount-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getupsertedcount-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1796">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getUpsertedCount()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUpsertedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(2)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getupsertedcount-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.getupsertedids" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::getUpsertedIds()</a> - Returns an array of identifiers for upserted documents</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.isacknowledged" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::isAcknowledged()</a> - Returns whether the write was acknowledged</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getupsertedids" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getUpsertedIds</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getUpsertedIds</span> &mdash; <span class="dc-title">Returns an array of identifiers for upserted documents</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getupsertedids-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getUpsertedIds</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getupsertedids-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getupsertedids-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array of identifiers (i.e. <code class="literal">&quot;_id&quot;</code> field values)
     for upserted documents. The array keys will correspond to the index of the
     write operation (from <a href="#class.mongodb-driver-bulkwrite" class="classname">MongoDB\Driver\BulkWrite</a>)
     responsible for the upsert.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getupsertedids-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getupsertedids-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1797">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getUpsertedIds()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #DD0000">'$set'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]],&nbsp;[</span><span style="color: #DD0000">'upsert'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delete</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUpsertedIds</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [2]=&gt;
    object(MongoDB\BSON\ObjectId)#4 (1) {
      [&quot;oid&quot;]=&gt;
      string(24) &quot;580e62a224f2302f191b880b&quot;
    }
    [3]=&gt;
    object(MongoDB\BSON\ObjectId)#5 (1) {
      [&quot;oid&quot;]=&gt;
      string(24) &quot;580e62a224f2302f191b880c&quot;
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getupsertedids-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.getupsertedcount" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::getUpsertedCount()</a> - Returns the number of documents inserted by an upsert</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.isacknowledged" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::isAcknowledged()</a> - Returns whether the write was acknowledged</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getwriteconcernerror" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getWriteConcernError</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getWriteConcernError</span> &mdash; <span class="dc-title">Returns any write concern error that occurred</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getwriteconcernerror-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getWriteConcernError</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type MongoDB\Driver\WriteConcernError|null">MongoDB\Driver\WriteConcernError|null</span></span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getwriteconcernerror-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getwriteconcernerror-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a <a href="#class.mongodb-driver-writeconcernerror" class="classname">MongoDB\Driver\WriteConcernError</a> if a write
     concern error was encountered during the write operation, and <strong><code>NULL</code></strong>
     otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getwriteconcernerror-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getwriteconcernerror-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1798">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getWriteConcernError()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://rs1.example.com,rs2.example.com/?replicaSet=myReplicaSet"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$writeConcern&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$writeConcern</span><span style="color: #007700">);<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\Driver\WriteConcernError)#6 (3) {
    [&quot;message&quot;]=&gt;
    string(33) &quot;waiting for replication timed out&quot;
    [&quot;code&quot;]=&gt;
    int(64)
    [&quot;info&quot;]=&gt;
    object(stdClass)#7 (1) {
      [&quot;wtimeout&quot;]=&gt;
      bool(true)
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getwriteconcernerror-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.getwriteerrors" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::getWriteErrors</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::getWriteErrors</span> &mdash; <span class="dc-title">Returns any write errors that occurred</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.getwriteerrors-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::getWriteErrors</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
  
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.getwriteerrors-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.getwriteerrors-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array of <a href="#class.mongodb-driver-writeerror" class="classname">MongoDB\Driver\WriteError</a> objects
     for any write errors encountered during the write operation. The array will
     be empty if no write errors occurred.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.getwriteerrors-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.getwriteerrors-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1799">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::getWriteErrors()</strong></span> with a single error</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;By&nbsp;default,&nbsp;bulk&nbsp;write&nbsp;operations&nbsp;are&nbsp;executed&nbsp;serially&nbsp;in&nbsp;order&nbsp;and<br />&nbsp;*&nbsp;execution&nbsp;will&nbsp;stop&nbsp;after&nbsp;the&nbsp;first&nbsp;error.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(1) {
    [0]=&gt;
    object(MongoDB\Driver\WriteError)#5 (4) {
      [&quot;message&quot;]=&gt;
      string(81) &quot;E11000 duplicate key error collection: db.collection index: _id_ dup key: { : 2 }&quot;
      [&quot;code&quot;]=&gt;
      int(11000)
      [&quot;index&quot;]=&gt;
      int(2)
      [&quot;info&quot;]=&gt;
      NULL
    }
  }
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1800">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\Driver\WriteResult::getWriteErrors()</strong></span> with multiple errors</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;The&nbsp;"ordered"&nbsp;option&nbsp;may&nbsp;be&nbsp;used&nbsp;to&nbsp;allow&nbsp;bulk&nbsp;write&nbsp;operations&nbsp;to&nbsp;continue<br />&nbsp;*&nbsp;executing&nbsp;after&nbsp;the&nbsp;first&nbsp;error&nbsp;is&nbsp;encountered.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">([</span><span style="color: #DD0000">'ordered'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(2) {
    [0]=&gt;
    object(MongoDB\Driver\WriteError)#5 (4) {
      [&quot;message&quot;]=&gt;
      string(81) &quot;E11000 duplicate key error collection: db.collection index: _id_ dup key: { : 2 }&quot;
      [&quot;code&quot;]=&gt;
      int(11000)
      [&quot;index&quot;]=&gt;
      int(2)
      [&quot;info&quot;]=&gt;
      NULL
    }
    [1]=&gt;
    object(MongoDB\Driver\WriteError)#6 (4) {
      [&quot;message&quot;]=&gt;
      string(81) &quot;E11000 duplicate key error collection: db.collection index: _id_ dup key: { : 4 }&quot;
      [&quot;code&quot;]=&gt;
      int(11000)
      [&quot;index&quot;]=&gt;
      int(5)
      [&quot;info&quot;]=&gt;
      NULL
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.getwriteerrors-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-writeerror" class="classname">MongoDB\Driver\WriteError</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <div id="mongodb-driver-writeresult.isacknowledged" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\WriteResult::isAcknowledged</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteResult::isAcknowledged</span> &mdash; <span class="dc-title">Returns whether the write was acknowledged</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeresult.isacknowledged-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\WriteResult::isAcknowledged</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     If the write is acknowledged, other count fields will be available on the
     <a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a> object.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeresult.isacknowledged-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeresult.isacknowledged-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns <strong><code>TRUE</code></strong> if the write was acknowledged, and <strong><code>FALSE</code></strong> otherwise.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-writeresult.isacknowledged-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeresult.isacknowledged-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1801">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\WriteResult::isAcknowledged()</strong></span> with acknowledged write concern</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isAcknowledged</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  bool(true)
  </pre></div>
     </div>
    </div>
    <div class="example" id="example-1802">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\Driver\WriteResult::isAcknowledged()</strong></span> with unacknowledged write concern</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'x'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteConcern</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isAcknowledged</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  bool(false)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeresult.isacknowledged-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-writeconcern" class="classname">MongoDB\Driver\WriteConcern</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-writeresult.getdeletedcount">MongoDB\Driver\WriteResult::getDeletedCount</a> — Returns the number of documents deleted</li><li><a href="#mongodb-driver-writeresult.getinsertedcount">MongoDB\Driver\WriteResult::getInsertedCount</a> — Returns the number of documents inserted (excluding upserts)</li><li><a href="#mongodb-driver-writeresult.getmatchedcount">MongoDB\Driver\WriteResult::getMatchedCount</a> — Returns the number of documents selected for update</li><li><a href="#mongodb-driver-writeresult.getmodifiedcount">MongoDB\Driver\WriteResult::getModifiedCount</a> — Returns the number of existing documents updated</li><li><a href="#mongodb-driver-writeresult.getserver">MongoDB\Driver\WriteResult::getServer</a> — Returns the server associated with this write result</li><li><a href="#mongodb-driver-writeresult.getupsertedcount">MongoDB\Driver\WriteResult::getUpsertedCount</a> — Returns the number of documents inserted by an upsert</li><li><a href="#mongodb-driver-writeresult.getupsertedids">MongoDB\Driver\WriteResult::getUpsertedIds</a> — Returns an array of identifiers for upserted documents</li><li><a href="#mongodb-driver-writeresult.getwriteconcernerror">MongoDB\Driver\WriteResult::getWriteConcernError</a> — Returns any write concern error that occurred</li><li><a href="#mongodb-driver-writeresult.getwriteerrors">MongoDB\Driver\WriteResult::getWriteErrors</a> — Returns any write errors that occurred</li><li><a href="#mongodb-driver-writeresult.isacknowledged">MongoDB\Driver\WriteResult::isAcknowledged</a> — Returns whether the write was acknowledged</li></ul>
  </div>
  
  <hr />
  
  
  
  
   <ul class="chunklist chunklist_book"><li><a href="#class.mongodb-driver-manager">MongoDB\Driver\Manager</a> — The MongoDB\Driver\Manager class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-manager.construct">MongoDB\Driver\Manager::__construct</a> — Create new MongoDB Manager</li><li><a href="#mongodb-driver-manager.createclientencryption">MongoDB\Driver\Manager::createClientEncryption</a> — Create a new ClientEncryption object</li><li><a href="#mongodb-driver-manager.executebulkwrite">MongoDB\Driver\Manager::executeBulkWrite</a> — Execute one or more write operations</li><li><a href="#mongodb-driver-manager.executecommand">MongoDB\Driver\Manager::executeCommand</a> — Execute a database command</li><li><a href="#mongodb-driver-manager.executequery">MongoDB\Driver\Manager::executeQuery</a> — Execute a database query</li><li><a href="#mongodb-driver-manager.executereadcommand">MongoDB\Driver\Manager::executeReadCommand</a> — Execute a database command that reads</li><li><a href="#mongodb-driver-manager.executereadwritecommand">MongoDB\Driver\Manager::executeReadWriteCommand</a> — Execute a database command that reads and writes</li><li><a href="#mongodb-driver-manager.executewritecommand">MongoDB\Driver\Manager::executeWriteCommand</a> — Execute a database command that writes</li><li><a href="#mongodb-driver-manager.getreadconcern">MongoDB\Driver\Manager::getReadConcern</a> — Return the ReadConcern for the Manager</li><li><a href="#mongodb-driver-manager.getreadpreference">MongoDB\Driver\Manager::getReadPreference</a> — Return the ReadPreference for the Manager</li><li><a href="#mongodb-driver-manager.getservers">MongoDB\Driver\Manager::getServers</a> — Return the servers to which this manager is connected</li><li><a href="#mongodb-driver-manager.getwriteconcern">MongoDB\Driver\Manager::getWriteConcern</a> — Return the WriteConcern for the Manager</li><li><a href="#mongodb-driver-manager.selectserver">MongoDB\Driver\Manager::selectServer</a> — Select a server matching a read preference</li><li><a href="#mongodb-driver-manager.startsession">MongoDB\Driver\Manager::startSession</a> — Start a new client session for use with this client</li></ul></li><li><a href="#class.mongodb-driver-command">MongoDB\Driver\Command</a> — The MongoDB\Driver\Command class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-command.construct">MongoDB\Driver\Command::__construct</a> — Create a new Command</li></ul></li><li><a href="#class.mongodb-driver-query">MongoDB\Driver\Query</a> — The MongoDB\Driver\Query class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-query.construct">MongoDB\Driver\Query::__construct</a> — Create a new Query</li></ul></li><li><a href="#class.mongodb-driver-bulkwrite">MongoDB\Driver\BulkWrite</a> — The MongoDB\Driver\BulkWrite class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-bulkwrite.construct">MongoDB\Driver\BulkWrite::__construct</a> — Create a new BulkWrite</li><li><a href="#mongodb-driver-bulkwrite.count">MongoDB\Driver\BulkWrite::count</a> — Count number of write operations in the bulk</li><li><a href="#mongodb-driver-bulkwrite.delete">MongoDB\Driver\BulkWrite::delete</a> — Add a delete operation to the bulk</li><li><a href="#mongodb-driver-bulkwrite.insert">MongoDB\Driver\BulkWrite::insert</a> — Add an insert operation to the bulk</li><li><a href="#mongodb-driver-bulkwrite.update">MongoDB\Driver\BulkWrite::update</a> — Add an update operation to the bulk</li></ul></li><li><a href="#class.mongodb-driver-session">MongoDB\Driver\Session</a> — The MongoDB\Driver\Session class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-session.aborttransaction">MongoDB\Driver\Session::abortTransaction</a> — Aborts a transaction</li><li><a href="#mongodb-driver-session.advanceclustertime">MongoDB\Driver\Session::advanceClusterTime</a> — Advances the cluster time for this session</li><li><a href="#mongodb-driver-session.advanceoperationtime">MongoDB\Driver\Session::advanceOperationTime</a> — Advances the operation time for this session</li><li><a href="#mongodb-driver-session.committransaction">MongoDB\Driver\Session::commitTransaction</a> — Commits a transaction</li><li><a href="#mongodb-driver-session.construct">MongoDB\Driver\Session::__construct</a> — Create a new Session (not used)</li><li><a href="#mongodb-driver-session.endsession">MongoDB\Driver\Session::endSession</a> — Terminates a session</li><li><a href="#mongodb-driver-session.getclustertime">MongoDB\Driver\Session::getClusterTime</a> — Returns the cluster time for this session</li><li><a href="#mongodb-driver-session.getlogicalsessionid">MongoDB\Driver\Session::getLogicalSessionId</a> — Returns the logical session ID for this session</li><li><a href="#mongodb-driver-session.getoperationtime">MongoDB\Driver\Session::getOperationTime</a> — Returns the operation time for this session</li><li><a href="#mongodb-driver-session.getserver">MongoDB\Driver\Session::getServer</a> — Returns the server to which this session is pinned</li><li><a href="#mongodb-driver-session.gettransactionoptions">MongoDB\Driver\Session::getTransactionOptions</a> — Returns options for the currently running transaction</li><li><a href="#mongodb-driver-session.gettransactionstate">MongoDB\Driver\Session::getTransactionState</a> — Returns the current transaction state for this session</li><li><a href="#mongodb-driver-session.isintransaction">MongoDB\Driver\Session::isInTransaction</a> — Returns whether a multi-document transaction is in progress</li><li><a href="#mongodb-driver-session.starttransaction">MongoDB\Driver\Session::startTransaction</a> — Starts a transaction</li></ul></li><li><a href="#class.mongodb-driver-clientencryption">MongoDB\Driver\ClientEncryption</a> — The MongoDB\Driver\ClientEncryption class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-clientencryption.createdatakey">MongoDB\Driver\ClientEncryption::createDataKey</a> — Create a new encryption data key</li><li><a href="#mongodb-driver-clientencryption.decrypt">MongoDB\Driver\ClientEncryption::decrypt</a> — Decrypt a value</li><li><a href="#mongodb-driver-clientencryption.encrypt">MongoDB\Driver\ClientEncryption::encrypt</a> — Encrypt a value</li></ul></li><li><a href="#class.mongodb-driver-writeconcern">MongoDB\Driver\WriteConcern</a> — The MongoDB\Driver\WriteConcern class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-writeconcern.bsonserialize">MongoDB\Driver\WriteConcern::bsonSerialize</a> — Returns an object for BSON serialization</li><li><a href="#mongodb-driver-writeconcern.construct">MongoDB\Driver\WriteConcern::__construct</a> — Create a new WriteConcern</li><li><a href="#mongodb-driver-writeconcern.getjournal">MongoDB\Driver\WriteConcern::getJournal</a> — Returns the WriteConcern's &quot;journal&quot; option</li><li><a href="#mongodb-driver-writeconcern.getw">MongoDB\Driver\WriteConcern::getW</a> — Returns the WriteConcern's &quot;w&quot; option</li><li><a href="#mongodb-driver-writeconcern.getwtimeout">MongoDB\Driver\WriteConcern::getWtimeout</a> — Returns the WriteConcern's &quot;wtimeout&quot; option</li><li><a href="#mongodb-driver-writeconcern.isdefault">MongoDB\Driver\WriteConcern::isDefault</a> — Checks if this is the default write concern</li><li><a href="#mongodb-driver-writeconcern.serialize">MongoDB\Driver\WriteConcern::serialize</a> — Serialize a WriteConcern</li><li><a href="#mongodb-driver-writeconcern.unserialize">MongoDB\Driver\WriteConcern::unserialize</a> — Unserialize a WriteConcern</li></ul></li><li><a href="#class.mongodb-driver-readpreference">MongoDB\Driver\ReadPreference</a> — The MongoDB\Driver\ReadPreference class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-readpreference.bsonserialize">MongoDB\Driver\ReadPreference::bsonSerialize</a> — Returns an object for BSON serialization</li><li><a href="#mongodb-driver-readpreference.construct">MongoDB\Driver\ReadPreference::__construct</a> — Create a new ReadPreference</li><li><a href="#mongodb-driver-readpreference.gethedge">MongoDB\Driver\ReadPreference::getHedge</a> — Returns the ReadPreference's &quot;hedge&quot; option</li><li><a href="#mongodb-driver-readpreference.getmaxstalenessseconds">MongoDB\Driver\ReadPreference::getMaxStalenessSeconds</a> — Returns the ReadPreference's &quot;maxStalenessSeconds&quot; option</li><li><a href="#mongodb-driver-readpreference.getmode">MongoDB\Driver\ReadPreference::getMode</a> — Returns the ReadPreference's &quot;mode&quot; option</li><li><a href="#mongodb-driver-readpreference.getmodestring">MongoDB\Driver\ReadPreference::getModeString</a> — Returns the ReadPreference's &quot;mode&quot; option as a string</li><li><a href="#mongodb-driver-readpreference.gettagsets">MongoDB\Driver\ReadPreference::getTagSets</a> — Returns the ReadPreference's &quot;tagSets&quot; option</li><li><a href="#mongodb-driver-readpreference.serialize">MongoDB\Driver\ReadPreference::serialize</a> — Serialize a ReadPreference</li><li><a href="#mongodb-driver-readpreference.unserialize">MongoDB\Driver\ReadPreference::unserialize</a> — Unserialize a ReadPreference</li></ul></li><li><a href="#class.mongodb-driver-readconcern">MongoDB\Driver\ReadConcern</a> — The MongoDB\Driver\ReadConcern class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-readconcern.bsonserialize">MongoDB\Driver\ReadConcern::bsonSerialize</a> — Returns an object for BSON serialization</li><li><a href="#mongodb-driver-readconcern.construct">MongoDB\Driver\ReadConcern::__construct</a> — Create a new ReadConcern</li><li><a href="#mongodb-driver-readconcern.getlevel">MongoDB\Driver\ReadConcern::getLevel</a> — Returns the ReadConcern's &quot;level&quot; option</li><li><a href="#mongodb-driver-readconcern.isdefault">MongoDB\Driver\ReadConcern::isDefault</a> — Checks if this is the default read concern</li><li><a href="#mongodb-driver-readconcern.serialize">MongoDB\Driver\ReadConcern::serialize</a> — Serialize a ReadConcern</li><li><a href="#mongodb-driver-readconcern.unserialize">MongoDB\Driver\ReadConcern::unserialize</a> — Unserialize a ReadConcern</li></ul></li><li><a href="#class.mongodb-driver-cursor">MongoDB\Driver\Cursor</a> — The MongoDB\Driver\Cursor class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-cursor.construct">MongoDB\Driver\Cursor::__construct</a> — Create a new Cursor (not used)</li><li><a href="#mongodb-driver-cursor.getid">MongoDB\Driver\Cursor::getId</a> — Returns the ID for this cursor</li><li><a href="#mongodb-driver-cursor.getserver">MongoDB\Driver\Cursor::getServer</a> — Returns the server associated with this cursor</li><li><a href="#mongodb-driver-cursor.isdead">MongoDB\Driver\Cursor::isDead</a> — Checks if the cursor is exhausted or may have additional results</li><li><a href="#mongodb-driver-cursor.settypemap">MongoDB\Driver\Cursor::setTypeMap</a> — Sets a type map to use for BSON unserialization</li><li><a href="#mongodb-driver-cursor.toarray">MongoDB\Driver\Cursor::toArray</a> — Returns an array containing all results for this cursor</li></ul></li><li><a href="#class.mongodb-driver-cursorid">MongoDB\Driver\CursorId</a> — The MongoDB\Driver\CursorId class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-cursorid.construct">MongoDB\Driver\CursorId::__construct</a> — Create a new CursorId (not used)</li><li><a href="#mongodb-driver-cursorid.serialize">MongoDB\Driver\CursorId::serialize</a> — Serialize a CursorId</li><li><a href="#mongodb-driver-cursorid.tostring">MongoDB\Driver\CursorId::__toString</a> — String representation of the cursor ID</li><li><a href="#mongodb-driver-cursorid.unserialize">MongoDB\Driver\CursorId::unserialize</a> — Unserialize a CursorId</li></ul></li><li><a href="#class.mongodb-driver-cursorinterface">MongoDB\Driver\CursorInterface</a> — The MongoDB\Driver\CursorInterface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-cursorinterface.getid">MongoDB\Driver\CursorInterface::getId</a> — Returns the ID for this cursor</li><li><a href="#mongodb-driver-cursorinterface.getserver">MongoDB\Driver\CursorInterface::getServer</a> — Returns the server associated with this cursor</li><li><a href="#mongodb-driver-cursorinterface.isdead">MongoDB\Driver\CursorInterface::isDead</a> — Checks if the cursor may have additional results</li><li><a href="#mongodb-driver-cursorinterface.settypemap">MongoDB\Driver\CursorInterface::setTypeMap</a> — Sets a type map to use for BSON unserialization</li><li><a href="#mongodb-driver-cursorinterface.toarray">MongoDB\Driver\CursorInterface::toArray</a> — Returns an array containing all results for this cursor</li></ul></li><li><a href="#class.mongodb-driver-server">MongoDB\Driver\Server</a> — The MongoDB\Driver\Server class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-server.construct">MongoDB\Driver\Server::__construct</a> — Create a new Server (not used)</li><li><a href="#mongodb-driver-server.executebulkwrite">MongoDB\Driver\Server::executeBulkWrite</a> — Execute one or more write operations on this server</li><li><a href="#mongodb-driver-server.executecommand">MongoDB\Driver\Server::executeCommand</a> — Execute a database command on this server</li><li><a href="#mongodb-driver-server.executequery">MongoDB\Driver\Server::executeQuery</a> — Execute a database query on this server</li><li><a href="#mongodb-driver-server.executereadcommand">MongoDB\Driver\Server::executeReadCommand</a> — Execute a database command that reads on this server</li><li><a href="#mongodb-driver-server.executereadwritecommand">MongoDB\Driver\Server::executeReadWriteCommand</a> — Execute a database command that reads and writes on this server</li><li><a href="#mongodb-driver-server.executewritecommand">MongoDB\Driver\Server::executeWriteCommand</a> — Execute a database command that writes on this server</li><li><a href="#mongodb-driver-server.gethost">MongoDB\Driver\Server::getHost</a> — Returns the hostname of this server</li><li><a href="#mongodb-driver-server.getinfo">MongoDB\Driver\Server::getInfo</a> — Returns an array of information about this server</li><li><a href="#mongodb-driver-server.getlatency">MongoDB\Driver\Server::getLatency</a> — Returns the latency of this server</li><li><a href="#mongodb-driver-server.getport">MongoDB\Driver\Server::getPort</a> — Returns the port on which this server is listening</li><li><a href="#mongodb-driver-server.gettags">MongoDB\Driver\Server::getTags</a> — Returns an array of tags describing this server in a replica set</li><li><a href="#mongodb-driver-server.gettype">MongoDB\Driver\Server::getType</a> — Returns an integer denoting the type of this server</li><li><a href="#mongodb-driver-server.isarbiter">MongoDB\Driver\Server::isArbiter</a> — Checks if this server is an arbiter member of a replica set</li><li><a href="#mongodb-driver-server.ishidden">MongoDB\Driver\Server::isHidden</a> — Checks if this server is a hidden member of a replica set</li><li><a href="#mongodb-driver-server.ispassive">MongoDB\Driver\Server::isPassive</a> — Checks if this server is a passive member of a replica set</li><li><a href="#mongodb-driver-server.isprimary">MongoDB\Driver\Server::isPrimary</a> — Checks if this server is a primary member of a replica set</li><li><a href="#mongodb-driver-server.issecondary">MongoDB\Driver\Server::isSecondary</a> — Checks if this server is a secondary member of a replica set</li></ul></li><li><a href="#class.mongodb-driver-writeconcernerror">MongoDB\Driver\WriteConcernError</a> — The MongoDB\Driver\WriteConcernError class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-writeconcernerror.getcode">MongoDB\Driver\WriteConcernError::getCode</a> — Returns the WriteConcernError's error code</li><li><a href="#mongodb-driver-writeconcernerror.getinfo">MongoDB\Driver\WriteConcernError::getInfo</a> — Returns metadata document for the WriteConcernError</li><li><a href="#mongodb-driver-writeconcernerror.getmessage">MongoDB\Driver\WriteConcernError::getMessage</a> — Returns the WriteConcernError's error message</li></ul></li><li><a href="#class.mongodb-driver-writeerror">MongoDB\Driver\WriteError</a> — The MongoDB\Driver\WriteError class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-writeerror.getcode">MongoDB\Driver\WriteError::getCode</a> — Returns the WriteError's error code</li><li><a href="#mongodb-driver-writeerror.getindex">MongoDB\Driver\WriteError::getIndex</a> — Returns the index of the write operation corresponding to this WriteError</li><li><a href="#mongodb-driver-writeerror.getinfo">MongoDB\Driver\WriteError::getInfo</a> — Returns metadata document for the WriteError</li><li><a href="#mongodb-driver-writeerror.getmessage">MongoDB\Driver\WriteError::getMessage</a> — Returns the WriteError's error message</li></ul></li><li><a href="#class.mongodb-driver-writeresult">MongoDB\Driver\WriteResult</a> — The MongoDB\Driver\WriteResult class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-writeresult.getdeletedcount">MongoDB\Driver\WriteResult::getDeletedCount</a> — Returns the number of documents deleted</li><li><a href="#mongodb-driver-writeresult.getinsertedcount">MongoDB\Driver\WriteResult::getInsertedCount</a> — Returns the number of documents inserted (excluding upserts)</li><li><a href="#mongodb-driver-writeresult.getmatchedcount">MongoDB\Driver\WriteResult::getMatchedCount</a> — Returns the number of documents selected for update</li><li><a href="#mongodb-driver-writeresult.getmodifiedcount">MongoDB\Driver\WriteResult::getModifiedCount</a> — Returns the number of existing documents updated</li><li><a href="#mongodb-driver-writeresult.getserver">MongoDB\Driver\WriteResult::getServer</a> — Returns the server associated with this write result</li><li><a href="#mongodb-driver-writeresult.getupsertedcount">MongoDB\Driver\WriteResult::getUpsertedCount</a> — Returns the number of documents inserted by an upsert</li><li><a href="#mongodb-driver-writeresult.getupsertedids">MongoDB\Driver\WriteResult::getUpsertedIds</a> — Returns an array of identifiers for upserted documents</li><li><a href="#mongodb-driver-writeresult.getwriteconcernerror">MongoDB\Driver\WriteResult::getWriteConcernError</a> — Returns any write concern error that occurred</li><li><a href="#mongodb-driver-writeresult.getwriteerrors">MongoDB\Driver\WriteResult::getWriteErrors</a> — Returns any write errors that occurred</li><li><a href="#mongodb-driver-writeresult.isacknowledged">MongoDB\Driver\WriteResult::isAcknowledged</a> — Returns whether the write was acknowledged</li></ul></li></ul></div>
  <hr />
  
  
  
    
  
  
   <div id="book.bson" class="book"><hr />
    <h1 class="title">BSON type classes and serialization functions</h1>
    
  
    <div id="ref.bson.functions" class="reference"><hr />
     <h1 class="title">Functions</h1>
     
   
  
  <div id="function.mongodb.bson-fromjson" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\fromJSON</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\fromJSON</span> &mdash; <span class="dc-title">Returns the BSON representation of a JSON value</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.bson-fromjson-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\BSON\fromJSON</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$json</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Converts an
     <a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;extended JSON</a>
     string to its BSON representation.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.bson-fromjson-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">json</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        JSON value to be converted.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.bson-fromjson-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The serialized BSON document as a binary string.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.bson-fromjson-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">
      Throws
      <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if
      the JSON value cannot be converted to BSON (e.g. due to a syntax error).
     </li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-function.mongodb.bson-fromjson-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1803">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\fromJSON()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$json&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'{&nbsp;"_id":&nbsp;{&nbsp;"$oid":&nbsp;"563143b280d2387c91807965"&nbsp;}&nbsp;}'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$json</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#2 (1) {
    [&quot;_id&quot;]=&gt;
    object(MongoDB\BSON\ObjectId)#1 (1) {
      [&quot;oid&quot;]=&gt;
      string(24) &quot;563143b280d2387c91807965&quot;
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.bson-fromjson-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tojson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toJSON()</a> - Returns the Legacy Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;MongoDB BSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="function.mongodb.bson-fromphp" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\fromPHP</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\fromPHP</span> &mdash; <span class="dc-title">Returns the BSON representation of a PHP value</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.bson-fromphp-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\BSON\fromPHP</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$value</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Serializes a PHP array or object (e.g. document) to its
     <a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON</a> representation. The
     returned binary string will describe a BSON document.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.bson-fromphp-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">value</code> (<span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        PHP value to be serialized.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.bson-fromphp-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The serialized BSON document as a binary string.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.bson-fromphp-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">
      Throws
      <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if
      the PHP value cannot be converted to BSON. Possible reasons include, but are
      not limited to, encountering an unexpected
      <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span> instance or
      <span class="function"><a href="#mongodb-bson-serializable.bsonserialize" class="function">MongoDB\BSON\Serializable::bsonSerialize()</a></span> failing to
      return an <span class="type"><a href="#language.types.array" class="type array">array</a></span> or <strong class="classname">stdClass</strong>.
     </li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-function.mongodb.bson-fromphp-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1804">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\fromPHP()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">([</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br />echo&nbsp;</span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  0e00000010666f6f000100000000cat 
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.bson-fromphp-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tophp" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toPHP()</a> - Returns the PHP representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;MongoDB BSON</a></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="function.mongodb.bson-tocanonicalextendedjson" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\toCanonicalExtendedJSON</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\toCanonicalExtendedJSON</span> &mdash; <span class="dc-title">Returns the Canonical Extended JSON representation of a BSON value</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.bson-tocanonicalextendedjson-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\BSON\toCanonicalExtendedJSON</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$bson</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Converts a BSON string to its
     <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;Canonical Extended JSON</a>
     representation. The canonical format prefers type fidelity at the expense of
     concise output and is most suited for producing output that can be converted
     back to BSON without any loss of type information (e.g. numeric types will
     remain differentiated).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.bson-tocanonicalextendedjson-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">bson</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        BSON value to be converted.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.bson-tocanonicalextendedjson-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The converted JSON value.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.bson-tocanonicalextendedjson-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the input did not contain exactly one BSON document. Possible reasons include, but are not limited to, invalid BSON, extra data (after reading one BSON document), or an unexpected <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> error.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-function.mongodb.bson-tocanonicalextendedjson-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1805">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\toCanonicalExtendedJSON()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$documents&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'null'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'boolean'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'string'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'int32'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'int64'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4294967295&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'double'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'nan'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">NAN&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'pos_inf'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">INF&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'neg_inf'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">INF&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'array'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'document'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'oid'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">(</span><span style="color: #DD0000">'56315a7c6118fd1b920270b1'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'dec128'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #DD0000">'1234.5678'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'binary'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">::</span><span style="color: #0000BB">TYPE_GENERIC</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'date'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">(</span><span style="color: #0000BB">1445990400000</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'timestamp'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Timestamp</span><span style="color: #007700">(</span><span style="color: #0000BB">1234</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5678</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'regex'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Regex</span><span style="color: #007700">(</span><span style="color: #DD0000">'pattern'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'code'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;1;&nbsp;}'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'code_ws'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;a;&nbsp;}'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">])&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'minkey'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MinKey&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'maxkey'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MaxKey&nbsp;</span><span style="color: #007700">],<br />];<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$documents&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toCanonicalExtendedJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;null&quot; : null }
  { &quot;boolean&quot; : true }
  { &quot;string&quot; : &quot;foo&quot; }
  { &quot;int32&quot; : { &quot;$numberInt&quot; : &quot;123&quot; } }
  { &quot;int64&quot; : { &quot;$numberLong&quot; : &quot;4294967295&quot;} }
  { &quot;double&quot; : { &quot;$numberDouble&quot; : &quot;1.0&quot; } }
  { &quot;nan&quot; : { &quot;$numberDouble&quot; : &quot;NaN&quot; } }
  { &quot;pos_inf&quot; : { &quot;$numberDouble&quot; : &quot;Infinity&quot; } }
  { &quot;neg_inf&quot; : { &quot;$numberDouble&quot; : &quot;-Infinity&quot; } }
  { &quot;array&quot; : [ &quot;foo&quot;, &quot;bar&quot; ] }
  { &quot;document&quot; : { &quot;foo&quot; : &quot;bar&quot; } }
  { &quot;oid&quot; : { &quot;$oid&quot; : &quot;56315a7c6118fd1b920270b1&quot; } }
  { &quot;dec128&quot; : { &quot;$numberDecimal&quot; : &quot;1234.5678&quot; } }
  { &quot;binary&quot; : { &quot;$binary&quot; : { &quot;base64&quot;: &quot;Zm9v&quot;, &quot;subType&quot; : &quot;00&quot; } } }
  { &quot;date&quot; : { &quot;$date&quot; : { &quot;$numberLong&quot; : &quot;1445990400000&quot; } } }
  { &quot;timestamp&quot; : { &quot;$timestamp&quot; : { &quot;t&quot; : 5678, &quot;i&quot; : 1234 } } }
  { &quot;regex&quot; : { &quot;$regularExpression&quot; : { &quot;pattern&quot; : &quot;pattern&quot;, &quot;options&quot; : &quot;i&quot; } } }
  { &quot;code&quot; : { &quot;$code&quot; : &quot;function() { return 1; }&quot; } }
  { &quot;code_ws&quot; : { &quot;$code&quot; : &quot;function() { return a; }&quot;, &quot;$scope&quot; : { &quot;a&quot; : { &quot;$numberInt&quot; : &quot;1&quot; } } } }
  { &quot;minkey&quot; : { &quot;$minKey&quot; : 1 } }
  { &quot;maxkey&quot; : { &quot;$maxKey&quot; : 1 } }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.bson-tocanonicalextendedjson-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#function.mongodb.bson-fromjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\fromJSON()</a> - Returns the BSON representation of a JSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst" class="link external">&raquo;&nbsp;Extended JSON Specification</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;MongoDB BSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="function.mongodb.bson-tojson" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\toJSON</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\toJSON</span> &mdash; <span class="dc-title">Returns the Legacy Extended JSON representation of a BSON value</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.bson-tojson-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\BSON\toJSON</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$bson</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Converts a BSON string to its
     <a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;Legacy Extended JSON</a>
     representation.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      There exist several JSON formats for representing BSON. This function
      implements the &quot;strict mode&quot; defined in
      <a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a>,
      which has been superseded by the canonical and relaxed formats defined in
      the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst" class="link external">&raquo;&nbsp;Extended JSON Specification</a>
      and implemented by <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>
      and <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">
      <a href="http://www.json.org/" class="link external">&raquo;&nbsp;JSON</a> does not support
      <a href="#language.types.float.nan" class="link"><strong><code>NAN</code></strong></a> and
      <a href="#function.is-infinite" class="link"><strong><code>INF</code></strong></a> and
      MongoDB&#039;s Legacy Extended JSON format does not define an alternative
      representation for these values
      (<a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> will output
      <code class="literal">nan</code> and <code class="literal">inf</code> literals, which may not be
      parsed as valid JSON). If you are working with BSON that may contain
      non-finite numbers, please use
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span> or
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span>.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.bson-tojson-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">bson</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        BSON value to be converted.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.bson-tojson-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The converted JSON value.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.bson-tojson-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the input did not contain exactly one BSON document. Possible reasons include, but are not limited to, invalid BSON, extra data (after reading one BSON document), or an unexpected <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> error.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-function.mongodb.bson-tojson-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1806">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\toJSON()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$documents&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'null'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'boolean'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'string'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'int32'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'int64'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4294967295&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'double'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'nan'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">NAN&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'pos_inf'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">INF&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'neg_inf'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">INF&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'array'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'document'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'oid'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">(</span><span style="color: #DD0000">'56315a7c6118fd1b920270b1'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'dec128'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #DD0000">'1234.5678'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'binary'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">::</span><span style="color: #0000BB">TYPE_GENERIC</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'date'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">(</span><span style="color: #0000BB">1445990400000</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'timestamp'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Timestamp</span><span style="color: #007700">(</span><span style="color: #0000BB">1234</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5678</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'regex'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Regex</span><span style="color: #007700">(</span><span style="color: #DD0000">'pattern'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'code'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;1;&nbsp;}'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'code_ws'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;a;&nbsp;}'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">])&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'minkey'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MinKey&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'maxkey'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MaxKey&nbsp;</span><span style="color: #007700">],<br />];<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$documents&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;null&quot; : null }
  { &quot;boolean&quot; : true }
  { &quot;string&quot; : &quot;foo&quot; }
  { &quot;int32&quot; : 123 }
  { &quot;int64&quot; : 4294967295 }
  { &quot;double&quot; : 1.0 }
  { &quot;nan&quot; : nan }
  { &quot;pos_inf&quot; : inf }
  { &quot;neg_inf&quot; : -inf }
  { &quot;array&quot; : [ &quot;foo&quot;, &quot;bar&quot; ] }
  { &quot;document&quot; : { &quot;foo&quot; : &quot;bar&quot; } }
  { &quot;oid&quot; : { &quot;$oid&quot; : &quot;56315a7c6118fd1b920270b1&quot; } }
  { &quot;dec128&quot; : { &quot;$numberDecimal&quot; : &quot;1234.5678&quot; } }
  { &quot;binary&quot; : { &quot;$binary&quot; : &quot;Zm9v&quot;, &quot;$type&quot; : &quot;00&quot; } }
  { &quot;date&quot; : { &quot;$date&quot; : 1445990400000 } }
  { &quot;timestamp&quot; : { &quot;$timestamp&quot; : { &quot;t&quot; : 5678, &quot;i&quot; : 1234 } } }
  { &quot;regex&quot; : { &quot;$regex&quot; : &quot;pattern&quot;, &quot;$options&quot; : &quot;i&quot; } }
  { &quot;code&quot; : { &quot;$code&quot; : &quot;function() { return 1; }&quot; } }
  { &quot;code_ws&quot; : { &quot;$code&quot; : &quot;function() { return a; }&quot;, &quot;$scope&quot; : { &quot;a&quot; : 1 } } }
  { &quot;minkey&quot; : { &quot;$minKey&quot; : 1 } }
  { &quot;maxkey&quot; : { &quot;$maxKey&quot; : 1 } }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.bson-tojson-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#function.mongodb.bson-fromjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\fromJSON()</a> - Returns the BSON representation of a JSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;MongoDB BSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="function.mongodb.bson-tophp" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\toPHP</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\toPHP</span> &mdash; <span class="dc-title">Returns the PHP representation of a BSON value</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.bson-tophp-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\BSON\toPHP</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$bson</code></span>
     [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$typeMap</code><span class="initializer"> = array()</span></span>
    ] ) : <span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></div>
  
    <p class="para rdfs-comment">
     Unserializes a BSON document (i.e. binary string) to its PHP representation.
     The <code class="parameter">typeMap</code> paramater may be used to control the PHP
     types used for converting BSON arrays and documents (both root and embedded).
    </p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">
      Fields containing deprecated BSON types (i.e. undefined, symbol,
      DBPointer) are represented only by bare-bones objects of the classes
      <a href="#class.mongodb-bson-undefined" class="classname">MongoDB\BSON\Undefined</a>,
      <a href="#class.mongodb-bson-symbol" class="classname">MongoDB\BSON\Symbol</a>, and
      <a href="#class.mongodb-bson-dbpointer" class="classname">MongoDB\BSON\DBPointer</a>, when converting BSON to
      PHP. These objects are created from BSON data and used for storing these
      types back into the database, but can not be instantiated as they have a
      private constructor.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.bson-tophp-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">bson</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        BSON value to be unserialized.
       </p>
      </dd>
  
     
     
     
      <dt>
  <code class="parameter">typeMap</code> (<span class="type"><a href="#language.types.array" class="type array">array</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        <a href="#mongodb.persistence.typemaps" class="link">Type map configuration</a>.
       </p>
      </dd>
  
     
  
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.bson-tophp-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The unserialized PHP value.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.bson-tophp-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">
      Throws
      <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if
      a class in the type map cannot be instantiated or does not implement
      <span class="interfacename"><a href="#class.mongodb-bson-unserializable" class="interfacename">MongoDB\BSON\Unserializable</a></span>.
     </li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the input did not contain exactly one BSON document. Possible reasons include, but are not limited to, invalid BSON, extra data (after reading one BSON document), or an unexpected <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> error.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-function.mongodb.bson-tophp-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.4.0</td>
         <td>
          <p class="para">
           If the input contains an unsupported, deprecated BSON type, the
           driver will now no longer log a warning to the debug log, but instead
           will create an object representing this type.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.2</td>
         <td>
          <p class="para">
           <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a>
           is no longer thrown if the input contains an unsupported, deprecated
           BSON type. Such types will be ignored (as they were in versions before
           1.3.0), although the driver will now log a warning to the debug log
           (see: <a href="#ini.mongodb.debug" class="link">mongodb.debug</a>).
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">
           <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a>
           is thrown if the input contains an unsupported, deprecated BSON type.
           Previously, such types were ignored.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-function.mongodb.bson-tophp-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1807">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\toPHP()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">hex2bin</span><span style="color: #007700">(</span><span style="color: #DD0000">'0e00000010666f6f000100000000'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(stdClass)#1 (1) {
    [&quot;foo&quot;]=&gt;
    int(1)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.bson-tophp-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#function.mongodb.bson-fromphp" class="function" rel="rdfs-seeAlso">MongoDB\BSON\fromPHP()</a> - Returns the BSON representation of a PHP value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;MongoDB BSON</a></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="function.mongodb.bson-torelaxedextendedjson" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\toRelaxedExtendedJSON</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\toRelaxedExtendedJSON</span> &mdash; <span class="dc-title">Returns the Relaxed Extended JSON representation of a BSON value</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.bson-torelaxedextendedjson-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\BSON\toRelaxedExtendedJSON</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$bson</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Converts a BSON string to its
     <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;Relaxed Extended JSON</a>
     representation. The relaxed format prefers use of JSON type primitives at the
     expense of type fidelity and is most suited for producing output that can be
     easily consumed by web APIs and humans.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.bson-torelaxedextendedjson-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">bson</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        BSON value to be converted.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.bson-torelaxedextendedjson-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The converted JSON value.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.bson-torelaxedextendedjson-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the input did not contain exactly one BSON document. Possible reasons include, but are not limited to, invalid BSON, extra data (after reading one BSON document), or an unexpected <a href="https://github.com/mongodb/libbson" class="link external">&raquo;&nbsp;libbson</a> error.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-function.mongodb.bson-torelaxedextendedjson-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1808">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\toRelaxedExtendedJSON()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$documents&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'null'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'boolean'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'string'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'int32'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">123&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'int64'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4294967295&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'double'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'nan'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">NAN&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'pos_inf'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">INF&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'neg_inf'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">INF&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'array'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'document'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'&nbsp;</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'oid'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">(</span><span style="color: #DD0000">'56315a7c6118fd1b920270b1'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'dec128'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #DD0000">'1234.5678'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'binary'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">::</span><span style="color: #0000BB">TYPE_GENERIC</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'date'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">(</span><span style="color: #0000BB">1445990400000</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'timestamp'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Timestamp</span><span style="color: #007700">(</span><span style="color: #0000BB">1234</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5678</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'regex'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Regex</span><span style="color: #007700">(</span><span style="color: #DD0000">'pattern'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'code'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;1;&nbsp;}'</span><span style="color: #007700">)&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'code_ws'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;a;&nbsp;}'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">])&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'minkey'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MinKey&nbsp;</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;</span><span style="color: #DD0000">'maxkey'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MaxKey&nbsp;</span><span style="color: #007700">],<br />];<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$documents&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$document</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$document</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toRelaxedExtendedJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;null&quot; : null }
  { &quot;boolean&quot; : true }
  { &quot;string&quot; : &quot;foo&quot; }
  { &quot;int32&quot; : 123 }
  { &quot;int64&quot; : 4294967295 }
  { &quot;double&quot; : 1.0 }
  { &quot;nan&quot; : { &quot;$numberDouble&quot; : &quot;NaN&quot; } }
  { &quot;pos_inf&quot; : { &quot;$numberDouble&quot; : &quot;Infinity&quot; } }
  { &quot;neg_inf&quot; : { &quot;$numberDouble&quot; : &quot;-Infinity&quot; } }
  { &quot;array&quot; : [ &quot;foo&quot;, &quot;bar&quot; ] }
  { &quot;document&quot; : { &quot;foo&quot; : &quot;bar&quot; } }
  { &quot;oid&quot; : { &quot;$oid&quot; : &quot;56315a7c6118fd1b920270b1&quot; } }
  { &quot;dec128&quot; : { &quot;$numberDecimal&quot; : &quot;1234.5678&quot; } }
  { &quot;binary&quot; : { &quot;$binary&quot; : { &quot;base64&quot;: &quot;Zm9v&quot;, &quot;subType&quot; : &quot;00&quot; } } }
  { &quot;date&quot; : { &quot;$date&quot; : &quot;2015-10-28T00:00:00Z&quot; } }
  { &quot;timestamp&quot; : { &quot;$timestamp&quot; : { &quot;t&quot; : 5678, &quot;i&quot; : 1234 } } }
  { &quot;regex&quot; : { &quot;$regularExpression&quot; : { &quot;pattern&quot; : &quot;pattern&quot;, &quot;options&quot; : &quot;i&quot; } } }
  { &quot;code&quot; : { &quot;$code&quot; : &quot;function() { return 1; }&quot; } }
  { &quot;code_ws&quot; : { &quot;$code&quot; : &quot;function() { return a; }&quot;, &quot;$scope&quot; : { &quot;a&quot; : 1 } } }
  { &quot;minkey&quot; : { &quot;$minKey&quot; : 1 } }
  { &quot;maxkey&quot; : { &quot;$maxKey&quot; : 1 } }
  </pre></div>
     </div>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.bson-torelaxedextendedjson-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#function.mongodb.bson-fromjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\fromJSON()</a> - Returns the BSON representation of a JSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst" class="link external">&raquo;&nbsp;Extended JSON </a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;MongoDB BSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
    <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#function.mongodb.bson-fromjson">MongoDB\BSON\fromJSON</a> — Returns the BSON representation of a JSON value</li><li><a href="#function.mongodb.bson-fromphp">MongoDB\BSON\fromPHP</a> — Returns the BSON representation of a PHP value</li><li><a href="#function.mongodb.bson-tocanonicalextendedjson">MongoDB\BSON\toCanonicalExtendedJSON</a> — Returns the Canonical Extended JSON representation of a BSON value</li><li><a href="#function.mongodb.bson-tojson">MongoDB\BSON\toJSON</a> — Returns the Legacy Extended JSON representation of a BSON value</li><li><a href="#function.mongodb.bson-tophp">MongoDB\BSON\toPHP</a> — Returns the PHP representation of a BSON value</li><li><a href="#function.mongodb.bson-torelaxedextendedjson">MongoDB\BSON\toRelaxedExtendedJSON</a> — Returns the Relaxed Extended JSON representation of a BSON value</li></ul>
  </div>
  
  <hr />
  
  
    
   
  
  <div id="class.mongodb-bson-binary" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Binary class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-binary.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for binary data (i.e. array of bytes). Binary values also have a
      subtype, which is used to indicate what kind of data is in the byte array.
      Subtypes from zero to 127 are predefined or reserved. Subtypes from 128-255
      are user-defined.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-binary.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Binary</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-binaryinterface" class="interfacename">MongoDB\BSON\BinaryInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_GENERIC</var>
       <span class="initializer"> = 0</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_FUNCTION</var>
       <span class="initializer"> = 1</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_OLD_BINARY</var>
       <span class="initializer"> = 2</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_OLD_UUID</var>
       <span class="initializer"> = 3</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_UUID</var>
       <span class="initializer"> = 4</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_MD5</var>
       <span class="initializer"> = 5</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_ENCRYPTED</var>
       <span class="initializer"> = 6</span>
      ;</div>
  
      <div class="fieldsynopsis">
       <span class="modifier">const</span>
       <span class="type">integer</span>
       <var class="varname">TYPE_USER_DEFINED</var>
       <span class="initializer"> = 128</span>
      ;</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binary.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$data</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$type</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binary.getdata" class="methodname">getData</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binary.gettype" class="methodname">getType</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binary.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binary.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binary.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binary.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
    
  
    <div class="section" id="mongodb-bson-binary.constants">
     <h2 class="title">Predefined Constants</h2>
     <dl>
  
  
      
       <dt id="mongodb-bson-binary.constants.type-generic"><strong><code>MongoDB\BSON\Binary::TYPE_GENERIC</code></strong></dt>
  
       <dd>
  
        <p class="para">Generic binary data.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-bson-binary.constants.type-function"><strong><code>MongoDB\BSON\Binary::TYPE_FUNCTION</code></strong></dt>
  
       <dd>
  
        <p class="para">Function.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-bson-binary.constants.type-old-binary"><strong><code>MongoDB\BSON\Binary::TYPE_OLD_BINARY</code></strong></dt>
  
       <dd>
  
        <p class="para">Generic binary data (deprecated in favor of <strong><code>MongoDB\BSON\Binary::TYPE_GENERIC</code></strong>).</p>
       </dd>
  
      
  
      
       <dt id="mongodb-bson-binary.constants.type-old-uuid"><strong><code>MongoDB\BSON\Binary::TYPE_OLD_UUID</code></strong></dt>
  
       <dd>
  
        <p class="para">Universally unique identifier (deprecated in favor of <strong><code>MongoDB\BSON\Binary::TYPE_UUID</code></strong>). When using this type, the Binary&#039;s data should be 16 bytes in length.</p>
        <p class="para">Historically, other drivers encoded values with this type based on their language conventions (e.g. varying endianness), which makes it non-portable. The PHP driver applies no special handling for encoding or decoding data with this type.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-bson-binary.constants.type-uuid"><strong><code>MongoDB\BSON\Binary::TYPE_UUID</code></strong></dt>
  
       <dd>
  
        <p class="para">Universally unique identifier. When using this type, the Binary&#039;s data should be 16 bytes in length and encoded according to <a href="http://www.faqs.org/rfcs/rfc4122" class="link external">&raquo;&nbsp;RFC 4122</a>.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-bson-binary.constants.type-md5"><strong><code>MongoDB\BSON\Binary::TYPE_MD5</code></strong></dt>
  
       <dd>
  
        <p class="para">MD5 hash. When using this type, the Binary&#039;s data should be 16 bytes in length.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-bson-binary.constants.type-encrypted"><strong><code>MongoDB\BSON\Binary::TYPE_ENCRYPTED</code></strong></dt>
  
       <dd>
  
        <p class="para">Encrypted value. This subtype is used for client-side encryption.</p>
       </dd>
  
      
  
      
       <dt id="mongodb-bson-binary.constants.type-user-defined"><strong><code>MongoDB\BSON\Binary::TYPE_USER_DEFINED</code></strong></dt>
  
       <dd>
  
        <p class="para">User-defined type. While types between 0 and 127 are predefined or reserved, types between 128 and 255 are user-defined and may be used for anything.</p>
       </dd>
  
      
  
     </dl>
  
    </div>
  
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-binaryinterface" class="interfacename">MongoDB\BSON\BinaryInterface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-binary.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Binary::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Binary::__construct</span> &mdash; <span class="dc-title">Construct a new Binary</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binary.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Binary::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$data</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$type</code></span>
     )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binary.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">data</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        Binary data.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">type</code> (<span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        Unsigned 8-bit integer denoting the data&#039;s type.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-binary.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">type</code> is not an unsigned 8-bit integer.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">type</code> is <strong><code>MongoDB\BSON\Binary::TYPE_UUID</code></strong> or <strong><code>MongoDB\BSON\Binary::TYPE_OLD_UUID</code></strong> and <code class="parameter">data</code> is not exactly 16 bytes in length.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-bson-binary.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.3.0</td>
         <td>
          <p class="para">
           <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
           is thrown if <code class="parameter">type</code> is
           <strong><code>MongoDB\BSON\Binary::TYPE_UUID</code></strong> or
           <strong><code>MongoDB\BSON\Binary::TYPE_OLD_UUID</code></strong> and
           <code class="parameter">data</code> is not exactly 16 bytes in length.
          </p>
         </td>
        </tr>
  
        <tr>
         <td>1.1.3</td>
         <td>
          <p class="para">
           <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
           is thrown if <code class="parameter">type</code> is not an unsigned 8-bit
           integer.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-binary.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1809">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Binary::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$binary&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">::</span><span style="color: #0000BB">TYPE_GENERIC</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$binary</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\Binary)#1 (2) {
    [&quot;data&quot;]=&gt;
    string(3) &quot;foo&quot;
    [&quot;type&quot;]=&gt;
    int(0)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binary.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binary.getdata" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Binary::getData</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Binary::getData</span> &mdash; <span class="dc-title">Returns the Binary&#039;s data</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binary.getdata-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Binary::getData</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binary.getdata-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binary.getdata-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Binary&#039;s data.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-binary.getdata-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-binary.getdata-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1810">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Binary::getData()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$binary&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">::</span><span style="color: #0000BB">TYPE_GENERIC</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$binary</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getData</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(3) &quot;foo&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binary.getdata-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binary.gettype" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Binary::getType</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Binary::getType</span> &mdash; <span class="dc-title">Returns the Binary&#039;s type</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binary.gettype-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Binary::getType</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binary.gettype-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binary.gettype-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Binary&#039;s type.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-binary.gettype-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-binary.gettype-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1811">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Binary::getType()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$binary&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">::</span><span style="color: #0000BB">TYPE_GENERIC</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$binary</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getType</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  int(0)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binary.gettype-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binary.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Binary::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Binary::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binary.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Binary::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binary.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binary.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-binary.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binary.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binary.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Binary::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Binary::serialize</span> &mdash; <span class="dc-title">Serialize a Binary</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binary.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Binary::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binary.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binary.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-binary.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binary.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Binary::unserialize()</a> - Unserialize a Binary</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binary.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Binary::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Binary::__toString</span> &mdash; <span class="dc-title">Returns the Binary&#039;s data</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binary.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Binary::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     This method is an alias of:  <span class="methodname"><a href="#mongodb-bson-binary.getdata" class="methodname">MongoDB\BSON\Binary::getData()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binary.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binary.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Binary&#039;s data.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-binary.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1812">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Binary::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">((string)&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Binary</span><span style="color: #007700">::</span><span style="color: #0000BB">TYPE_GENERIC</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(3) &quot;foo&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binary.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.getdata" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Binary::getData()</a> - Returns the Binary's data</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binary.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Binary::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Binary::unserialize</span> &mdash; <span class="dc-title">Unserialize a Binary</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binary.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Binary::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binary.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binary.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-binary.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binary.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Binary::serialize()</a> - Serialize a Binary</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-binary.construct">MongoDB\BSON\Binary::__construct</a> — Construct a new Binary</li><li><a href="#mongodb-bson-binary.getdata">MongoDB\BSON\Binary::getData</a> — Returns the Binary's data</li><li><a href="#mongodb-bson-binary.gettype">MongoDB\BSON\Binary::getType</a> — Returns the Binary's type</li><li><a href="#mongodb-bson-binary.jsonserialize">MongoDB\BSON\Binary::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-binary.serialize">MongoDB\BSON\Binary::serialize</a> — Serialize a Binary</li><li><a href="#mongodb-bson-binary.tostring">MongoDB\BSON\Binary::__toString</a> — Returns the Binary's data</li><li><a href="#mongodb-bson-binary.unserialize">MongoDB\BSON\Binary::unserialize</a> — Unserialize a Binary</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-decimal128" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Decimal128 class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.2.0)</p>
  
  
    <div class="section" id="mongodb-bson-decimal128.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for the
      <a href="https://en.wikipedia.org/wiki/Decimal128_floating-point_format" class="link external">&raquo;&nbsp;Decimal128 floating-point format</a>,
      which supports numbers with up to 34 decimal digits (i.e. significant
      digits) and an exponent range of −6143 to +6144.
     </p>
     <p class="para">
      Unlike the double BSON type (i.e. <span class="type"><a href="#language.types.float" class="type float">float</a></span> in PHP), which only
      stores an approximation of the decimal values, the decimal data type stores
      the exact value. For example, <code class="literal">MongoDB\BSON\Decimal128(&#039;9.99&#039;)</code>
      has a precise value of 9.99 where as a double 9.99 would have an approximate
      value of 9.9900000000000002131628….
     </p>
     
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       <strong class="classname">MongoDB\BSON\Decimal128</strong> is only compatible with
       MongoDB 3.4+. Attempting to use the BSON type with an earlier version of
       MongoDB will result in an error.
      </span>
     </p></blockquote>
  
    </div>
  
  
    <div class="section" id="mongodb-bson-decimal128.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Decimal128</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-decimal128interface" class="interfacename">MongoDB\BSON\Decimal128Interface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-decimal128.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-decimal128.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-decimal128.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-decimal128.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-decimal128.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-decimal128interface" class="interfacename">MongoDB\BSON\Decimal128Interface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-decimal128.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Decimal128::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Decimal128::__construct</span> &mdash; <span class="dc-title">Construct a new Decimal128</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-decimal128.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Decimal128::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>
    ] )</div>
  
    
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       <a href="#class.mongodb-bson-decimal128" class="classname">MongoDB\BSON\Decimal128</a> is only compatible with
       MongoDB 3.4+. Attempting to use the BSON type with an earlier version of
       MongoDB will result in an error.
      </span>
     </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-decimal128.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">value</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A decimal string.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-decimal128.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">value</code> is not a valid decimal string.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-decimal128.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1813">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Decimal128::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #0000BB">1234.5678</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #0000BB">NAN</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #0000BB">INF</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\Decimal128)#1 (1) {
    [&quot;dec&quot;]=&gt;
    string(9) &quot;1234.5678&quot;
  }
  object(MongoDB\BSON\Decimal128)#1 (1) {
    [&quot;dec&quot;]=&gt;
    string(3) &quot;NaN&quot;
  }
  object(MongoDB\BSON\Decimal128)#1 (1) {
    [&quot;dec&quot;]=&gt;
    string(8) &quot;Infinity&quot;
  }
  
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-decimal128.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://en.wikipedia.org/wiki/Decimal128_floating-point_format" class="link external">&raquo;&nbsp;Decimal128 floating-point format</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-decimal128.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Decimal128::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Decimal128::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-decimal128.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Decimal128::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-decimal128.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-decimal128.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-decimal128" class="classname">MongoDB\BSON\Decimal128</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-decimal128.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-decimal128.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-decimal128.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Decimal128::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Decimal128::serialize</span> &mdash; <span class="dc-title">Serialize a Decimal128</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-decimal128.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Decimal128::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-decimal128.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-decimal128.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-decimal128" class="classname">MongoDB\BSON\Decimal128</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-decimal128.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-decimal128.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-decimal128.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Decimal128::unserialize()</a> - Unserialize a Decimal128</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-decimal128.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Decimal128::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Decimal128::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this Decimal128</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-decimal128.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Decimal128::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-decimal128.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-decimal128.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this Decimal128.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-decimal128.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1814">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Decimal128::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">((string)&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #0000BB">1234.5678</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #0000BB">NAN</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Decimal128</span><span style="color: #007700">(</span><span style="color: #0000BB">INF</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(9) &quot;1234.5678&quot;
  string(3) &quot;NaN&quot;
  string(8) &quot;Infinity&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-decimal128.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://en.wikipedia.org/wiki/Decimal128_floating-point_format" class="link external">&raquo;&nbsp;Decimal128 floating-point format</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-decimal128.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Decimal128::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Decimal128::unserialize</span> &mdash; <span class="dc-title">Unserialize a Decimal128</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-decimal128.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Decimal128::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-decimal128.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-decimal128" class="classname">MongoDB\BSON\Decimal128</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-decimal128.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-decimal128" class="classname">MongoDB\BSON\Decimal128</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-decimal128.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-decimal128.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-decimal128.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Decimal128::serialize()</a> - Serialize a Decimal128</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-decimal128.construct">MongoDB\BSON\Decimal128::__construct</a> — Construct a new Decimal128</li><li><a href="#mongodb-bson-decimal128.jsonserialize">MongoDB\BSON\Decimal128::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-decimal128.serialize">MongoDB\BSON\Decimal128::serialize</a> — Serialize a Decimal128</li><li><a href="#mongodb-bson-decimal128.tostring">MongoDB\BSON\Decimal128::__toString</a> — Returns the string representation of this Decimal128</li><li><a href="#mongodb-bson-decimal128.unserialize">MongoDB\BSON\Decimal128::unserialize</a> — Unserialize a Decimal128</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-javascript" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Javascript class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-javascript.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for Javascript code. An optional scope document may be specified
      that maps identifiers to values and defines the scope in which the code
      should be evaluated by the server.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       This BSON type is mainly used when executing database commands that take a
       Javascript function as a parameter, such as
       <a href="https://docs.mongodb.com/manual/reference/command/mapReduce/" class="link external">&raquo;&nbsp;mapReduce</a>.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongodb-bson-javascript.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Javascript</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-javascriptinterface" class="interfacename">MongoDB\BSON\JavascriptInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascript.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$code</code></span>
     [, <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$scope</code></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascript.getcode" class="methodname">getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascript.getscope" class="methodname">getScope</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascript.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascript.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascript.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascript.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-javascriptinterface" class="interfacename">MongoDB\BSON\JavascriptInterface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-javascript.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Javascript::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Javascript::__construct</span> &mdash; <span class="dc-title">Construct a new Javascript</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascript.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Javascript::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$code</code></span>
     [, <span class="methodparam"><span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$scope</code></span>
    ] )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascript.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">code</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        Javascript code.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">scope</code> (<span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        Javascript scope.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-javascript.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">code</code> contains null bytes.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-bson-javascript.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
           is thrown if <code class="parameter">code</code> contains null bytes.
           Previously, values would be truncated at the first null byte.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-javascript.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1815">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Javascript::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$code&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;1;&nbsp;}'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$code</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$codews&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function()&nbsp;{&nbsp;return&nbsp;foo;&nbsp;}'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$codews</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\Javascript)#1 (2) {
    [&quot;javascript&quot;]=&gt;
    string(24) &quot;function() { return 1; }&quot;
    [&quot;scope&quot;]=&gt;
    object(stdClass)#2 (0) {
    }
  }
  object(MongoDB\BSON\Javascript)#2 (2) {
    [&quot;javascript&quot;]=&gt;
    string(26) &quot;function() { return foo; }&quot;
    [&quot;scope&quot;]=&gt;
    object(stdClass)#1 (1) {
      [&quot;foo&quot;]=&gt;
      string(3) &quot;bar&quot;
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascript.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascript.getcode" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Javascript::getCode</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Javascript::getCode</span> &mdash; <span class="dc-title">Returns the Javascript&#039;s code</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascript.getcode-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Javascript::getCode</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascript.getcode-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascript.getcode-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Javascript&#039;s code.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-javascript.getcode-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-javascript.getcode-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1816">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Javascript::getCode()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$js&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function&nbsp;foo(bar)&nbsp;{&nbsp;return&nbsp;bar;&nbsp;}'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$js</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(33) &quot;function foo(bar) { return bar; }&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascript.getcode-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascript.getscope" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Javascript::getScope</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Javascript::getScope</span> &mdash; <span class="dc-title">Returns the Javascript&#039;s scope document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascript.getscope-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Javascript::getScope</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascript.getscope-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascript.getscope-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Javascript&#039;s scope document, or <strong><code>NULL</code></strong> if the is no scope.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-javascript.getscope-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-javascript.getscope-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1817">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Javascript::getScope()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$js&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function&nbsp;foo(bar)&nbsp;{&nbsp;return&nbsp;bar;&nbsp;}'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$js</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getScope</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">$js&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function&nbsp;foo()&nbsp;{&nbsp;return&nbsp;foo;&nbsp;}'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">42</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$js</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getScope</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  NULL
  object(stdClass)#1 (1) {
    [&quot;foo&quot;]=&gt;
    int(42)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascript.getscope-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascript.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Javascript::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Javascript::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascript.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Javascript::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascript.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascript.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-javascript" class="classname">MongoDB\BSON\Javascript</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-javascript.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascript.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascript.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Javascript::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Javascript::serialize</span> &mdash; <span class="dc-title">Serialize a Javascript</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascript.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Javascript::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascript.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascript.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-javascript" class="classname">MongoDB\BSON\Javascript</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-javascript.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascript.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-javascript.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Javascript::unserialize()</a> - Unserialize a Javascript</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascript.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Javascript::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Javascript::__toString</span> &mdash; <span class="dc-title">Returns the Javascript&#039;s code</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascript.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Javascript::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     This method is an alias of:  <span class="methodname"><a href="#mongodb-bson-javascript.getcode" class="methodname">MongoDB\BSON\Javascript::getCode()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascript.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascript.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Javascript&#039;s code.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-javascript.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1818">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Javascript::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">((string)&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Javascript</span><span style="color: #007700">(</span><span style="color: #DD0000">'function&nbsp;foo(bar)&nbsp;{&nbsp;return&nbsp;bar;&nbsp;}'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(33) &quot;function foo(bar) { return bar; }&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascript.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-javascript.getcode" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Javascript::getCode()</a> - Returns the Javascript's code</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascript.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Javascript::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Javascript::unserialize</span> &mdash; <span class="dc-title">Unserialize a Javascript</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascript.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Javascript::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascript.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-javascript" class="classname">MongoDB\BSON\Javascript</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascript.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-javascript" class="classname">MongoDB\BSON\Javascript</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-javascript.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascript.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-javascript.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Javascript::serialize()</a> - Serialize a Javascript</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-javascript.construct">MongoDB\BSON\Javascript::__construct</a> — Construct a new Javascript</li><li><a href="#mongodb-bson-javascript.getcode">MongoDB\BSON\Javascript::getCode</a> — Returns the Javascript's code</li><li><a href="#mongodb-bson-javascript.getscope">MongoDB\BSON\Javascript::getScope</a> — Returns the Javascript's scope document</li><li><a href="#mongodb-bson-javascript.jsonserialize">MongoDB\BSON\Javascript::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-javascript.serialize">MongoDB\BSON\Javascript::serialize</a> — Serialize a Javascript</li><li><a href="#mongodb-bson-javascript.tostring">MongoDB\BSON\Javascript::__toString</a> — Returns the Javascript's code</li><li><a href="#mongodb-bson-javascript.unserialize">MongoDB\BSON\Javascript::unserialize</a> — Unserialize a Javascript</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-maxkey" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\MaxKey class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-maxkey.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Special BSON type which compares higher than all other possible BSON element
      values.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       This is an internal MongoDB type used for indexing and sharding.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongodb-bson-maxkey.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\MaxKey</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-maxkeyinterface" class="interfacename">MongoDB\BSON\MaxKeyInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-maxkey.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-maxkey.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-maxkey.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-maxkey.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-maxkeyinterface" class="interfacename">MongoDB\BSON\MaxKeyInterface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-maxkey.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MaxKey::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MaxKey::__construct</span> &mdash; <span class="dc-title">Construct a new MaxKey</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-maxkey.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MaxKey::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-maxkey.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-maxkey.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-maxkey.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1819">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\MaxKey::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MaxKey</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\MaxKey)#1 (0) {
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-maxkey.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-maxkey.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MaxKey::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MaxKey::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-maxkey.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MaxKey::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-maxkey.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-maxkey.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-maxkey" class="classname">MongoDB\BSON\MaxKey</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-maxkey.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-maxkey.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-maxkey.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MaxKey::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MaxKey::serialize</span> &mdash; <span class="dc-title">Serialize a MaxKey</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-maxkey.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MaxKey::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-maxkey.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-maxkey.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-maxkey" class="classname">MongoDB\BSON\MaxKey</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-maxkey.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-maxkey.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-maxkey.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\MaxKey::unserialize()</a> - Unserialize a MaxKey</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-maxkey.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MaxKey::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MaxKey::unserialize</span> &mdash; <span class="dc-title">Unserialize a MaxKey</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-maxkey.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MaxKey::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-maxkey.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-maxkey" class="classname">MongoDB\BSON\MaxKey</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-maxkey.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-maxkey" class="classname">MongoDB\BSON\MaxKey</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-maxkey.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-maxkey.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-maxkey.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\MaxKey::serialize()</a> - Serialize a MaxKey</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-maxkey.construct">MongoDB\BSON\MaxKey::__construct</a> — Construct a new MaxKey</li><li><a href="#mongodb-bson-maxkey.jsonserialize">MongoDB\BSON\MaxKey::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-maxkey.serialize">MongoDB\BSON\MaxKey::serialize</a> — Serialize a MaxKey</li><li><a href="#mongodb-bson-maxkey.unserialize">MongoDB\BSON\MaxKey::unserialize</a> — Unserialize a MaxKey</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-minkey" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\MinKey class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-minkey.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Special BSON type which compares lower than all other possible BSON element
      values.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       This is an internal MongoDB type used for indexing and sharding.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongodb-bson-minkey.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\MinKey</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-minkeyinterface" class="interfacename">MongoDB\BSON\MinKeyInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-minkey.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-minkey.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-minkey.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-minkey.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-minkeyinterface" class="interfacename">MongoDB\BSON\MinKeyInterface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-minkey.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MinKey::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MinKey::__construct</span> &mdash; <span class="dc-title">Construct a new MinKey</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-minkey.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MinKey::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-minkey.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-minkey.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-minkey.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1820">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\MinKey::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">MinKey</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\MinKey)#1 (0) {
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-minkey.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-minkey.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MinKey::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MinKey::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-minkey.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MinKey::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-minkey.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-minkey.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-minkey" class="classname">MongoDB\BSON\MinKey</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-minkey.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-minkey.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-minkey.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MinKey::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MinKey::serialize</span> &mdash; <span class="dc-title">Serialize a MinKey</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-minkey.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MinKey::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-minkey.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-minkey.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-minkey" class="classname">MongoDB\BSON\MinKey</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-minkey.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-minkey.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-minkey.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\MinKey::unserialize()</a> - Unserialize a MinKey</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-minkey.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\MinKey::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\MinKey::unserialize</span> &mdash; <span class="dc-title">Unserialize a MinKey</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-minkey.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\MinKey::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-minkey.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-minkey" class="classname">MongoDB\BSON\MinKey</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-minkey.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-minkey" class="classname">MongoDB\BSON\MinKey</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-minkey.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-minkey.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-minkey.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\MinKey::serialize()</a> - Serialize a MinKey</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-minkey.construct">MongoDB\BSON\MinKey::__construct</a> — Construct a new MinKey</li><li><a href="#mongodb-bson-minkey.jsonserialize">MongoDB\BSON\MinKey::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-minkey.serialize">MongoDB\BSON\MinKey::serialize</a> — Serialize a MinKey</li><li><a href="#mongodb-bson-minkey.unserialize">MongoDB\BSON\MinKey::unserialize</a> — Unserialize a MinKey</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-objectid" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\ObjectId class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-objectid.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for an
      <a href="https://docs.mongodb.com/manual/reference/bson-types/#objectid" class="link external">&raquo;&nbsp;ObjectId</a>. The
      value consists of 12 bytes, where the first four bytes are a timestamp
      that reflect the ObjectId&#039;s creation. Specifically, the value consists of:
     </p>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara">a 4-byte value representing the seconds since the Unix epoch,</span></li>
      <li class="listitem"><span class="simpara">a 5-byte random number unique to a machine and process, and</span></li>
      <li class="listitem"><span class="simpara">a 3-byte counter, starting with a random value.</span></li>
     </ul>
     <p class="para">
      In MongoDB, each document stored in a collection requires a unique
      <code class="literal">_id</code> field that acts as a primary key. If an inserted
      document omits the <code class="literal">_id</code> field, the driver automatically
      generates an ObjectId for the <code class="literal">_id</code> field.
     </p>
     <p class="para">
      Using ObjectIds for the <code class="literal">_id</code> field provides the following
      additional benefits:
     </p>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara">The creation time of the ObjectId may be accessed using the <span class="methodname"><a href="#mongodb-bson-objectid.gettimestamp" class="methodname">MongoDB\BSON\ObjectId::getTimestamp()</a></span> method.</span></li>
      <li class="listitem"><span class="simpara">Sorting on an <code class="literal">_id</code> field that stores ObjectId values is roughly equivalent to sorting by creation time.</span></li>
     </ul>
    </div>
  
  
    <div class="section" id="mongodb-bson-objectid.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\ObjectId</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-objectidinterface" class="interfacename">MongoDB\BSON\ObjectIdInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectid.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$id</code></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectid.gettimestamp" class="methodname">getTimestamp</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectid.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectid.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectid.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectid.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           <p class="para">
            Renamed from <code class="literal">MongoDB\BSON\ObjectID</code> to
            <code class="literal">MongoDB\BSON\ObjectId</code>.
           </p>
           <p class="para">
            Implements <span class="interfacename"><a href="#class.mongodb-bson-objectidinterface" class="interfacename">MongoDB\BSON\ObjectIdInterface</a></span>.
           </p>
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-objectid.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectId::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectId::__construct</span> &mdash; <span class="dc-title">Construct a new ObjectId</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectid.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectId::__construct</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$id</code></span>
    ] )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectid.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">id</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A 24-character hexadecimal string. If not provided, the driver will
        generate an ObjectId.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-objectid.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">id</code> is not a 24-character hexadecimal string.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-objectid.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1821">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\ObjectId::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">(</span><span style="color: #DD0000">'000000000000000000000001'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\ObjectId)#1 (1) {
    [&quot;oid&quot;]=&gt;
    string(24) &quot;56732d3dda14d81214634921&quot;
  }
  object(MongoDB\BSON\ObjectId)#1 (1) {
    [&quot;oid&quot;]=&gt;
    string(24) &quot;000000000000000000000001&quot;
  }
  
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectid.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/object-id/" class="link external">&raquo;&nbsp;ObjectId Reference</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#objectid" class="link external">&raquo;&nbsp;BSON Types: ObjectId</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-objectid.gettimestamp" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectId::getTimestamp</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectId::getTimestamp</span> &mdash; <span class="dc-title">Returns the timestamp component of this ObjectId</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectid.gettimestamp-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectId::getTimestamp</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     The timestamp component of an ObjectId is its most significant 32 bits, which
     denotes the number of seconds since the Unix epoch. This value is read as an
     unsigned 32-bit integer with big-endian byte order.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Because PHP&#039;s integer type is signed, some values returned by this
      method may appear as negative integers on 32-bit platforms. The
      <code class="literal">&quot;%u&quot;</code> formatter of <span class="function"><a href="#function.sprintf" class="function">sprintf()</a></span> may be
      used to obtain a string representation of the unsigned decimal value.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectid.gettimestamp-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-objectid.gettimestamp-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the timestamp component of this ObjectId.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-objectid.gettimestamp-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-objectid.gettimestamp-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1822">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\ObjectId::getTimestamp()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">((new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">())-&gt;</span><span style="color: #0000BB">getTimestamp</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">(</span><span style="color: #DD0000">'0000002a0000000000000000'</span><span style="color: #007700">))-&gt;</span><span style="color: #0000BB">getTimestamp</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  integer(1484854719)
  integer(42)
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectid.gettimestamp-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/object-id/" class="link external">&raquo;&nbsp;ObjectId Reference</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#objectid" class="link external">&raquo;&nbsp;BSON Types: ObjectId</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-objectid.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectId::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectId::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectid.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectId::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectid.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-objectid.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-objectid.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectid.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-objectid.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectId::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectId::serialize</span> &mdash; <span class="dc-title">Serialize an ObjectId</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectid.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectId::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectid.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-objectid.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-objectid.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectid.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-objectid.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\ObjectId::unserialize()</a> - Unserialize an ObjectId</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-objectid.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectId::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectId::__toString</span> &mdash; <span class="dc-title">Returns the hexidecimal representation of this ObjectId</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectid.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectId::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectid.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-objectid.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the hexidecimal representation of this ObjectId.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-objectid.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1823">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\ObjectId::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">((string)&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">(</span><span style="color: #DD0000">'000000000000000000000001'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(24) &quot;56731b49da14d8747d701211&quot;
  string(24) &quot;000000000000000000000001&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectid.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/object-id/" class="link external">&raquo;&nbsp;ObjectId Reference</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#objectid" class="link external">&raquo;&nbsp;BSON Types: ObjectId</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-objectid.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectId::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectId::unserialize</span> &mdash; <span class="dc-title">Unserialize an ObjectId</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectid.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectId::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectid.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-objectid.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-objectid.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectid.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-objectid.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\ObjectId::serialize()</a> - Serialize an ObjectId</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-objectid.construct">MongoDB\BSON\ObjectId::__construct</a> — Construct a new ObjectId</li><li><a href="#mongodb-bson-objectid.gettimestamp">MongoDB\BSON\ObjectId::getTimestamp</a> — Returns the timestamp component of this ObjectId</li><li><a href="#mongodb-bson-objectid.jsonserialize">MongoDB\BSON\ObjectId::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-objectid.serialize">MongoDB\BSON\ObjectId::serialize</a> — Serialize an ObjectId</li><li><a href="#mongodb-bson-objectid.tostring">MongoDB\BSON\ObjectId::__toString</a> — Returns the hexidecimal representation of this ObjectId</li><li><a href="#mongodb-bson-objectid.unserialize">MongoDB\BSON\ObjectId::unserialize</a> — Unserialize an ObjectId</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-regex" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Regex class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-regex.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for a regular expression pattern and optional
      <a href="https://docs.mongodb.com/manual/reference/operator/query/regex/#op._S_options" class="link external">&raquo;&nbsp;flags</a>.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       This BSON type is mainly used when querying the database. Alternatively,
       the
       <a href="https://docs.mongodb.com/manual/reference/operator/query/regex" class="link external">&raquo;&nbsp;$regex</a>
       query operator may be used.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongodb-bson-regex.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Regex</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-regexinterface" class="interfacename">MongoDB\BSON\RegexInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regex.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$flags</code><span class="initializer"> = &quot;&quot;</span></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regex.getflags" class="methodname">getFlags</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regex.getpattern" class="methodname">getPattern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regex.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regex.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regex.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regex.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-regexinterface" class="interfacename">MongoDB\BSON\RegexInterface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-regex.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Regex::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Regex::__construct</span> &mdash; <span class="dc-title">Construct a new Regex</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regex.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Regex::__construct</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$flags</code><span class="initializer"> = &quot;&quot;</span></span>
    ] )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regex.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">pattern</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The regular expression pattern.
       </p>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
         The pattern should not be wrapped with delimiter characters.
        </span>
       </p></blockquote>
      </dd>
  
     
     
      <dt>
  <code class="parameter">flags</code> (<span class="type"><a href="#language.types.string" class="type string">string</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        The <a href="https://docs.mongodb.com/manual/reference/operator/query/regex/#op._S_options" class="link external">&raquo;&nbsp;regular
        expression flags</a>. Characters in this argument will be sorted
        alphabetically.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-regex.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if <code class="parameter">pattern</code> or <code class="parameter">flags</code> contain null bytes.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-bson-regex.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           The <code class="parameter">flags</code> argument is optional and defaults to
           an empty string.
          </p>
          <p class="para">
           Characters in the <code class="parameter">flags</code> argument will be sorted
           alphabetically when a Regex is constructed. Previously, the characters
           were stored in the order provided.
          </p>
          <p class="para">
           <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a>
           is thrown if <code class="parameter">pattern</code> or
           <code class="parameter">flags</code> contain null bytes. Previously, values
           would be truncated at the first null byte.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-regex.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1824">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Regex::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$regex&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Regex</span><span style="color: #007700">(</span><span style="color: #DD0000">'^foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$regex</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\Regex)#1 (2) {
    [&quot;pattern&quot;]=&gt;
    string(4) &quot;^foo&quot;
    [&quot;flags&quot;]=&gt;
    string(1) &quot;i&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regex.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/operator/query/regex/#op._S_options" class="link external">&raquo;&nbsp;Supported regular expression flags</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regex.getflags" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Regex::getFlags</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Regex::getFlags</span> &mdash; <span class="dc-title">Returns the Regex&#039;s flags</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regex.getflags-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Regex::getFlags</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regex.getflags-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regex.getflags-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Regex&#039;s flags.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-regex.getflags-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-regex.getflags-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1825">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Regex::getFlags()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$regex&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Regex</span><span style="color: #007700">(</span><span style="color: #DD0000">'regex'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$regex</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFlags</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(1) &quot;i&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regex.getflags-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/operator/query/regex/#op._S_options" class="link external">&raquo;&nbsp;Supported regular expression flags</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regex.getpattern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Regex::getPattern</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Regex::getPattern</span> &mdash; <span class="dc-title">Returns the Regex&#039;s pattern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regex.getpattern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Regex::getPattern</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regex.getpattern-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regex.getpattern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the Regex&#039;s pattern.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-regex.getpattern-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-regex.getpattern-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1826">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Regex::getPattern()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$regex&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Regex</span><span style="color: #007700">(</span><span style="color: #DD0000">'regex'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$regex</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPattern</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(5) &quot;regex&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regex.getpattern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regex.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Regex::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Regex::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regex.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Regex::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regex.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regex.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-regex" class="classname">MongoDB\BSON\Regex</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-regex.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regex.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regex.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Regex::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Regex::serialize</span> &mdash; <span class="dc-title">Serialize a Regex</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regex.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Regex::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regex.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regex.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-regex" class="classname">MongoDB\BSON\Regex</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-regex.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regex.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-regex.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Regex::unserialize()</a> - Unserialize a Regex</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regex.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Regex::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Regex::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this Regex</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regex.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Regex::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regex.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regex.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this Regex.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-regex.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1827">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Regex::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$regex&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Regex</span><span style="color: #007700">(</span><span style="color: #DD0000">'regex'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'i'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;</span><span style="color: #0000BB">$regex</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(8) &quot;/regex/i&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regex.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regex.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Regex::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Regex::unserialize</span> &mdash; <span class="dc-title">Unserialize a Regex</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regex.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Regex::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regex.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-regex" class="classname">MongoDB\BSON\Regex</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regex.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-regex" class="classname">MongoDB\BSON\Regex</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-regex.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regex.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-regex.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Regex::serialize()</a> - Serialize a Regex</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-regex.construct">MongoDB\BSON\Regex::__construct</a> — Construct a new Regex</li><li><a href="#mongodb-bson-regex.getflags">MongoDB\BSON\Regex::getFlags</a> — Returns the Regex's flags</li><li><a href="#mongodb-bson-regex.getpattern">MongoDB\BSON\Regex::getPattern</a> — Returns the Regex's pattern</li><li><a href="#mongodb-bson-regex.jsonserialize">MongoDB\BSON\Regex::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-regex.serialize">MongoDB\BSON\Regex::serialize</a> — Serialize a Regex</li><li><a href="#mongodb-bson-regex.tostring">MongoDB\BSON\Regex::__toString</a> — Returns the string representation of this Regex</li><li><a href="#mongodb-bson-regex.unserialize">MongoDB\BSON\Regex::unserialize</a> — Unserialize a Regex</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-timestamp" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Timestamp class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-timestamp.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Represents a
      <a href="https://docs.mongodb.com/manual/reference/bson-types/#timestamps" class="link external">&raquo;&nbsp;BSON timestamp</a>,
      The value consists of a 4-byte timestamp (i.e. seconds since the epoch) and
      a 4-byte increment.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       This is an internal MongoDB type used for replication and sharding. It is
       not intended for general date storage
       (<a href="#class.mongodb-bson-utcdatetime" class="classname">MongoDB\BSON\UTCDateTime</a> should be used instead).
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongodb-bson-timestamp.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Timestamp</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-timestampinterface" class="interfacename">MongoDB\BSON\TimestampInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestamp.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$increment</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$timestamp</code></span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestamp.getincrement" class="methodname">getIncrement</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestamp.gettimestamp" class="methodname">getTimestamp</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestamp.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestamp.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestamp.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestamp.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-timestampinterface" class="interfacename">MongoDB\BSON\TimestampInterface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-timestamp.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Timestamp::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Timestamp::__construct</span> &mdash; <span class="dc-title">Construct a new Timestamp</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestamp.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Timestamp::__construct</strong></span>
      ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$increment</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$timestamp</code></span>
     )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestamp.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">increment</code> (<span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        32-bit integer denoting the incrementing ordinal for operations within a
        given second.
       </p>
      </dd>
  
     
     
      <dt>
  <code class="parameter">timestamp</code> (<span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        32-bit integer denoting seconds since the Unix epoch.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-timestamp.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-timestamp.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1828">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Timestamp::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$timestamp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Timestamp</span><span style="color: #007700">(</span><span style="color: #0000BB">1234</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5678</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\Timestamp)#1 (2) {
    [&quot;increment&quot;]=&gt;
    int(1234)
    [&quot;timestamp&quot;]=&gt;
    int(5678)
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestamp.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#timestamps" class="link external">&raquo;&nbsp;BSON Types: Timestamps</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestamp.getincrement" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Timestamp::getIncrement</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Timestamp::getIncrement</span> &mdash; <span class="dc-title">Returns the increment component of this Timestamp</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestamp.getincrement-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Timestamp::getIncrement</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     The increment component of a Timestamp is its least significant 32 bits,
     whichs denotes the incrementing ordinal for operations within a given second.
     This value is read as an unsigned 32-bit integer with big-endian byte order.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Because PHP&#039;s integer type is signed, some values returned by this
      method may appear as negative integers on 32-bit platforms. The
      <code class="literal">&quot;%u&quot;</code> formatter of <span class="function"><a href="#function.sprintf" class="function">sprintf()</a></span> may be
      used to obtain a string representation of the unsigned decimal value.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestamp.getincrement-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestamp.getincrement-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the increment component of this Timestamp.
    </p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">
      On 32-bit systems this method may return a negative number. Although the
      increment and timestamp parts of the BSON timestamp type consists of two
      unsigned 32-bit values, PHP can not represent these on 32-bit platforms.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-timestamp.getincrement-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestamp.getincrement-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#timestamps" class="link external">&raquo;&nbsp;BSON Types: Timestamps</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestamp.gettimestamp" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Timestamp::getTimestamp</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Timestamp::getTimestamp</span> &mdash; <span class="dc-title">Returns the timestamp component of this Timestamp</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestamp.gettimestamp-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Timestamp::getTimestamp</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     The timestamp component of a Timestamp is its most significant 32 bits, which
     denotes the number of seconds since the Unix epoch. This value is read as an
     unsigned 32-bit integer with big-endian byte order.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Because PHP&#039;s integer type is signed, some values returned by this
      method may appear as negative integers on 32-bit platforms. The
      <code class="literal">&quot;%u&quot;</code> formatter of <span class="function"><a href="#function.sprintf" class="function">sprintf()</a></span> may be
      used to obtain a string representation of the unsigned decimal value.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestamp.gettimestamp-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestamp.gettimestamp-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the timestamp component of this Timestamp.
    </p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">
      On 32-bit systems this method may return a negative number. Although the
      increment and timestamp parts of the BSON timestamp type consists of two
      unsigned 32-bit values, PHP can not represent these on 32-bit platforms.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-timestamp.gettimestamp-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestamp.gettimestamp-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#timestamps" class="link external">&raquo;&nbsp;BSON Types: Timestamps</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestamp.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Timestamp::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Timestamp::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestamp.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Timestamp::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestamp.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestamp.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-timestamp" class="classname">MongoDB\BSON\Timestamp</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-timestamp.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestamp.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestamp.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Timestamp::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Timestamp::serialize</span> &mdash; <span class="dc-title">Serialize a Timestamp</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestamp.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Timestamp::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestamp.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestamp.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-timestamp" class="classname">MongoDB\BSON\Timestamp</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-timestamp.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestamp.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-timestamp.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Timestamp::unserialize()</a> - Unserialize a Timestamp</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestamp.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Timestamp::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Timestamp::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this Timestamp</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestamp.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Timestamp::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestamp.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestamp.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this Timestamp.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-timestamp.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1829">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Timestamp::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$timestamp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Timestamp</span><span style="color: #007700">(</span><span style="color: #0000BB">1234</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5678</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;</span><span style="color: #0000BB">$timestamp</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(11) &quot;[1234:5678]&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestamp.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#timestamps" class="link external">&raquo;&nbsp;BSON Types: Timestamps</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestamp.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Timestamp::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Timestamp::unserialize</span> &mdash; <span class="dc-title">Unserialize a Timestamp</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestamp.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Timestamp::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestamp.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-timestamp" class="classname">MongoDB\BSON\Timestamp</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestamp.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-timestamp" class="classname">MongoDB\BSON\Timestamp</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-timestamp.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestamp.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-timestamp.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Timestamp::serialize()</a> - Serialize a Timestamp</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-timestamp.construct">MongoDB\BSON\Timestamp::__construct</a> — Construct a new Timestamp</li><li><a href="#mongodb-bson-timestamp.getincrement">MongoDB\BSON\Timestamp::getIncrement</a> — Returns the increment component of this Timestamp</li><li><a href="#mongodb-bson-timestamp.gettimestamp">MongoDB\BSON\Timestamp::getTimestamp</a> — Returns the timestamp component of this Timestamp</li><li><a href="#mongodb-bson-timestamp.jsonserialize">MongoDB\BSON\Timestamp::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-timestamp.serialize">MongoDB\BSON\Timestamp::serialize</a> — Serialize a Timestamp</li><li><a href="#mongodb-bson-timestamp.tostring">MongoDB\BSON\Timestamp::__toString</a> — Returns the string representation of this Timestamp</li><li><a href="#mongodb-bson-timestamp.unserialize">MongoDB\BSON\Timestamp::unserialize</a> — Unserialize a Timestamp</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-utcdatetime" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\UTCDateTime class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-utcdatetime.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Represents a
      <a href="https://docs.mongodb.com/manual/reference/bson-types/#date" class="link external">&raquo;&nbsp;BSON date</a>. The value
      is a 64-bit integer that represents the number of milliseconds since the
      Unix epoch (Jan 1, 1970). Negative values represent dates before 1970.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-utcdatetime.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\UTCDateTime</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-utcdatetimeinterface" class="interfacename">MongoDB\BSON\UTCDateTimeInterface</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetime.construct" class="methodname">__construct</a></span>
      ([ <span class="methodparam"><span class="type"><span class="type integer|float|string|DateTimeInterface">integer|float|string|DateTimeInterface</span></span> <code class="parameter">$milliseconds</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
    ] )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetime.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetime.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetime.todatetime" class="methodname">toDateTime</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.datetime" class="type DateTime">DateTime</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetime.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetime.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.3.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.mongodb-bson-utcdatetimeinterface" class="interfacename">MongoDB\BSON\UTCDateTimeInterface</a></span>.
          </td>
         </tr>
  
         <tr>
          <td>1.2.0</td>
          <td>
           Implements <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span> and
           <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>.
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-utcdatetime.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTime::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTime::__construct</span> &mdash; <span class="dc-title">Construct a new UTCDateTime</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetime.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTime::__construct</strong></span>
      ([ <span class="methodparam"><span class="type"><span class="type integer|float|string|DateTimeInterface">integer|float|string|DateTimeInterface</span></span> <code class="parameter">$milliseconds</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
    ] )</div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetime.construct-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">milliseconds</code> (<span class="type"><span class="type integer|float|string|DateTimeInterface">integer|float|string|DateTimeInterface</span></span>)</dt>
  
      <dd>
  
       <p class="para">
        Number of milliseconds since the Unix epoch (Jan 1, 1970). Negative values
        represent dates before 1970. This value may be provided as a 64-bit
        <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>. For compatibility on 32-bit systems, this parameter
        may also be provided as a <span class="type"><a href="#language.types.float" class="type float">float</a></span> or <span class="type"><a href="#language.types.string" class="type string">string</a></span>.
       </p>
       <p class="para">
        If the argument is a <a href="#class.datetimeinterface" class="classname">DateTimeInterface</a>, the number
        of milliseconds since the Unix epoch will be derived from that value.
        Note that in versions of PHP versions before 7.1.0,
        <a href="#class.datetime" class="classname">DateTime</a> and
        <a href="#class.datetimeimmutable" class="classname">DateTimeImmutable</a> objects constructed from the
        current time
        <a href="#migration71.incompatible.datetime-microseconds" class="link">did not
          incorporate sub-second precision</a>.
       </p>
       <p class="para">
        If this argument is <strong><code>NULL</code></strong>, the current time will be used by default.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-utcdatetime.construct-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 changelog" id="refsect1-mongodb-bson-utcdatetime.construct-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>1.2.0</td>
         <td>
          <p class="para">
           The <code class="parameter">milliseconds</code> argument is optional and
           defaults to <strong><code>NULL</code></strong> (i.e. current time). The argument also accepts a
           <a href="#class.datetimeinterface" class="classname">DateTimeInterface</a>, which may be used to derive
           the number of milliseconds since the Unix epoch. Previously, only
           <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>, <span class="type"><a href="#language.types.float" class="type float">float</a></span>, and <span class="type"><a href="#language.types.string" class="type string">string</a></span> types
           were accepted.
          </p>
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-utcdatetime.construct-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1830">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\UTCDateTime::__construct()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">(</span><span style="color: #0000BB">1416445411987</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MongoDB\BSON\UTCDateTime)#1 (1) {
    [&quot;milliseconds&quot;]=&gt;
    string(13) &quot;1484852905560&quot;
  }
  object(MongoDB\BSON\UTCDateTime)#1 (1) {
    [&quot;milliseconds&quot;]=&gt;
    string(13) &quot;1484852905560&quot;
  }
  object(MongoDB\BSON\UTCDateTime)#1 (1) {
    [&quot;milliseconds&quot;]=&gt;
    string(13) &quot;1416445411987&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetime.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#date" class="link external">&raquo;&nbsp;BSON Types: Date</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-utcdatetime.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTime::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTime::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetime.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTime::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetime.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-utcdatetime.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-utcdatetime" class="classname">MongoDB\BSON\UTCDateTime</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-utcdatetime.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetime.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-utcdatetime.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTime::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTime::serialize</span> &mdash; <span class="dc-title">Serialize a UTCDateTime</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetime.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTime::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetime.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-utcdatetime.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-utcdatetime" class="classname">MongoDB\BSON\UTCDateTime</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-utcdatetime.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetime.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-utcdatetime.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\UTCDateTime::unserialize()</a> - Unserialize a UTCDateTime</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-utcdatetime.todatetime" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTime::toDateTime</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTime::toDateTime</span> &mdash; <span class="dc-title">Returns the DateTime representation of this UTCDateTime</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetime.todatetime-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTime::toDateTime</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.datetime" class="type DateTime">DateTime</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetime.todatetime-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-utcdatetime.todatetime-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.datetime" class="classname">DateTime</a> representation of this
     UTCDateTime. The returned <a href="#class.datetime" class="classname">DateTime</a> will use the UTC
     time zone.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-utcdatetime.todatetime-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-utcdatetime.todatetime-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1831">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\UTCDatetime::toDateTime()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$utcdatetime&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">(</span><span style="color: #0000BB">1416445411987</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$datetime&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$utcdatetime</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toDateTime</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$datetime</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'r'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$datetime</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'U.u'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$datetime</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTimezone</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(31) &quot;Thu, 20 Nov 2014 01:03:31 +0000&quot;
  string(17) &quot;1416445411.987000&quot;
  object(DateTimeZone)#3 (2) {
    [&quot;timezone_type&quot;]=&gt;
    int(1)
    [&quot;timezone&quot;]=&gt;
    string(6) &quot;+00:00&quot;
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetime.todatetime-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#date" class="link external">&raquo;&nbsp;BSON Types: Date</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-utcdatetime.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTime::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTime::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this UTCDateTime</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetime.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTime::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetime.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-utcdatetime.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this UTCDateTime.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-utcdatetime.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1832">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\UTCDateTime::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$utcdatetime&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">UTCDateTime</span><span style="color: #007700">(</span><span style="color: #0000BB">1416445411987</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;</span><span style="color: #0000BB">$utcdatetime</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(13) &quot;1416445411987&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetime.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/#date" class="link external">&raquo;&nbsp;BSON Types: Date</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-utcdatetime.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTime::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.2.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTime::unserialize</span> &mdash; <span class="dc-title">Unserialize a UTCDateTime</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetime.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTime::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetime.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-utcdatetime" class="classname">MongoDB\BSON\UTCDateTime</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-utcdatetime.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-utcdatetime" class="classname">MongoDB\BSON\UTCDateTime</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-utcdatetime.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetime.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-utcdatetime.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\UTCDateTime::serialize()</a> - Serialize a UTCDateTime</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-utcdatetime.construct">MongoDB\BSON\UTCDateTime::__construct</a> — Construct a new UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.jsonserialize">MongoDB\BSON\UTCDateTime::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-utcdatetime.serialize">MongoDB\BSON\UTCDateTime::serialize</a> — Serialize a UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.todatetime">MongoDB\BSON\UTCDateTime::toDateTime</a> — Returns the DateTime representation of this UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.tostring">MongoDB\BSON\UTCDateTime::__toString</a> — Returns the string representation of this UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.unserialize">MongoDB\BSON\UTCDateTime::unserialize</a> — Unserialize a UTCDateTime</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-type" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Type interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-type.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Abstract base interface that should not be implemented directly.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-type.synopsis">
     <h2 class="title">Interface synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Type</strong>
       </span>
       {</div>
  
      
     }</div>
  
  
     <p class="para">
      This interface has no methods. Its only purpose is to be the base interface
      for all BSON type classes.
     </p>
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-persistable" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Persistable interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-persistable.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Classes may implement this interface to take advantage of automatic ODM
      (object document mapping) behavior in the driver. During serialization, the
      driver will inject a <span class="property">__pclass</span> property containing the
      PHP class name into the data returned by
      <span class="function"><a href="#mongodb-bson-serializable.bsonserialize" class="function">MongoDB\BSON\Serializable::bsonSerialize()</a></span>. During
      unserialization, the same <span class="property">__pclass</span> property will then
      be used to infer the PHP class (independent of any
      <a href="#mongodb.persistence.typemaps" class="link">type map</a> configuration)
      to be constructed before
      <span class="function"><a href="#mongodb-bson-unserializable.bsonunserialize" class="function">MongoDB\BSON\Unserializable::bsonUnserialize()</a></span> is
      invoked. See <a href="#mongodb.persistence" class="xref">Persisting Data</a> for additional
      information.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       Even if <span class="function"><a href="#mongodb-bson-serializable.bsonserialize" class="function">MongoDB\BSON\Serializable::bsonSerialize()</a></span> would
       return a sequential array, injection of the <span class="property">__pclass</span>
       property will cause the object to be serialized as a BSON document.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongodb-bson-persistable.synopsis">
     <h2 class="title">Interface synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Persistable</strong>
       </span>
       
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-unserializable" class="interfacename">MongoDB\BSON\Unserializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">MongoDB\BSON\Serializable::bsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></div>
  
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-unserializable.bsonunserialize" class="methodname">MongoDB\BSON\Unserializable::bsonUnserialize</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$data</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
  
  
  <div id="class.mongodb-bson-serializable" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Serializable interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-serializable.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Classes that implement this interface may return data to be serialized as a
      BSON array or document in lieu of the object&#039;s public properties.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-serializable.synopsis">
     <h2 class="title">Interface synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Serializable</strong>
       </span>
       
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-serializable.bsonserialize" class="methodname">bsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-serializable.bsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Serializable::bsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Serializable::bsonSerialize</span> &mdash; <span class="dc-title">Provides an array or document to serialize as BSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-serializable.bsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Serializable::bsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.array-object" class="type array|object">array|object</a></span></div>
  
    <p class="para rdfs-comment">
     Called during serialization of the object to BSON. The method must return an
     <span class="type"><a href="#language.types.array" class="type array">array</a></span> or <strong class="classname">stdClass</strong>.
    </p>
    <p class="para">
     Root documents (e.g. a
     <span class="interfacename"><a href="#class.mongodb-bson-serializable" class="interfacename">MongoDB\BSON\Serializable</a></span> passed to
     <span class="function"><a href="#function.mongodb.bson-fromphp" class="function">MongoDB\BSON\fromPHP()</a></span>) will always be serialized as a
     BSON document. For field values, associative arrays and
     <strong class="classname">stdClass</strong> instances will be serialized as a BSON
     document and sequential arrays (i.e. sequential, numeric indexes starting at
     <code class="literal">0</code>) will be serialized as a BSON array.
    </p>
    <p class="para">
     Users are encouraged to include an <span class="property">_id</span> property (e.g. a
     <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> initialized in your constructor)
     when returning data for a BSON root document; otherwise, the driver or
     database will need to generate a
     <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> when inserting or upserting the
     document, respectively.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-serializable.bsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-serializable.bsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     An <span class="type"><a href="#language.types.array" class="type array">array</a></span> or <strong class="classname">stdClass</strong> to be serialized as
     a BSON array or document.
    </p>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-serializable.bsonserialize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1833">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Serializable::bsonSerialize()</strong></span> returning an associative array for root document</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyDocument&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">ObjectId</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MyDocument</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;_id&quot; : { &quot;$oid&quot; : &quot;56cccdcada14d8755a58c591&quot; }, &quot;foo&quot; : &quot;bar&quot; }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1834">
     <p><strong>Example #2 <span class="function"><strong>MongoDB\BSON\Serializable::bsonSerialize()</strong></span> returning a sequential array for root document</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyArray&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MyArray</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;0&quot; : 1, &quot;1&quot; : 2, &quot;2&quot; : 3 }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1835">
     <p><strong>Example #3 <span class="function"><strong>MongoDB\BSON\Serializable::bsonSerialize()</strong></span> returning an associative array for document field</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyDocument&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'document'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MyDocument</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;document&quot; : { &quot;foo&quot; : &quot;bar&quot; } }
  </pre></div>
     </div>
    </div>
  
    <div class="example" id="example-1836">
     <p><strong>Example #4 <span class="function"><strong>MongoDB\BSON\Serializable::bsonSerialize()</strong></span> returning a sequential array for document field</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyArray&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Serializable<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonSerialize</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'array'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MyArray</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toJSON</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  { &quot;array&quot; : [ 1, 2, 3 ] }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-serializable.bsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-bson-unserializable.bsonunserialize" class="function" rel="rdfs-seeAlso">MongoDB\BSON\Unserializable::bsonUnserialize()</a> - Constructs the object from a BSON array or document</span></li>
     <li class="member"><span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-serializable.bsonserialize">MongoDB\BSON\Serializable::bsonSerialize</a> — Provides an array or document to serialize as BSON</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-unserializable" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Unserializable interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.0.0)</p>
  
  
    <div class="section" id="mongodb-bson-unserializable.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Classes that implement this interface may be specified in a
      <a href="#mongodb.persistence.typemaps" class="link">type map</a> for
      unserializing BSON arrays and documents (both root and embedded).
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-unserializable.synopsis">
     <h2 class="title">Interface synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Unserializable</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-unserializable.bsonunserialize" class="methodname">bsonUnserialize</a></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$data</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-unserializable.bsonunserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Unserializable::bsonUnserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Unserializable::bsonUnserialize</span> &mdash; <span class="dc-title">Constructs the object from a BSON array or document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-unserializable.bsonunserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Unserializable::bsonUnserialize</strong></span>
      ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$data</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Called during unserialization of the object from BSON. The properties of the
     BSON array or document will be passed to the method as an <span class="type"><a href="#language.types.array" class="type array">array</a></span>.
    </p>
    <p class="para">
     Remember to check for an <span class="property">_id</span> property when handling data
     from a BSON document.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      This method acts as the
      <a href="#language.oop5.decon.constructor" class="link">constructor</a> of the
      object. The <a href="#object.construct" class="link">__construct()</a> method
      will <em class="emphasis">not</em> be called after this method.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-unserializable.bsonunserialize-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">data</code> (<span class="type"><a href="#language.types.array" class="type array">array</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        Properties within the BSON array or document.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-unserializable.bsonunserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The return value from this method is ignored.
    </p>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-unserializable.bsonunserialize-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1837">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Unserializable::bsonUnserialize()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyDocument&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">Unserializable<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;[];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">bsonUnserialize</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$bson&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">fromJSON</span><span style="color: #007700">(</span><span style="color: #DD0000">'{&nbsp;"foo":&nbsp;"bar"&nbsp;}'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">BSON</span><span style="color: #007700">\</span><span style="color: #0000BB">toPHP</span><span style="color: #007700">(</span><span style="color: #0000BB">$bson</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'root'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'MyDocument'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  object(MyDocument)#1 (1) {
    [&quot;data&quot;:&quot;MyDocument&quot;:private]=&gt;
    array(1) {
      [&quot;foo&quot;]=&gt;
      string(3) &quot;bar&quot;
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-unserializable.bsonunserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-bson-serializable.bsonserialize" class="function" rel="rdfs-seeAlso">MongoDB\BSON\Serializable::bsonSerialize()</a> - Provides an array or document to serialize as BSON</span></li>
     <li class="member"><span class="interfacename"><a href="#class.mongodb-bson-persistable" class="interfacename">MongoDB\BSON\Persistable</a></span></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-unserializable.bsonunserialize">MongoDB\BSON\Unserializable::bsonUnserialize</a> — Constructs the object from a BSON array or document</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-binaryinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\BinaryInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-binaryinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by <a href="#class.mongodb-bson-binary" class="classname">MongoDB\BSON\Binary</a>
      but may also be used for type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-binaryinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\BinaryInterface</strong>
       </span>
       {</div>
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binaryinterface.getdata" class="methodname">getData</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binaryinterface.gettype" class="methodname">getType</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-binaryinterface.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-bson-binaryinterface.getdata" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\BinaryInterface::getData</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\BinaryInterface::getData</span> &mdash; <span class="dc-title">Returns the BinaryInterface&#039;s data</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binaryinterface.getdata-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\BinaryInterface::getData</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binaryinterface.getdata-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binaryinterface.getdata-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the BinaryInterface&#039;s data.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binaryinterface.getdata-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.getdata" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Binary::getData()</a> - Returns the Binary's data</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binaryinterface.gettype" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\BinaryInterface::getType</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\BinaryInterface::getType</span> &mdash; <span class="dc-title">Returns the BinaryInterface&#039;s type</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binaryinterface.gettype-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\BinaryInterface::getType</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binaryinterface.gettype-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binaryinterface.gettype-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the BinaryInterface&#039;s type.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binaryinterface.gettype-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.gettype" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Binary::getType()</a> - Returns the Binary's type</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-binaryinterface.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\BinaryInterface::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\BinaryInterface::__toString</span> &mdash; <span class="dc-title">Returns the BinaryInterface&#039;s data</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-binaryinterface.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\BinaryInterface::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     This method is an alias of:  <span class="methodname"><a href="#mongodb-bson-binaryinterface.getdata" class="methodname">MongoDB\BSON\BinaryInterface::getData()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-binaryinterface.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-binaryinterface.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the BinaryInterface&#039;s data.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-binaryinterface.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-binaryinterface.getdata" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\BinaryInterface::getData()</a> - Returns the BinaryInterface's data</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-bson-binary.tostring" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Binary::__toString()</a> - Returns the Binary's data</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-binaryinterface.getdata">MongoDB\BSON\BinaryInterface::getData</a> — Returns the BinaryInterface's data</li><li><a href="#mongodb-bson-binaryinterface.gettype">MongoDB\BSON\BinaryInterface::getType</a> — Returns the BinaryInterface's type</li><li><a href="#mongodb-bson-binaryinterface.tostring">MongoDB\BSON\BinaryInterface::__toString</a> — Returns the BinaryInterface's data</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-decimal128interface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Decimal128Interface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-decimal128interface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by
      <a href="#class.mongodb-bson-decimal128" class="classname">MongoDB\BSON\Decimal128</a> but may also be used for
      type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-decimal128interface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Decimal128Interface</strong>
       </span>
       {</div>
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-decimal128interface.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-bson-decimal128interface.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Decimal128Interface::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Decimal128Interface::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this Decimal128Interface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-decimal128interface.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Decimal128Interface::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-decimal128interface.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-decimal128interface.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this Decimal128Interface.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-decimal128interface.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-decimal128.tostring" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Decimal128::__toString()</a> - Returns the string representation of this Decimal128</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-decimal128interface.tostring">MongoDB\BSON\Decimal128Interface::__toString</a> — Returns the string representation of this Decimal128Interface</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-javascriptinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\JavascriptInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-javascriptinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by
      <a href="#class.mongodb-bson-javascript" class="classname">MongoDB\BSON\Javascript</a> but may also be used for
      type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-javascriptinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\JavascriptInterface</strong>
       </span>
       {</div>
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascriptinterface.getcode" class="methodname">getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascriptinterface.getscope" class="methodname">getScope</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-javascriptinterface.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-bson-javascriptinterface.getcode" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\JavascriptInterface::getCode</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\JavascriptInterface::getCode</span> &mdash; <span class="dc-title">Returns the JavascriptInterface&#039;s code</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascriptinterface.getcode-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\JavascriptInterface::getCode</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascriptinterface.getcode-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascriptinterface.getcode-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the JavascriptInterface&#039;s code.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascriptinterface.getcode-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-javascript.getcode" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Javascript::getCode()</a> - Returns the Javascript's code</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascriptinterface.getscope" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\JavascriptInterface::getScope</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\JavascriptInterface::getScope</span> &mdash; <span class="dc-title">Returns the JavascriptInterface&#039;s scope document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascriptinterface.getscope-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\JavascriptInterface::getScope</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type object|null">object|null</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascriptinterface.getscope-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascriptinterface.getscope-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the JavascriptInterface&#039;s scope document.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascriptinterface.getscope-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-javascript.getscope" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Javascript::getScope()</a> - Returns the Javascript's scope document</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-javascriptinterface.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\JavascriptInterface::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\JavascriptInterface::__toString</span> &mdash; <span class="dc-title">Returns the JavascriptInterface&#039;s code</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-javascriptinterface.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\JavascriptInterface::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     This method is an alias of:  <span class="methodname"><a href="#mongodb-bson-javascriptinterface.getcode" class="methodname">MongoDB\BSON\JavascriptInterface::getCode()</a></span>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-javascriptinterface.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-javascriptinterface.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the JavascriptInterface&#039;s code.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-javascriptinterface.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-javascriptinterface.getcode" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\JavascriptInterface::getCode()</a> - Returns the JavascriptInterface's code</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-bson-javascript.tostring" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Javascript::__toString()</a> - Returns the Javascript's code</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-javascriptinterface.getcode">MongoDB\BSON\JavascriptInterface::getCode</a> — Returns the JavascriptInterface's code</li><li><a href="#mongodb-bson-javascriptinterface.getscope">MongoDB\BSON\JavascriptInterface::getScope</a> — Returns the JavascriptInterface's scope document</li><li><a href="#mongodb-bson-javascriptinterface.tostring">MongoDB\BSON\JavascriptInterface::__toString</a> — Returns the JavascriptInterface's code</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-maxkeyinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\MaxKeyInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-maxkeyinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by <a href="#class.mongodb-bson-maxkey" class="classname">MongoDB\BSON\MaxKey</a>
      but may also be used for type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-maxkeyinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\MaxKeyInterface</strong>
       </span>
       {</div>
     }</div>
  
     <p class="para">
      This interface has no methods.
     </p>
    </div>
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-minkeyinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\MinKeyInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-minkeyinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by <a href="#class.mongodb-bson-minkey" class="classname">MongoDB\BSON\MinKey</a>
      but may also be used for type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-minkeyinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\MinKeyInterface</strong>
       </span>
       {</div>
     }</div>
  
     <p class="para">
      This interface has no methods.
     </p>
    </div>
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-objectidinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\ObjectIdInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-objectidinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by
      <a href="#class.mongodb-bson-objectid" class="classname">MongoDB\BSON\ObjectId</a> but may also be used for
      type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-objectidinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\ObjectIdInterface</strong>
       </span>
       {</div>
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectidinterface.gettimestamp" class="methodname">getTimestamp</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-objectidinterface.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-bson-objectidinterface.gettimestamp" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectIdInterface::getTimestamp</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectIdInterface::getTimestamp</span> &mdash; <span class="dc-title">Returns the timestamp component of this ObjectIdInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectidinterface.gettimestamp-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectIdInterface::getTimestamp</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectidinterface.gettimestamp-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-objectidinterface.gettimestamp-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the timestamp component of this ObjectIdInterface.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectidinterface.gettimestamp-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-objectid.gettimestamp" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\ObjectId::getTimestamp()</a> - Returns the timestamp component of this ObjectId</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-objectidinterface.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\ObjectIdInterface::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\ObjectIdInterface::__toString</span> &mdash; <span class="dc-title">Returns the hexidecimal representation of this ObjectIdInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-objectidinterface.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\ObjectIdInterface::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-objectidinterface.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-objectidinterface.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the hexidecimal representation of this ObjectIdInterface.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-objectidinterface.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-objectid.tostring" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\ObjectId::__toString()</a> - Returns the hexidecimal representation of this ObjectId</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-objectidinterface.gettimestamp">MongoDB\BSON\ObjectIdInterface::getTimestamp</a> — Returns the timestamp component of this ObjectIdInterface</li><li><a href="#mongodb-bson-objectidinterface.tostring">MongoDB\BSON\ObjectIdInterface::__toString</a> — Returns the hexidecimal representation of this ObjectIdInterface</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-regexinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\RegexInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-regexinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by <a href="#class.mongodb-bson-regex" class="classname">MongoDB\BSON\Regex</a>
      but may also be used for type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-regexinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\RegexInterface</strong>
       </span>
       {</div>
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regexinterface.getflags" class="methodname">getFlags</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regexinterface.getpattern" class="methodname">getPattern</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-regexinterface.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-bson-regexinterface.getflags" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\RegexInterface::getFlags</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\RegexInterface::getFlags</span> &mdash; <span class="dc-title">Returns the RegexInterface&#039;s flags</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regexinterface.getflags-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\RegexInterface::getFlags</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regexinterface.getflags-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regexinterface.getflags-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the RegexInterface&#039;s flags.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regexinterface.getflags-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-regex.getflags" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Regex::getFlags()</a> - Returns the Regex's flags</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regexinterface.getpattern" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\RegexInterface::getPattern</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\RegexInterface::getPattern</span> &mdash; <span class="dc-title">Returns the RegexInterface&#039;s pattern</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regexinterface.getpattern-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\RegexInterface::getPattern</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regexinterface.getpattern-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regexinterface.getpattern-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the RegexInterface&#039;s pattern.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regexinterface.getpattern-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-regex.getpattern" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Regex::getPattern()</a> - Returns the Regex's pattern</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-regexinterface.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\RegexInterface::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\RegexInterface::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this RegexInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-regexinterface.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\RegexInterface::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-regexinterface.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-regexinterface.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this RegexInterface.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-regexinterface.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-regex.tostring" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Regex::__toString()</a> - Returns the string representation of this Regex</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-regexinterface.getflags">MongoDB\BSON\RegexInterface::getFlags</a> — Returns the RegexInterface's flags</li><li><a href="#mongodb-bson-regexinterface.getpattern">MongoDB\BSON\RegexInterface::getPattern</a> — Returns the RegexInterface's pattern</li><li><a href="#mongodb-bson-regexinterface.tostring">MongoDB\BSON\RegexInterface::__toString</a> — Returns the string representation of this RegexInterface</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-timestampinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\TimestampInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-timestampinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by
      <a href="#class.mongodb-bson-timestamp" class="classname">MongoDB\BSON\Timestamp</a> but may also be used for
      type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-timestampinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\TimestampInterface</strong>
       </span>
       {</div>
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestampinterface.getincrement" class="methodname">getIncrement</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestampinterface.gettimestamp" class="methodname">getTimestamp</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-timestampinterface.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-bson-timestampinterface.getincrement" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\TimestampInterface::getIncrement</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\TimestampInterface::getIncrement</span> &mdash; <span class="dc-title">Returns the increment component of this TimestampInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestampinterface.getincrement-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\TimestampInterface::getIncrement</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestampinterface.getincrement-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestampinterface.getincrement-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the increment component of this TimestampInterface.
    </p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">
      On 32-bit systems this method may return a negative number. Although the
      increment and timestamp parts of the BSON timestamp type consists of two
      unsigned 32-bit values, PHP can not represent these on 32-bit platforms.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestampinterface.getincrement-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-timestamp.getincrement" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Timestamp::getIncrement()</a> - Returns the increment component of this Timestamp</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestampinterface.gettimestamp" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\TimestampInterface::getTimestamp</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\TimestampInterface::getTimestamp</span> &mdash; <span class="dc-title">Returns the timestamp component of this TimestampInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestampinterface.gettimestamp-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\TimestampInterface::getTimestamp</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestampinterface.gettimestamp-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestampinterface.gettimestamp-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the timestamp component of this TimestampInterface.
    </p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="simpara">
      On 32-bit systems this method may return a negative number. Although the
      increment and timestamp parts of the BSON timestamp type consists of two
      unsigned 32-bit values, PHP can not represent these on 32-bit platforms.
     </p>
    </div>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestampinterface.gettimestamp-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-timestamp.gettimestamp" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Timestamp::getTimestamp()</a> - Returns the timestamp component of this Timestamp</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-timestampinterface.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\TimestampInterface::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\TimestampInterface::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this TimestampInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-timestampinterface.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\TimestampInterface::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-timestampinterface.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-timestampinterface.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this TimestampInterface.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-timestampinterface.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-timestamp.tostring" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Timestamp::__toString()</a> - Returns the string representation of this Timestamp</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-timestampinterface.getincrement">MongoDB\BSON\TimestampInterface::getIncrement</a> — Returns the increment component of this TimestampInterface</li><li><a href="#mongodb-bson-timestampinterface.gettimestamp">MongoDB\BSON\TimestampInterface::getTimestamp</a> — Returns the timestamp component of this TimestampInterface</li><li><a href="#mongodb-bson-timestampinterface.tostring">MongoDB\BSON\TimestampInterface::__toString</a> — Returns the string representation of this TimestampInterface</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-utcdatetimeinterface" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\UTCDateTimeInterface interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
    <div class="section" id="mongodb-bson-utcdatetimeinterface.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      This interface is implemented by
      <a href="#class.mongodb-bson-utcdatetime" class="classname">MongoDB\BSON\UTCDateTime</a> but may also be used for
      type-hinting and userland classes.
     </p>
    </div>
  
    <div class="section" id="mongodb-bson-utcdatetimeinterface.synopsis">
     <h2 class="title">Class synopsis</h2>
     <div class="classsynopsis">
      <div class="ooclass"></div>
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\UTCDateTimeInterface</strong>
       </span>
       {</div>
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetimeinterface.todatetime" class="methodname">toDateTime</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.datetime" class="type DateTime">DateTime</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-utcdatetimeinterface.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
     }</div>
    </div>
   </div>
  
   
   
  
  <div id="mongodb-bson-utcdatetimeinterface.todatetime" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTimeInterface::toDateTime</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTimeInterface::toDateTime</span> &mdash; <span class="dc-title">Returns the DateTime representation of this UTCDateTimeInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetimeinterface.todatetime-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTimeInterface::toDateTime</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.datetime" class="type DateTime">DateTime</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetimeinterface.todatetime-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-utcdatetimeinterface.todatetime-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.datetime" class="classname">DateTime</a> representation of this
     UTCDateTimeInterface. The returned <a href="#class.datetime" class="classname">DateTime</a> should use
     the UTC time zone.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetimeinterface.todatetime-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-utcdatetime.todatetime" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\UTCDateTime::toDateTime()</a> - Returns the DateTime representation of this UTCDateTime</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-utcdatetimeinterface.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\UTCDateTimeInterface::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\UTCDateTimeInterface::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this UTCDateTimeInterface</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-utcdatetimeinterface.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\UTCDateTimeInterface::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-utcdatetimeinterface.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-utcdatetimeinterface.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this UTCDateTimeInterface.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-utcdatetimeinterface.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-utcdatetime.tostring" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\UTCDateTime::__toString()</a> - Returns the string representation of this UTCDateTime</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-utcdatetimeinterface.todatetime">MongoDB\BSON\UTCDateTimeInterface::toDateTime</a> — Returns the DateTime representation of this UTCDateTimeInterface</li><li><a href="#mongodb-bson-utcdatetimeinterface.tostring">MongoDB\BSON\UTCDateTimeInterface::__toString</a> — Returns the string representation of this UTCDateTimeInterface</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-dbpointer" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\DBPointer class (deprecated)</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.4.0)</p>
  
  
    <div class="section" id="mongodb-bson-dbpointer.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for the &quot;DBPointer&quot; type. This BSON type is deprecated, and this
      class can not be instantiated. It will be created from a BSON DBPointer
      type while converting BSON to PHP, and can also be converted back into
      BSON while storing documents in the database.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-dbpointer.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\DBPointer</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-bson-dbpointer.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-dbpointer.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-dbpointer.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-dbpointer.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-dbpointer.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
    
   
   
  
  <div id="mongodb-bson-dbpointer.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\DBPointer::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\DBPointer::__construct</span> &mdash; <span class="dc-title">Construct a new DBPointer (unused)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-dbpointer.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\BSON\DBPointer::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-bson-dbpointer" class="classname">MongoDB\BSON\DBPointer</a> objects are created through
     conversion from a deprecated BSON type and cannot be constructed directly.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-dbpointer.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-dbpointer.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-dbpointer.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\DBPointer::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\DBPointer::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-dbpointer.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\DBPointer::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-dbpointer.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-dbpointer.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-dbpointer" class="classname">MongoDB\BSON\DBPointer</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-dbpointer.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-dbpointer.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-dbpointer.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\DBPointer::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\DBPointer::serialize</span> &mdash; <span class="dc-title">Serialize a DBPointer</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-dbpointer.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\DBPointer::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-dbpointer.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-dbpointer.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-dbpointer" class="classname">MongoDB\BSON\DBPointer</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-dbpointer.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-dbpointer.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-dbpointer.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\DBPointer::unserialize()</a> - Unserialize a DBPointer</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-dbpointer.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\DBPointer::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\DBPointer::__toString</span> &mdash; <span class="dc-title">Returns an empty string</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-dbpointer.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\DBPointer::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-dbpointer.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-dbpointer.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an empty string.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-dbpointer.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-dbpointer.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\DBPointer::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\DBPointer::unserialize</span> &mdash; <span class="dc-title">Unserialize a DBPointer</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-dbpointer.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\DBPointer::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-dbpointer.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-dbpointer" class="classname">MongoDB\BSON\DBPointer</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-dbpointer.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-dbpointer" class="classname">MongoDB\BSON\DBPointer</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-dbpointer.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-dbpointer.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-dbpointer.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\DBPointer::serialize()</a> - Serialize a DBPointer</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-dbpointer.construct">MongoDB\BSON\DBPointer::__construct</a> — Construct a new DBPointer (unused)</li><li><a href="#mongodb-bson-dbpointer.jsonserialize">MongoDB\BSON\DBPointer::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-dbpointer.serialize">MongoDB\BSON\DBPointer::serialize</a> — Serialize a DBPointer</li><li><a href="#mongodb-bson-dbpointer.tostring">MongoDB\BSON\DBPointer::__toString</a> — Returns an empty string</li><li><a href="#mongodb-bson-dbpointer.unserialize">MongoDB\BSON\DBPointer::unserialize</a> — Unserialize a DBPointer</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-int64" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Int64 class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.5.0)</p>
  
  
    <div class="section" id="mongodb-bson-int64.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for a 64-bit integer. This class cannot be instantiated and is
      only created during BSON decoding when a 64-bit integer cannot be
      represented as a PHP integer on a 32-bit platform. Versions of the driver
      before 1.5.0 would throw an exception when attempting to decode a 64-bit
      integer on a 32-bit platform.
     </p>
     <p class="para">
      During BSON encoding, objects of this class will convert back to a 64-bit
      integer type. This allows 64-bit integers to be roundtripped through a
      32-bit PHP environment without any loss of precision. The
      <a href="#object.tostring" class="link">__toString()</a> method allows the 64-bit
      integer value to be accessed as a string.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       This class exists purely for 32-bit platforms. Applications on 64-bit
       platforms (i.e. <a href="#constant.php-int-size" class="link"><strong><code>PHP_INT_SIZE</code></strong></a> is 8) should never
       encounter this class during normal operation.
      </span>
     </p></blockquote>
    </div>
  
  
    <div class="section" id="mongodb-bson-int64.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Int64</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-bson-int64.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-int64.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-int64.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-int64.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-int64.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-bson-int64.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Int64::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Int64::__construct</span> &mdash; <span class="dc-title">Construct a new Int64 (unused)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-int64.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\BSON\Int64::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-bson-int64" class="classname">MongoDB\BSON\Int64</a> objects are created through
     conversion from a 64-bit integer BSON type on a 32-bit platform and cannot be
     constructed directly.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-int64.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-int64.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-int64.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Int64::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Int64::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-int64.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Int64::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-int64.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-int64.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-int64" class="classname">MongoDB\BSON\Int64</a>.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span> function, which
      uses the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON format. This differs from other BSON classes, which use the
      driver-specific legacy extended JSON format
      (<span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>), in order to ensure that the
      64-bit integer value is correctly represented on 32-bit platforms.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-int64.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-int64.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-int64.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Int64::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Int64::serialize</span> &mdash; <span class="dc-title">Serialize an Int64</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-int64.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Int64::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-int64.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-int64.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-int64" class="classname">MongoDB\BSON\Int64</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-int64.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-int64.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-int64.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Int64::unserialize()</a> - Unserialize an Int64</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-int64.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Int64::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Int64::__toString</span> &mdash; <span class="dc-title">Returns the string representation of this Int64</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-int64.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Int64::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-int64.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-int64.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this Int64.
    </p>
   </div>
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-bson-int64.tostring-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1838">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\BSON\Int64::__toString()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$int64&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #DD0000">'C:18:"MongoDB\BSON\Int64":47:{a:1:{s:7:"integer";s:19:"9223372036854775807";}}'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((string)&nbsp;</span><span style="color: #0000BB">$int64</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  string(19) &quot;9223372036854775807&quot;
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-int64.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-int64.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Int64::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Int64::unserialize</span> &mdash; <span class="dc-title">Unserialize an Int64</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-int64.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Int64::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-int64.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-int64" class="classname">MongoDB\BSON\Int64</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-int64.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-int64" class="classname">MongoDB\BSON\Int64</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-int64.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> if the properties cannot be unserialized (i.e. <code class="parameter">serialized</code> was malformed).</li>
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> if the properties are invalid (e.g. missing fields or invalid values).</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-int64.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-int64.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Int64::serialize()</a> - Serialize an Int64</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-int64.construct">MongoDB\BSON\Int64::__construct</a> — Construct a new Int64 (unused)</li><li><a href="#mongodb-bson-int64.jsonserialize">MongoDB\BSON\Int64::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-int64.serialize">MongoDB\BSON\Int64::serialize</a> — Serialize an Int64</li><li><a href="#mongodb-bson-int64.tostring">MongoDB\BSON\Int64::__toString</a> — Returns the string representation of this Int64</li><li><a href="#mongodb-bson-int64.unserialize">MongoDB\BSON\Int64::unserialize</a> — Unserialize an Int64</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-symbol" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Symbol class (deprecated)</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.4.0)</p>
  
  
    <div class="section" id="mongodb-bson-symbol.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for the &quot;Symbol&quot; type. This BSON type is deprecated, and this
      class can not be instantiated. It will be created from a BSON symbol
      type while converting BSON to PHP, and can also be converted back into
      BSON while storing documents in the database.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-symbol.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Symbol</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-bson-symbol.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-symbol.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-symbol.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-symbol.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-symbol.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
    
   
   
  
  <div id="mongodb-bson-symbol.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Symbol::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Symbol::__construct</span> &mdash; <span class="dc-title">Construct a new Symbol (unused)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-symbol.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\BSON\Symbol::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-bson-symbol" class="classname">MongoDB\BSON\Symbol</a> objects are created through
     conversion from a deprecated BSON type and cannot be constructed directly.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-symbol.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-symbol.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-symbol.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Symbol::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Symbol::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-symbol.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Symbol::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-symbol.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-symbol.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-symbol" class="classname">MongoDB\BSON\Symbol</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-symbol.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-symbol.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-symbol.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Symbol::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Symbol::serialize</span> &mdash; <span class="dc-title">Serialize a Symbol</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-symbol.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Symbol::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-symbol.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-symbol.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-symbol" class="classname">MongoDB\BSON\Symbol</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-symbol.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-symbol.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-symbol.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Symbol::unserialize()</a> - Unserialize a Symbol</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-symbol.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Symbol::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Symbol::__toString</span> &mdash; <span class="dc-title">Returns the Symbol as a string</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-symbol.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Symbol::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-symbol.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-symbol.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the string representation of this Symbol.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-symbol.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-symbol.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Symbol::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Symbol::unserialize</span> &mdash; <span class="dc-title">Unserialize a Symbol</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-symbol.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Symbol::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-symbol.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-symbol" class="classname">MongoDB\BSON\Symbol</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-symbol.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-symbol" class="classname">MongoDB\BSON\Symbol</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-symbol.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-symbol.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-symbol.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Symbol::serialize()</a> - Serialize a Symbol</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-symbol.construct">MongoDB\BSON\Symbol::__construct</a> — Construct a new Symbol (unused)</li><li><a href="#mongodb-bson-symbol.jsonserialize">MongoDB\BSON\Symbol::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-symbol.serialize">MongoDB\BSON\Symbol::serialize</a> — Serialize a Symbol</li><li><a href="#mongodb-bson-symbol.tostring">MongoDB\BSON\Symbol::__toString</a> — Returns the Symbol as a string</li><li><a href="#mongodb-bson-symbol.unserialize">MongoDB\BSON\Symbol::unserialize</a> — Unserialize a Symbol</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-bson-undefined" class="reference"><hr />
  
   <h1 class="title">The MongoDB\BSON\Undefined class (deprecated)</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.4.0)</p>
  
  
    <div class="section" id="mongodb-bson-undefined.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      BSON type for the &quot;Undefined&quot; type. This BSON type is deprecated, and this
      class can not be instantiated. It will be created from a BSON undefined
      type while converting BSON to PHP, and can also be converted back into
      BSON while storing documents in the database.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-bson-undefined.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\BSON\Undefined</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-bson-type" class="interfacename">MongoDB\BSON\Type</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.serializable" class="interfacename">Serializable</a></span>
       </span>
  
       <span class="oointerface">, 
        <span class="interfacename"><a href="#class.jsonserializable" class="interfacename">JsonSerializable</a></span>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#mongodb-bson-undefined.construct" class="methodname">__construct</a></span>
      ( <span class="methodparam">void</span>
     )</div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-undefined.jsonserialize" class="methodname">jsonSerialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-undefined.serialize" class="methodname">serialize</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-undefined.tostring" class="methodname">__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-bson-undefined.unserialize" class="methodname">unserialize</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
    
   
   
  
  <div id="mongodb-bson-undefined.construct" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Undefined::__construct</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Undefined::__construct</span> &mdash; <span class="dc-title">Construct a new Undefined (unused)</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-undefined.construct-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><strong>MongoDB\BSON\Undefined::__construct</strong></span>
      ( <span class="methodparam">void</span>
     )</div>
  
    <p class="para rdfs-comment">
     <a href="#class.mongodb-bson-undefined" class="classname">MongoDB\BSON\Undefined</a> objects are created through
     conversion from a deprecated BSON type and cannot be constructed directly.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-undefined.construct-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-undefined.construct-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-undefined.jsonserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Undefined::jsonSerialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Undefined::jsonSerialize</span> &mdash; <span class="dc-title">Returns a representation that can be converted to JSON</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-undefined.jsonserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Undefined::jsonSerialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-undefined.jsonserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-undefined.jsonserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns data which can be serialized by <span class="function"><a href="#function.json-encode" class="function">json_encode()</a></span> to
     produce an extended JSON representation of the
     <a href="#class.mongodb-bson-undefined" class="classname">MongoDB\BSON\Undefined</a>.
    </p>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      The output is consistent with the <span class="function"><a href="#function.mongodb.bson-tojson" class="function">MongoDB\BSON\toJSON()</a></span>
      function, which uses the driver-specific legacy extended JSON format. This
      does not necessarily match the
      <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#relaxed-extended-json-example" class="link external">&raquo;&nbsp;relaxed</a>
      or <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst#canonical-extended-json-example" class="link external">&raquo;&nbsp;canonical</a>
      extended JSON representations used by
      <span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function">MongoDB\BSON\toRelaxedExtendedJSON()</a></span> and
      <span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function">MongoDB\BSON\toCanonicalExtendedJSON()</a></span>, respectively.
     </span>
    </p></blockquote>
  
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-undefined.jsonserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-undefined.jsonserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#jsonserializable.jsonserialize" class="methodname" rel="rdfs-seeAlso">JsonSerializable::jsonSerialize()</a> - Specify data which should be serialized to JSON</span></li>
     <li class="member"><span class="function"><a href="#function.json-encode" class="function" rel="rdfs-seeAlso">json_encode()</a> - Returns the JSON representation of a value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-tocanonicalextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toCanonicalExtendedJSON()</a> - Returns the Canonical Extended JSON representation of a BSON value</span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.bson-torelaxedextendedjson" class="function" rel="rdfs-seeAlso">MongoDB\BSON\toRelaxedExtendedJSON()</a> - Returns the Relaxed Extended JSON representation of a BSON value</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/" class="link external">&raquo;&nbsp;MongoDB Extended JSON</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-undefined.serialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Undefined::serialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Undefined::serialize</span> &mdash; <span class="dc-title">Serialize a Undefined</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-undefined.serialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Undefined::serialize</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-undefined.serialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-undefined.serialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the serialized representation of the
     <a href="#class.mongodb-bson-undefined" class="classname">MongoDB\BSON\Undefined</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-undefined.serialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-undefined.serialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-undefined.unserialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Undefined::unserialize()</a> - Unserialize a Undefined</span></li>
     <li class="member"><span class="function"><a href="#function.serialize" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
     <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-undefined.tostring" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Undefined::__toString</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Undefined::__toString</span> &mdash; <span class="dc-title">Returns an empty string</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-undefined.tostring-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Undefined::__toString</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-undefined.tostring-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-undefined.tostring-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an empty string.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-undefined.tostring-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="https://docs.mongodb.com/manual/reference/bson-types/" class="link external">&raquo;&nbsp;BSON Types</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-bson-undefined.unserialize" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\BSON\Undefined::unserialize</h1>
    <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\BSON\Undefined::unserialize</span> &mdash; <span class="dc-title">Unserialize a Undefined</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-bson-undefined.unserialize-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\BSON\Undefined::unserialize</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-bson-undefined.unserialize-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">serialized</code></dt>
  
       <dd>
  
        <p class="para">
         The serialized <a href="#class.mongodb-bson-undefined" class="classname">MongoDB\BSON\Undefined</a>.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-bson-undefined.unserialize-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the unserialized <a href="#class.mongodb-bson-undefined" class="classname">MongoDB\BSON\Undefined</a>.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-bson-undefined.unserialize-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-bson-undefined.unserialize-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-bson-undefined.serialize" class="methodname" rel="rdfs-seeAlso">MongoDB\BSON\Undefined::serialize()</a> - Serialize a Undefined</span></li>
      <li class="member"><span class="function"><a href="#function.unserialize" class="function" rel="rdfs-seeAlso">unserialize()</a> - Creates a PHP value from a stored representation</span></li>
      <li class="member"><a href="#language.oop5.serialization" class="link">Serializing Objects</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-bson-undefined.construct">MongoDB\BSON\Undefined::__construct</a> — Construct a new Undefined (unused)</li><li><a href="#mongodb-bson-undefined.jsonserialize">MongoDB\BSON\Undefined::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-undefined.serialize">MongoDB\BSON\Undefined::serialize</a> — Serialize a Undefined</li><li><a href="#mongodb-bson-undefined.tostring">MongoDB\BSON\Undefined::__toString</a> — Returns an empty string</li><li><a href="#mongodb-bson-undefined.unserialize">MongoDB\BSON\Undefined::unserialize</a> — Unserialize a Undefined</li></ul>
  </div>
  
  <hr />
  
  
  
  
   <ul class="chunklist chunklist_book"><li><a href="#ref.bson.functions">Functions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#function.mongodb.bson-fromjson">MongoDB\BSON\fromJSON</a> — Returns the BSON representation of a JSON value</li><li><a href="#function.mongodb.bson-fromphp">MongoDB\BSON\fromPHP</a> — Returns the BSON representation of a PHP value</li><li><a href="#function.mongodb.bson-tocanonicalextendedjson">MongoDB\BSON\toCanonicalExtendedJSON</a> — Returns the Canonical Extended JSON representation of a BSON value</li><li><a href="#function.mongodb.bson-tojson">MongoDB\BSON\toJSON</a> — Returns the Legacy Extended JSON representation of a BSON value</li><li><a href="#function.mongodb.bson-tophp">MongoDB\BSON\toPHP</a> — Returns the PHP representation of a BSON value</li><li><a href="#function.mongodb.bson-torelaxedextendedjson">MongoDB\BSON\toRelaxedExtendedJSON</a> — Returns the Relaxed Extended JSON representation of a BSON value</li></ul></li><li><a href="#class.mongodb-bson-binary">MongoDB\BSON\Binary</a> — The MongoDB\BSON\Binary class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-binary.construct">MongoDB\BSON\Binary::__construct</a> — Construct a new Binary</li><li><a href="#mongodb-bson-binary.getdata">MongoDB\BSON\Binary::getData</a> — Returns the Binary's data</li><li><a href="#mongodb-bson-binary.gettype">MongoDB\BSON\Binary::getType</a> — Returns the Binary's type</li><li><a href="#mongodb-bson-binary.jsonserialize">MongoDB\BSON\Binary::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-binary.serialize">MongoDB\BSON\Binary::serialize</a> — Serialize a Binary</li><li><a href="#mongodb-bson-binary.tostring">MongoDB\BSON\Binary::__toString</a> — Returns the Binary's data</li><li><a href="#mongodb-bson-binary.unserialize">MongoDB\BSON\Binary::unserialize</a> — Unserialize a Binary</li></ul></li><li><a href="#class.mongodb-bson-decimal128">MongoDB\BSON\Decimal128</a> — The MongoDB\BSON\Decimal128 class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-decimal128.construct">MongoDB\BSON\Decimal128::__construct</a> — Construct a new Decimal128</li><li><a href="#mongodb-bson-decimal128.jsonserialize">MongoDB\BSON\Decimal128::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-decimal128.serialize">MongoDB\BSON\Decimal128::serialize</a> — Serialize a Decimal128</li><li><a href="#mongodb-bson-decimal128.tostring">MongoDB\BSON\Decimal128::__toString</a> — Returns the string representation of this Decimal128</li><li><a href="#mongodb-bson-decimal128.unserialize">MongoDB\BSON\Decimal128::unserialize</a> — Unserialize a Decimal128</li></ul></li><li><a href="#class.mongodb-bson-javascript">MongoDB\BSON\Javascript</a> — The MongoDB\BSON\Javascript class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-javascript.construct">MongoDB\BSON\Javascript::__construct</a> — Construct a new Javascript</li><li><a href="#mongodb-bson-javascript.getcode">MongoDB\BSON\Javascript::getCode</a> — Returns the Javascript's code</li><li><a href="#mongodb-bson-javascript.getscope">MongoDB\BSON\Javascript::getScope</a> — Returns the Javascript's scope document</li><li><a href="#mongodb-bson-javascript.jsonserialize">MongoDB\BSON\Javascript::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-javascript.serialize">MongoDB\BSON\Javascript::serialize</a> — Serialize a Javascript</li><li><a href="#mongodb-bson-javascript.tostring">MongoDB\BSON\Javascript::__toString</a> — Returns the Javascript's code</li><li><a href="#mongodb-bson-javascript.unserialize">MongoDB\BSON\Javascript::unserialize</a> — Unserialize a Javascript</li></ul></li><li><a href="#class.mongodb-bson-maxkey">MongoDB\BSON\MaxKey</a> — The MongoDB\BSON\MaxKey class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-maxkey.construct">MongoDB\BSON\MaxKey::__construct</a> — Construct a new MaxKey</li><li><a href="#mongodb-bson-maxkey.jsonserialize">MongoDB\BSON\MaxKey::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-maxkey.serialize">MongoDB\BSON\MaxKey::serialize</a> — Serialize a MaxKey</li><li><a href="#mongodb-bson-maxkey.unserialize">MongoDB\BSON\MaxKey::unserialize</a> — Unserialize a MaxKey</li></ul></li><li><a href="#class.mongodb-bson-minkey">MongoDB\BSON\MinKey</a> — The MongoDB\BSON\MinKey class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-minkey.construct">MongoDB\BSON\MinKey::__construct</a> — Construct a new MinKey</li><li><a href="#mongodb-bson-minkey.jsonserialize">MongoDB\BSON\MinKey::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-minkey.serialize">MongoDB\BSON\MinKey::serialize</a> — Serialize a MinKey</li><li><a href="#mongodb-bson-minkey.unserialize">MongoDB\BSON\MinKey::unserialize</a> — Unserialize a MinKey</li></ul></li><li><a href="#class.mongodb-bson-objectid">MongoDB\BSON\ObjectId</a> — The MongoDB\BSON\ObjectId class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-objectid.construct">MongoDB\BSON\ObjectId::__construct</a> — Construct a new ObjectId</li><li><a href="#mongodb-bson-objectid.gettimestamp">MongoDB\BSON\ObjectId::getTimestamp</a> — Returns the timestamp component of this ObjectId</li><li><a href="#mongodb-bson-objectid.jsonserialize">MongoDB\BSON\ObjectId::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-objectid.serialize">MongoDB\BSON\ObjectId::serialize</a> — Serialize an ObjectId</li><li><a href="#mongodb-bson-objectid.tostring">MongoDB\BSON\ObjectId::__toString</a> — Returns the hexidecimal representation of this ObjectId</li><li><a href="#mongodb-bson-objectid.unserialize">MongoDB\BSON\ObjectId::unserialize</a> — Unserialize an ObjectId</li></ul></li><li><a href="#class.mongodb-bson-regex">MongoDB\BSON\Regex</a> — The MongoDB\BSON\Regex class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-regex.construct">MongoDB\BSON\Regex::__construct</a> — Construct a new Regex</li><li><a href="#mongodb-bson-regex.getflags">MongoDB\BSON\Regex::getFlags</a> — Returns the Regex's flags</li><li><a href="#mongodb-bson-regex.getpattern">MongoDB\BSON\Regex::getPattern</a> — Returns the Regex's pattern</li><li><a href="#mongodb-bson-regex.jsonserialize">MongoDB\BSON\Regex::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-regex.serialize">MongoDB\BSON\Regex::serialize</a> — Serialize a Regex</li><li><a href="#mongodb-bson-regex.tostring">MongoDB\BSON\Regex::__toString</a> — Returns the string representation of this Regex</li><li><a href="#mongodb-bson-regex.unserialize">MongoDB\BSON\Regex::unserialize</a> — Unserialize a Regex</li></ul></li><li><a href="#class.mongodb-bson-timestamp">MongoDB\BSON\Timestamp</a> — The MongoDB\BSON\Timestamp class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-timestamp.construct">MongoDB\BSON\Timestamp::__construct</a> — Construct a new Timestamp</li><li><a href="#mongodb-bson-timestamp.getincrement">MongoDB\BSON\Timestamp::getIncrement</a> — Returns the increment component of this Timestamp</li><li><a href="#mongodb-bson-timestamp.gettimestamp">MongoDB\BSON\Timestamp::getTimestamp</a> — Returns the timestamp component of this Timestamp</li><li><a href="#mongodb-bson-timestamp.jsonserialize">MongoDB\BSON\Timestamp::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-timestamp.serialize">MongoDB\BSON\Timestamp::serialize</a> — Serialize a Timestamp</li><li><a href="#mongodb-bson-timestamp.tostring">MongoDB\BSON\Timestamp::__toString</a> — Returns the string representation of this Timestamp</li><li><a href="#mongodb-bson-timestamp.unserialize">MongoDB\BSON\Timestamp::unserialize</a> — Unserialize a Timestamp</li></ul></li><li><a href="#class.mongodb-bson-utcdatetime">MongoDB\BSON\UTCDateTime</a> — The MongoDB\BSON\UTCDateTime class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-utcdatetime.construct">MongoDB\BSON\UTCDateTime::__construct</a> — Construct a new UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.jsonserialize">MongoDB\BSON\UTCDateTime::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-utcdatetime.serialize">MongoDB\BSON\UTCDateTime::serialize</a> — Serialize a UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.todatetime">MongoDB\BSON\UTCDateTime::toDateTime</a> — Returns the DateTime representation of this UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.tostring">MongoDB\BSON\UTCDateTime::__toString</a> — Returns the string representation of this UTCDateTime</li><li><a href="#mongodb-bson-utcdatetime.unserialize">MongoDB\BSON\UTCDateTime::unserialize</a> — Unserialize a UTCDateTime</li></ul></li><li><a href="#class.mongodb-bson-type">MongoDB\BSON\Type</a> — The MongoDB\BSON\Type interface</li><li><a href="#class.mongodb-bson-persistable">MongoDB\BSON\Persistable</a> — The MongoDB\BSON\Persistable interface</li><li><a href="#class.mongodb-bson-serializable">MongoDB\BSON\Serializable</a> — The MongoDB\BSON\Serializable interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-serializable.bsonserialize">MongoDB\BSON\Serializable::bsonSerialize</a> — Provides an array or document to serialize as BSON</li></ul></li><li><a href="#class.mongodb-bson-unserializable">MongoDB\BSON\Unserializable</a> — The MongoDB\BSON\Unserializable interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-unserializable.bsonunserialize">MongoDB\BSON\Unserializable::bsonUnserialize</a> — Constructs the object from a BSON array or document</li></ul></li><li><a href="#class.mongodb-bson-binaryinterface">MongoDB\BSON\BinaryInterface</a> — The MongoDB\BSON\BinaryInterface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-binaryinterface.getdata">MongoDB\BSON\BinaryInterface::getData</a> — Returns the BinaryInterface's data</li><li><a href="#mongodb-bson-binaryinterface.gettype">MongoDB\BSON\BinaryInterface::getType</a> — Returns the BinaryInterface's type</li><li><a href="#mongodb-bson-binaryinterface.tostring">MongoDB\BSON\BinaryInterface::__toString</a> — Returns the BinaryInterface's data</li></ul></li><li><a href="#class.mongodb-bson-decimal128interface">MongoDB\BSON\Decimal128Interface</a> — The MongoDB\BSON\Decimal128Interface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-decimal128interface.tostring">MongoDB\BSON\Decimal128Interface::__toString</a> — Returns the string representation of this Decimal128Interface</li></ul></li><li><a href="#class.mongodb-bson-javascriptinterface">MongoDB\BSON\JavascriptInterface</a> — The MongoDB\BSON\JavascriptInterface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-javascriptinterface.getcode">MongoDB\BSON\JavascriptInterface::getCode</a> — Returns the JavascriptInterface's code</li><li><a href="#mongodb-bson-javascriptinterface.getscope">MongoDB\BSON\JavascriptInterface::getScope</a> — Returns the JavascriptInterface's scope document</li><li><a href="#mongodb-bson-javascriptinterface.tostring">MongoDB\BSON\JavascriptInterface::__toString</a> — Returns the JavascriptInterface's code</li></ul></li><li><a href="#class.mongodb-bson-maxkeyinterface">MongoDB\BSON\MaxKeyInterface</a> — The MongoDB\BSON\MaxKeyInterface interface</li><li><a href="#class.mongodb-bson-minkeyinterface">MongoDB\BSON\MinKeyInterface</a> — The MongoDB\BSON\MinKeyInterface interface</li><li><a href="#class.mongodb-bson-objectidinterface">MongoDB\BSON\ObjectIdInterface</a> — The MongoDB\BSON\ObjectIdInterface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-objectidinterface.gettimestamp">MongoDB\BSON\ObjectIdInterface::getTimestamp</a> — Returns the timestamp component of this ObjectIdInterface</li><li><a href="#mongodb-bson-objectidinterface.tostring">MongoDB\BSON\ObjectIdInterface::__toString</a> — Returns the hexidecimal representation of this ObjectIdInterface</li></ul></li><li><a href="#class.mongodb-bson-regexinterface">MongoDB\BSON\RegexInterface</a> — The MongoDB\BSON\RegexInterface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-regexinterface.getflags">MongoDB\BSON\RegexInterface::getFlags</a> — Returns the RegexInterface's flags</li><li><a href="#mongodb-bson-regexinterface.getpattern">MongoDB\BSON\RegexInterface::getPattern</a> — Returns the RegexInterface's pattern</li><li><a href="#mongodb-bson-regexinterface.tostring">MongoDB\BSON\RegexInterface::__toString</a> — Returns the string representation of this RegexInterface</li></ul></li><li><a href="#class.mongodb-bson-timestampinterface">MongoDB\BSON\TimestampInterface</a> — The MongoDB\BSON\TimestampInterface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-timestampinterface.getincrement">MongoDB\BSON\TimestampInterface::getIncrement</a> — Returns the increment component of this TimestampInterface</li><li><a href="#mongodb-bson-timestampinterface.gettimestamp">MongoDB\BSON\TimestampInterface::getTimestamp</a> — Returns the timestamp component of this TimestampInterface</li><li><a href="#mongodb-bson-timestampinterface.tostring">MongoDB\BSON\TimestampInterface::__toString</a> — Returns the string representation of this TimestampInterface</li></ul></li><li><a href="#class.mongodb-bson-utcdatetimeinterface">MongoDB\BSON\UTCDateTimeInterface</a> — The MongoDB\BSON\UTCDateTimeInterface interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-utcdatetimeinterface.todatetime">MongoDB\BSON\UTCDateTimeInterface::toDateTime</a> — Returns the DateTime representation of this UTCDateTimeInterface</li><li><a href="#mongodb-bson-utcdatetimeinterface.tostring">MongoDB\BSON\UTCDateTimeInterface::__toString</a> — Returns the string representation of this UTCDateTimeInterface</li></ul></li><li><a href="#class.mongodb-bson-dbpointer">MongoDB\BSON\DBPointer</a> — The MongoDB\BSON\DBPointer class (deprecated)<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-dbpointer.construct">MongoDB\BSON\DBPointer::__construct</a> — Construct a new DBPointer (unused)</li><li><a href="#mongodb-bson-dbpointer.jsonserialize">MongoDB\BSON\DBPointer::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-dbpointer.serialize">MongoDB\BSON\DBPointer::serialize</a> — Serialize a DBPointer</li><li><a href="#mongodb-bson-dbpointer.tostring">MongoDB\BSON\DBPointer::__toString</a> — Returns an empty string</li><li><a href="#mongodb-bson-dbpointer.unserialize">MongoDB\BSON\DBPointer::unserialize</a> — Unserialize a DBPointer</li></ul></li><li><a href="#class.mongodb-bson-int64">MongoDB\BSON\Int64</a> — The MongoDB\BSON\Int64 class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-int64.construct">MongoDB\BSON\Int64::__construct</a> — Construct a new Int64 (unused)</li><li><a href="#mongodb-bson-int64.jsonserialize">MongoDB\BSON\Int64::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-int64.serialize">MongoDB\BSON\Int64::serialize</a> — Serialize an Int64</li><li><a href="#mongodb-bson-int64.tostring">MongoDB\BSON\Int64::__toString</a> — Returns the string representation of this Int64</li><li><a href="#mongodb-bson-int64.unserialize">MongoDB\BSON\Int64::unserialize</a> — Unserialize an Int64</li></ul></li><li><a href="#class.mongodb-bson-symbol">MongoDB\BSON\Symbol</a> — The MongoDB\BSON\Symbol class (deprecated)<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-symbol.construct">MongoDB\BSON\Symbol::__construct</a> — Construct a new Symbol (unused)</li><li><a href="#mongodb-bson-symbol.jsonserialize">MongoDB\BSON\Symbol::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-symbol.serialize">MongoDB\BSON\Symbol::serialize</a> — Serialize a Symbol</li><li><a href="#mongodb-bson-symbol.tostring">MongoDB\BSON\Symbol::__toString</a> — Returns the Symbol as a string</li><li><a href="#mongodb-bson-symbol.unserialize">MongoDB\BSON\Symbol::unserialize</a> — Unserialize a Symbol</li></ul></li><li><a href="#class.mongodb-bson-undefined">MongoDB\BSON\Undefined</a> — The MongoDB\BSON\Undefined class (deprecated)<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-bson-undefined.construct">MongoDB\BSON\Undefined::__construct</a> — Construct a new Undefined (unused)</li><li><a href="#mongodb-bson-undefined.jsonserialize">MongoDB\BSON\Undefined::jsonSerialize</a> — Returns a representation that can be converted to JSON</li><li><a href="#mongodb-bson-undefined.serialize">MongoDB\BSON\Undefined::serialize</a> — Serialize a Undefined</li><li><a href="#mongodb-bson-undefined.tostring">MongoDB\BSON\Undefined::__toString</a> — Returns an empty string</li><li><a href="#mongodb-bson-undefined.unserialize">MongoDB\BSON\Undefined::unserialize</a> — Unserialize a Undefined</li></ul></li></ul></div>
  <hr />
  
  
  
    
  
  
   <div id="mongodb.monitoring" class="book"><hr />
    <h1 class="title">Monitoring classes and subscriber functions</h1>
    
  
    <div id="ref.monitoring.functions" class="reference"><hr />
     <h1 class="title">Functions</h1>
     
   
  
  <div id="function.mongodb.driver.monitoring.addsubscriber" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\addSubscriber</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\addSubscriber</span> &mdash; <span class="dc-title">Registers a new monitoring event subscriber</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.driver.monitoring.addsubscriber-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\Driver\Monitoring\addSubscriber</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-subscriber" class="type MongoDB\Driver\Monitoring\Subscriber">MongoDB\Driver\Monitoring\Subscriber</a></span> <code class="parameter">$subscriber</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Registers a new monitoring event subscriber with the driver. Registered
     subscribers will be notified of monitoring events through specific methods.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      If the object is already registered, this function is a no-op.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.driver.monitoring.addsubscriber-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">subscriber</code> (<span class="type"><a href="#class.mongodb-driver-monitoring-subscriber" class="type MongoDB\Driver\Monitoring\Subscriber">MongoDB\Driver\Monitoring\Subscriber</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A monitoring event subscriber object to register.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.driver.monitoring.addsubscriber-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.driver.monitoring.addsubscriber-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.driver.monitoring.addsubscriber-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="interfacename"><a href="#class.mongodb-driver-monitoring-subscriber" class="interfacename">MongoDB\Driver\Monitoring\Subscriber</a></span></li>
     <li class="member"><span class="interfacename"><a href="#class.mongodb-driver-monitoring-commandsubscriber" class="interfacename">MongoDB\Driver\Monitoring\CommandSubscriber</a></span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.driver.monitoring.removesubscriber" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\removeSubscriber()</a> - Unregisters an existing monitoring event subscriber</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="function.mongodb.driver.monitoring.removesubscriber" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\removeSubscriber</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\removeSubscriber</span> &mdash; <span class="dc-title">Unregisters an existing monitoring event subscriber</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-function.mongodb.driver.monitoring.removesubscriber-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>MongoDB\Driver\Monitoring\removeSubscriber</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-subscriber" class="type MongoDB\Driver\Monitoring\Subscriber">MongoDB\Driver\Monitoring\Subscriber</a></span> <code class="parameter">$subscriber</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     Unregisters an existing monitoring event subscriber from the driver.
     Unregistered subscribers will no longer be notified of monitoring events.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      If the object is not registered, this function is a no-op.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-function.mongodb.driver.monitoring.removesubscriber-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">subscriber</code> (<span class="type"><a href="#class.mongodb-driver-monitoring-subscriber" class="type MongoDB\Driver\Monitoring\Subscriber">MongoDB\Driver\Monitoring\Subscriber</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        A monitoring event subscriber object to unregister.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-function.mongodb.driver.monitoring.removesubscriber-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-function.mongodb.driver.monitoring.removesubscriber-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-function.mongodb.driver.monitoring.removesubscriber-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="interfacename"><a href="#class.mongodb-driver-monitoring-subscriber" class="interfacename">MongoDB\Driver\Monitoring\Subscriber</a></span></li>
     <li class="member"><span class="interfacename"><a href="#class.mongodb-driver-monitoring-commandsubscriber" class="interfacename">MongoDB\Driver\Monitoring\CommandSubscriber</a></span></li>
     <li class="member"><span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\addSubscriber()</a> - Registers a new monitoring event subscriber</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
    <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#function.mongodb.driver.monitoring.addsubscriber">MongoDB\Driver\Monitoring\addSubscriber</a> — Registers a new monitoring event subscriber</li><li><a href="#function.mongodb.driver.monitoring.removesubscriber">MongoDB\Driver\Monitoring\removeSubscriber</a> — Unregisters an existing monitoring event subscriber</li></ul>
  </div>
  
  <hr />
  
  
    
   
  
  <div id="class.mongodb-driver-monitoring-commandfailedevent" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Monitoring\CommandFailedEvent class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandfailedevent.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Monitoring\CommandFailedEvent</strong>
      class encapsulates information about a failed command.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandfailedevent.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Monitoring\CommandFailedEvent</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getcommandname" class="methodname">getCommandName</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getdurationmicros" class="methodname">getDurationMicros</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.geterror" class="methodname">getError</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.exception" class="type Exception">Exception</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getoperationid" class="methodname">getOperationId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getreply" class="methodname">getReply</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getrequestid" class="methodname">getRequestId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getserver" class="methodname">getServer</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-monitoring-commandfailedevent.getcommandname" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getCommandName</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getCommandName</span> &mdash; <span class="dc-title">Returns the command name</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getcommandname-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandFailedEvent::getCommandName</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the command name (e.g. <code class="literal">&quot;find&quot;</code>,
     <code class="literal">&quot;aggregate&quot;</code>).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getcommandname-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getcommandname-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command name.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getcommandname-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getcommandname-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandfailedevent.getdurationmicros" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getDurationMicros</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getDurationMicros</span> &mdash; <span class="dc-title">Returns the command&#039;s duration in microseconds</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getdurationmicros-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandFailedEvent::getDurationMicros</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     The command&#039;s duration is a calculated value that includes the time to send
     the message and receive the reply from the server.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getdurationmicros-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getdurationmicros-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s duration in microseconds.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getdurationmicros-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getdurationmicros-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandfailedevent.geterror" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getError</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getError</span> &mdash; <span class="dc-title">Returns the Exception associated with the failed command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandfailedevent.geterror-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandFailedEvent::getError</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.exception" class="type Exception">Exception</a></span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandfailedevent.geterror-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandfailedevent.geterror-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.exception" class="classname">Exception</a> associated with the failed command.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandfailedevent.geterror-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandfailedevent.geterror-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandfailedevent.getoperationid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getOperationId</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getOperationId</span> &mdash; <span class="dc-title">Returns the command&#039;s operation ID</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getoperationid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandFailedEvent::getOperationId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     The operation ID is generated by the driver and may be used to link events
     together such as bulk write operations, which may have been split across
     several commands at the protocol level.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Since multiple commands may share the same operation ID, it is not reliable
      to use this value to associate event objects with each other. The request ID
      returned by
      <span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getrequestid" class="methodname">MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId()</a></span>
      should be used instead.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getoperationid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getoperationid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s operation ID.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getoperationid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getoperationid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getoperationid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandStartedEvent::getOperationId()</a> - Returns the command's operation ID</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getrequestid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId()</a> - Returns the command's request ID</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandfailedevent.getreply" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getReply</h1>
    <p class="verinfo">(mongodb &gt;=1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getReply</span> &mdash; <span class="dc-title">Returns the command reply document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getreply-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandFailedEvent::getReply</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
    <p class="para rdfs-comment">
     The reply document will be converted from BSON to PHP using the default
     <a href="#mongodb.persistence.deserialization" class="link">deserialization</a>
     rules (e.g. BSON documents will be converted to <span class="type"><span class="type stdClass">stdClass</span></span>).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getreply-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getreply-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command reply document as a <strong class="classname">stdClass</strong>
     object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getreply-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getreply-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandfailedevent.getrequestid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId</span> &mdash; <span class="dc-title">Returns the command&#039;s request ID</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getrequestid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     The request ID is generated by the driver and may be used to associate this
     <a href="#class.mongodb-driver-monitoring-commandfailedevent" class="classname">MongoDB\Driver\Monitoring\CommandFailedEvent</a> with a
     previous
     <a href="#class.mongodb-driver-monitoring-commandstartedevent" class="classname">MongoDB\Driver\Monitoring\CommandStartedEvent</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getrequestid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getrequestid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s request ID.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getrequestid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getrequestid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getrequestid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId()</a> - Returns the command's request ID</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandfailedevent.getserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getServer</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandFailedEvent::getServer</span> &mdash; <span class="dc-title">Returns the Server on which the command was executed</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandFailedEvent::getServer</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> on which the command
     was executed.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getserver-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> on which the command
     was executed.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandfailedevent.getserver-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getserver" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandStartedEvent::getServer()</a> - Returns the Server on which the command was executed</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-monitoring-commandfailedevent.getcommandname">MongoDB\Driver\Monitoring\CommandFailedEvent::getCommandName</a> — Returns the command name</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getdurationmicros">MongoDB\Driver\Monitoring\CommandFailedEvent::getDurationMicros</a> — Returns the command's duration in microseconds</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.geterror">MongoDB\Driver\Monitoring\CommandFailedEvent::getError</a> — Returns the Exception associated with the failed command</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getoperationid">MongoDB\Driver\Monitoring\CommandFailedEvent::getOperationId</a> — Returns the command's operation ID</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getreply">MongoDB\Driver\Monitoring\CommandFailedEvent::getReply</a> — Returns the command reply document</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getrequestid">MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId</a> — Returns the command's request ID</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getserver">MongoDB\Driver\Monitoring\CommandFailedEvent::getServer</a> — Returns the Server on which the command was executed</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-monitoring-commandstartedevent" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Monitoring\CommandStartedEvent class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandstartedevent.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Monitoring\CommandStartedEvent</strong>
      class encapsulates information about a started command.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandstartedevent.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Monitoring\CommandStartedEvent</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getcommand" class="methodname">getCommand</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getcommandname" class="methodname">getCommandName</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getdatabasename" class="methodname">getDatabaseName</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getoperationid" class="methodname">getOperationId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getrequestid" class="methodname">getRequestId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getserver" class="methodname">getServer</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-monitoring-commandstartedevent.getcommand" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommand</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommand</span> &mdash; <span class="dc-title">Returns the command document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommand-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandStartedEvent::getCommand</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
    <p class="para rdfs-comment">
     The reply document will be converted from BSON to PHP using the default
     <a href="#mongodb.persistence.deserialization" class="link">deserialization</a>
     rules (e.g. BSON documents will be converted to <span class="type"><span class="type stdClass">stdClass</span></span>).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommand-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommand-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command document as a <strong class="classname">stdClass</strong> object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommand-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommand-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandstartedevent.getcommandname" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommandName</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommandName</span> &mdash; <span class="dc-title">Returns the command name</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommandname-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandStartedEvent::getCommandName</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the command name (e.g. <code class="literal">&quot;find&quot;</code>,
     <code class="literal">&quot;aggregate&quot;</code>).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommandname-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommandname-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command name.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommandname-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getcommandname-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandstartedevent.getdatabasename" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getDatabaseName</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getDatabaseName</span> &mdash; <span class="dc-title">Returns the database on which the command was executed</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getdatabasename-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandStartedEvent::getDatabaseName</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getdatabasename-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getdatabasename-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the database on which the command was executed.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getdatabasename-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getdatabasename-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandstartedevent.getoperationid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getOperationId</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getOperationId</span> &mdash; <span class="dc-title">Returns the command&#039;s operation ID</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getoperationid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandStartedEvent::getOperationId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     The operation ID is generated by the driver and may be used to link events
     together such as bulk write operations, which may have been split across
     several commands at the protocol level.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Since multiple commands may share the same operation ID, it is not reliable
      to use this value to associate event objects with each other. The request ID
      returned by
      <span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getrequestid" class="methodname">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId()</a></span>
      should be used instead.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getoperationid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getoperationid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s operation ID.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getoperationid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getoperationid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getoperationid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandFailedEvent::getOperationId()</a> - Returns the command's operation ID</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getoperationid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandSucceededEvent::getOperationId()</a> - Returns the command's operation ID</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getrequestid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId()</a> - Returns the command's request ID</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandstartedevent.getrequestid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId</span> &mdash; <span class="dc-title">Returns the command&#039;s request ID</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getrequestid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     The request ID is generated by the driver and may be used to associate this
     <a href="#class.mongodb-driver-monitoring-commandstartedevent" class="classname">MongoDB\Driver\Monitoring\CommandStartedEvent</a> with a
     later
     <a href="#class.mongodb-driver-monitoring-commandfailedevent" class="classname">MongoDB\Driver\Monitoring\CommandFailedEvent</a> or
     <a href="#class.mongodb-driver-monitoring-commandsucceededevent" class="classname">MongoDB\Driver\Monitoring\CommandSucceededEvent</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getrequestid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getrequestid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s request ID.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getrequestid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getrequestid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getrequestid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId()</a> - Returns the command's request ID</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getrequestid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId()</a> - Returns the command's request ID</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandstartedevent.getserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getServer</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandStartedEvent::getServer</span> &mdash; <span class="dc-title">Returns the Server on which the command was executed</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandStartedEvent::getServer</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> on which the command
     was executed.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getserver-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> on which the command
     was executed.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandstartedevent.getserver-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandfailedevent.getserver" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandFailedEvent::getServer()</a> - Returns the Server on which the command was executed</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getserver" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandSucceededEvent::getServer()</a> - Returns the Server on which the command was executed</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-monitoring-commandstartedevent.getcommand">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommand</a> — Returns the command document</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getcommandname">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommandName</a> — Returns the command name</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getdatabasename">MongoDB\Driver\Monitoring\CommandStartedEvent::getDatabaseName</a> — Returns the database on which the command was executed</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getoperationid">MongoDB\Driver\Monitoring\CommandStartedEvent::getOperationId</a> — Returns the command's operation ID</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getrequestid">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId</a> — Returns the command's request ID</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getserver">MongoDB\Driver\Monitoring\CommandStartedEvent::getServer</a> — Returns the Server on which the command was executed</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-monitoring-commandsucceededevent" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Monitoring\CommandSucceededEvent class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandsucceededevent.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      The <strong class="classname">MongoDB\Driver\Monitoring\CommandSucceededEvent</strong>
      class encapsulates information about a successful command.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandsucceededevent.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Monitoring\CommandSucceededEvent</strong>
       </span>
       {</div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getcommandname" class="methodname">getCommandName</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getdurationmicros" class="methodname">getDurationMicros</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getoperationid" class="methodname">getOperationId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getreply" class="methodname">getReply</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getrequestid" class="methodname">getRequestId</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getserver" class="methodname">getServer</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
   
   
  
  <div id="mongodb-driver-monitoring-commandsucceededevent.getcommandname" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getCommandName</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getCommandName</span> &mdash; <span class="dc-title">Returns the command name</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getcommandname-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSucceededEvent::getCommandName</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     Returns the command name (e.g. <code class="literal">&quot;find&quot;</code>,
     <code class="literal">&quot;aggregate&quot;</code>).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getcommandname-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getcommandname-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command name.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getcommandname-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getcommandname-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandsucceededevent.getdurationmicros" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getDurationMicros</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getDurationMicros</span> &mdash; <span class="dc-title">Returns the command&#039;s duration in microseconds</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getdurationmicros-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSucceededEvent::getDurationMicros</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     The command&#039;s duration is a calculated value that includes the time to send
     the message and receive the reply from the server.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getdurationmicros-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getdurationmicros-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s duration in microseconds.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getdurationmicros-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getdurationmicros-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandsucceededevent.getoperationid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getOperationId</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getOperationId</span> &mdash; <span class="dc-title">Returns the command&#039;s operation ID</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getoperationid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSucceededEvent::getOperationId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     The operation ID is generated by the driver and may be used to link events
     together such as bulk write operations, which may have been split across
     several commands at the protocol level.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      Since multiple commands may share the same operation ID, it is not reliable
      to use this value to associate event objects with each other. The request ID
      returned by
      <span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getrequestid" class="methodname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId()</a></span>
      should be used instead.
     </span>
    </p></blockquote>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getoperationid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getoperationid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s operation ID.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getoperationid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getoperationid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getoperationid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandStartedEvent::getOperationId()</a> - Returns the command's operation ID</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandsucceededevent.getrequestid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId()</a> - Returns the command's request ID</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandsucceededevent.getreply" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getReply</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getReply</span> &mdash; <span class="dc-title">Returns the command reply document</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getreply-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSucceededEvent::getReply</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
    <p class="para rdfs-comment">
     The reply document will be converted from BSON to PHP using the default
     <a href="#mongodb.persistence.deserialization" class="link">deserialization</a>
     rules (e.g. BSON documents will be converted to <span class="type"><span class="type stdClass">stdClass</span></span>).
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getreply-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getreply-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command reply document as a <strong class="classname">stdClass</strong>
     object.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getreply-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getreply-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
     <li class="member"><a href="#mongodb.persistence" class="xref">Persisting Data</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandsucceededevent.getrequestid" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId</span> &mdash; <span class="dc-title">Returns the command&#039;s request ID</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getrequestid-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     The request ID is generated by the driver and may be used to associate this
     <a href="#class.mongodb-driver-monitoring-commandsucceededevent" class="classname">MongoDB\Driver\Monitoring\CommandSucceededEvent</a> with a
     previous
     <a href="#class.mongodb-driver-monitoring-commandstartedevent" class="classname">MongoDB\Driver\Monitoring\CommandStartedEvent</a>.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getrequestid-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getrequestid-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the command&#039;s request ID.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getrequestid-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getrequestid-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getrequestid" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId()</a> - Returns the command's request ID</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandsucceededevent.getserver" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getServer</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getServer</span> &mdash; <span class="dc-title">Returns the Server on which the command was executed</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getserver-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSucceededEvent::getServer</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-server" class="type MongoDB\Driver\Server">MongoDB\Driver\Server</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> on which the command
     was executed.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getserver-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getserver-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the <a href="#class.mongodb-driver-server" class="classname">MongoDB\Driver\Server</a> on which the command
     was executed.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getserver-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsucceededevent.getserver-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="methodname"><a href="#mongodb-driver-monitoring-commandstartedevent.getserver" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\CommandStartedEvent::getServer()</a> - Returns the Server on which the command was executed</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-cursor.getserver" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Cursor::getServer()</a> - Returns the server associated with this cursor</span></li>
     <li class="member"><span class="methodname"><a href="#mongodb-driver-writeresult.getserver" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\WriteResult::getServer()</a> - Returns the server associated with this write result</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getcommandname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getCommandName</a> — Returns the command name</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getdurationmicros">MongoDB\Driver\Monitoring\CommandSucceededEvent::getDurationMicros</a> — Returns the command's duration in microseconds</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getoperationid">MongoDB\Driver\Monitoring\CommandSucceededEvent::getOperationId</a> — Returns the command's operation ID</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getreply">MongoDB\Driver\Monitoring\CommandSucceededEvent::getReply</a> — Returns the command reply document</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getrequestid">MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId</a> — Returns the command's request ID</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getserver">MongoDB\Driver\Monitoring\CommandSucceededEvent::getServer</a> — Returns the Server on which the command was executed</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-monitoring-commandsubscriber" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Monitoring\CommandSubscriber interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandsubscriber.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Classes may implement this interface to register an event subscriber that is
      notified for each started, successful, and failed command event. See
      <a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a> for additional information.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-monitoring-commandsubscriber.synopsis">
     <h2 class="title">Interface synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Monitoring\CommandSubscriber</strong>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-monitoring-subscriber" class="interfacename">MongoDB\Driver\Monitoring\Subscriber</a></span>
       </span>
       {</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsubscriber.commandfailed" class="methodname">commandFailed</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-commandfailedevent" class="type MongoDB\Driver\Monitoring\CommandFailedEvent">MongoDB\Driver\Monitoring\CommandFailedEvent</a></span> <code class="parameter">$event</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsubscriber.commandstarted" class="methodname">commandStarted</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-commandstartedevent" class="type MongoDB\Driver\Monitoring\CommandStartedEvent">MongoDB\Driver\Monitoring\CommandStartedEvent</a></span> <code class="parameter">$event</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-monitoring-commandsubscriber.commandsucceeded" class="methodname">commandSucceeded</a></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-commandsucceededevent" class="type MongoDB\Driver\Monitoring\CommandSucceededEvent">MongoDB\Driver\Monitoring\CommandSucceededEvent</a></span> <code class="parameter">$event</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
     }</div>
  
  
    </div>
  
   </div>
  
     
   
  
  <div id="mongodb-driver-monitoring-commandsubscriber.commandfailed" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSubscriber::commandFailed</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSubscriber::commandFailed</span> &mdash; <span class="dc-title">Notification method for a failed command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandfailed-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSubscriber::commandFailed</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-commandfailedevent" class="type MongoDB\Driver\Monitoring\CommandFailedEvent">MongoDB\Driver\Monitoring\CommandFailedEvent</a></span> <code class="parameter">$event</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     If the subscriber has been registered with
     <span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function">MongoDB\Driver\Monitoring\addSubscriber()</a></span>, the driver will
     call this method when a command has failed.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandfailed-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">event</code> (<span class="type"><a href="#class.mongodb-driver-monitoring-commandfailedevent" class="type MongoDB\Driver\Monitoring\CommandFailedEvent">MongoDB\Driver\Monitoring\CommandFailedEvent</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        An event object encapsulating information about the failed command.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandfailed-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandfailed-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandfailed-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-monitoring-commandfailedevent" class="classname">MongoDB\Driver\Monitoring\CommandFailedEvent</a></li>
     <li class="member"><span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\addSubscriber()</a> - Registers a new monitoring event subscriber</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandsubscriber.commandstarted" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSubscriber::commandStarted</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSubscriber::commandStarted</span> &mdash; <span class="dc-title">Notification method for a started command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandstarted-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSubscriber::commandStarted</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-commandstartedevent" class="type MongoDB\Driver\Monitoring\CommandStartedEvent">MongoDB\Driver\Monitoring\CommandStartedEvent</a></span> <code class="parameter">$event</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     If the subscriber has been registered with
     <span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function">MongoDB\Driver\Monitoring\addSubscriber()</a></span>, the driver will
     call this method when a command has started.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandstarted-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">event</code> (<span class="type"><a href="#class.mongodb-driver-monitoring-commandstartedevent" class="type MongoDB\Driver\Monitoring\CommandStartedEvent">MongoDB\Driver\Monitoring\CommandStartedEvent</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        An event object encapsulating information about the started command.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandstarted-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandstarted-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandstarted-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-monitoring-commandstartedevent" class="classname">MongoDB\Driver\Monitoring\CommandStartedEvent</a></li>
     <li class="member"><span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\addSubscriber()</a> - Registers a new monitoring event subscriber</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
   
  
  <div id="mongodb-driver-monitoring-commandsubscriber.commandsucceeded" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Monitoring\CommandSubscriber::commandSucceeded</h1>
    <p class="verinfo">(mongodb &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Monitoring\CommandSubscriber::commandSucceeded</span> &mdash; <span class="dc-title">Notification method for a successful command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandsucceeded-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Monitoring\CommandSubscriber::commandSucceeded</strong></span>
      ( <span class="methodparam"><span class="type"><a href="#class.mongodb-driver-monitoring-commandsucceededevent" class="type MongoDB\Driver\Monitoring\CommandSucceededEvent">MongoDB\Driver\Monitoring\CommandSucceededEvent</a></span> <code class="parameter">$event</code></span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
    <p class="para rdfs-comment">
     If the subscriber has been registered with
     <span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function">MongoDB\Driver\Monitoring\addSubscriber()</a></span>, the driver will
     call this method when a command has succeeded.
    </p>
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandsucceeded-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">event</code> (<span class="type"><a href="#class.mongodb-driver-monitoring-commandsucceededevent" class="type MongoDB\Driver\Monitoring\CommandSucceededEvent">MongoDB\Driver\Monitoring\CommandSucceededEvent</a></span>)</dt>
  
      <dd>
  
       <p class="para">
        An event object encapsulating information about the successful command.
       </p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandsucceeded-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     No value is returned.
    </p>
   </div>
  
  
   <div class="refsect1 errors" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandsucceeded-errors">
    <h3 class="title">Errors/Exceptions</h3>
    <ul class="simplelist">
     <li class="member">Throws <a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> on argument parsing errors.</li>
    </ul>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-monitoring-commandsubscriber.commandsucceeded-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-monitoring-commandsucceededevent" class="classname">MongoDB\Driver\Monitoring\CommandSucceededEvent</a></li>
     <li class="member"><span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Monitoring\addSubscriber()</a> - Registers a new monitoring event subscriber</span></li>
     <li class="member"><a href="#mongodb.tutorial.apm" class="xref">Application Performance Monitoring (APM)</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-monitoring-commandsubscriber.commandfailed">MongoDB\Driver\Monitoring\CommandSubscriber::commandFailed</a> — Notification method for a failed command</li><li><a href="#mongodb-driver-monitoring-commandsubscriber.commandstarted">MongoDB\Driver\Monitoring\CommandSubscriber::commandStarted</a> — Notification method for a started command</li><li><a href="#mongodb-driver-monitoring-commandsubscriber.commandsucceeded">MongoDB\Driver\Monitoring\CommandSubscriber::commandSucceeded</a> — Notification method for a successful command</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-monitoring-subscriber" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Monitoring\Subscriber interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;=1.3.0)</p>
  
  
    <div class="section" id="mongodb-driver-monitoring-subscriber.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Base interface for event subscribers. This is used for type-hinting
      <span class="function"><a href="#function.mongodb.driver.monitoring.addsubscriber" class="function">MongoDB\Driver\Monitoring\addSubscriber()</a></span> and
      <span class="function"><a href="#function.mongodb.driver.monitoring.removesubscriber" class="function">MongoDB\Driver\Monitoring\removeSubscriber()</a></span> and should
      not be implemented directly.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-monitoring-subscriber.synopsis">
     <h2 class="title">Interface synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Monitoring\Subscriber</strong>
       </span>
       {</div>
  
  
     }</div>
  
  
     <p class="para">
      This interface has no methods. Its only purpose is to be the base interface
      for all event subscribers.
     </p>
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
   <ul class="chunklist chunklist_book"><li><a href="#ref.monitoring.functions">Functions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#function.mongodb.driver.monitoring.addsubscriber">MongoDB\Driver\Monitoring\addSubscriber</a> — Registers a new monitoring event subscriber</li><li><a href="#function.mongodb.driver.monitoring.removesubscriber">MongoDB\Driver\Monitoring\removeSubscriber</a> — Unregisters an existing monitoring event subscriber</li></ul></li><li><a href="#class.mongodb-driver-monitoring-commandfailedevent">MongoDB\Driver\Monitoring\CommandFailedEvent</a> — The MongoDB\Driver\Monitoring\CommandFailedEvent class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-monitoring-commandfailedevent.getcommandname">MongoDB\Driver\Monitoring\CommandFailedEvent::getCommandName</a> — Returns the command name</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getdurationmicros">MongoDB\Driver\Monitoring\CommandFailedEvent::getDurationMicros</a> — Returns the command's duration in microseconds</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.geterror">MongoDB\Driver\Monitoring\CommandFailedEvent::getError</a> — Returns the Exception associated with the failed command</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getoperationid">MongoDB\Driver\Monitoring\CommandFailedEvent::getOperationId</a> — Returns the command's operation ID</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getreply">MongoDB\Driver\Monitoring\CommandFailedEvent::getReply</a> — Returns the command reply document</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getrequestid">MongoDB\Driver\Monitoring\CommandFailedEvent::getRequestId</a> — Returns the command's request ID</li><li><a href="#mongodb-driver-monitoring-commandfailedevent.getserver">MongoDB\Driver\Monitoring\CommandFailedEvent::getServer</a> — Returns the Server on which the command was executed</li></ul></li><li><a href="#class.mongodb-driver-monitoring-commandstartedevent">MongoDB\Driver\Monitoring\CommandStartedEvent</a> — The MongoDB\Driver\Monitoring\CommandStartedEvent class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-monitoring-commandstartedevent.getcommand">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommand</a> — Returns the command document</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getcommandname">MongoDB\Driver\Monitoring\CommandStartedEvent::getCommandName</a> — Returns the command name</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getdatabasename">MongoDB\Driver\Monitoring\CommandStartedEvent::getDatabaseName</a> — Returns the database on which the command was executed</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getoperationid">MongoDB\Driver\Monitoring\CommandStartedEvent::getOperationId</a> — Returns the command's operation ID</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getrequestid">MongoDB\Driver\Monitoring\CommandStartedEvent::getRequestId</a> — Returns the command's request ID</li><li><a href="#mongodb-driver-monitoring-commandstartedevent.getserver">MongoDB\Driver\Monitoring\CommandStartedEvent::getServer</a> — Returns the Server on which the command was executed</li></ul></li><li><a href="#class.mongodb-driver-monitoring-commandsucceededevent">MongoDB\Driver\Monitoring\CommandSucceededEvent</a> — The MongoDB\Driver\Monitoring\CommandSucceededEvent class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getcommandname">MongoDB\Driver\Monitoring\CommandSucceededEvent::getCommandName</a> — Returns the command name</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getdurationmicros">MongoDB\Driver\Monitoring\CommandSucceededEvent::getDurationMicros</a> — Returns the command's duration in microseconds</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getoperationid">MongoDB\Driver\Monitoring\CommandSucceededEvent::getOperationId</a> — Returns the command's operation ID</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getreply">MongoDB\Driver\Monitoring\CommandSucceededEvent::getReply</a> — Returns the command reply document</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getrequestid">MongoDB\Driver\Monitoring\CommandSucceededEvent::getRequestId</a> — Returns the command's request ID</li><li><a href="#mongodb-driver-monitoring-commandsucceededevent.getserver">MongoDB\Driver\Monitoring\CommandSucceededEvent::getServer</a> — Returns the Server on which the command was executed</li></ul></li><li><a href="#class.mongodb-driver-monitoring-commandsubscriber">MongoDB\Driver\Monitoring\CommandSubscriber</a> — The MongoDB\Driver\Monitoring\CommandSubscriber interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-monitoring-commandsubscriber.commandfailed">MongoDB\Driver\Monitoring\CommandSubscriber::commandFailed</a> — Notification method for a failed command</li><li><a href="#mongodb-driver-monitoring-commandsubscriber.commandstarted">MongoDB\Driver\Monitoring\CommandSubscriber::commandStarted</a> — Notification method for a started command</li><li><a href="#mongodb-driver-monitoring-commandsubscriber.commandsucceeded">MongoDB\Driver\Monitoring\CommandSubscriber::commandSucceeded</a> — Notification method for a successful command</li></ul></li><li><a href="#class.mongodb-driver-monitoring-subscriber">MongoDB\Driver\Monitoring\Subscriber</a> — The MongoDB\Driver\Monitoring\Subscriber interface</li></ul></div>
  <hr />
  
  
  
    
  
  
   <div id="mongodb.exceptions" class="book"><hr />
    
    <h1 class="title">Exception classes</h1>
  
    
   
  
  <div id="class.mongodb-driver-exception-authenticationexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\AuthenticationException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-authenticationexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when the driver fails to authenticate with the server.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-authenticationexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\AuthenticationException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-bulkwriteexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\BulkWriteException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-bulkwriteexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when a bulk write operation fails.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-bulkwriteexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\BulkWriteException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-writeexception" class="classname">MongoDB\Driver\Exception\WriteException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span>
       <var class="varname">writeResult</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeexception.getwriteresult" class="methodname">MongoDB\Driver\Exception\WriteException::getWriteResult</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-commandexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\CommandException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.5.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-commandexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when a command fails.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-commandexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\CommandException</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-serverexception" class="classname">MongoDB\Driver\Exception\ServerException</a>
       </span>
       
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">object</span>
       <var class="varname">resultDocument</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-commandexception.getresultdocument" class="methodname">getResultDocument</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
  
  
    <div class="section" id="mongodb-driver-exception-commandexception.props">
     <h2 class="title">Properties</h2>
     <dl>
  
      
       <dt id="mongodb-driver-exception-commandexception.props.resultdocument"><var class="varname">resultDocument</var></dt>
  
       <dd>
  
        <p class="para">
         The result document associated with the failed command.
        </p>
       </dd>
  
      
     </dl>
  
    </div>
  
  
   </div>
  
   
  
  
  <div id="mongodb-driver-commandexception.getresultdocument" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Exception\CommandException::getResultDocument</h1>
    <p class="verinfo">(mongodb &gt;= 1.5.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Exception\CommandException::getResultDocument</span> &mdash; <span class="dc-title">Returns the result document for the failed command</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-commandexception.getresultdocument-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Exception\CommandException::getResultDocument</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">object</span></div>
  
    <p class="para rdfs-comment">
     Returns the result document for the failed command.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-commandexception.getresultdocument-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-commandexception.getresultdocument-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The result document for the failed command.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-commandexception.getresultdocument-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executecommand" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-commandexception.getresultdocument">MongoDB\Driver\Exception\CommandException::getResultDocument</a> — Returns the result document for the failed command</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-connectionexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\ConnectionException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-connectionexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Base class for exceptions thrown when the driver fails to establish a
      database connection.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-connectionexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\ConnectionException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-connectiontimeoutexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\ConnectionTimeoutException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-connectiontimeoutexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when the driver fails to establish a database connection within a
      specified time limit
      (<a href="#mongodb-driver-manager.construct-urioptions" class="link">connectTimeoutMS</a>)
      or server selection fails
      (<a href="#mongodb-driver-manager.construct-urioptions" class="link">serverSelectionTimeoutMS</a>).
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-connectiontimeoutexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\ConnectionTimeoutException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-encryptionexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\EncryptionException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.7.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-encryptionexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Base class for exceptions thrown during client-side encryption.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-encryptionexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\EncryptionException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-exception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\Exception interface</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-exception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Common interface for all driver exceptions. This may be used to catch only
      exceptions originating from the driver itself.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-exception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\Exception</strong>
       </span>
       {</div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-executiontimeoutexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\ExecutionTimeoutException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-executiontimeoutexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when a query or command fails to complete within a specified time
      limit (e.g.
      <a href="https://docs.mongodb.com/manual/tutorial/terminate-running-operations/#maxtimems" class="link external">&raquo;&nbsp;maxTimeMS</a>).
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-executiontimeoutexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\ExecutionTimeoutException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-serverexception" class="classname">MongoDB\Driver\Exception\ServerException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.5.0</td>
          <td>
           <p class="para">
            This class now extends
            <a href="#class.mongodb-driver-exception-serverexception" class="classname">MongoDB\Driver\Exception\ServerException</a>
            instead of
            <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a>.
           </p>
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-invalidargumentexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\InvalidArgumentException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-invalidargumentexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when a driver method is given invalid arguments (e.g. invalid option
      types).
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-invalidargumentexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\InvalidArgumentException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.invalidargumentexception" class="classname">InvalidArgumentException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-logicexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\LogicException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-logicexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when the driver is incorrectly used (e.g. rewinding a cursor).
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-logicexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\LogicException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.logicexception" class="classname">LogicException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-runtimeexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\RuntimeException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-runtimeexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when the driver encounters a runtime error (e.g. internal error from
      <a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a>).
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-runtimeexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\RuntimeException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.runtimeexception" class="classname">RuntimeException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-runtimeexception.props">
     <h2 class="title">Properties</h2>
     <dl>
  
      
       <dt id="mongodb-driver-exception-runtimeexception.props.errorlabels"><var class="varname">errorLabels</var></dt>
  
       <dd>
  
        <p class="para">
         Contains an array of error labels to go with an exception. For example,
         error labels can be used to detect whether a transaction can be retried
         safely if the <code class="literal">TransientTransactionError</code> label is
         present. The existence of a specific error label should be tested for
         with the
         <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel()</a></span>,
         instead of interpreting this <code class="literal">errorLabels</code> property
         manually.
        </p>
       </dd>
  
      
     </dl>
  
    </div>
  
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.6.0</td>
          <td>
           <p class="para">
            The
            <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel()</a></span>
            method and
            <a href="#mongodb-driver-exception-runtimeexception.props.errorlabels" class="link">MongoDB\Driver\Exception\RuntimeException::errorLabels</a>
            property have been added.
           </p>
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-runtimeexception.haserrorlabel" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</h1>
    <p class="verinfo">(mongodb &gt;= 1.6.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</span> &mdash; <span class="dc-title">Returns whether an error label is associated with an exception</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-runtimeexception.haserrorlabel-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     Returns whether the <code class="parameter">errorLabel</code> has been set for this
     exception. Error labels are set by either the server or the driver to
     indicated specific situations on which you might want to decide on how you
     want to handle a specific exception. A common situation might be to find
     out whether you can safely retry a transaction that failed due to a
     transient error (like a networking issue, or a transaction conflict).
     Examples of error labels are <code class="literal">TransientTransactionError</code>
     and <code class="literal">UnknownTransactionCommitResult</code>.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-runtimeexception.haserrorlabel-parameters">
    <h3 class="title">Parameters</h3>
    <dl>
  
     
      <dt>
  <code class="parameter">errorLabel</code></dt>
  
      <dd>
  
       <p class="para">The name of the <code class="literal">errorLabel</code> to test for.</p>
      </dd>
  
     
    </dl>
  
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-runtimeexception.haserrorlabel-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Whether the given <code class="literal">errorLabel</code> is associated with this
     exception.
    </p>
   </div>
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-runtimeexception.haserrorlabel-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><span class="function"><a href="#mongodb-driver-session.committransaction" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Session::commitTransaction()</a> - Commits a transaction</span></li>
     <li class="member"><a href="https://docs.mongodb.com/manual/core/transactions/" class="link external">&raquo;&nbsp;MongoDB documentation on transactions</a></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-runtimeexception.haserrorlabel">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a> — Returns whether an error label is associated with an exception</li></ul>
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-serverexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\ServerException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.5.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-serverexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Base class for exceptions thrown by the server. The code of this exception and its subclasses will correspond to the original error code from the server.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-serverexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\ServerException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-sslconnectionexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\SSLConnectionException class (deprecated)</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
   <div class="warning"><strong class="warning">Warning</strong>
    <p class="simpara">
     This exception class is deprecated and may be removed in a future major version. The driver has never thrown this exception.
    </p>
   </div>
  
  
    <div class="section" id="mongodb-driver-exception-sslconnectionexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when the driver fails to establish an SSL connection with the server.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-sslconnectionexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="modifier">final</span>
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\SSLConnectionException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-unexpectedvalueexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\UnexpectedValueException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-unexpectedvalueexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Thrown when the driver encounters an unexpected value (e.g. during BSON
      serialization or deserialization).
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-unexpectedvalueexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <strong class="classname">MongoDB\Driver\Exception\UnexpectedValueException</strong>
       </span>
  
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.unexpectedvalueexception" class="classname">UnexpectedValueException</a>
       </span>
  
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
   </div>
  
  </div>
  
  <hr />
  
  
  
  
    
   
  
  <div id="class.mongodb-driver-exception-writeexception" class="reference"><hr />
  
   <h1 class="title">The MongoDB\Driver\Exception\WriteException class</h1>
   
  
   <div class="partintro"><p class="verinfo">(mongodb &gt;= 1.0.0)</p>
  
  
    <div class="section" id="mongodb-driver-exception-writeexception.intro">
     <h2 class="title">Introduction</h2>
     <p class="para">
      Base class for exceptions thrown by a failed write operation. The exception
      encapsulates a <a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a> object.
     </p>
    </div>
  
  
    <div class="section" id="mongodb-driver-exception-writeexception.synopsis">
     <h2 class="title">Class synopsis</h2>
  
  
     <div class="classsynopsis">
      <div class="ooclass"></div>
  
  
      <div class="classsynopsisinfo">
       <span class="ooclass">
        <span class="modifier">abstract</span>
        <strong class="classname">MongoDB\Driver\Exception\WriteException</strong>
       </span>
       
       <span class="ooclass">
        <span class="modifier">extends</span>
        <a href="#class.mongodb-driver-exception-serverexception" class="classname">MongoDB\Driver\Exception\ServerException</a>
       </span>
       
       <span class="oointerface">implements 
        <span class="interfacename"><a href="#class.mongodb-driver-exception-exception" class="interfacename">MongoDB\Driver\Exception\Exception</a></span>
       </span>
       {</div>
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span>
       <var class="varname">writeResult</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited properties */</div>
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type"><span class="type array|null">array|null</span></span>
       <var class="varname">errorLabels</var>
      ;</div>
  
      
      <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">message</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">code</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">string</span>
       <var class="varname">file</var>
      ;</div>
  <div class="fieldsynopsis">
       <span class="modifier">protected</span>
       <span class="type">int</span>
       <var class="varname">line</var>
      ;</div>
  
  
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-writeexception.getwriteresult" class="methodname">getWriteResult</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span></div>
  
      
      <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#mongodb-driver-runtimeexception.haserrorlabel" class="methodname">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$errorLabel</code></span>
     ) : <span class="type">bool</span></div>
  
      
      <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getmessage" class="methodname">Exception::getMessage</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getprevious" class="methodname">Exception::getPrevious</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getcode" class="methodname">Exception::getCode</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getfile" class="methodname">Exception::getFile</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.getline" class="methodname">Exception::getLine</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">int</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettrace" class="methodname">Exception::getTrace</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">array</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><a href="#exception.gettraceasstring" class="methodname">Exception::getTraceAsString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">public</span>  <span class="methodname"><a href="#exception.tostring" class="methodname">Exception::__toString</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">private</span> <span class="methodname"><a href="#exception.clone" class="methodname">Exception::__clone</a></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><span class="type void">void</span></span></div>
  
  
     }</div>
  
  
    </div>
  
    
  
    <div class="section" id="mongodb-driver-exception-writeexception.props">
     <h2 class="title">Properties</h2>
     <dl>
  
      
       <dt id="mongodb-driver-exception-writeexception.props.writeresult"><var class="varname">writeResult</var></dt>
  
       <dd>
  
        <p class="para">
         The <a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a> associated with
         the failed write operation.
        </p>
       </dd>
  
      
     </dl>
  
    </div>
  
  
    <div class="section">
     <h2 class="title">Changelog</h2>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
  
        </thead>
  
        <tbody class="tbody">
         <tr>
          <td>1.5.0</td>
          <td>
           <p class="para">
            This class now extends
            <a href="#class.mongodb-driver-exception-serverexception" class="classname">MongoDB\Driver\Exception\ServerException</a>
            instead of
            <a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a>.
           </p>
          </td>
         </tr>
  
        </tbody>
       
      </table>
  
     </p>
    </div>
  
   </div>
  
   
  
  
  <div id="mongodb-driver-writeexception.getwriteresult" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">MongoDB\Driver\Exception\WriteException::getWriteResult</h1>
    <p class="verinfo">(mongodb &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Exception\WriteException::getWriteResult</span> &mdash; <span class="dc-title">Returns the WriteResult for the failed write operation</span></p>
  
   </div>
  
   <div class="refsect1 description" id="refsect1-mongodb-driver-writeexception.getwriteresult-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Exception\WriteException::getWriteResult</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type"><a href="#class.mongodb-driver-writeresult" class="type MongoDB\Driver\WriteResult">MongoDB\Driver\WriteResult</a></span></div>
  
    <p class="para rdfs-comment">
     Returns the <a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a> for the failed
     write operation. The
     <span class="function"><a href="#mongodb-driver-writeresult.getwriteerrors" class="function">MongoDB\Driver\WriteResult::getWriteErrors()</a></span> and
     <span class="function"><a href="#mongodb-driver-writeresult.getwriteconcernerror" class="function">MongoDB\Driver\WriteResult::getWriteConcernError()</a></span> methods
     may be used to get more details about the failure.
    </p>
  
   </div>
  
  
   <div class="refsect1 parameters" id="refsect1-mongodb-driver-writeexception.getwriteresult-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">This function has no parameters.</p>
   </div>
  
  
   <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-writeexception.getwriteresult-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The <a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a> for the failed write
     operation.
    </p>
   </div>
  
  
  
   <div class="refsect1 examples" id="refsect1-mongodb-driver-writeexception.getwriteresult-examples">
    <h3 class="title">Examples</h3>
    <div class="example" id="example-1839">
     <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\Exception\WriteException::getWriteResult()</strong></span> example</strong></p>
     <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">'mongodb://localhost'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$bulk&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">BulkWrite</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">([</span><span style="color: #DD0000">'_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWrite</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.collection'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">WriteException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$writeResult&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteResult</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$writeConcernError&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$writeResult</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteConcernError</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$writeConcernError</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$writeErrors&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$writeResult</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWriteErrors</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$writeErrors</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
     </div>
  
     <div class="example-contents"><p>The above example will output
  something similar to:</p></div>
     <div class="example-contents screen">
  <div class="cdata"><pre>
  array(1) {
    [0]=&gt;
    object(MongoDB\Driver\WriteError)#5 (4) {
      [&quot;message&quot;]=&gt;
      string(70) &quot;E11000 duplicate key error index: db.collection.$_id_ dup key: { : 1 }&quot;
      [&quot;code&quot;]=&gt;
      int(11000)
      [&quot;index&quot;]=&gt;
      int(1)
      [&quot;info&quot;]=&gt;
      NULL
    }
  }
  </pre></div>
     </div>
    </div>
   </div>
  
  
  
   <div class="refsect1 seealso" id="refsect1-mongodb-driver-writeexception.getwriteresult-seealso">
    <h3 class="title">See Also</h3>
    <ul class="simplelist">
     <li class="member"><a href="#class.mongodb-driver-writeresult" class="classname">MongoDB\Driver\WriteResult</a></li>
     <li class="member"><span class="function"><a href="#mongodb-driver-manager.executebulkwrite" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeBulkWrite()</a> - Execute one or more write operations</span></li>
    </ul>
   </div>
  
  
  </div>
  <hr />
  
  
  
  
  
  
  <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#mongodb-driver-writeexception.getwriteresult">MongoDB\Driver\Exception\WriteException::getWriteResult</a> — Returns the WriteResult for the failed write operation</li></ul>
  </div>
  
  <hr />
  
  
  
  
  
    <div id="mongodb.exceptions.tree" class="article"><hr />
     
     <h1>MongoDB Exception Class Tree</h1>
  
  
     <p class="para">
      The class hierarchy for MongoDB exceptions is modeled after that of the
      <a href="#spl.exceptions" class="link">SPL Exceptions</a>. Base classes extend
      their SPL counterpart and all exception classes in the extension implement
      the <a href="#class.mongodb-driver-exception-exception" class="classname">MongoDB\Driver\Exception\Exception</a> interface.
     </p>
  
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-logicexception" class="classname">MongoDB\Driver\Exception\LogicException</a> (extends <a href="#class.logicexception" class="classname">LogicException</a>)</span></li>
      <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-invalidargumentexception" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a> (extends <a href="#class.invalidargumentexception" class="classname">InvalidArgumentException</a>)</span></li>
      <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-unexpectedvalueexception" class="classname">MongoDB\Driver\Exception\UnexpectedValueException</a> (extends <a href="#class.unexpectedvalueexception" class="classname">UnexpectedValueException</a>)</span></li>
      <li class="listitem">
       <span class="simpara"><a href="#class.mongodb-driver-exception-runtimeexception" class="classname">MongoDB\Driver\Exception\RuntimeException</a> (extends <a href="#class.runtimeexception" class="classname">RuntimeException</a>)</span>
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara"><a href="#class.mongodb-driver-exception-connectionexception" class="classname">MongoDB\Driver\Exception\ConnectionException</a></span>
         <ul class="itemizedlist">
          <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-authenticationexception" class="classname">MongoDB\Driver\Exception\AuthenticationException</a></span></li>
          <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-connectiontimeoutexception" class="classname">MongoDB\Driver\Exception\ConnectionTimeoutException</a></span></li>
          <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-sslconnectionexception" class="classname">MongoDB\Driver\Exception\SSLConnectionException</a> (deprecated)</span></li>
         </ul>
        </li>
        <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-encryptionexception" class="classname">MongoDB\Driver\Exception\EncryptionException</a></span></li>
        <li class="listitem">
         <span class="simpara"><a href="#class.mongodb-driver-exception-serverexception" class="classname">MongoDB\Driver\Exception\ServerException</a></span>
         <ul class="itemizedlist">
          <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-commandexception" class="classname">MongoDB\Driver\Exception\CommandException</a></span></li>
          <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-executiontimeoutexception" class="classname">MongoDB\Driver\Exception\ExecutionTimeoutException</a></span></li>
          <li class="listitem">
           <span class="simpara"><a href="#class.mongodb-driver-exception-writeexception" class="classname">MongoDB\Driver\Exception\WriteException</a></span>
           <ul class="itemizedlist">
            <li class="listitem"><span class="simpara"><a href="#class.mongodb-driver-exception-bulkwriteexception" class="classname">MongoDB\Driver\Exception\BulkWriteException</a></span></li>
           </ul>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
  
  <hr />
  
  
   <ul class="chunklist chunklist_book"><li><a href="#class.mongodb-driver-exception-authenticationexception">MongoDB\Driver\Exception\AuthenticationException</a> — The MongoDB\Driver\Exception\AuthenticationException class</li><li><a href="#class.mongodb-driver-exception-bulkwriteexception">MongoDB\Driver\Exception\BulkWriteException</a> — The MongoDB\Driver\Exception\BulkWriteException class</li><li><a href="#class.mongodb-driver-exception-commandexception">MongoDB\Driver\Exception\CommandException</a> — The MongoDB\Driver\Exception\CommandException class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-commandexception.getresultdocument">MongoDB\Driver\Exception\CommandException::getResultDocument</a> — Returns the result document for the failed command</li></ul></li><li><a href="#class.mongodb-driver-exception-connectionexception">MongoDB\Driver\Exception\ConnectionException</a> — The MongoDB\Driver\Exception\ConnectionException class</li><li><a href="#class.mongodb-driver-exception-connectiontimeoutexception">MongoDB\Driver\Exception\ConnectionTimeoutException</a> — The MongoDB\Driver\Exception\ConnectionTimeoutException class</li><li><a href="#class.mongodb-driver-exception-encryptionexception">MongoDB\Driver\Exception\EncryptionException</a> — The MongoDB\Driver\Exception\EncryptionException class</li><li><a href="#class.mongodb-driver-exception-exception">MongoDB\Driver\Exception\Exception</a> — The MongoDB\Driver\Exception\Exception interface</li><li><a href="#class.mongodb-driver-exception-executiontimeoutexception">MongoDB\Driver\Exception\ExecutionTimeoutException</a> — The MongoDB\Driver\Exception\ExecutionTimeoutException class</li><li><a href="#class.mongodb-driver-exception-invalidargumentexception">MongoDB\Driver\Exception\InvalidArgumentException</a> — The MongoDB\Driver\Exception\InvalidArgumentException class</li><li><a href="#class.mongodb-driver-exception-logicexception">MongoDB\Driver\Exception\LogicException</a> — The MongoDB\Driver\Exception\LogicException class</li><li><a href="#class.mongodb-driver-exception-runtimeexception">MongoDB\Driver\Exception\RuntimeException</a> — The MongoDB\Driver\Exception\RuntimeException class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-runtimeexception.haserrorlabel">MongoDB\Driver\Exception\RuntimeException::hasErrorLabel</a> — Returns whether an error label is associated with an exception</li></ul></li><li><a href="#class.mongodb-driver-exception-serverexception">MongoDB\Driver\Exception\ServerException</a> — The MongoDB\Driver\Exception\ServerException class</li><li><a href="#class.mongodb-driver-exception-sslconnectionexception">MongoDB\Driver\Exception\SSLConnectionException</a> — The MongoDB\Driver\Exception\SSLConnectionException class (deprecated)</li><li><a href="#class.mongodb-driver-exception-unexpectedvalueexception">MongoDB\Driver\Exception\UnexpectedValueException</a> — The MongoDB\Driver\Exception\UnexpectedValueException class</li><li><a href="#class.mongodb-driver-exception-writeexception">MongoDB\Driver\Exception\WriteException</a> — The MongoDB\Driver\Exception\WriteException class<ul class="chunklist chunklist_book chunklist_children"><li><a href="#mongodb-driver-writeexception.getwriteresult">MongoDB\Driver\Exception\WriteException::getWriteResult</a> — Returns the WriteResult for the failed write operation</li></ul></li><li><a href="#mongodb.exceptions.tree">Class Tree</a> — MongoDB Exception Class Tree</li></ul></div>
  <hr />
  
  
  <ul class="chunklist chunklist_set"><li><a href="#mongodb.setup">Installing/Configuring</a><ul class="chunklist chunklist_set chunklist_children"><li><a href="#mongodb.requirements">Requirements</a></li><li><a href="#mongodb.installation">Installation</a></li><li><a href="#mongodb.configuration">Runtime Configuration</a></li><li><a href="#mongodb.constants">Predefined Constants</a></li></ul></li><li><a href="#mongodb.tutorial">Tutorials</a><ul class="chunklist chunklist_set chunklist_children"><li><a href="#mongodb.tutorial.library">Using the PHP Library for MongoDB (PHPLIB)</a></li><li><a href="#mongodb.tutorial.apm">Application Performance Monitoring (APM)</a></li></ul></li><li><a href="#mongodb.architecture">Driver Architecture and Internals</a> — Explains the driver architecture, and special features<ul class="chunklist chunklist_set chunklist_children"><li><a href="#mongodb.overview">Architecture</a> — Architecture Overview</li><li><a href="#mongodb.connection-handling">Connections</a> — Connection handling and persistence</li><li><a href="#mongodb.persistence">Persisting Data</a> — Serialization and deserialization of PHP variables into MongoDB</li></ul></li><li><a href="#mongodb.security">Security</a><ul class="chunklist chunklist_set chunklist_children"><li><a href="#mongodb.security.request_injection">Request Injection Attacks</a></li><li><a href="#mongodb.security.script_injection">Script Injection Attacks</a></li></ul></li><li><a href="#book.mongodb">MongoDB\Driver</a> — MongoDB driver classes<ul class="chunklist chunklist_set chunklist_children"><li><a href="#class.mongodb-driver-manager">MongoDB\Driver\Manager</a> — The MongoDB\Driver\Manager class</li><li><a href="#class.mongodb-driver-command">MongoDB\Driver\Command</a> — The MongoDB\Driver\Command class</li><li><a href="#class.mongodb-driver-query">MongoDB\Driver\Query</a> — The MongoDB\Driver\Query class</li><li><a href="#class.mongodb-driver-bulkwrite">MongoDB\Driver\BulkWrite</a> — The MongoDB\Driver\BulkWrite class</li><li><a href="#class.mongodb-driver-session">MongoDB\Driver\Session</a> — The MongoDB\Driver\Session class</li><li><a href="#class.mongodb-driver-clientencryption">MongoDB\Driver\ClientEncryption</a> — The MongoDB\Driver\ClientEncryption class</li><li><a href="#class.mongodb-driver-writeconcern">MongoDB\Driver\WriteConcern</a> — The MongoDB\Driver\WriteConcern class</li><li><a href="#class.mongodb-driver-readpreference">MongoDB\Driver\ReadPreference</a> — The MongoDB\Driver\ReadPreference class</li><li><a href="#class.mongodb-driver-readconcern">MongoDB\Driver\ReadConcern</a> — The MongoDB\Driver\ReadConcern class</li><li><a href="#class.mongodb-driver-cursor">MongoDB\Driver\Cursor</a> — The MongoDB\Driver\Cursor class</li><li><a href="#class.mongodb-driver-cursorid">MongoDB\Driver\CursorId</a> — The MongoDB\Driver\CursorId class</li><li><a href="#class.mongodb-driver-cursorinterface">MongoDB\Driver\CursorInterface</a> — The MongoDB\Driver\CursorInterface interface</li><li><a href="#class.mongodb-driver-server">MongoDB\Driver\Server</a> — The MongoDB\Driver\Server class</li><li><a href="#class.mongodb-driver-writeconcernerror">MongoDB\Driver\WriteConcernError</a> — The MongoDB\Driver\WriteConcernError class</li><li><a href="#class.mongodb-driver-writeerror">MongoDB\Driver\WriteError</a> — The MongoDB\Driver\WriteError class</li><li><a href="#class.mongodb-driver-writeresult">MongoDB\Driver\WriteResult</a> — The MongoDB\Driver\WriteResult class</li></ul></li><li><a href="#book.bson">MongoDB\BSON</a> — BSON type classes and serialization functions<ul class="chunklist chunklist_set chunklist_children"><li><a href="#ref.bson.functions">Functions</a></li><li><a href="#class.mongodb-bson-binary">MongoDB\BSON\Binary</a> — The MongoDB\BSON\Binary class</li><li><a href="#class.mongodb-bson-decimal128">MongoDB\BSON\Decimal128</a> — The MongoDB\BSON\Decimal128 class</li><li><a href="#class.mongodb-bson-javascript">MongoDB\BSON\Javascript</a> — The MongoDB\BSON\Javascript class</li><li><a href="#class.mongodb-bson-maxkey">MongoDB\BSON\MaxKey</a> — The MongoDB\BSON\MaxKey class</li><li><a href="#class.mongodb-bson-minkey">MongoDB\BSON\MinKey</a> — The MongoDB\BSON\MinKey class</li><li><a href="#class.mongodb-bson-objectid">MongoDB\BSON\ObjectId</a> — The MongoDB\BSON\ObjectId class</li><li><a href="#class.mongodb-bson-regex">MongoDB\BSON\Regex</a> — The MongoDB\BSON\Regex class</li><li><a href="#class.mongodb-bson-timestamp">MongoDB\BSON\Timestamp</a> — The MongoDB\BSON\Timestamp class</li><li><a href="#class.mongodb-bson-utcdatetime">MongoDB\BSON\UTCDateTime</a> — The MongoDB\BSON\UTCDateTime class</li><li><a href="#class.mongodb-bson-type">MongoDB\BSON\Type</a> — The MongoDB\BSON\Type interface</li><li><a href="#class.mongodb-bson-persistable">MongoDB\BSON\Persistable</a> — The MongoDB\BSON\Persistable interface</li><li><a href="#class.mongodb-bson-serializable">MongoDB\BSON\Serializable</a> — The MongoDB\BSON\Serializable interface</li><li><a href="#class.mongodb-bson-unserializable">MongoDB\BSON\Unserializable</a> — The MongoDB\BSON\Unserializable interface</li><li><a href="#class.mongodb-bson-binaryinterface">MongoDB\BSON\BinaryInterface</a> — The MongoDB\BSON\BinaryInterface interface</li><li><a href="#class.mongodb-bson-decimal128interface">MongoDB\BSON\Decimal128Interface</a> — The MongoDB\BSON\Decimal128Interface interface</li><li><a href="#class.mongodb-bson-javascriptinterface">MongoDB\BSON\JavascriptInterface</a> — The MongoDB\BSON\JavascriptInterface interface</li><li><a href="#class.mongodb-bson-maxkeyinterface">MongoDB\BSON\MaxKeyInterface</a> — The MongoDB\BSON\MaxKeyInterface interface</li><li><a href="#class.mongodb-bson-minkeyinterface">MongoDB\BSON\MinKeyInterface</a> — The MongoDB\BSON\MinKeyInterface interface</li><li><a href="#class.mongodb-bson-objectidinterface">MongoDB\BSON\ObjectIdInterface</a> — The MongoDB\BSON\ObjectIdInterface interface</li><li><a href="#class.mongodb-bson-regexinterface">MongoDB\BSON\RegexInterface</a> — The MongoDB\BSON\RegexInterface interface</li><li><a href="#class.mongodb-bson-timestampinterface">MongoDB\BSON\TimestampInterface</a> — The MongoDB\BSON\TimestampInterface interface</li><li><a href="#class.mongodb-bson-utcdatetimeinterface">MongoDB\BSON\UTCDateTimeInterface</a> — The MongoDB\BSON\UTCDateTimeInterface interface</li><li><a href="#class.mongodb-bson-dbpointer">MongoDB\BSON\DBPointer</a> — The MongoDB\BSON\DBPointer class (deprecated)</li><li><a href="#class.mongodb-bson-int64">MongoDB\BSON\Int64</a> — The MongoDB\BSON\Int64 class</li><li><a href="#class.mongodb-bson-symbol">MongoDB\BSON\Symbol</a> — The MongoDB\BSON\Symbol class (deprecated)</li><li><a href="#class.mongodb-bson-undefined">MongoDB\BSON\Undefined</a> — The MongoDB\BSON\Undefined class (deprecated)</li></ul></li><li><a href="#mongodb.monitoring">MongoDB\Driver\Monitoring</a> — Monitoring classes and subscriber functions<ul class="chunklist chunklist_set chunklist_children"><li><a href="#ref.monitoring.functions">Functions</a></li><li><a href="#class.mongodb-driver-monitoring-commandfailedevent">MongoDB\Driver\Monitoring\CommandFailedEvent</a> — The MongoDB\Driver\Monitoring\CommandFailedEvent class</li><li><a href="#class.mongodb-driver-monitoring-commandstartedevent">MongoDB\Driver\Monitoring\CommandStartedEvent</a> — The MongoDB\Driver\Monitoring\CommandStartedEvent class</li><li><a href="#class.mongodb-driver-monitoring-commandsucceededevent">MongoDB\Driver\Monitoring\CommandSucceededEvent</a> — The MongoDB\Driver\Monitoring\CommandSucceededEvent class</li><li><a href="#class.mongodb-driver-monitoring-commandsubscriber">MongoDB\Driver\Monitoring\CommandSubscriber</a> — The MongoDB\Driver\Monitoring\CommandSubscriber interface</li><li><a href="#class.mongodb-driver-monitoring-subscriber">MongoDB\Driver\Monitoring\Subscriber</a> — The MongoDB\Driver\Monitoring\Subscriber interface</li></ul></li><li><a href="#mongodb.exceptions">MongoDB\Driver\Exception</a> — Exception classes<ul class="chunklist chunklist_set chunklist_children"><li><a href="#class.mongodb-driver-exception-authenticationexception">MongoDB\Driver\Exception\AuthenticationException</a> — The MongoDB\Driver\Exception\AuthenticationException class</li><li><a href="#class.mongodb-driver-exception-bulkwriteexception">MongoDB\Driver\Exception\BulkWriteException</a> — The MongoDB\Driver\Exception\BulkWriteException class</li><li><a href="#class.mongodb-driver-exception-commandexception">MongoDB\Driver\Exception\CommandException</a> — The MongoDB\Driver\Exception\CommandException class</li><li><a href="#class.mongodb-driver-exception-connectionexception">MongoDB\Driver\Exception\ConnectionException</a> — The MongoDB\Driver\Exception\ConnectionException class</li><li><a href="#class.mongodb-driver-exception-connectiontimeoutexception">MongoDB\Driver\Exception\ConnectionTimeoutException</a> — The MongoDB\Driver\Exception\ConnectionTimeoutException class</li><li><a href="#class.mongodb-driver-exception-encryptionexception">MongoDB\Driver\Exception\EncryptionException</a> — The MongoDB\Driver\Exception\EncryptionException class</li><li><a href="#class.mongodb-driver-exception-exception">MongoDB\Driver\Exception\Exception</a> — The MongoDB\Driver\Exception\Exception interface</li><li><a href="#class.mongodb-driver-exception-executiontimeoutexception">MongoDB\Driver\Exception\ExecutionTimeoutException</a> — The MongoDB\Driver\Exception\ExecutionTimeoutException class</li><li><a href="#class.mongodb-driver-exception-invalidargumentexception">MongoDB\Driver\Exception\InvalidArgumentException</a> — The MongoDB\Driver\Exception\InvalidArgumentException class</li><li><a href="#class.mongodb-driver-exception-logicexception">MongoDB\Driver\Exception\LogicException</a> — The MongoDB\Driver\Exception\LogicException class</li><li><a href="#class.mongodb-driver-exception-runtimeexception">MongoDB\Driver\Exception\RuntimeException</a> — The MongoDB\Driver\Exception\RuntimeException class</li><li><a href="#class.mongodb-driver-exception-serverexception">MongoDB\Driver\Exception\ServerException</a> — The MongoDB\Driver\Exception\ServerException class</li><li><a href="#class.mongodb-driver-exception-sslconnectionexception">MongoDB\Driver\Exception\SSLConnectionException</a> — The MongoDB\Driver\Exception\SSLConnectionException class (deprecated)</li><li><a href="#class.mongodb-driver-exception-unexpectedvalueexception">MongoDB\Driver\Exception\UnexpectedValueException</a> — The MongoDB\Driver\Exception\UnexpectedValueException class</li><li><a href="#class.mongodb-driver-exception-writeexception">MongoDB\Driver\Exception\WriteException</a> — The MongoDB\Driver\Exception\WriteException class</li><li><a href="#mongodb.exceptions.tree">Class Tree</a> — MongoDB Exception Class Tree</li></ul></li></ul></div>
  <hr />
  
  
  
  
      
  
   
  <div id="book.msql" class="book"><hr />
   
   <h1 class="title">mSQL</h1>
   
   
   <div id="intro.msql" class="preface"><hr />
    <h1 class="title">Introduction</h1>
    <p class="para">
     These functions allow you to access mSQL database servers. More
     information about mSQL can be found at
     <a href="http://www.hughes.com.au/" class="link external">&raquo;&nbsp;http://www.hughes.com.au/</a>.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      This extension is no longer bundled with PHP as of PHP 5.3.
     </p>
    </p></blockquote>
   </div>
  <hr />
  
   
   
   
  
  
  <div id="msql.setup" class="chapter"><hr />
   <h1>Installing/Configuring</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="#msql.requirements">Requirements</a></li><li><a href="#msql.installation">Installation</a></li><li><a href="#msql.configuration">Runtime Configuration</a></li><li><a href="#msql.resources">Resource Types</a></li></ul>
  
  
   
   <div id="msql.requirements" class="section"><hr />
    <h2 class="title">Requirements</h2>
    <p class="para">No external libraries are needed to build this extension.</p>
   </div>
  <hr />
  
   
  
   
   
  
  <div id="msql.installation" class="section"><hr />
   <h2 class="title">Installation</h2>
   <p class="para">
    This extension is no longer bundled with PHP as of PHP 5.3.
    This extension is considered unmaintained and dead.
   </p>
   <p class="para">
    In order to have these functions available, you must compile PHP with
    msql support by using the
    <strong class="option configure">--with-msql[=DIR]</strong> option. DIR is the mSQL
    base install directory, defaults to <var class="filename">/usr/local/msql3</var>.
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <strong>Note to Win32 Users</strong><br />
    <p class="para">
     In order for this extension to work, there are
  <acronym title="Dynamic Link Library">DLL</acronym> files that must be available to the Windows
  system <var class="envar">PATH</var>. For information on how to do this, see the
  <acronym title="Frequently Asked Questions">FAQ</acronym> entitled &quot;<a href="#faq.installation.addtopath" class="link">How do I add my PHP directory to the PATH
  on Windows</a>&quot;. Although copying DLL
  files from the PHP folder into the Windows system directory also works
  (because the system directory is by default in the system&#039;s
  <var class="envar">PATH</var>), this is not recommended.
  <em class="emphasis">This extension requires the following files to be in the
  <var class="envar">PATH</var>:</em> 
     <var class="filename">msql.dll</var>
    </p>
   </p></blockquote>
  </div>
  <hr />
  
  
  
  
   
  
   
   
  
  <div id="msql.configuration" class="section"><hr />
   <h2 class="title">Runtime Configuration</h2>
   <p class="simpara">
  The behaviour of these functions is affected by settings in <var class="filename">php.ini</var>.
  </p>
   <p class="para">
   <table class="doctable table">
    <caption><strong>mSQL configuration options</strong></caption>
    
     <thead>
      <tr>
       <th>Name</th>
       <th>Default</th>
       <th>Changeable</th>
       <th>Changelog</th>
      </tr>
  
     </thead>
  
     <tbody class="tbody">
      <tr>
       <td><a href="#ini.msql.allow-persistent" class="link">msql.allow_persistent</a></td>
       <td>&quot;1&quot;</td>
       <td>PHP_INI_ALL</td>
       <td class="empty">&nbsp;</td>
      </tr>
  
      <tr>
       <td><a href="#ini.msql.max-persistent" class="link">msql.max_persistent</a></td>
       <td>&quot;-1&quot;</td>
       <td>PHP_INI_ALL</td>
       <td class="empty">&nbsp;</td>
      </tr>
  
      <tr>
       <td><a href="#ini.msql.max-links" class="link">msql.max_links</a></td>
       <td>&quot;-1&quot;</td>
       <td>PHP_INI_ALL</td>
       <td class="empty">&nbsp;</td>
      </tr>
  
     </tbody>
    
   </table>
  
   For further details and definitions of the
  PHP_INI_* modes, see the <a href="#configuration.changes.modes" class="xref">Where a configuration setting may be set</a>.
   </p>
   
   <p class="para">Here&#039;s a short explanation of
  the configuration directives.</p>
   
   <p class="para">
    <dl>
  
     
      <dt id="ini.msql.allow-persistent">
       <code class="parameter">msql.allow_persistent</code>
       <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
      </dt>
  
      <dd>
  
       <p class="para">
        Whether to allow persistent mSQL connections.
       </p>
      </dd>
  
     
       
     
      <dt id="ini.msql.max-persistent">
       <code class="parameter">msql.max_persistent</code>
       <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
      </dt>
  
      <dd>
  
       <p class="para">
        The maximum number of persistent mSQL connections per process.
       </p>
      </dd>
  
     
       
     
      <dt id="ini.msql.max-links">
       <code class="parameter">msql.max_links</code>
       <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
      </dt>
  
      <dd>
  
       <p class="para">
        The maximum number of mSQL connections per process, including
        persistent connections.
       </p>
      </dd>
  
     
       
    </dl>
  
   </p>
  </div>
  <hr />
  
  
   
  
   
   <div id="msql.resources" class="section"><hr />
    <h2 class="title">Resource Types</h2>
    <p class="para">
     There are two resource types used in the mSQL module. The first one
     is the link identifier for a database connection, the second a resource
     which holds the result of a query.
    </p>
   </div>
  <hr />
  
   
  
  </div>
  
  <hr />
  
  
  
  
  
   
  
  <div id="msql.constants" class="appendix"><hr />
   <h1>Predefined Constants</h1>
  
   <p class="simpara">
  The constants below are defined by this extension, and
  will only be available when the extension has either
  been compiled into PHP or dynamically loaded at runtime.
  </p>
   <dl>
  
    
     <dt id="constant.msql-assoc">
      <strong><code>MSQL_ASSOC</code></strong> 
      (<span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>)
     </dt>
  
     <dd>
  
      <span class="simpara">
       
      </span>
     </dd>
  
    
    
     <dt id="constant.msql-num">
      <strong><code>MSQL_NUM</code></strong> 
      (<span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>)
     </dt>
  
     <dd>
  
      <span class="simpara">
       
      </span>
     </dd>
  
    
    
     <dt id="constant.msql-both">
      <strong><code>MSQL_BOTH</code></strong> 
      (<span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>)
     </dt>
  
     <dd>
  
      <span class="simpara">
       
      </span>
     </dd>
  
    
   </dl>
  
  </div>
  
  <hr />
  
  
  
  
   
  
  
  <div id="msql.examples" class="chapter"><hr />
   <h1>Examples</h1>
  <h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="#msql.examples-basic">Basic usage</a></li></ul>
  
   <div id="msql.examples-basic" class="section"><hr />
    <h2 class="title">Basic usage</h2>
    <p class="para">
     This simple example shows how to connect, execute a query, print
     resulting rows and disconnect from a mSQL database.
     <div class="example" id="example-1840">
      <p><strong>Example #1 mSQL usage example</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Connecting,&nbsp;selecting&nbsp;database&nbsp;*/<br /></span><span style="color: #0000BB">$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;die(</span><span style="color: #DD0000">'Could&nbsp;not&nbsp;connect&nbsp;:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">msql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">'database'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;die(</span><span style="color: #DD0000">'Could&nbsp;not&nbsp;select&nbsp;database'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Issue&nbsp;SQL&nbsp;query&nbsp;*/<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;my_table'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">)&nbsp;or&nbsp;die(</span><span style="color: #DD0000">'Query&nbsp;failed&nbsp;:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br /><br /></span><span style="color: #FF8000">/*&nbsp;Printing&nbsp;results&nbsp;in&nbsp;HTML&nbsp;*/<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"&lt;table&gt;\n"</span><span style="color: #007700">;<br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MSQL_ASSOC</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\t&lt;tr&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$col_value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\t\t&lt;td&gt;</span><span style="color: #0000BB">$col_value</span><span style="color: #DD0000">&lt;/td&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\t&lt;/tr&gt;\n"</span><span style="color: #007700">;<br />}<br />echo&nbsp;</span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;Free&nbsp;result&nbsp;set&nbsp;*/<br /></span><span style="color: #0000BB">msql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Close&nbsp;connection&nbsp;*/<br /></span><span style="color: #0000BB">msql_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
   </div>
  <hr />
  
  </div>
  
  <hr />
  
  
  
  
  
  
   
  
  
   <div id="ref.msql" class="reference"><hr />
    <h1 class="title">mSQL Functions</h1>
  
  
  
  <div id="function.msql-affected-rows" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_affected_rows</h1> 
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_affected_rows</span> &mdash; <span class="dc-title">Returns number of affected rows</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-affected-rows-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_affected_rows</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     Returns number of affected rows by the last SELECT, UPDATE or DELETE
     query associated with <code class="parameter">result</code>.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-affected-rows-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-affected-rows-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns the number of affected rows on success, or <strong><code>FALSE</code></strong> on error.
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-affected-rows-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-query" class="function" rel="rdfs-seeAlso">msql_query()</a> - Send mSQL query</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-close" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_close</h1> 
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_close</span> &mdash; <span class="dc-title">Close mSQL connection</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-close-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_close</strong></span>
      ([ <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link_identifier</code></span>
    ] ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_close()</strong></span> closes the non-persistent connection to 
     the mSQL server that&#039;s associated with the specified link identifier.
    </p>
    <p class="para">
     Using <span class="function"><strong>msql_close()</strong></span> isn&#039;t usually necessary, as
     non-persistent open links are automatically closed at the end of the 
     script&#039;s execution. See also <a href="#language.types.resource.self-destruct" class="link">freeing resources</a>.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-close-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  link_identifier</code></dt>
  <dd>
  <p class="para">The mSQL connection.
  If not specified, the last link opened by <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span>
  is assumed. If no such link is found, the function will try to establish a
  link as if <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span> was called, and use it.
  </p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-close-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-close-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-connect" class="function" rel="rdfs-seeAlso">msql_connect()</a> - Open mSQL connection</span></li>
      <li class="member"><span class="function"><a href="#function.msql-pconnect" class="function" rel="rdfs-seeAlso">msql_pconnect()</a> - Open persistent mSQL connection</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-connect" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_connect</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_connect</span> &mdash; <span class="dc-title">Open mSQL connection</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-connect-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_connect</strong></span>
      ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$hostname</code></span>
    ] ) : <span class="type">resource</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_connect()</strong></span> establishes a connection to a mSQL 
     server.
    </p>
    <p class="para">
     If a second call is made to <span class="function"><strong>msql_connect()</strong></span> with
     the same arguments, no new link will be established, but instead, the 
     link identifier of the already opened link will be returned.
    </p>
    <p class="para">
     The link to the server will be closed as soon as the execution of the 
     script ends, unless it&#039;s closed earlier by explicitly calling
     <span class="function"><a href="#function.msql-close" class="function">msql_close()</a></span>.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-connect-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">hostname</code></dt>
  
       <dd>
  
        <p class="para">
         The hostname can also include a port number. e.g. 
         <code class="literal">hostname,port</code>.
        </p>
        <p class="para">
         If not specified, the connection is established by the means of a Unix
         domain socket, being then more efficient then a localhost TCP socket 
         connection.
        </p>
        <blockquote class="note"><p><strong class="note">Note</strong>: 
         <p class="para">
          While this function will accept a colon (<code class="literal">:</code>) as a
          host/port separator, a comma (<code class="literal">,</code>) is the preferred
          method.
         </p>
        </p></blockquote>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-connect-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a positive mSQL link identifier on success, or <strong><code>FALSE</code></strong> on
     error.
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-connect-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-pconnect" class="function" rel="rdfs-seeAlso">msql_pconnect()</a> - Open persistent mSQL connection</span></li>
      <li class="member"><span class="function"><a href="#function.msql-close" class="function" rel="rdfs-seeAlso">msql_close()</a> - Close mSQL connection</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-create-db" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_create_db</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_create_db</span> &mdash; <span class="dc-title">Create mSQL database</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-create-db-description">
    <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="methodname"><strong>msql_create_db</strong></span>
       ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$database_name</code></span>
      [, <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link_identifier</code></span>
     ] ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_create_db()</strong></span> attempts to create a new database on 
     the mSQL server.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-create-db-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">database_name</code></dt>
  
       <dd>
  
        <p class="para">
         The name of the mSQL database.
        </p>
       </dd>
  
      
      <dt>
  <code class="parameter">
  link_identifier</code></dt>
  <dd>
  <p class="para">The mSQL connection.
  If not specified, the last link opened by <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span>
  is assumed. If no such link is found, the function will try to establish a
  link as if <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span> was called, and use it.
  </p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-create-db-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-create-db-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-drop-db" class="function" rel="rdfs-seeAlso">msql_drop_db()</a> - Drop (delete) mSQL database</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-createdb" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_createdb</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_createdb</span> &mdash; <span class="dc-title">Alias of <span class="function"><a href="#function.msql-create-db" class="function">msql_create_db()</a></span></span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-createdb-description">
    <h3 class="title">Description</h3>
    <p class="para">
     This function is an alias of:  
     <span class="function"><a href="#function.msql-create-db" class="function">msql_create_db()</a></span>.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-data-seek" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_data_seek</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_data_seek</span> &mdash; <span class="dc-title">Move internal row pointer</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-data-seek-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_data_seek</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$row_number</code></span>
     ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_data_seek()</strong></span> moves the internal row
     pointer of the mSQL result associated with the specified query
     identifier to point to the specified row number.  The next call
     to <span class="function"><a href="#function.msql-fetch-row" class="function">msql_fetch_row()</a></span> would return that
     row.
    </p> 
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-data-seek-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
      
       <dt>
  <code class="parameter">row_number</code></dt>
  
       <dd>
  
        <p class="para">
         The seeked row number.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-data-seek-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-data-seek-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-fetch-array" class="function" rel="rdfs-seeAlso">msql_fetch_array()</a> - Fetch row as array</span></li>
      <li class="member"><span class="function"><a href="#function.msql-fetch-object" class="function" rel="rdfs-seeAlso">msql_fetch_object()</a> - Fetch row as object</span></li>
      <li class="member"><span class="function"><a href="#function.msql-fetch-row" class="function" rel="rdfs-seeAlso">msql_fetch_row()</a> - Get row as enumerated array</span></li>
      <li class="member"><span class="function"><a href="#function.msql-result" class="function" rel="rdfs-seeAlso">msql_result()</a> - Get result data</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-db-query" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_db_query</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_db_query</span> &mdash; <span class="dc-title">Send mSQL query</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-db-query-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_db_query</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
     , <span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>
     [, <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link_identifier</code></span>
    ] ) : <span class="type">resource</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_db_query()</strong></span> selects a database and executes a query
     on it.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-db-query-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">database</code></dt>
  
       <dd>
  
        <p class="para">
         The name of the mSQL database.
        </p>
       </dd>
  
      
      
       <dt>
  <code class="parameter">query</code></dt>
  
       <dd>
  
        <p class="para">
         The SQL query.
        </p>
       </dd>
  
      
      <dt>
  <code class="parameter">
  link_identifier</code></dt>
  <dd>
  <p class="para">The mSQL connection.
  If not specified, the last link opened by <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span>
  is assumed. If no such link is found, the function will try to establish a
  link as if <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span> was called, and use it.
  </p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-db-query-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para"> 
     Returns a positive mSQL query identifier to the query result, or <strong><code>FALSE</code></strong>
     on error.
    </p>  
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-db-query-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-query" class="function" rel="rdfs-seeAlso">msql_query()</a> - Send mSQL query</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-dbname" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_dbname</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_dbname</span> &mdash; <span class="dc-title">Alias of <span class="function"><a href="#function.msql-result" class="function">msql_result()</a></span></span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-dbname-description">
    <h3 class="title">Description</h3>
    <p class="para"> 
     This function is an alias of:  
     <span class="function"><a href="#function.msql-result" class="function">msql_result()</a></span>.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-drop-db" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_drop_db</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_drop_db</span> &mdash; <span class="dc-title">Drop (delete) mSQL database</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-drop-db-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_drop_db</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$database_name</code></span>
     [, <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link_identifier</code></span>
    ] ) : <span class="type">bool</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_drop_db()</strong></span> attempts to drop (remove) a database
     from the mSQL server.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-drop-db-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      
       <dt>
  <code class="parameter">database_name</code></dt>
  
       <dd>
  
        <p class="para">
         The name of the database.
        </p>
       </dd>
  
      
      <dt>
  <code class="parameter">
  link_identifier</code></dt>
  <dd>
  <p class="para">The mSQL connection.
  If not specified, the last link opened by <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span>
  is assumed. If no such link is found, the function will try to establish a
  link as if <span class="function"><a href="#function.msql-connect" class="function">msql_connect()</a></span> was called, and use it.
  </p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-drop-db-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-drop-db-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-create-db" class="function" rel="rdfs-seeAlso">msql_create_db()</a> - Create mSQL database</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-error" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_error</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_error</span> &mdash; <span class="dc-title">Returns error message of last msql call</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-error-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_error</strong></span>
      ( <span class="methodparam">void</span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_error()</strong></span> returns the last issued error by the mSQL
     server. Note that only the last error message is accessible with 
     <span class="function"><strong>msql_error()</strong></span>.
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-error-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     The last error message or an empty string if no error was issued.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-fetch-array" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_fetch_array</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_fetch_array</span> &mdash; <span class="dc-title">Fetch row as array</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-fetch-array-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_fetch_array</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$result_type</code></span>
    ] ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_fetch_array()</strong></span> is an extended version of
     <span class="function"><a href="#function.msql-fetch-row" class="function">msql_fetch_row()</a></span>.  In addition to storing the
     data in the numeric indices of the result array, it also stores
     the data in associative indices, using the field names as keys.
    </p>
    <p class="para"> 
     An important thing to note is that using
     <span class="function"><strong>msql_fetch_array()</strong></span> is NOT significantly slower
     than using <span class="function"><a href="#function.msql-fetch-row" class="function">msql_fetch_row()</a></span>, while it provides
     a significant added value.
    </p>  
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-fetch-array-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
      
       <dt>
  <code class="parameter">result_type</code></dt>
  
       <dd>
  
        <p class="para">
         A constant that can take the following values: 
         <strong><code>MSQL_ASSOC</code></strong>, <strong><code>MSQL_NUM</code></strong>, and
         <strong><code>MSQL_BOTH</code></strong> with <strong><code>MSQL_BOTH</code></strong> being
         the default.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-fetch-array-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an array that corresponds to the fetched row, or <strong><code>FALSE</code></strong> if
     there are no more rows.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-function.msql-fetch-array-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1841">
      <p><strong>Example #1 <span class="function"><strong>msql_fetch_array()</strong></span> example</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$con&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_connect</span><span style="color: #007700">();<br />if&nbsp;(!</span><span style="color: #0000BB">$con</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Server&nbsp;connection&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br />if&nbsp;(!</span><span style="color: #0000BB">msql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Database&nbsp;connection&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;people'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Query&nbsp;execution&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MSQL_ASSOC</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">':&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">msql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
   </div>
  
   <div class="refsect1 changelog" id="refsect1-function.msql-fetch-array-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>5.0.4 </td>
         <td>
          A bug was fixed when retrieving data from columns containing <strong><code>NULL</code></strong> 
          values. Such columns were not placed into the resulting array.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-fetch-array-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-fetch-row" class="function" rel="rdfs-seeAlso">msql_fetch_row()</a> - Get row as enumerated array</span></li>
      <li class="member"><span class="function"><a href="#function.msql-fetch-object" class="function" rel="rdfs-seeAlso">msql_fetch_object()</a> - Fetch row as object</span></li>
      <li class="member"><span class="function"><a href="#function.msql-data-seek" class="function" rel="rdfs-seeAlso">msql_data_seek()</a> - Move internal row pointer</span></li>
      <li class="member"><span class="function"><a href="#function.msql-result" class="function" rel="rdfs-seeAlso">msql_result()</a> - Get result data</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-fetch-field" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_fetch_field</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_fetch_field</span> &mdash; <span class="dc-title">Get field information</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-fetch-field-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_fetch_field</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$field_offset</code><span class="initializer"> = 0</span></span>
    ] ) : <span class="type">object</span></div>
  
    <p class="para rdfs-comment">  
     <span class="function"><strong>msql_fetch_field()</strong></span> can be used in order to obtain 
     information about fields in a certain query result.  
    </p> 
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-fetch-field-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
      
       <dt>
  <code class="parameter">field_offset</code></dt>
  
       <dd>
  
        <p class="para">
         The field offset. If not specified, the next field that wasn&#039;t yet
         retrieved by <span class="function"><strong>msql_fetch_field()</strong></span> is retrieved.
        </p>
       </dd>
  
      
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-fetch-field-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns an object containing field information. The properties of the 
     object are:
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <span class="property">name</span> - column name
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <span class="property">table</span> - name of the table the column belongs to
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <span class="property">not_null</span> - 1 if the column cannot be <strong><code>NULL</code></strong>
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <span class="property">unique</span> - 1 if the column is a unique key
       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        type - the type of the column
       </span>
      </li>
     </ul>
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-fetch-field-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-field-seek" class="function" rel="rdfs-seeAlso">msql_field_seek()</a> - Set field offset</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-fetch-object" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_fetch_object</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_fetch_object</span> &mdash; <span class="dc-title">Fetch row as object</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-fetch-object-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_fetch_object</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     
     ) : <span class="type">object</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_fetch_object()</strong></span> is similar to
     <span class="function"><a href="#function.msql-fetch-array" class="function">msql_fetch_array()</a></span>, with one difference - an
     object is returned, instead of an array.  Indirectly, that means
     that you can only access the data by the field names, and not by
     their offsets (numbers are illegal property names).
    </p>  
    <p class="para">
     Speed-wise, the function is identical to
     <span class="function"><a href="#function.msql-fetch-array" class="function">msql_fetch_array()</a></span>, and almost as quick as
     <span class="function"><a href="#function.msql-fetch-row" class="function">msql_fetch_row()</a></span> (the difference is
     insignificant).
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-fetch-object-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-fetch-object-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns an object with properties that correspond to the fetched
     row, or <strong><code>FALSE</code></strong> if there are no more rows.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-function.msql-fetch-object-examples">
    <h3 class="title">Examples</h3>
    <p class="para">
     <div class="example" id="example-1842">
      <p><strong>Example #1 <span class="function"><strong>msql_fetch_object()</strong></span> example</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$con&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_connect</span><span style="color: #007700">();<br />if&nbsp;(!</span><span style="color: #0000BB">$con</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Server&nbsp;connection&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br />if&nbsp;(!</span><span style="color: #0000BB">msql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Database&nbsp;connection&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;people'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Query&nbsp;execution&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_fetch_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MSQL_ASSOC</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">':&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">msql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
   </div>
  
   <div class="refsect1 changelog" id="refsect1-function.msql-fetch-object-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>5.0.4 </td>
         <td>
          A bug was fixed when retrieving data from columns containing <strong><code>NULL</code></strong> 
          values. Such columns were not placed into the resulting array.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-fetch-object-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-fetch-array" class="function" rel="rdfs-seeAlso">msql_fetch_array()</a> - Fetch row as array</span></li>
      <li class="member"><span class="function"><a href="#function.msql-fetch-row" class="function" rel="rdfs-seeAlso">msql_fetch_row()</a> - Get row as enumerated array</span></li>
      <li class="member"><span class="function"><a href="#function.msql-data-seek" class="function" rel="rdfs-seeAlso">msql_data_seek()</a> - Move internal row pointer</span></li>
      <li class="member"><span class="function"><a href="#function.msql-result" class="function" rel="rdfs-seeAlso">msql_result()</a> - Get result data</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-fetch-row" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_fetch_row</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_fetch_row</span> &mdash; <span class="dc-title">Get row as enumerated array</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-fetch-row-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_fetch_row</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     
     ) : <span class="type">array</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_fetch_row()</strong></span> fetches one row of data from
     the result associated with the specified query identifier.  The
     row is returned as an array.  Each result column is stored in an
     array offset, starting at offset 0.
    </p>  
    <p class="para"> 
     Subsequent call to <span class="function"><strong>msql_fetch_row()</strong></span> would
     return the next row in the result set, or <strong><code>FALSE</code></strong> if there are no
     more rows.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-fetch-row-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-fetch-row-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     Returns an array that corresponds to the fetched row, or <strong><code>FALSE</code></strong> if
     there are no more rows.
    </p>
   </div>
  
   <div class="refsect1 examples" id="refsect1-function.msql-fetch-row-examples">
    <h3 class="title">Examples</h3>  
    <p class="para">
     <div class="example" id="example-1843">
      <p><strong>Example #1 <span class="function"><strong>msql_fetch_row()</strong></span> example</strong></p>
      <div class="example-contents">
  <div class="phpcode"><code><span style="color: #000000">
  <span style="color: #0000BB">&lt;?php<br />$con&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_connect</span><span style="color: #007700">();<br />if&nbsp;(!</span><span style="color: #0000BB">$con</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Server&nbsp;connection&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br />if&nbsp;(!</span><span style="color: #0000BB">msql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Database&nbsp;connection&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;people'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$con</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Query&nbsp;execution&nbsp;problem:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">msql_error</span><span style="color: #007700">());<br />}<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">msql_fetch_row</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">':&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">msql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
  </span>
  </code></div>
      </div>
  
     </div>
    </p>
   </div>
  
   <div class="refsect1 changelog" id="refsect1-function.msql-fetch-row-changelog">
    <h3 class="title">Changelog</h3>
    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Version</th>
         <th>Description</th>
        </tr>
  
       </thead>
  
       <tbody class="tbody">
        <tr>
         <td>5.0.4 </td>
         <td>
          A bug was fixed when retrieving data from columns containing <strong><code>NULL</code></strong> 
          values. Such columns were not placed into the resulting array.
         </td>
        </tr>
  
       </tbody>
      
     </table>
  
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-fetch-row-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-fetch-array" class="function" rel="rdfs-seeAlso">msql_fetch_array()</a> - Fetch row as array</span></li>
      <li class="member"><span class="function"><a href="#function.msql-fetch-object" class="function" rel="rdfs-seeAlso">msql_fetch_object()</a> - Fetch row as object</span></li>
      <li class="member"><span class="function"><a href="#function.msql-data-seek" class="function" rel="rdfs-seeAlso">msql_data_seek()</a> - Move internal row pointer</span></li>
      <li class="member"><span class="function"><a href="#function.msql-result" class="function" rel="rdfs-seeAlso">msql_result()</a> - Get result data</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-field-flags" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_field_flags</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_field_flags</span> &mdash; <span class="dc-title">Get field flags</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-field-flags-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_field_flags</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$field_offset</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_field_flags()</strong></span> returns the field flags of
     the specified field. 
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-field-flags-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
      <dt>
  <code class="parameter">
  field_offset</code></dt>
  <dd>
  <p class="para">The numerical field offset. The
  <code class="parameter">field_offset</code> starts at <code class="literal">1</code>.</p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-field-flags-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns a string containing the field flags of the specified key.
     This can be: <code class="literal">primary key not null</code>,
     <code class="literal">not null</code>, <code class="literal">primary key</code>, 
     <code class="literal">unique not null</code> or <code class="literal">unique</code>. 
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-field-len" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_field_len</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_field_len</span> &mdash; <span class="dc-title">Get field length</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-field-len-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_field_len</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$field_offset</code></span>
     ) : <span class="type">int</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_field_len()</strong></span> returns the length of the specified 
     field.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-field-len-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
      <dt>
  <code class="parameter">
  field_offset</code></dt>
  <dd>
  <p class="para">The numerical field offset. The
  <code class="parameter">field_offset</code> starts at <code class="literal">1</code>.</p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-field-len-returnvalues">
    <h3 class="title">Return Values</h3>
    <p class="para">
     Returns the length of the specified field or <strong><code>FALSE</code></strong> on error.
    </p>
   </div>
  
  </div>
  <hr />
  
  
  
  
  
  
  <div id="function.msql-field-name" class="refentry"><hr />
   <div class="refnamediv">
    <h1 class="refname">msql_field_name</h1>
    <p class="verinfo">(PHP 4, PHP 5 &lt; 5.3.0)</p><p class="refpurpose"><span class="refname">msql_field_name</span> &mdash; <span class="dc-title">Get the name of the specified field in a result</span></p>
  
   </div>
   <div class="refsect1 description" id="refsect1-function.msql-field-name-description">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>msql_field_name</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$field_offset</code></span>
     ) : <span class="type">string</span></div>
  
    <p class="para rdfs-comment">
     <span class="function"><strong>msql_field_name()</strong></span> gets the name of the specified field
     index.
    </p>
   </div>
  
   <div class="refsect1 parameters" id="refsect1-function.msql-field-name-parameters">
    <h3 class="title">Parameters</h3>
    <p class="para">
     <dl>
  
      <dt>
  <code class="parameter">
  result</code></dt>
  <dd>
  <p class="para">The result <span class="type"><a href="#language.types.resource" class="type resource">resource</a></span> that
  is being evaluated. This result comes from a call to
  <span class="function"><a href="#function.msql-query" class="function">msql_query()</a></span>.</p></dd>
  
      <dt>
  <code class="parameter">
  field_offset</code></dt>
  <dd>
  <p class="para">The numerical field offset. The
  <code class="parameter">field_offset</code> starts at <code class="literal">1</code>.</p></dd>
  
     </dl>
  
    </p>
   </div>
  
   <div class="refsect1 returnvalues" id="refsect1-function.msql-field-name-returnvalues">
    <h3 class="title">Return Values</h3>  
    <p class="para">
     The name of the field or <strong><code>FALSE</code></strong> on failure.
    </p>
   </div>
  
   <div class="refsect1 seealso" id="refsect1-function.msql-field-name-seealso">
    <h3 class="title">See Also</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="#function.msql-field-len" class="function" rel="rdfs-seeAlso">msql_field_len()</a> - Get field length</span></li>
     </ul>
    </p>
   </div>
  
  </div>
  <hr />
  