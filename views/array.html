<div id="arrayaccess.offsetset" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">ArrayAccess::offsetSet</h1>
     <p class="verinfo">(PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">ArrayAccess::offsetSet</span> &mdash; <span class="dc-title">Assign a value to the specified offset</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-arrayaccess.offsetset-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>ArrayAccess::offsetSet</strong></span>
       ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$offset</code></span>
      , <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
     <p class="para rdfs-comment">
      Assigns a value to the specified offset.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-arrayaccess.offsetset-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">
      <dl>
   
       
        <dt>
   <code class="parameter">offset</code></dt>
   
        <dd>
   
         <p class="para">
          The offset to assign the value to.
         </p>
        </dd>
   
       
       
        <dt>
   <code class="parameter">value</code></dt>
   
        <dd>
   
         <p class="para">
          The value to set.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-arrayaccess.offsetset-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      No value is returned.
     </p>
    </div>
   
   
    <div class="refsect1 notes" id="refsect1-arrayaccess.offsetset-notes">
     <h3 class="title">Notes</h3>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       The <code class="parameter">offset</code> parameter will be set to <strong><code>NULL</code></strong> if
       another value is not available, like in the following example.
       <div class="informalexample">
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$arrayaccess</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">"first&nbsp;value"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$arrayaccess</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">"second&nbsp;value"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$arrayaccess</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
        <p class="para">The above example will output:</p>
        <div class="example-contents screen">
   <div class="cdata"><pre>
   Array
   (
       [0] =&gt; first value
       [1] =&gt; second value
   )
   </pre></div>
        </div>
       </div>
      </p>
     </p></blockquote>
     
     <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
         This function is not called in assignments by reference and otherwise
         indirect changes to array dimensions overloaded with
         <a href="#class.arrayaccess" class="classname">ArrayAccess</a> (indirect in the sense they are
         made not by changing the dimension directly, but by changing a
         sub-dimension or sub-property or assigning the array dimension by
         reference to another variable).
         Instead, <span class="function"><a href="#arrayaccess.offsetget" class="function">ArrayAccess::offsetGet()</a></span> is called. The
         operation will only be successful if that method returns by reference,
         which is only possible since PHP 5.3.4.
       </p>
     </p></blockquote>
    </div>
   
   
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="arrayaccess.offsetunset" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">ArrayAccess::offsetUnset</h1>
     <p class="verinfo">(PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">ArrayAccess::offsetUnset</span> &mdash; <span class="dc-title">Unset an offset</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-arrayaccess.offsetunset-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>ArrayAccess::offsetUnset</strong></span>
       ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$offset</code></span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
     <p class="para rdfs-comment">
      Unsets an offset.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       This method will <em class="emphasis">not</em> be called when type-casting to
       <a href="#language.types.typecasting" class="link">(unset)</a>
      </p>
     </p></blockquote>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-arrayaccess.offsetunset-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">
      <dl>
   
       
        <dt>
   <code class="parameter">offset</code></dt>
   
        <dd>
   
         <p class="para">
          The offset to unset.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-arrayaccess.offsetunset-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      No value is returned.
     </p>
    </div>
   
   
   
   
   </div>
   <hr />
   
   
   
   
   
   <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#arrayaccess.offsetexists">ArrayAccess::offsetExists</a> — Whether an offset exists</li><li><a href="#arrayaccess.offsetget">ArrayAccess::offsetGet</a> — Offset to retrieve</li><li><a href="#arrayaccess.offsetset">ArrayAccess::offsetSet</a> — Assign a value to the specified offset</li><li><a href="#arrayaccess.offsetunset">ArrayAccess::offsetUnset</a> — Unset an offset</li></ul>
   </div>
   
   <hr />
   
   
   
   
    
   
   
   <div id="class.serializable" class="reference"><hr />
   
    <h1 class="title">The Serializable interface</h1>
    
   
    <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7)</p>
   
   
     <div class="section" id="serializable.intro">
      <h2 class="title">Introduction</h2>
      <p class="para">
       Interface for customized serializing.
      </p>
   
      <p class="para">
       Classes that implement this interface no longer support
       <a href="#object.sleep" class="link">__sleep()</a> and
       <a href="#object.wakeup" class="link">__wakeup()</a>. The method serialize is
       called whenever an instance needs to be serialized. This does not invoke __destruct()
       or have any other side effect unless programmed inside the method. When the data is
       unserialized the class is known and the appropriate unserialize() method is called as
       a constructor instead of calling __construct(). If you need to execute the standard
       constructor you may do so in the method.
      </p>
     </div>
   
   
     <div class="section" id="serializable.synopsis">
      <h2 class="title">Interface synopsis</h2>
   
   
      <div class="classsynopsis">
       <div class="ooclass"></div>
   
   
       <div class="classsynopsisinfo">
        <span class="ooclass">
         <strong class="classname">Serializable</strong>
        </span>
        {</div>
   
       
       <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
       <div class="methodsynopsis dc-description">
      <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#serializable.serialize" class="methodname">serialize</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type">string</span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><a href="#serializable.unserialize" class="methodname">unserialize</a></span>
       ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
      }</div>
   
   
     </div>
   
     <div class="section" id="serializable.examples">
      <div class="example" id="example-338">
       <p><strong>Example #1 Basic usage</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">obj&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">Serializable&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"My&nbsp;private&nbsp;data"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">serialize</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">serialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">getData</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">obj</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$ser&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">serialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$ser</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$newobj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$ser</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$newobj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getData</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
       <div class="example-contents"><p>The above example will output
   something similar to:</p></div>
       <div class="example-contents screen">
   <div class="cdata"><pre>
   string(38) &quot;C:3:&quot;obj&quot;:23:{s:15:&quot;My private data&quot;;}&quot;
   string(15) &quot;My private data&quot;
   </pre></div>
       </div>
      </div>
     </div>
   
   
    </div>
   
    
   
   
   <div id="serializable.serialize" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Serializable::serialize</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7)</p><p class="refpurpose"><span class="refname">Serializable::serialize</span> &mdash; <span class="dc-title">String representation of object</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-serializable.serialize-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>Serializable::serialize</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type">string</span></div>
   
     <p class="para rdfs-comment">
      Should return the string representation of the object.
     </p>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-serializable.serialize-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-serializable.serialize-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the string representation of the object or <strong><code>NULL</code></strong>
     </p>
    </div>
   
   
    <div class="refsect1 errors" id="refsect1-serializable.serialize-errors">
     <h3 class="title">Errors/Exceptions</h3>
     <p class="para">
      Throws <a href="#class.exception" class="classname">Exception</a> when returning other types than strings and
      <strong><code>NULL</code></strong>.
     </p>
    </div>
   
    
    <div class="refsect1 seealso" id="refsect1-serializable.serialize-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#object.sleep" class="link">__sleep()</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="serializable.unserialize" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Serializable::unserialize</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7)</p><p class="refpurpose"><span class="refname">Serializable::unserialize</span> &mdash; <span class="dc-title">Constructs the object</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-serializable.unserialize-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="methodname"><strong>Serializable::unserialize</strong></span>
       ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
     <p class="para rdfs-comment">
      Called during unserialization of the object.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       This method acts as the
       <a href="#language.oop5.decon.constructor" class="link">constructor</a> of the object. The
       <a href="#object.construct" class="link">__construct()</a> method will <em class="emphasis">not</em> be called after this
       method.
      </p>
     </p></blockquote>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-serializable.unserialize-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">
      <dl>
   
       
        <dt>
   <code class="parameter">serialized</code></dt>
   
        <dd>
   
         <p class="para">
          The string representation of the object.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-serializable.unserialize-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      The return value from this method is ignored.
     </p>
    </div>
   
   
    <div class="refsect1 seealso" id="refsect1-serializable.unserialize-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#object.wakeup" class="link">__wakeup()</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
   <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#serializable.serialize">Serializable::serialize</a> — String representation of object</li><li><a href="#serializable.unserialize">Serializable::unserialize</a> — Constructs the object</li></ul>
   </div>
   
   <hr />
   
   
   
   
    
   
   
   <div id="class.closure" class="reference"><hr />
   
    <h1 class="title">The Closure class</h1>
    
   
    <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7)</p>
   
   
     <div class="section" id="closure.intro">
      <h2 class="title">Introduction</h2>
      <p class="para">
       Class used to represent <a href="#functions.anonymous" class="link">anonymous
       functions</a>.
      </p>
   
      <p class="para">
       Anonymous functions, implemented in PHP 5.3, yield objects of this type.
       This fact used to be considered an implementation detail, but it can now
       be relied upon. Starting with PHP 5.4, this class has methods that allow
       further control of the anonymous function after it has been created.
      </p>
   
      <p class="para">
       Besides the methods listed here, this class also has an
       <code class="literal">__invoke</code> method. This is for consistency with other
       classes that implement <a href="#language.oop5.magic.invoke" class="link">calling
       magic</a>, as this method is not used for calling the function.
      </p>
   
     </div>
   
   
     <div class="section" id="closure.synopsis">
      <h2 class="title">Class synopsis</h2>
   
   
      <div class="classsynopsis">
       <div class="ooclass"></div>
   
   
       <div class="classsynopsisinfo">
        <span class="ooclass">
         <strong class="classname">Closure</strong>
        </span>
        {</div>
   
       
       <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
       <div class="methodsynopsis dc-description">
      <span class="modifier">private</span> <span class="methodname"><a href="#closure.construct" class="methodname">__construct</a></span>
       ( <span class="methodparam">void</span>
      )</div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#closure.bind" class="methodname">bind</a></span>
       ( <span class="methodparam"><span class="type"><a href="#class.closure" class="type Closure">Closure</a></span> <code class="parameter">$closure</code></span>
      , <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
      [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newscope</code>
      <span class="initializer"> = &quot;static&quot;</span></span>
     ] ) : <span class="type"><a href="#class.closure" class="type Closure">Closure</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#closure.bindto" class="methodname">bindTo</a></span>
       ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
      [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newscope</code>
      <span class="initializer"> = &quot;static&quot;</span></span>
     ] ) : <span class="type"><a href="#class.closure" class="type Closure">Closure</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#closure.call" class="methodname">call</a></span>
       ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
      [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$...</code></span>
     ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#closure.fromcallable" class="methodname">fromCallable</a></span>
       ( <span class="methodparam"><span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> <code class="parameter">$callable</code></span>
      ) : <span class="type"><a href="#class.closure" class="type Closure">Closure</a></span></div>
   
      }</div>
   
   
     </div>
   
    </div>
   
    
   
   
   <div id="closure.construct" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Closure::__construct</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7)</p><p class="refpurpose"><span class="refname">Closure::__construct</span> &mdash; <span class="dc-title">Constructor that disallows instantiation</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-closure.construct-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">private</span> <span class="methodname"><strong>Closure::__construct</strong></span>
       ( <span class="methodparam">void</span>
      )</div>
   
     <p class="para rdfs-comment">
       This method exists only to disallow instantiation of the
       <a href="#class.closure" class="classname">Closure</a> class. Objects of this class are created
       in the fashion described on the
       <a href="#functions.anonymous" class="link">anonymous functions</a> page.
     </p>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-closure.construct-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-closure.construct-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      This method has no return value; it simply emits an error
      (of type <strong><code>E_RECOVERABLE_ERROR</code></strong>).
     </p>
    </div>
   
   
   
    <div class="refsect1 seealso" id="refsect1-closure.construct-seealso">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member">
       <a href="#functions.anonymous" class="link">Anonymous functions</a>
      </li>
     </ul>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="closure.bind" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Closure::bind</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.4.0, PHP 7)</p><p class="refpurpose"><span class="refname">Closure::bind</span> &mdash; <span class="dc-title">
      Duplicates a closure with a specific bound object and class scope
     </span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-closure.bind-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>Closure::bind</strong></span>
       ( <span class="methodparam"><span class="type"><a href="#class.closure" class="type Closure">Closure</a></span> <code class="parameter">$closure</code></span>
      , <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
      [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newscope</code>
      <span class="initializer"> = &quot;static&quot;</span></span>
     ] ) : <span class="type"><a href="#class.closure" class="type Closure">Closure</a></span></div>
   
     <p class="para rdfs-comment">
      This method is a static version of <span class="methodname"><a href="#closure.bindto" class="methodname">Closure::bindTo()</a></span>.
      See the documentation of that method for more information.
     </p>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-closure.bind-parameters">
     <h3 class="title">Parameters</h3>
     <dl>
   
      
       <dt>
   <code class="parameter">closure</code></dt>
   
       <dd>
   
        <p class="para">
         The anonymous functions to bind.
        </p>
       </dd>
   
      
      
       <dt>
   <code class="parameter">newthis</code></dt>
   
       <dd>
   
        <p class="para">
         The object to which the given anonymous function should be bound, or
         <strong><code>NULL</code></strong> for the closure to be unbound.
        </p>
       </dd>
   
      
      
       <dt>
   <code class="parameter">newscope</code></dt>
   
       <dd>
   
        <p class="para">
         The class scope to which the closure is to be associated, or
         &#039;static&#039; to keep the current one. If an object is given, the type of the
         object will be used instead. This determines the visibility of protected
         and private methods of the bound object.
         It is not allowed to pass (an object of) an internal class as this parameter.
        </p>
       </dd>
   
      
     </dl>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-closure.bind-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns a new <a href="#class.closure" class="classname">Closure</a> object  or <strong><code>FALSE</code></strong> on failure
     </p>
    </div>
   
   
    <div class="refsect1 changelog" id="refsect1-closure.bind-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>7.0.0</td>
          <td>
           <code class="parameter">newscope</code> can not be (an object of) an internal
           class anymore, what was possible prior to this version.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
   
    <div class="refsect1 examples" id="refsect1-closure.bind-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="errorexception.example.error-handler">
      <p><strong>Example #1 <span class="function"><strong>Closure::bind()</strong></span> example</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;</span><span style="color: #0000BB">$sfoo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$ifoo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">$cl1&nbsp;</span><span style="color: #007700">=&nbsp;static&nbsp;function()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">$sfoo</span><span style="color: #007700">;<br />};<br /></span><span style="color: #0000BB">$cl2&nbsp;</span><span style="color: #007700">=&nbsp;function()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ifoo</span><span style="color: #007700">;<br />};<br /><br /></span><span style="color: #0000BB">$bcl1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Closure</span><span style="color: #007700">::</span><span style="color: #0000BB">bind</span><span style="color: #007700">(</span><span style="color: #0000BB">$cl1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'A'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$bcl2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Closure</span><span style="color: #007700">::</span><span style="color: #0000BB">bind</span><span style="color: #007700">(</span><span style="color: #0000BB">$cl2</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">'A'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$bcl1</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$bcl2</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
      <div class="example-contents"><p>The above example will output
   something similar to:</p></div>
      <div class="example-contents screen">
   <div class="cdata"><pre>
   1
   2
   </pre></div>
      </div>
     </div>
    </div>
   
   
   
    <div class="refsect1 seealso" id="refsect1-closure.bind-seealso">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#functions.anonymous" class="link">Anonymous functions</a></li>
      <li class="member"><span class="methodname"><a href="#closure.bindto" class="methodname" rel="rdfs-seeAlso">Closure::bindTo()</a> - Duplicates the closure with a new bound object and class scope</span></li>
     </ul>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="closure.bindto" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Closure::bindTo</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.4.0, PHP 7)</p><p class="refpurpose"><span class="refname">Closure::bindTo</span> &mdash; <span class="dc-title">
      Duplicates the closure with a new bound object and class scope
     </span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-closure.bindto-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Closure::bindTo</strong></span>
       ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
      [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newscope</code>
      <span class="initializer"> = &quot;static&quot;</span></span>
     ] ) : <span class="type"><a href="#class.closure" class="type Closure">Closure</a></span></div>
   
     <p class="para rdfs-comment">
      Create and return a new <a href="#functions.anonymous" class="link">anonymous
      function</a> with the same body and bound variables as this one, but
      possibly with a different bound object and a new class scope.
     </p>
   
     <p class="para">
      The “bound object” determines the value <code class="literal">$this</code> will
      have in the function body and the “class scope” represents a class
      which determines which private and protected members the anonymous
      function will be able to access. Namely, the members that will be
      visible are the same as if the anonymous function were a method of
      the class given as value of the <code class="parameter">newscope</code>
      parameter.
     </p>
   
     <p class="para">
      Static closures cannot have any bound object (the value of the parameter
      <code class="parameter">newthis</code> should be <strong><code>NULL</code></strong>), but this function can
      nevertheless be used to change their class scope.
     </p>
   
     <p class="para">
      This function will ensure that for a non-static closure, having a bound
      instance will imply being scoped and vice-versa. To this end,
      non-static closures that are given a scope but a <strong><code>NULL</code></strong> instance are made
      static and non-static non-scoped closures that are given a non-null
      instance are scoped to an unspecified class.
     </p>
   
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       If you only want to duplicate the anonymous functions, you can use
       <a href="#language.oop5.cloning" class="link">cloning</a> instead.
      </p>
     </p></blockquote>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-closure.bindto-parameters">
     <h3 class="title">Parameters</h3>
     <dl>
   
      
       <dt>
   <code class="parameter">newthis</code></dt>
   
       <dd>
   
        <p class="para">
         The object to which the given anonymous function should be bound, or
         <strong><code>NULL</code></strong> for the closure to be unbound. 
        </p>
       </dd>
   
      
      
       <dt>
   <code class="parameter">newscope</code></dt>
   
       <dd>
   
        <p class="para">
         The class scope to which the closure is to be associated, or
         &#039;static&#039; to keep the current one. If an object is given, the type of the
         object will be used instead. This determines the visibility of protected
         and private methods of the bound object.
         It is not allowed to pass (an object of) an internal class as this parameter.
        </p>
       </dd>
   
      
     </dl>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-closure.bindto-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the newly created <a href="#class.closure" class="classname">Closure</a> object
       or <strong><code>FALSE</code></strong> on failure
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-closure.bindto-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>7.0.0</td>
          <td>
           <code class="parameter">newscope</code> can not be (an object of) an internal
           class anymore, what was possible prior to this version.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
   
    <div class="refsect1 examples" id="refsect1-closure.bindto-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="example-340">
      <p><strong>Example #1 <span class="function"><strong>Closure::bindTo()</strong></span> example</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">val&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">getClosure</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//returns&nbsp;closure&nbsp;bound&nbsp;to&nbsp;this&nbsp;object&nbsp;and&nbsp;scope<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;function()&nbsp;{&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">val</span><span style="color: #007700">;&nbsp;};<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$ob1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ob2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$ob1</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClosure</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindTo</span><span style="color: #007700">(</span><span style="color: #0000BB">$ob2</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
      <div class="example-contents"><p>The above example will output
   something similar to:</p></div>
      <div class="example-contents screen">
   <div class="cdata"><pre>
   1
   2
   </pre></div>
      </div>
     </div>
    </div>
   
   
   
    <div class="refsect1 seealso" id="refsect1-closure.bindto-seealso">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#functions.anonymous" class="link">Anonymous functions</a></li>
      <li class="member"><span class="methodname"><a href="#closure.bind" class="methodname" rel="rdfs-seeAlso">Closure::bind()</a> - Duplicates a closure with a specific bound object and class scope</span></li>
     </ul>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="closure.call" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Closure::call</h1>
     <p class="verinfo">(PHP 7)</p><p class="refpurpose"><span class="refname">Closure::call</span> &mdash; <span class="dc-title">Binds and calls the closure</span></p>
   
    </div>
    <div class="refsect1 description" id="refsect1-closure.call-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Closure::call</strong></span>
       ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
      [, <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$...</code></span>
     ] ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   
     <p class="para rdfs-comment">
      Temporarily binds the closure to <code class="parameter">newthis</code>, and calls
      it with any given parameters.
     </p>
    </div>
   
    <div class="refsect1 parameters" id="refsect1-closure.call-parameters">
     <h3 class="title">Parameters</h3>
     <dl>
   
      
       <dt>
   <code class="parameter">newthis</code></dt>
   
       <dd>
   
        <p class="para">
         The <span class="type"><a href="#language.types.object" class="type object">object</a></span> to bind the closure to for the duration of the
         call.
        </p>
       </dd>
   
      
      
       <dt>
   <code class="parameter">...</code></dt>
   
       <dd>
   
        <p class="para">
         Zero or more parameters, which will be given as parameters to the
         closure.
        </p>
       </dd>
   
      
     </dl>
   
    </div>
   
    <div class="refsect1 returnvalues" id="refsect1-closure.call-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the return value of the closure.
     </p>
    </div>
   
    <div class="refsect1 examples" id="refsect1-closure.call-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="example-341">
      <p><strong>Example #1 <span class="function"><strong>Closure::call()</strong></span> example</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Value&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$three&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Value</span><span style="color: #007700">(</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$four&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Value</span><span style="color: #007700">(</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$closure&nbsp;</span><span style="color: #007700">=&nbsp;function&nbsp;(</span><span style="color: #0000BB">$delta</span><span style="color: #007700">)&nbsp;{&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">()&nbsp;+&nbsp;</span><span style="color: #0000BB">$delta</span><span style="color: #007700">);&nbsp;};<br /></span><span style="color: #0000BB">$closure</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">call</span><span style="color: #007700">(</span><span style="color: #0000BB">$three</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$closure</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">call</span><span style="color: #007700">(</span><span style="color: #0000BB">$four</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
      <div class="example-contents"><p>The above example will output:</p></div>
      <div class="example-contents screen">
   <div class="cdata"><pre>
   int(7)
   int(8)
   </pre></div>
      </div>
     </div>
    </div>
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="closure.fromcallable" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Closure::fromCallable</h1>
     <p class="verinfo">(PHP 7 &gt;= 7.1.0)</p><p class="refpurpose"><span class="refname">Closure::fromCallable</span> &mdash; <span class="dc-title">Converts a callable into a closure</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-closure.fromcallable-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>Closure::fromCallable</strong></span>
       ( <span class="methodparam"><span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> <code class="parameter">$callable</code></span>
      ) : <span class="type"><a href="#class.closure" class="type Closure">Closure</a></span></div>
   
     <p class="para rdfs-comment">
      Create and return a new <a href="#functions.anonymous" class="link">anonymous
      function</a> from given <code class="parameter">callable</code> using the
      current scope. This method checks if the <code class="parameter">callable</code> is
      callable in the current scope and throws a <a href="#class.typeerror" class="classname">TypeError</a>
      if it is not.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-closure.fromcallable-parameters">
     <h3 class="title">Parameters</h3>
     <dl>
   
      
       <dt>
   <code class="parameter">callable</code></dt>
   
       <dd>
   
        <p class="para">
         The callable to convert.
        </p>
       </dd>
   
      
     </dl>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-closure.fromcallable-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the newly created <a href="#class.closure" class="classname">Closure</a> or throws a
      <a href="#class.typeerror" class="classname">TypeError</a> if the <code class="parameter">callable</code> is
      not callable in the current scope.
     </p>
    </div>
   
   </div>
   <hr />
   
   
   
   
   
   
   <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#closure.construct">Closure::__construct</a> — Constructor that disallows instantiation</li><li><a href="#closure.bind">Closure::bind</a> — Duplicates a closure with a specific bound object and class scope</li><li><a href="#closure.bindto">Closure::bindTo</a> — Duplicates the closure with a new bound object and class scope</li><li><a href="#closure.call">Closure::call</a> — Binds and calls the closure</li><li><a href="#closure.fromcallable">Closure::fromCallable</a> — Converts a callable into a closure</li></ul>
   </div>
   
   <hr />
   
   
   
   
    
   
   
   <div id="class.generator" class="reference"><hr />
   
    <h1 class="title">The Generator class</h1>
    
   
    <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p>
   
   
     <div class="section" id="generator.intro">
      <h2 class="title">Introduction</h2>
      <p class="para">
       <strong class="classname">Generator</strong> objects are returned from <a href="#language.generators" class="link">generators</a>.
      </p>
      
      <div class="caution"><strong class="caution">Caution</strong>
       <p class="para">
        <strong class="classname">Generator</strong> objects cannot be instantiated via
        <a href="#language.oop5.basic.new" class="link">new</a>.
       </p>
      </div>
   
     </div>
   
   
     <div class="section" id="generator.synopsis">
      <h2 class="title">Class synopsis</h2>
   
   
      <div class="classsynopsis">
       <div class="ooclass"></div>
   
   
       <div class="classsynopsisinfo">
        <span class="ooclass">
         <strong class="classname">Generator</strong>
        </span>
        
        <span class="oointerface">implements 
         <span class="interfacename"><a href="#class.iterator" class="interfacename">Iterator</a></span>
        </span>
        {</div>
   
       
       <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
       <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.current" class="methodname">current</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.getreturn" class="methodname">getReturn</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.key" class="methodname">key</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.next" class="methodname">next</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.rewind" class="methodname">rewind</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.send" class="methodname">send</a></span>
       ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.throw" class="methodname">throw</a></span>
       ( <span class="methodparam"><span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span> <code class="parameter">$exception</code></span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.valid" class="methodname">valid</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type">bool</span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#generator.wakeup" class="methodname">__wakeup</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
      }</div>
   
   
     </div>
   
    </div>
   
    
   
   
   <div id="generator.current" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::current</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::current</span> &mdash; <span class="dc-title">Get the yielded value</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.current-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::current</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.current-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.current-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the yielded value.
     </p>
    </div>
   
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.getreturn" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::getReturn</h1>
     <p class="verinfo">(PHP 7)</p><p class="refpurpose"><span class="refname">Generator::getReturn</span> &mdash; <span class="dc-title">Get the return value of a generator</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.getreturn-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::getReturn</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.getreturn-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.getreturn-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the generator&#039;s return value once it has finished executing.
     </p>
    </div>
   
   
   <div class="refsect1 examples" id="refsect1-generator.getreturn-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="example-342">
       <p><strong>Example #1 <span class="methodname"><strong>Generator::getReturn()</strong></span> example</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$gen&nbsp;</span><span style="color: #007700">=&nbsp;(function()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br />})();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$gen&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />}<br /><br />echo&nbsp;</span><span style="color: #0000BB">$gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReturn</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;</span>
   </span>
   </code></div>
       </div>
   
       <div class="example-contents"><p>The above example will output:</p></div>
       <div class="example-contents screen">
   <div class="cdata"><pre>
   1
   2
   3
   </pre></div>
       </div>
      </div>
     </p>
    </div>
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.key" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::key</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::key</span> &mdash; <span class="dc-title">Get the yielded key</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.key-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::key</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   
     <p class="para rdfs-comment">
      Gets the key of the yielded value.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.key-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.key-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the yielded key.
     </p>
    </div>
   
   
     <div class="refsect1 examples" id="refsect1-generator.key-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="example-343">
       <p><strong>Example #1 <span class="methodname"><strong>Generator::key()</strong></span> example</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">Gen</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #DD0000">'key'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'value'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$gen&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Gen</span><span style="color: #007700">();<br /><br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">key</span><span style="color: #007700">()}</span><span style="color: #DD0000">&nbsp;=&gt;&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">current</span><span style="color: #007700">()}</span><span style="color: #DD0000">"</span><span style="color: #007700">;</span>
   </span>
   </code></div>
       </div>
   
       <div class="example-contents"><p>The above example will output:</p></div>
       <div class="example-contents screen">
   <div class="cdata"><pre>
   key =&gt; value
   </pre></div>
       </div>
      </div>
     </p>
    </div>
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.next" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::next</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::next</span> &mdash; <span class="dc-title">Resume execution of the generator</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.next-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::next</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
     <p class="para rdfs-comment">
      Calling <span class="methodname"><strong>Generator::next()</strong></span> has the same effect as calling
      <span class="methodname"><a href="#generator.send" class="methodname">Generator::send()</a></span> with <strong><code>NULL</code></strong> as argument.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.next-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.next-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      No value is returned.
     </p>
    </div>
   
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.rewind" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::rewind</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::rewind</span> &mdash; <span class="dc-title">Rewind the iterator</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.rewind-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::rewind</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
     <p class="para rdfs-comment">
      If iteration has already begun, this will throw an exception.
     </p>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.rewind-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.rewind-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      No value is returned.
     </p>
    </div>
   
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.send" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::send</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::send</span> &mdash; <span class="dc-title">Send a value to the generator</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.send-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::send</strong></span>
       ( <span class="methodparam"><span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   
     <p class="para rdfs-comment">
      Sends the given value to the generator as the result of the current <a href="#control-structures.yield" class="link">yield</a>
      expression and resumes execution of the generator.
     </p>
     <p class="para">
      If the generator is not at a <a href="#control-structures.yield" class="link">yield</a> expression when this method is called, it
      will first be let to advance to the first <a href="#control-structures.yield" class="link">yield</a> expression before sending the
      value. As such it is not necessary to &quot;prime&quot; PHP generators with a
      <span class="methodname"><a href="#generator.next" class="methodname">Generator::next()</a></span> call (like it is done in Python).
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.send-parameters">
     <h3 class="title">Parameters</h3>
     <dl>
   
      
       <dt>
   <code class="parameter">value</code></dt>
   
       <dd>
   
        <p class="para">
         Value to send into the generator. This value will be the return value of the
         <a href="#control-structures.yield" class="link">yield</a> expression the generator is currently at.
        </p>
       </dd>
   
      
     </dl>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.send-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the yielded value.
     </p>
    </div>
   
   
    <div class="refsect1 examples" id="refsect1-generator.send-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="example-344">
       <p><strong>Example #1 Using <span class="methodname"><strong>Generator::send()</strong></span> to inject values</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">printer</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"I'm&nbsp;printer!"</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$string&nbsp;</span><span style="color: #007700">=&nbsp;yield;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$printer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">printer</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$printer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">(</span><span style="color: #DD0000">'Hello&nbsp;world!'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$printer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">(</span><span style="color: #DD0000">'Bye&nbsp;world!'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
       <div class="example-contents"><p>The above example will output:</p></div>
       <div class="example-contents screen">
   <div class="cdata"><pre>
   I&#039;m printer!
   Hello world!
   Bye world!
   </pre></div>
       </div>
      </div>
     </p>
    </div>
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.throw" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::throw</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::throw</span> &mdash; <span class="dc-title">Throw an exception into the generator</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.throw-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::throw</strong></span>
       ( <span class="methodparam"><span class="type"><a href="#class.throwable" class="type Throwable">Throwable</a></span> <code class="parameter">$exception</code></span>
      ) : <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span></div>
   
     <p class="para rdfs-comment">
      Throws an exception into the generator and resumes execution of the generator.
      The behavior will be the same as if the current <a href="#control-structures.yield" class="link">yield</a> expression was replaced with
      a <code class="literal">throw $exception</code> statement.
     </p>
     <p class="para">
      If the generator is already closed when this method is invoked, the exception will
      be thrown in the caller&#039;s context instead.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.throw-parameters">
     <h3 class="title">Parameters</h3>
     <dl>
   
      
       <dt>
   <code class="parameter">exception</code></dt>
   
       <dd>
   
        <p class="para">
         Exception to throw into the generator.
        </p>
       </dd>
   
      
     </dl>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.throw-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the yielded value.
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-generator.throw-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>7.0.0</td>
          <td>
           The <code class="parameter">exception</code> parameter also accepts <a href="#class.throwable" class="classname">Throwable</a> now.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
    
    <div class="refsect1 examples" id="refsect1-generator.throw-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="example-345">
       <p><strong>Example #1 Throwing an exception into a generator</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">gen</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Foo\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Exception:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">()}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Bar\n"</span><span style="color: #007700">;<br />}<br />&nbsp;<br /></span><span style="color: #0000BB">$gen&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gen</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">throw</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Test'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
       <div class="example-contents"><p>The above example will output:</p></div>
       <div class="example-contents screen">
   <div class="cdata"><pre>
   Foo
   Exception: Test
   Bar
   </pre></div>
       </div>
      </div>
     </p>
    </div>
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.valid" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::valid</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::valid</span> &mdash; <span class="dc-title">Check if the iterator has been closed</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.valid-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::valid</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type">bool</span></div>
   
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.valid-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.valid-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns <strong><code>FALSE</code></strong> if the iterator has been closed. Otherwise returns <strong><code>TRUE</code></strong>.
     </p>
    </div>
   
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="generator.wakeup" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Generator::__wakeup</h1>
     <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p><p class="refpurpose"><span class="refname">Generator::__wakeup</span> &mdash; <span class="dc-title">Serialize callback</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-generator.wakeup-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>Generator::__wakeup</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type void">void</span></span></div>
   
     <p class="para rdfs-comment">
      Throws an exception as generators can&#039;t be serialized.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-generator.wakeup-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-generator.wakeup-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      No value is returned.
     </p>
    </div>
   
   
   
   </div>
   <hr />
   
   
   
   
   
   <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#generator.current">Generator::current</a> — Get the yielded value</li><li><a href="#generator.getreturn">Generator::getReturn</a> — Get the return value of a generator</li><li><a href="#generator.key">Generator::key</a> — Get the yielded key</li><li><a href="#generator.next">Generator::next</a> — Resume execution of the generator</li><li><a href="#generator.rewind">Generator::rewind</a> — Rewind the iterator</li><li><a href="#generator.send">Generator::send</a> — Send a value to the generator</li><li><a href="#generator.throw">Generator::throw</a> — Throw an exception into the generator</li><li><a href="#generator.valid">Generator::valid</a> — Check if the iterator has been closed</li><li><a href="#generator.wakeup">Generator::__wakeup</a> — Serialize callback</li></ul>
   </div>
   
   <hr />
   
   
   
   
    
   
   
   <div id="class.weakreference" class="reference"><hr />
   
    <h1 class="title">The WeakReference class</h1>
    
   
    <div class="partintro"><p class="verinfo">(PHP 7 &gt;= 7.4.0)</p>
   
   
     <div class="section" id="weakreference.intro">
      <h2 class="title">Introduction</h2>
      <p class="para">
       Weak references allow the programmer to retain a reference to an object which does not prevent
       the object from being destroyed. They are useful for implementing cache like structures.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        The class <strong class="classname">WeakReference</strong> is not to be confused with the class
        <a href="#class.weakref" class="classname">WeakRef</a> of the <a href="#class.weakref" class="link">Weakref</a> extension.
       </p>
      </p></blockquote>
      <p class="para">
       <strong class="classname">WeakReference</strong>s cannot be serialized.
      </p>
     </div>
   
   
     <div class="section" id="weakreference.synopsis">
      <h2 class="title">Class synopsis</h2>
   
   
      <div class="classsynopsis">
       <div class="ooclass"></div>
   
   
       <div class="classsynopsisinfo">
        <span class="ooclass">
         <strong class="classname">WeakReference</strong>
        </span>
        {</div>
   
       
       <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
       <div class="constructorsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#weakreference.construct" class="methodname">__construct</a></span>
       ( <span class="methodparam">void</span>
      )</div>
   
       <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="#weakreference.create" class="methodname">create</a></span>
       ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$referent</code></span>
      ) : <span class="type"><a href="#class.weakreference" class="type WeakReference">WeakReference</a></span></div>
   <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><a href="#weakreference.get" class="methodname">get</a></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type ?object">?object</span></span></div>
   
      }</div>
   
   
     </div>
   
     <div class="section" id="weakreference.examples">
      <h2 class="title">WeakReference Examples</h2>
      <p class="para">
       <div class="example" id="example-346">
        <p><strong>Example #1 Basic WeakReference Usage</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$weakref&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">WeakReference</span><span style="color: #007700">::</span><span style="color: #0000BB">create</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$weakref</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">());<br />unset(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$weakref</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
        <div class="example-contents"><p>The above example will output
   something similar to:</p></div>
        <div class="example-contents screen">
   <div class="cdata"><pre>
   object(stdClass)#1 (0) {
   }
   NULL
   </pre></div>
        </div>
       </div>
      </p>
     </div>
   
    </div>
   
    
   
   
   <div id="weakreference.construct" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">WeakReference::__construct</h1>
     <p class="verinfo">(PHP 7 &gt;= 7.4.0)</p><p class="refpurpose"><span class="refname">WeakReference::__construct</span> &mdash; <span class="dc-title">Constructor that disallows instantiation</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-weakreference.construct-description">
     <h3 class="title">Description</h3>
     <div class="constructorsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>WeakReference::__construct</strong></span>
       ( <span class="methodparam">void</span>
      )</div>
   
     <p class="para rdfs-comment">
      This method exists only to disallow instantiation of the <a href="#class.weakreference" class="classname">WeakReference</a> class.
      Weak references are to be instantiated with the factory method <span class="methodname"><a href="#weakreference.create" class="methodname">WeakReference::create()</a></span>.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-weakreference.construct-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    
   
    <div class="refsect1 seealso" id="refsect1-weakreference.construct-seealso">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><span class="methodname"><a href="#weakreference.create" class="methodname" rel="rdfs-seeAlso">WeakReference::create()</a> - Create a new weak reference</span></li>
     </ul>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="weakreference.create" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">WeakReference::create</h1>
     <p class="verinfo">(PHP 7 &gt;= 7.4.0)</p><p class="refpurpose"><span class="refname">WeakReference::create</span> &mdash; <span class="dc-title">Create a new weak reference</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-weakreference.create-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>WeakReference::create</strong></span>
       ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$referent</code></span>
      ) : <span class="type"><a href="#class.weakreference" class="type WeakReference">WeakReference</a></span></div>
   
     <p class="para rdfs-comment">
      Creates a new <a href="#class.weakreference" class="classname">WeakReference</a>.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-weakreference.create-parameters">
     <h3 class="title">Parameters</h3>
     <dl>
   
      
       <dt>
   <code class="parameter">referent</code></dt>
   
       <dd>
   
        <p class="para">
         The object to be weakly referenced.
        </p>
       </dd>
   
      
     </dl>
   
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-weakreference.create-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the freshly instantiated object.
     </p>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
    
   
   
   <div id="weakreference.get" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">WeakReference::get</h1>
     <p class="verinfo">(PHP 7 &gt;= 7.4.0)</p><p class="refpurpose"><span class="refname">WeakReference::get</span> &mdash; <span class="dc-title">Get a weakly referenced Object</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-weakreference.get-description">
     <h3 class="title">Description</h3>
     <div class="methodsynopsis dc-description">
      <span class="modifier">public</span> <span class="methodname"><strong>WeakReference::get</strong></span>
       ( <span class="methodparam">void</span>
      ) : <span class="type"><span class="type ?object">?object</span></span></div>
   
     <p class="para rdfs-comment">
      Gets a weakly referenced object.
      If the object has already been destroyed, <strong><code>NULL</code></strong> is returned.
     </p>
    </div>
   
   
    <div class="refsect1 parameters" id="refsect1-weakreference.get-parameters">
     <h3 class="title">Parameters</h3>
     <p class="para">This function has no parameters.</p>
    </div>
   
   
    <div class="refsect1 returnvalues" id="refsect1-weakreference.get-returnvalues">
     <h3 class="title">Return Values</h3>
     <p class="para">
      Returns the referenced <span class="type"><a href="#language.types.object" class="type object">object</a></span>, or <strong><code>NULL</code></strong> if the object has been destroyed.
     </p>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
   <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#weakreference.construct">WeakReference::__construct</a> — Constructor that disallows instantiation</li><li><a href="#weakreference.create">WeakReference::create</a> — Create a new weak reference</li><li><a href="#weakreference.get">WeakReference::get</a> — Get a weakly referenced Object</li></ul>
   </div>
   
   <hr />
   
   
   
   
   
   </div>
   
   <hr />
   
   
   
   
   
     
   
   
   <div id="context" class="reference"><hr />
    <h1 class="title">Context options and parameters</h1>
    
    <div class="partintro">
     <p class="para">
      PHP offers various context options and parameters which can be used with all
      filesystem and stream wrappers. The context is created with
      <span class="function"><a href="#function.stream-context-create" class="function">stream_context_create()</a></span>. Options are set with
      <span class="function"><a href="#function.stream-context-set-option" class="function">stream_context_set_option()</a></span> and parameters with
      <span class="function"><a href="#function.stream-context-set-params" class="function">stream_context_set_params()</a></span>.
     </p>
    </div>
    
    
   
   
   <div id="context.socket" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Socket context options</h1>
     <p class="refpurpose"><span class="refname">Socket context options</span> &mdash; <span class="dc-title">Socket context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.socket-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Socket context options are available for all wrappers that work over
      sockets, like <code class="literal">tcp</code>, <code class="literal">http</code> and
      <code class="literal">ftp</code>.
     </p>
    </div>
   
    
    <div class="refsect1 options" id="refsect1-context.socket-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.socket.bindto"><code class="parameter">bindto</code></dt>
   
        <dd>
   
         <p class="para">
          Used to specify the IP address (either IPv4 or IPv6) and/or the
          port number that PHP will use to access the network. The syntax
          is <code class="literal">ip:port</code> for IPv4 addresses, and
          <code class="literal">[ip]:port</code> for IPv6 addresses.
          Setting the IP or the port to <code class="literal">0</code> will let the system
          choose the IP and/or port.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           As FTP creates two socket connections during normal operation,
           the port number cannot be specified using this option.
          </p>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.socket.backlog"><code class="parameter">backlog</code></dt>
   
        <dd>
   
         <p class="para">
          Used to  limit  the  number  of  outstanding  connections  in  the
          socket&#039;s  listen  queue.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           This is only applicable to <span class="function"><a href="#function.stream-socket-server" class="function">stream_socket_server()</a></span>.
          </p>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.socket.ipv6_v6only"><code class="parameter">ipv6_v6only</code></dt>
   
        <dd>
   
         <p class="para">
          Overrides the OS default regarding mapping IPv4 into IPv6.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           This is important in particular when trying to listen on IPv4 addresses
           separately while there exists a binding on <code class="literal">[::]</code>.
          </p>
          <p class="para">
           This is only applicable to <span class="function"><a href="#function.stream-socket-server" class="function">stream_socket_server()</a></span>.
          </p>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.socket.so_reuseport"><code class="parameter">so_reuseport</code></dt>
   
        <dd>
   
         <p class="para">
          Allows multiple bindings to a same ip:port pair, even from separate processes.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           This is only applicable to <span class="function"><a href="#function.stream-socket-server" class="function">stream_socket_server()</a></span>.
          </p>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.socket.so_broadcast"><code class="parameter">so_broadcast</code></dt>
   
        <dd>
   
         <p class="para">
          Enables sending and receiving data to/from broadcast addresses.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           This is only applicable to <span class="function"><a href="#function.stream-socket-server" class="function">stream_socket_server()</a></span>.
          </p>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.socket.tcp_nodelay"><code class="parameter">tcp_nodelay</code></dt>
   
        <dd>
   
         <p class="para">
          Setting this option to <strong><code>TRUE</code></strong> will set <code class="literal">SOL_TCP,NO_DELAY=1</code>
          appropriately, thus disabling the TCP Nagle algorithm.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-context.socket-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>7.1.0</td>
          <td>
           Added <code class="parameter">tcp_nodelay</code>.
          </td>
         </tr>
   
         <tr>
          <td>7.0.1</td>
          <td>
           Added <code class="parameter">ipv6_v6only</code>.
          </td>
         </tr>
   
         <tr>
          <td>7.0.0</td>
          <td>
           Added <code class="parameter">so_broadcast</code>.
          </td>
         </tr>
   
         <tr>
          <td>7.0.0</td>
          <td>
           Added <code class="parameter">so_reuseport</code>.
          </td>
         </tr>
   
         <tr>
          <td>5.3.3</td>
          <td>
           Added <code class="parameter">backlog</code>.
          </td>
         </tr>
   
         <tr>
          <td>5.1.0</td>
          <td>
           Added <code class="parameter">bindto</code>.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
    
    <div class="refsect1 examples" id="refsect1-context.socket-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="example-347">
       <p><strong>Example #1 Basic <code class="parameter">bindto</code> usage example</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;connect&nbsp;to&nbsp;the&nbsp;internet&nbsp;using&nbsp;the&nbsp;'192.168.0.100'&nbsp;IP<br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'socket'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'bindto'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'192.168.0.100:0'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;connect&nbsp;to&nbsp;the&nbsp;internet&nbsp;using&nbsp;the&nbsp;'192.168.0.100'&nbsp;IP&nbsp;and&nbsp;port&nbsp;'7000'<br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'socket'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'bindto'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'192.168.0.100:7000'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;connect&nbsp;to&nbsp;the&nbsp;internet&nbsp;using&nbsp;the&nbsp;'2001:db8::1'&nbsp;IPv6&nbsp;address<br />//&nbsp;and&nbsp;port&nbsp;'7000'<br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'socket'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'bindto'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'[2001:db8::1]:7000'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;connect&nbsp;to&nbsp;the&nbsp;internet&nbsp;using&nbsp;port&nbsp;'7000'<br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'socket'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'bindto'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'0:7000'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;the&nbsp;context...<br /></span><span style="color: #0000BB">$context&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(</span><span style="color: #0000BB">$opts</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;...and&nbsp;use&nbsp;it&nbsp;to&nbsp;fetch&nbsp;the&nbsp;data<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$context</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
    </div>
   
    
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.http" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">HTTP context options</h1>
     <p class="refpurpose"><span class="refname">HTTP context options</span> &mdash; <span class="dc-title">HTTP context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.http-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Context options for <code class="literal">http://</code> and <code class="literal">https://</code>
      transports.
     </p>
    </div>
   
   
    <div class="refsect1 options" id="refsect1-context.http-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.http.method">
         <code class="parameter">method</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          <strong><code>GET</code></strong>, <strong><code>POST</code></strong>, or
          any other HTTP method supported by the remote server.
         </p>
         <p class="para">
          Defaults to <strong><code>GET</code></strong>.
         </p>
        </dd>
   
       
       
        <dt id="context.http.header">
         <code class="parameter">header</code>
         <span class="type"><a href="#language.types.array" class="type array">array</a></span> or <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Additional headers to be sent during request. Values
          in this option will override other values (such as
          <code class="literal">User-agent:</code>, <code class="literal">Host:</code>,
          and <code class="literal">Authentication:</code>).
         </p>
        </dd>
   
       
       
        <dt id="context.http.user-agent">
         <code class="parameter">user_agent</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Value to send with <code class="literal">User-Agent:</code> header. This value will
          only be used if user-agent is <em class="emphasis">not</em> specified
          in the <code class="literal">header</code> context option above.
         </p>
         <p class="para">
          By default the
          <a href="#ini.user-agent" class="link">user_agent</a>
          <var class="filename">php.ini</var> setting is used.
         </p>
        </dd>
   
       
       
        <dt id="context.http.content">
         <code class="parameter">content</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Additional data to be sent after the headers. Typically used
          with POST or PUT requests.
         </p>
        </dd>
   
       
       
        <dt id="context.http.proxy">
         <code class="parameter">proxy</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          URI specifying address of proxy server. (e.g.
          <code class="literal">tcp://proxy.example.com:5100</code>).
         </p>
        </dd>
   
       
       
        <dt id="context.http.request-fulluri">
         <code class="parameter">request_fulluri</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          When set to <strong><code>TRUE</code></strong>, the entire URI will be used when
          constructing the request.  (i.e.
          <code class="literal">GET http://www.example.com/path/to/file.html HTTP/1.0</code>).
          While this is a non-standard request format, some
          proxy servers require it.
         </p>
         <p class="para">
          Defaults to <strong><code>FALSE</code></strong>.
         </p>
        </dd>
   
       
       
        <dt id="context.http.follow-location">
         <code class="parameter">follow_location</code>
         <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Follow <code class="literal">Location</code> header redirects. Set to
          <code class="literal">0</code> to disable.
         </p>
         <p class="para">
          Defaults to <code class="literal">1</code>.
         </p>
        </dd>
   
       
       
        <dt id="context.http.max-redirects">
         <code class="parameter">max_redirects</code>
         <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          The max number of redirects to follow. Value <code class="literal">1</code> or
          less means that no redirects are followed.
         </p>
         <p class="para">
          Defaults to <code class="literal">20</code>.
         </p>
        </dd>
   
       
       
        <dt id="context.http.protocol-version">
         <code class="parameter">protocol_version</code>
         <span class="type"><a href="#language.types.float" class="type float">float</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          HTTP protocol version.
         </p>
         <p class="para">
          Defaults to <code class="literal">1.0</code>.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           PHP prior to 5.3.0 does not implement chunked transfer decoding.
           If this value is set to <code class="literal">1.1</code> it is your
           responsibility to be <code class="literal">1.1</code> compliant.
          </p>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.http.timeout">
         <code class="parameter">timeout</code>
         <span class="type"><a href="#language.types.float" class="type float">float</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Read timeout in seconds, specified by a <span class="type"><a href="#language.types.float" class="type float">float</a></span>
          (e.g. <code class="literal">10.5</code>).
         </p>
         <p class="para">
          By default the
          <a href="#ini.default-socket-timeout" class="link">default_socket_timeout</a>
          <var class="filename">php.ini</var> setting is used.
         </p>
        </dd>
   
       
       
        <dt id="context.http.ignore-errors">
         <code class="parameter">ignore_errors</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Fetch the content even on failure status codes.
         </p>
         <p class="para">
          Defaults to <strong><code>FALSE</code></strong>.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-context.http-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>5.3.4</td>
          <td>
           Added <code class="parameter">follow_location</code>.
          </td>
         </tr>
   
         <tr>
          <td>5.3.0</td>
          <td>
           The <code class="parameter">protocol_version</code> supports chunked transfer
           decoding when set to <code class="literal">1.1</code>.
          </td>
         </tr>
   
         <tr>
          <td>5.2.10</td>
          <td>
           Added <code class="parameter">ignore_errors</code>.
          </td>
         </tr>
   
         <tr>
          <td>5.2.10</td>
          <td>
           The <code class="parameter">header</code> can now be an numerically indexed <span class="type"><a href="#language.types.array" class="type array">array</a></span>.
          </td>
         </tr>
   
         <tr>
          <td>5.2.1</td>
          <td>
           Added <code class="parameter">timeout</code>.
          </td>
         </tr>
   
         <tr>
          <td>5.1.0</td>
          <td>
           Added HTTPS proxying through HTTP proxies.
          </td>
         </tr>
   
         <tr>
          <td>5.1.0</td>
          <td>
           Added <code class="parameter">max_redirects</code>.
          </td>
         </tr>
   
         <tr>
          <td>5.1.0</td>
          <td>
           Added <code class="parameter">protocol_version</code>.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
    
    <div class="refsect1 examples" id="refsect1-context.http-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="example-348">
       <p><strong>Example #1 Fetch a page and send POST data</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$postdata&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">http_build_query</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'var1'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'some&nbsp;content'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'var2'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'doh'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'http'&nbsp;</span><span style="color: #007700">=&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'method'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'POST'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'header'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Content-type:&nbsp;application/x-www-form-urlencoded'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'content'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$postdata<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">$context&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(</span><span style="color: #0000BB">$opts</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/submit.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$context</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
     <p class="para">
      <div class="example" id="iterator.example.basic">
       <p><strong>Example #2 Ignore redirects but fetch headers and content </strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$url&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"http://www.example.org/header.php"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'http'&nbsp;</span><span style="color: #007700">=&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'method'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'GET'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'max_redirects'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'0'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'ignore_errors'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'1'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">$context&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(</span><span style="color: #0000BB">$opts</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$context</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;header&nbsp;information&nbsp;as&nbsp;well&nbsp;as&nbsp;meta&nbsp;data<br />//&nbsp;about&nbsp;the&nbsp;stream<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">stream_get_meta_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;actual&nbsp;data&nbsp;at&nbsp;$url<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
    </div>
   
   
    <div class="refsect1 notes" id="refsect1-context.http-notes">
     <h3 class="title">Notes</h3>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>Underlying socket stream context options</strong><br />
      <span class="simpara">
       Additional context options may be supported by the
       <a href="#transports.inet" class="link">underlying transport</a>
       For <code class="literal">http://</code> streams, refer to context
       options for the <code class="literal">tcp://</code> transport.  For
       <code class="literal">https://</code> streams, refer to context options
       for the <code class="literal">ssl://</code> transport.
      </span>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>HTTP status line</strong><br />
      <span class="simpara">
       When this stream wrapper follows a redirect, the
       <code class="literal">wrapper_data</code> returned by
       <span class="function"><a href="#function.stream-get-meta-data" class="function">stream_get_meta_data()</a></span> might not necessarily contain
       the HTTP status line that actually applies to the content data at index
       <code class="literal">0</code>.
      </span>
      <div class="example-contents screen">
   <div class="cdata"><pre>
   array (
     &#039;wrapper_data&#039; =&gt;
     array (
       0 =&gt; &#039;HTTP/1.0 301 Moved Permantenly&#039;,
       1 =&gt; &#039;Cache-Control: no-cache&#039;,
       2 =&gt; &#039;Connection: close&#039;,
       3 =&gt; &#039;Location: http://example.com/foo.jpg&#039;,
       4 =&gt; &#039;HTTP/1.1 200 OK&#039;,
       ...
   </pre></div>
      </div>
      <span class="simpara">
       The first request returned a <code class="literal">301</code> (permanent redirect),
       so the stream wrapper automatically followed the redirect to get a
       <code class="literal">200</code> response (index = <code class="literal">4</code>).
      </span>
     </p></blockquote>
    </div>
   
   
    <div class="refsect1 seealso" id="refsect1-context.http-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#wrappers.http" class="xref">http://</a></li>
       <li class="member"><a href="#context.socket" class="xref">Socket context options</a></li>
       <li class="member"><a href="#context.ssl" class="xref">SSL context options</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.ftp" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">FTP context options</h1>
     <p class="refpurpose"><span class="refname">FTP context options</span> &mdash; <span class="dc-title">FTP context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.ftp-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Context options for <code class="literal">ftp://</code> and <code class="literal">ftps://</code>
      transports.
     </p>
    </div>
   
   
    <div class="refsect1 options" id="refsect1-context.ftp-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.ftp.overwrite">
         <code class="parameter">overwrite</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Allow overwriting of already existing files on remote server.
          Applies to write mode (uploading) only.
         </p>
         <p class="para">
          Defaults to <strong><code>FALSE</code></strong>.
         </p>
        </dd>
   
       
       
        <dt id="context.ftp.resume-pos">
         <code class="parameter">resume_pos</code>
         <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          File offset at which to begin transfer. Applies to read mode (downloading) only.
         </p>
         <p class="para">
          Defaults to <code class="literal">0</code> (Beginning of File).
         </p>
        </dd>
   
       
       
        <dt id="context.ftp.proxy">
         <code class="parameter">proxy</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Proxy FTP request via http proxy server. Applies to file read
          operations only. Ex: <code class="literal">tcp://squid.example.com:8000</code>.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-context.ftp-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>5.1.0</td>
          <td>
           Added <code class="parameter">proxy</code>.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
   
    <div class="refsect1 notes" id="refsect1-context.ftp-notes">
     <h3 class="title">Notes</h3>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>Underlying socket stream context options</strong><br />
      <span class="simpara">
       Additional context options may be supported by the
       <a href="#transports.inet" class="link">underlying transport</a>
       For <code class="literal">ftp://</code> streams, refer to context
       options for the <code class="literal">tcp://</code> transport.  For
       <code class="literal">ftps://</code> streams, refer to context options
       for the <code class="literal">ssl://</code> transport.
      </span>
     </p></blockquote>
    </div>
   
   
    <div class="refsect1 seealso" id="refsect1-context.ftp-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#wrappers.ftp" class="xref">ftp://</a></li>
       <li class="member"><a href="#context.socket" class="xref">Socket context options</a></li>
       <li class="member"><a href="#context.ssl" class="xref">SSL context options</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.ssl" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">SSL context options</h1>
     <p class="refpurpose"><span class="refname">SSL context options</span> &mdash; <span class="dc-title">SSL context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.ssl-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Context options for <code class="literal">ssl://</code> and <code class="literal">tls://</code>
      transports.
     </p>
    </div>
   
   
    <div class="refsect1 options" id="refsect1-context.ssl-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.ssl.peer-name">
         <code class="parameter">peer_name</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Peer name to be used. If this value is not set, then the name is guessed
          based on the hostname used when opening the stream.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.verify-peer">
         <code class="parameter">verify_peer</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Require verification of SSL certificate used.
         </p>
         <p class="para">
          Defaults to <strong><code>TRUE</code></strong>.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.verify-peer-name">
         <code class="parameter">verify_peer_name</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Require verification of peer name.
         </p>
         <p class="para">
          Defaults to <strong><code>TRUE</code></strong>.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.allow-self-signed">
         <code class="parameter">allow_self_signed</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Allow self-signed certificates. Requires
          <a href="#context.ssl.verify-peer" class="link"><code class="parameter">verify_peer</code></a>.
         </p>
         <p class="para">
          Defaults to <strong><code>FALSE</code></strong>
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.cafile">
         <code class="parameter">cafile</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Location of Certificate Authority file on local filesystem
          which should be used with the <code class="literal">verify_peer</code>
          context option to authenticate the identity of the remote peer.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.capath">
         <code class="parameter">capath</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          If <code class="literal">cafile</code> is not specified or if the certificate
          is not found there, the directory pointed to by <code class="literal">capath</code> 
          is searched for a suitable certificate.  <code class="literal">capath</code>
          must be a correctly hashed certificate directory.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.local-cert">
         <code class="parameter">local_cert</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Path to local certificate file on filesystem.  It must be a PEM
          encoded file which contains your certificate and private key.
          It can optionally contain the certificate chain of issuers.
          The private key also may be contained in a separate file specified
          by <code class="literal">local_pk</code>.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.local-pk">
         <code class="parameter">local_pk</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Path to local private key file on filesystem in case of separate
          files for certificate (<code class="literal">local_cert</code>) and private key.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.passphrase">
         <code class="parameter">passphrase</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Passphrase with which your <code class="literal">local_cert</code> file
          was encoded.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.cn-match">
         <code class="parameter">CN_match</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Common Name we are expecting.  PHP will perform limited wildcard
          matching.  If the Common Name does not match this, the connection
          attempt will fail.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
           <span class="simpara">
             This option is deprecated, in favour of <code class="parameter">peer_name</code>,
             as of PHP 5.6.0.
           </span>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.ssl.verify-depth">
         <code class="parameter">verify_depth</code>
         <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Abort if the certificate chain is too deep.
         </p>
         <p class="para">
          Defaults to no verification.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.ciphers">
         <code class="parameter">ciphers</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Sets the list of available ciphers. The format of the string is described
          in <a href="https://www.openssl.org/docs/manmaster/man1/ciphers.html#CIPHER-LIST-FORMAT" class="link external">&raquo;&nbsp;ciphers(1)</a>.
         </p>
         <p class="para">
          Defaults to <code class="literal">DEFAULT</code>.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.capture-peer-cert">
         <code class="parameter">capture_peer_cert</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          If set to <strong><code>TRUE</code></strong> a <code class="literal">peer_certificate</code> context option
          will be created containing the peer certificate.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.capture-peer-cert-chain">
         <code class="parameter">capture_peer_cert_chain</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          If set to <strong><code>TRUE</code></strong> a <code class="literal">peer_certificate_chain</code> context
          option will be created containing the certificate chain.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.sni-enabled">
         <code class="parameter">SNI_enabled</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          If set to <strong><code>TRUE</code></strong> server name indication will be enabled. Enabling SNI 
          allows multiple certificates on the same IP address.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.sni-server-name">
         <code class="parameter">SNI_server_name</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          If set, then this value will be used as server name for server name 
          indication. If this value is not set, then the server name is guessed 
          based on the hostname used when opening the stream.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
           <span class="simpara">
             This option is deprecated, in favour of <code class="parameter">peer_name</code>,
             as of PHP 5.6.0.
           </span>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.ssl.disable-compression">
         <code class="parameter">disable_compression</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          If set, disable TLS compression. This can help mitigate the CRIME attack
          vector. 
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.peer-fingerprint">
         <code class="parameter">peer_fingerprint</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span> | <span class="type"><a href="#language.types.array" class="type array">array</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Aborts when the remote certificate digest doesn&#039;t match the specified
          hash.
         </p>
         <p class="para">
          When a <span class="type"><a href="#language.types.string" class="type string">string</a></span> is used, the length will determine which hashing algorithm
          is applied, either &quot;md5&quot; (32) or &quot;sha1&quot; (40).
         </p>
         <p class="para">
          When an <span class="type"><a href="#language.types.array" class="type array">array</a></span> is used, the keys indicate the hashing algorithm name
          and each corresponding value is the expected digest.
         </p>
        </dd>
   
       
       
        <dt id="context.ssl.security-level">
         <code class="parameter">security_level</code>
         <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Sets the security level. If not specified the library default security level is used.
          The security levels are described in 
          <a href="https://www.openssl.org/docs/man1.1.0/man3/SSL_CTX_get_security_level.html" class="link external">&raquo;&nbsp;SSL_CTX_get_security_level(3)</a>.
         </p>
         <p class="para">
          Available as of PHP 7.2.0 and OpenSSL 1.1.0.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-context.ssl-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>7.2.0</td>
          <td>
           Added <code class="parameter">security_levels</code>. Requires OpenSSL &gt;= 1.1.0.
          </td>
         </tr>
   
         <tr>
          <td>5.6.0</td>
          <td>
           Added <code class="parameter">peer_fingerprint</code> and <code class="parameter">verify_peer_name</code>.
           <code class="parameter">verify_peer</code> default changed to <strong><code>TRUE</code></strong>.
          </td>
         </tr>
   
         <tr>
          <td>5.4.13</td>
          <td>
           Added <code class="parameter">disable_compression</code>. Requires OpenSSL &gt;= 1.0.0.
          </td>
         </tr>
   
         <tr>
          <td>5.3.2</td>
          <td>
           Added <code class="parameter">SNI_enabled</code> and
           <code class="parameter">SNI_server_name</code>.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
   
    <div class="refsect1 notes" id="refsect1-context.ssl-notes">
     <h3 class="title">Notes</h3>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       Because <code class="literal">ssl://</code> is the underlying transport for the
       <a href="#wrappers.http" class="link"><code class="literal">https://</code></a> and
       <a href="#wrappers.ftp" class="link"><code class="literal">ftps://</code></a> wrappers, 
       any context options which apply to <code class="literal">ssl://</code> also apply to
       <code class="literal">https://</code> and <code class="literal">ftps://</code>.
      </span>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       For SNI (Server Name Indication) to be available, then PHP must be compiled 
       with OpenSSL 0.9.8j or greater. Use the 
       <strong><code>OPENSSL_TLSEXT_SERVER_NAME</code></strong> to determine whether SNI is 
       supported.
      </span>
     </p></blockquote>
    </div>
   
   
    <div class="refsect1 seealso" id="refsect1-context.ssl-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#context.socket" class="xref">Socket context options</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.curl" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">CURL context options</h1>
     <p class="refpurpose"><span class="refname">CURL context options</span> &mdash; <span class="dc-title">CURL context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.curl-description">
     <h3 class="title">Description</h3>
     <p class="para">
      CURL context options are available when the
      <a href="#intro.curl" class="link">CURL</a> extension was compiled using the
      <strong class="option unknown">--with-curlwrappers</strong> configure option.
     </p>
    </div>
   
   
    <div class="refsect1 options" id="refsect1-context.curl-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.curl.method">
         <code class="parameter">method</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          <strong><code>GET</code></strong>, <strong><code>POST</code></strong>, or
          any other HTTP method supported by the remote server.
         </p>
         <p class="para">
          Defaults to <strong><code>GET</code></strong>.
         </p>
        </dd>
   
       
       
        <dt id="context.curl.header">
         <code class="parameter">header</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Additional headers to be sent during request. Values
          in this option will override other values (such as
          <code class="literal">User-agent:</code>, <code class="literal">Host:</code>,
          and <code class="literal">Authentication:</code>).
         </p>
        </dd>
   
       
       
        <dt id="context.curl.user-agent">
         <code class="parameter">user_agent</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Value to send with User-Agent: header.
         </p>
         <p class="para">
          By default the
          <a href="#ini.user-agent" class="link">user_agent</a>
          <var class="filename">php.ini</var> setting is used.
         </p>
        </dd>
   
       
       
        <dt id="context.curl.content">
         <code class="parameter">content</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Additional data to be sent after the headers. This option is not used
          for <strong><code>GET</code></strong> or <strong><code>HEAD</code></strong> requests.
         </p>
        </dd>
   
       
       
        <dt id="context.curl.proxy">
         <code class="parameter">proxy</code>
         <span class="type"><a href="#language.types.string" class="type string">string</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          URI specifying address of proxy server. (e.g.
          <code class="literal">tcp://proxy.example.com:5100</code>).
         </p>
        </dd>
   
       
       
        <dt id="context.curl.max-redirects">
         <code class="parameter">max_redirects</code>
         <span class="type"><a href="#language.types.integer" class="type integer">integer</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          The max number of redirects to follow. Value <code class="literal">1</code> or
          less means that no redirects are followed.
         </p>
         <p class="para">
          Defaults to <code class="literal">20</code>.
         </p>
        </dd>
   
       
       
        <dt id="context.curl.curl-verify-ssl-host">
         <code class="parameter">curl_verify_ssl_host</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Verify the host.
         </p>
         <p class="para">
          Defaults to <strong><code>FALSE</code></strong>
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           This option is available for both the http and ftp protocol wrappers.
          </p>
         </p></blockquote>
        </dd>
   
       
       
        <dt id="context.curl.curl-verify-ssl-peer">
         <code class="parameter">curl_verify_ssl_peer</code>
         <span class="type"><a href="#language.types.boolean" class="type boolean">boolean</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Require verification of SSL certificate used.
         </p>
         <p class="para">
          Defaults to <strong><code>FALSE</code></strong>
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <p class="para">
           This option is available for both the http and ftp protocol wrappers.
          </p>
         </p></blockquote>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 examples" id="refsect1-context.curl-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="iteratoraggregate.example.basic">
       <p><strong>Example #1 Fetch a page and send POST data</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$postdata&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">http_build_query</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'var1'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'some&nbsp;content'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'var2'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'doh'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'http'&nbsp;</span><span style="color: #007700">=&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'method'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'POST'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'header'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Content-type:&nbsp;application/x-www-form-urlencoded'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'content'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$postdata<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">$context&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(</span><span style="color: #0000BB">$opts</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/submit.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$context</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
    </div>
   
   
    <div class="refsect1 seealso" id="refsect1-context.curl-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#context.socket" class="xref">Socket context options</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.phar" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Phar context options</h1>
     <p class="refpurpose"><span class="refname">Phar context options</span> &mdash; <span class="dc-title">Phar context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.phar-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Context options for <code class="literal">phar://</code> wrapper.
     </p>
    </div>
   
   
    <div class="refsect1 options" id="refsect1-context.phar-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.phar.compress">
         <code class="parameter">compress</code>
         <span class="type"><a href="#language.types.integer" class="type int">int</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          One of <a href="#phar.constants.compression" class="link">Phar compression constants</a>.
         </p>
        </dd>
   
       
       
        <dt id="context.phar.metadata">
         <code class="parameter">metadata</code>
         <span class="type"><a href="#language.types.mixed" class="type mixed">mixed</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          Phar metadata. See <span class="function"><a href="#phardata.setmetadata" class="function">Phar::setMetadata()</a></span>.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 seealso" id="refsect1-context.phar-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#wrappers.phar" class="xref">phar://</a></li>
       <li class="member"><a href="#phar.using.stream" class="link">Phar stream wrapper</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.mongodb" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">MongoDB context options</h1>
     <p class="refpurpose"><span class="refname">MongoDB context options</span> &mdash; <span class="dc-title">MongoDB context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.mongodb-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Context options for <code class="literal">mongodb://</code> transports.
     </p>
    </div>
   
   
    <div class="refsect1 options" id="refsect1-context.mongodb-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.mongodb.log-cmd-insert">
         <code class="parameter">log_cmd_insert</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A callback function called when inserting a document, see <span class="function"><a href="#function.log-cmd-insert" class="function">log_cmd_insert()</a></span>.
         </p>
        </dd>
   
       
       
        <dt id="context.mongodb.log-cmd-delete">
         <code class="parameter">log_cmd_delete</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A callback function called when deleting a document, see <span class="function"><a href="#function.log-cmd-delete" class="function">log_cmd_delete()</a></span>.
         </p>
        </dd>
   
       
       
        <dt id="context.mongodb.log-cmd-update">
         <code class="parameter">log_cmd_update</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A callback function called when updating a document, see <span class="function"><a href="#function.log-cmd-update" class="function">log_cmd_update()</a></span>.
         </p>
        </dd>
   
       
       
        <dt id="context.mongodb.log-write-batch">
         <code class="parameter">log_write_batch</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A callback function called when executing a Write Batch, see <span class="function"><a href="#function.log-write-batch" class="function">log_write_batch()</a></span>.
         </p>
        </dd>
   
       
       
        <dt id="context.mongodb.log-reply">
         <code class="parameter">log_reply</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A callback function called when reading a reply from MongoDB, see <span class="function"><a href="#function.log-reply" class="function">log_reply()</a></span>.
         </p>
        </dd>
   
       
       
        <dt id="context.mongodb.log-getmore">
         <code class="parameter">log_getmore</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A callback function called when retrieving more results from a MongoDB cursor, see <span class="function"><a href="#function.log-getmore" class="function">log_getmore()</a></span>.
         </p>
        </dd>
   
       
       
        <dt id="context.mongodb.log-killcursor">
         <code class="parameter">log_killcursor</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A callback function called executing a killcursor opcode, see <span class="function"><a href="#function.log-killcursor" class="function">log_killcursor()</a></span>.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-context.mongodb-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>pecl/mongo 1.5.0</td>
          <td>
           Added Write API Context options
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
    
    <div class="refsect1 seealso" id="refsect1-context.mongodb-seealso">
     <h3 class="title">See Also</h3>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#context.socket" class="xref">Socket context options</a></li>
       <li class="member"><a href="#context.ssl" class="xref">SSL context options</a></li>
      </ul>
     </p>
    </div>
   
   
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.params" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Context parameters</h1>
     <p class="refpurpose"><span class="refname">Context parameters</span> &mdash; <span class="dc-title">Context parameter listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.params-description">
     <h3 class="title">Description</h3>
     <p class="para">
      These <code class="literal">parameters</code> can be set on a <code class="literal">context</code>
      using the <span class="function"><a href="#function.stream-context-set-params" class="function">stream_context_set_params()</a></span> function.
     </p>
    </div>
   
   
    <div class="refsect1 options" id="refsect1-context.params-options">
     <h3 class="title">Parameters</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.params.notification">
         <code class="parameter">notification</code>
         <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span>
        </dt>
   
        <dd>
   
         <p class="para">
          A <span class="type"><a href="#language.types.callable" class="type callable">callable</a></span> to be called when an event occurs on a stream.
         </p>
         <p class="para">
          See <a href="#function.stream-notification-callback" class="link">
          stream_notification_callback</a> for more details.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
   
   </div>
   <hr />
   
    
   
   
   
    
   
   
   <div id="context.zip" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">Zip context options</h1>
     <p class="refpurpose"><span class="refname">Zip context options</span> &mdash; <span class="dc-title">Zip context option listing</span></p>
   
    </div>
    
    <div class="refsect1 description" id="refsect1-context.zip-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Zip context options are available for <code class="literal">zip</code> wrappers.
     </p>
    </div>
   
    
    <div class="refsect1 options" id="refsect1-context.zip-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <dl>
   
       
        <dt id="context.zip.password"><code class="parameter">password</code></dt>
   
        <dd>
   
         <p class="para">
          Used to specify password used for encrypted archive.
         </p>
        </dd>
   
       
      </dl>
   
     </p>
    </div>
   
    
    <div class="refsect1 changelog" id="refsect1-context.zip-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>PHP 7.2.0, PECL zip 1.14.0</td>
          <td>
           Added <code class="parameter">password</code>.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
    
    <div class="refsect1 examples" id="refsect1-context.zip-examples">
     <h3 class="title">Examples</h3>
     <p class="para">
      <div class="example" id="arrayaccess.example.basic">
       <p><strong>Example #1 Basic <code class="parameter">password</code> usage example</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Read&nbsp;encrypted&nbsp;archive<br /></span><span style="color: #0000BB">$opts&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'zip'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'password'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;),<br />);<br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;the&nbsp;context...<br /></span><span style="color: #0000BB">$context&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(</span><span style="color: #0000BB">$opts</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;...and&nbsp;use&nbsp;it&nbsp;to&nbsp;fetch&nbsp;the&nbsp;data<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'zip://test.zip#test.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$context</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
    </div>
   
    
   </div>
   <hr />
   
    
   
   
   
    
   <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#context.socket">Socket context options</a> — Socket context option listing</li><li><a href="#context.http">HTTP context options</a> — HTTP context option listing</li><li><a href="#context.ftp">FTP context options</a> — FTP context option listing</li><li><a href="#context.ssl">SSL context options</a> — SSL context option listing</li><li><a href="#context.curl">CURL context options</a> — CURL context option listing</li><li><a href="#context.phar">Phar context options</a> — Phar context option listing</li><li><a href="#context.mongodb">MongoDB context options</a> — MongoDB context option listing</li><li><a href="#context.params">Context parameters</a> — Context parameter listing</li><li><a href="#context.zip">Zip context options</a> — Zip context option listing</li></ul>
   </div>
   
   <hr />
   
    
   
   
   
     
   
   
   <div id="wrappers" class="reference"><hr />
    <h1 class="title">Supported Protocols and Wrappers</h1>
    <div class="partintro">
     <p class="para">
      PHP comes with many built-in wrappers for various URL-style protocols
      for use with the filesystem functions such as <span class="function"><a href="#function.fopen" class="function">fopen()</a></span>,
      <span class="function"><a href="#function.copy" class="function">copy()</a></span>, <span class="function"><a href="#function.file-exists" class="function">file_exists()</a></span> and
      <span class="function"><a href="#function.filesize" class="function">filesize()</a></span>.
      In addition to these wrappers, it is possible to register custom wrappers
      using the <span class="function"><a href="#function.stream-wrapper-register" class="function">stream_wrapper_register()</a></span> function.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       The URL syntax used to describe a wrapper only supports the
       <code class="literal">scheme://...</code> syntax. The <code class="literal">scheme:/</code>
       and <code class="literal">scheme:</code> syntaxes are not supported.
      </span>
     </p></blockquote>
    </div>
    
    
   
   
   <div id="wrappers.file" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">file://</h1>
     <p class="refpurpose"><span class="refname">file://</span> &mdash; <span class="dc-title">Accessing local filesystem</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.file-description">
     <h3 class="title">Description</h3>
     <p class="para">
      <em class="emphasis">Filesystem</em> is the default wrapper used with PHP and represents the local filesystem.
      When a relative path is specified (a path which does not begin with /, \, \\, or a Windows drive letter)
      the path provided will be applied against the current working directory.  In many cases this is the
      directory in which the script resides unless it has been changed.  Using the CLI sapi, this defaults
      to the directory from which the script was called.
     </p>
     <p class="simpara">
      With some functions, such as <span class="function"><a href="#function.fopen" class="function">fopen()</a></span> and <span class="function"><a href="#function.file-get-contents" class="function">file_get_contents()</a></span>,
      <code class="literal">include_path</code> may be optionally searched for relative paths as well.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.file-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">/path/to/file.ext</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">relative/path/to/file.ext</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">fileInCwd.ext</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">C:/path/to/winfile.ext</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">C:\path\to\winfile.ext</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">\\smbserver\share\path\to\winfile.ext</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">file:///path/to/file.ext</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.file-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>Yes</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.http" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">http://</h1>
     <h1 class="refname">https://</h1>
     <p class="refpurpose"><span class="refname">http://</span> -- <span class="refname">https://</span> &mdash; <span class="dc-title">Accessing HTTP(s) URLs</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.http-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Allows read-only access to files/resources via HTTP 1.0,
      using the HTTP GET method. A <code class="literal">Host:</code> header is sent with the request
      to handle name-based virtual hosts.  If you have configured
      a <a href="#ini.user-agent" class="link">user_agent</a> string using
      your <var class="filename">php.ini</var> file or the stream context, it will also be included
      in the request.
     </p>
     <p class="simpara">
      The stream allows access to the <em class="emphasis">body</em> of
      the resource; the headers are stored in the
      <var class="varname"><a href="#reserved.variables.httpresponseheader" class="classname">$http_response_header</a></var> variable.
     </p>
     <p class="simpara">
      If it&#039;s important to know the URL of the resource where
      your document came from (after all redirects have been processed),
      you&#039;ll need to process the series of response headers returned by the
      stream.
     </p>
     <p class="simpara">
      The <a href="#ini.from" class="link">from</a> directive will be used for the
      <code class="literal">From:</code> header if set and not overwritten by the
      <a href="#context" class="xref">Context options and parameters</a>.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.http-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">http://example.com</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">http://example.com/file.php?var1=val1&amp;var2=val2</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">http://user:password@example.com</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">https://example.com</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">https://example.com/file.php?var1=val1&amp;var2=val2</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">https://user:password@example.com</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.http-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>N/A</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 examples" id="refsect1-wrappers.http-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="example-352">
      <p><strong>Example #1 Detecting which URL we ended up on after redirects</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$url&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'http://www.example.com/redirecting_page.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$meta_data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_get_meta_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$meta_data</span><span style="color: #007700">[</span><span style="color: #DD0000">'wrapper_data'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$response</span><span style="color: #007700">)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Were&nbsp;we&nbsp;redirected?&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">))&nbsp;==&nbsp;</span><span style="color: #DD0000">'location:&nbsp;'</span><span style="color: #007700">)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;update&nbsp;$url&nbsp;with&nbsp;where&nbsp;we&nbsp;were&nbsp;redirected&nbsp;to&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$url&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
    </div>
   
   
    <div class="refsect1 notes" id="refsect1-wrappers.http-notes">
     <h3 class="title">Notes</h3>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       HTTPS is only supported when the <a href="#book.openssl" class="link">openssl</a>
       extension is enabled.
      </span>
     </p></blockquote>
     <p class="simpara">
      HTTP connections are read-only; writing data or copying
      files to an HTTP resource is not supported.
     </p>
     <p class="simpara">
      Sending <em class="emphasis">POST</em> and <em class="emphasis">PUT</em> requests, for example,
      can be done with the help of <a href="#context.http" class="link">HTTP Contexts</a>.
     </p>
    </div>
   
   
    <div class="refsect1 seealso" id="refsect1-wrappers.http-seealso">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#context.http" class="xref">HTTP context options</a></li>
      <li class="member"><var class="varname"><a href="#reserved.variables.httpresponseheader" class="classname">$http_response_header</a></var></li>
      <li class="member"><span class="function"><a href="#function.stream-get-meta-data" class="function" rel="rdfs-seeAlso">stream_get_meta_data()</a> - Retrieves header/meta data from streams/file pointers</span></li>
     </ul>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.ftp" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">ftp://</h1>
     <h1 class="refname">ftps://</h1>
     <p class="refpurpose"><span class="refname">ftp://</span> -- <span class="refname">ftps://</span> &mdash; <span class="dc-title">Accessing FTP(s) URLs</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.ftp-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Allows read access to existing files and creation of new files
      via FTP.  If the server does not support passive mode ftp, the
      connection will fail.
     </p>
     <p class="simpara">
      You can open files for either reading or writing, but not both
      simultaneously.  If the remote file already exists on the ftp
      server and you attempt to open it for writing but have not specified
      the context option <code class="literal">overwrite</code>, the connection
      will fail.  If you need to overwrite existing files over ftp,
      specify the <code class="literal">overwrite</code> option in the context
      and open the file for writing.  Alternatively, you can
      use the <a href="#ref.ftp" class="link">FTP extension</a>.
     </p>
     <p class="simpara">
      If you have set the <a href="#ini.from" class="link">from</a> directive
      in <var class="filename">php.ini</var>, then this value will be sent as the anonymous FTP
      password.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.ftp-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">ftp://example.com/pub/file.txt</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ftp://user:password@example.com/pub/file.txt</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ftps://example.com/pub/file.txt</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ftps://user:password@example.com/pub/file.txt</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.ftp-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>Yes (new files/existing files with <code class="parameter">overwrite</code>)</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>
           <span class="function"><a href="#function.filesize" class="function">filesize()</a></span>, <span class="function"><a href="#function.filetype" class="function">filetype()</a></span>,
           <span class="function"><a href="#function.file-exists" class="function">file_exists()</a></span>, <span class="function"><a href="#function.is-file" class="function">is_file()</a></span>,
           and <span class="function"><a href="#function.is-dir" class="function">is_dir()</a></span> elements only.
           As of PHP 5.1.0: <span class="function"><a href="#function.filemtime" class="function">filemtime()</a></span>.
          </td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>Yes</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 notes" id="refsect1-wrappers.ftp-notes">
     <h3 class="title">Notes</h3>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       FTPS is only supported when the <a href="#book.openssl" class="link">openssl</a>
       extension is enabled.
      </p>
      <span class="simpara">
       If the server does not support SSL, then the connection falls back
       to regular unencrypted ftp.
      </span>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>Appending</strong><br />
      <span class="simpara">
       Files may be appended via the <code class="literal">ftp://</code> URL wrapper.
      </span>
     </p></blockquote>
    </div>
   
   
    <div class="refsect1 seealso" id="refsect1-wrappers.ftp-seealso">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#context.ftp" class="xref">FTP context options</a></li>
     </ul>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.php" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">php://</h1>
     <p class="refpurpose"><span class="refname">php://</span> &mdash; <span class="dc-title">Accessing various I/O streams</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.php-description">
     <h3 class="title">Description</h3>
     <p class="para">
      PHP provides a number of miscellaneous I/O streams that allow access to
      PHP&#039;s own input and output streams, the standard input, output and error
      file descriptors, in-memory and disk-backed temporary file streams, and
      filters that can manipulate other file resources as they are read from and
      written to.
     </p>
   
     <div class="refsect2 unknown-descriptioo" id="wrappers.php.std">
      <h4 class="title">php://stdin, php://stdout and php://stderr</h4>
      <p class="simpara">
       <var class="filename">php://stdin</var>, <var class="filename">php://stdout</var> and
       <var class="filename">php://stderr</var> allow direct access to the corresponding
       input or output stream of the PHP process.  The stream references a
       duplicate file descriptor, so if you open <var class="filename">php://stdin</var>
       and later close it, you close only your copy of the descriptor-the actual
       stream referenced by <strong><code>STDIN</code></strong> is unaffected.  Note that
       PHP exhibited buggy behavior in this regard until PHP 5.2.1.  It is
       recommended that you simply use the constants <strong><code>STDIN</code></strong>,
       <strong><code>STDOUT</code></strong> and <strong><code>STDERR</code></strong> instead of
       manually opening streams using these wrappers.
      </p>
      <p class="simpara">
       <var class="filename">php://stdin</var> is read-only, whereas
       <var class="filename">php://stdout</var> and <var class="filename">php://stderr</var> are
       write-only.
      </p>
     </div>
   
   
     <div class="refsect2 unknown-unknown-descriptiop" id="wrappers.php.input">
      <h4 class="title">php://input</h4>
      <p class="simpara">
       <var class="filename">php://input</var> is a read-only stream that allows you to
       read raw data from the request body. In the case of POST requests, it is
       preferable to use <var class="filename">php://input</var> instead of <var class="varname"><a href="#reserved.variables.httprawpostdata" class="classname">$HTTP_RAW_POST_DATA</a></var> as it does not depend
       on special <var class="filename">php.ini</var> directives. Moreover, for those cases where
       <var class="varname"><a href="#reserved.variables.httprawpostdata" class="classname">$HTTP_RAW_POST_DATA</a></var> is not populated by default, it is a
       potentially less memory intensive alternative to activating <a href="#ini.always-populate-raw-post-data" class="link">always_populate_raw_post_data</a>.
       <var class="filename">php://input</var> is not available with
       <code class="literal">enctype=&quot;multipart/form-data&quot;</code>.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <span class="simpara">
        Prior to PHP 5.6, a stream opened with <var class="filename">php://input</var>
        could only be read once; the stream did not support seek operations.
        However, depending on the SAPI implementation, it may be possible to open
        another <var class="filename">php://input</var> stream and restart reading. This
        is only possible if the request body data has been saved. Typically, this
        is the case for POST requests, but not other request methods, such as PUT
        or PROPFIND.
       </span>
      </p></blockquote>
     </div>
   
   
     <div class="refsect2 unknown-unknown-unknown-descriptioq" id="wrappers.php.output">
      <h4 class="title">php://output</h4>
      <p class="para">
       <var class="filename">php://output</var> is a write-only stream that allows you to
       write to the output buffer mechanism in the same way as
       <span class="function"><a href="#function.print" class="function">print</a></span> and <span class="function"><a href="#function.echo" class="function">echo</a></span>.
      </p>
     </div>
   
   
     <div class="refsect2 unknown-unknown-unknown-unknown-descriptior" id="wrappers.php.fd">
      <h4 class="title">php://fd</h4>
      <p class="simpara">
       <var class="filename">php://fd</var> allows direct access to the given file
       descriptor. For example, <var class="filename">php://fd/3</var> refers to file
       descriptor 3.
      </p>
     </div>
   
   
     <div class="refsect2 unknown-unknown-unknown-unknown-unknown-descriptios" id="wrappers.php.memory">
      <h4 class="title">php://memory and php://temp</h4>
      <p class="simpara">
       <var class="filename">php://memory</var> and <var class="filename">php://temp</var> are
       read-write streams that allow temporary data to be stored in a file-like
       wrapper. The only difference between the two is that
       <var class="filename">php://memory</var> will always store its data in memory,
       whereas <var class="filename">php://temp</var> will use a temporary file once the
       amount of data stored hits a predefined limit (the default is 2 MB). The
       location of this temporary file is determined in the same way as the
       <span class="function"><a href="#function.sys-get-temp-dir" class="function">sys_get_temp_dir()</a></span> function.
      </p>
      <p class="simpara">
       The memory limit of <var class="filename">php://temp</var> can be controlled by
       appending <code class="literal">/maxmemory:NN</code>, where <code class="literal">NN</code> is
       the maximum amount of data to keep in memory before using a temporary
       file, in bytes.
      </p>
     </div>
   
   
     <div class="refsect2 unknown-unknown-unknown-unknown-unknown-unknown-descriptiot" id="wrappers.php.filter">
      <h4 class="title">php://filter</h4>
      <p class="simpara">
       <var class="filename">php://filter</var> is a kind of meta-wrapper designed to
       permit the application of <a href="#filters" class="link">filters</a> to a
       stream at the time of opening.  This is useful with all-in-one file
       functions such as <span class="function"><a href="#function.readfile" class="function">readfile()</a></span>,
       <span class="function"><a href="#function.file" class="function">file()</a></span>, and <span class="function"><a href="#function.file-get-contents" class="function">file_get_contents()</a></span>
       where there is otherwise no opportunity to apply a filter to the stream
       prior the contents being read.
      </p>
      <p class="para">
       The <var class="filename">php://filter</var> target takes the following parameters
       as part of its path. Multiple filter chains can be specified on one path.
       Please refer to the examples for specifics on using these parameters.
      </p>
      <p class="para">
       <table class="doctable table">
        <caption><strong>php://filter parameters</strong></caption>
        
         <thead>
          <tr>
           <th>Name</th>
           <th>Description</th>
          </tr>
   
         </thead>
   
         <tbody class="tbody">
          <tr>
           <td>
            <code class="literal">resource=&lt;stream to be filtered&gt;</code>
           </td>
           <td>
            This parameter is required. It specifies the stream that you would
            like to filter.
           </td>
          </tr>
   
          <tr>
           <td>
            <code class="literal">read=&lt;filter list to apply to read chain&gt;</code>
           </td>
           <td>
            This parameter is optional. One or more filter names can be provided
            here, separated by the pipe character (<code class="literal">|</code>).
           </td>
          </tr>
   
          <tr>
           <td>
            <code class="literal">write=&lt;filter list to apply to write chain&gt;</code>
           </td>
           <td>
            This parameter is optional. One or more filter names can be provided
            here, separated by the pipe character (<code class="literal">|</code>).
           </td>
          </tr>
   
          <tr>
           <td>
            <code class="literal">&lt;filter list to apply to both chains&gt;</code>
           </td>
           <td>
            Any filter lists which are not prefixed by <code class="literal">read=</code>
            or <code class="literal">write=</code> will be applied to both the read and
            write chains as appropriate.
           </td>
          </tr>
   
         </tbody>
        
       </table>
   
      </p>
     </div>
   
    </div>
   
   
    <div class="refsect1 options" id="refsect1-wrappers.php-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>
        Wrapper Summary (for <code class="literal">php://filter</code>, refer to the
        summary of the wrapper being filtered)
       </strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Restricted by <a href="#ini.allow-url-include" class="link">allow_url_include</a></td>
          <td>
           <code class="literal">php://input</code>,
           <code class="literal">php://stdin</code>,
           <code class="literal">php://memory</code> and
           <code class="literal">php://temp</code> only.
          </td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>
           <code class="literal">php://stdin</code>,
           <code class="literal">php://input</code>,
           <code class="literal">php://fd</code>,
           <code class="literal">php://memory</code> and
           <code class="literal">php://temp</code> only.
          </td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>
           <code class="literal">php://stdout</code>,
           <code class="literal">php://stderr</code>,
           <code class="literal">php://output</code>,
           <code class="literal">php://fd</code>,
           <code class="literal">php://memory</code> and
           <code class="literal">php://temp</code> only.
          </td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>
           <code class="literal">php://stdout</code>,
           <code class="literal">php://stderr</code>,
           <code class="literal">php://output</code>,
           <code class="literal">php://fd</code>,
           <code class="literal">php://memory</code> and
           <code class="literal">php://temp</code> only. (Equivalent to writing)
          </td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>
           <code class="literal">php://fd</code>,
           <code class="literal">php://memory</code> and
           <code class="literal">php://temp</code> only.
          </td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>
           <code class="literal">php://memory</code> and
           <code class="literal">php://temp</code> only.
          </td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stream-select" class="function">stream_select()</a></span></td>
          <td>
           <code class="literal">php://stdin</code>,
           <code class="literal">php://stdout</code>, 
           <code class="literal">php://stderr</code>,
           <code class="literal">php://fd</code> and
           <code class="literal">php://temp</code> only.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 changelog" id="refsect1-wrappers.php-changelog">
     <h3 class="title">Changelog</h3>
     <p class="para">
      <table class="doctable informaltable">
       
        <thead>
         <tr>
          <th>Version</th>
          <th>Description</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>5.6.0</td>
          <td>
           <var class="filename">php://input</var> was made reusable.
          </td>
         </tr>
   
         <tr>
          <td>5.3.6</td>
          <td>
           <var class="filename">php://fd</var> was added.
          </td>
         </tr>
   
         <tr>
          <td>5.1.0</td>
          <td>
           <var class="filename">php://memory</var> and <var class="filename">php://temp</var>
           were added.
          </td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
   
   
    <div class="refsect1 examples" id="refsect1-wrappers.php-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="serializable.example.basic">
      <p><strong>Example #1 php://temp/maxmemory</strong></p>
      <div class="example-contents"><p>
       This optional parameter allows setting the memory limit before
       <var class="filename">php://temp</var> starts using a temporary file.
      </p></div>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Set&nbsp;the&nbsp;limit&nbsp;to&nbsp;5&nbsp;MB.<br /></span><span style="color: #0000BB">$fiveMBs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1024&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"php://temp/maxmemory:</span><span style="color: #0000BB">$fiveMBs</span><span style="color: #DD0000">"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r+'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">fputs</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"hello\n"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Read&nbsp;what&nbsp;we&nbsp;have&nbsp;written.<br /></span><span style="color: #0000BB">rewind</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
     <div class="example" id="example-354">
      <p><strong>Example #2 php://filter/resource=&lt;stream to be filtered&gt;</strong></p>
      <div class="example-contents"><p>
       This parameter must be located at
       the end of your <var class="filename">php://filter</var> specification and
       should point to the stream which you want filtered.
      </p></div>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;This&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;simply:<br />&nbsp;&nbsp;readfile("http://www.example.com");<br />&nbsp;&nbsp;since&nbsp;no&nbsp;filters&nbsp;are&nbsp;actually&nbsp;specified&nbsp;*/<br /><br /></span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #DD0000">"php://filter/resource=http://www.example.com"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
     <div class="example" id="example-355">
      <p><strong>Example #3 php://filter/read=&lt;filter list to apply to read chain&gt;</strong></p>
      <div class="example-contents"><p>
       This parameter takes one or more
       filternames separated by the pipe character <code class="literal">|</code>.
      </p></div>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;This&nbsp;will&nbsp;output&nbsp;the&nbsp;contents&nbsp;of<br />&nbsp;&nbsp;www.example.com&nbsp;entirely&nbsp;in&nbsp;uppercase&nbsp;*/<br /></span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #DD0000">"php://filter/read=string.toupper/resource=http://www.example.com"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;This&nbsp;will&nbsp;do&nbsp;the&nbsp;same&nbsp;as&nbsp;above<br />&nbsp;&nbsp;but&nbsp;will&nbsp;also&nbsp;ROT13&nbsp;encode&nbsp;it&nbsp;*/<br /></span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #DD0000">"php://filter/read=string.toupper|string.rot13/resource=http://www.example.com"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
     <div class="example" id="example-356">
      <p><strong>Example #4 php://filter/write=&lt;filter list to apply to write chain&gt;</strong></p>
      <div class="example-contents"><p>
       This parameter takes one or more
       filternames separated by the pipe character <code class="literal">|</code>.
      </p></div>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;This&nbsp;will&nbsp;filter&nbsp;the&nbsp;string&nbsp;"Hello&nbsp;World"<br />&nbsp;&nbsp;through&nbsp;the&nbsp;rot13&nbsp;filter,&nbsp;then&nbsp;write&nbsp;to<br />&nbsp;&nbsp;example.txt&nbsp;in&nbsp;the&nbsp;current&nbsp;directory&nbsp;*/<br /></span><span style="color: #0000BB">file_put_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">"php://filter/write=string.rot13/resource=example.txt"</span><span style="color: #007700">,</span><span style="color: #DD0000">"Hello&nbsp;World"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
     <div class="example" id="example-357">
      <p><strong>Example #5 php://memory and php://temp are not reusable</strong></p>
      <div class="example-contents"><p>
       <var class="filename">php://memory</var> and <var class="filename">php://temp</var>
       are not reusable, i.e. after the streams have been closed there is no way
       to refer to them again.
      </p></div>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   file_put_contents('php://memory',&nbsp;'PHP');<br />echo&nbsp;file_get_contents('php://memory');&nbsp;//&nbsp;prints&nbsp;nothing</span>
   </code></div>
      </div>
   
     </div>
    </div>
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.compression" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">zlib://</h1>
     <h1 class="refname">bzip2://</h1>
     <h1 class="refname">zip://</h1>
     <p class="refpurpose"><span class="refname">zlib://</span> -- <span class="refname">bzip2://</span> -- <span class="refname">zip://</span> &mdash; <span class="dc-title">Compression Streams</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.compression-description">
     <h3 class="title">Description</h3>
     <p class="simpara"><var class="filename">compress.zlib://</var> and <var class="filename">compress.bzip2://</var></p>
   
     <p class="simpara">
      <var class="filename">zlib:</var> works like <span class="function"><a href="#function.gzopen" class="function">gzopen()</a></span>, except that the
      stream can be used with <span class="function"><a href="#function.fread" class="function">fread()</a></span> and the other
      filesystem functions.  This is deprecated due
      to ambiguities with filenames containing &#039;:&#039; characters; use
      <var class="filename">compress.zlib://</var> instead.
     </p>
   
     <p class="simpara">
      <var class="filename">compress.zlib://</var> and
      <var class="filename">compress.bzip2://</var> are equivalent to
      <span class="function"><a href="#function.gzopen" class="function">gzopen()</a></span> and <span class="function"><a href="#function.bzopen" class="function">bzopen()</a></span>
      respectively, and operate even on systems that do not support
      fopencookie.
     </p>
   
     <p class="simpara">
      <a href="#book.zip" class="link">ZIP extension</a> registers <var class="filename">zip:</var> wrapper. As of 
      PHP 7.2.0 and libzip 1.2.0+, support for the passwords for encrypted archives were added, allowing 
      passwords to be supplied by stream contexts. Passwords can be set using the <code class="literal">&#039;password&#039;</code> 
      stream context option.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.compression-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">compress.zlib://file.gz</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">compress.bzip2://file.bz2</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">zip://archive.zip#dir/file.txt</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.compression-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>Yes (except <code class="literal">zip://</code>)</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>Yes (except <code class="literal">zip://</code>)</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>
           No, use the normal <code class="literal">file://</code> wrapper
           to stat compressed files.
          </td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>
           No, use the normal <code class="literal">file://</code> wrapper
           to unlink compressed files.
          </td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.data" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">data://</h1>
     <p class="refpurpose"><span class="refname">data://</span> &mdash; <span class="dc-title">Data (RFC 2397)</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.data-description">
     <h3 class="title">Description</h3>
     <p class="para">
      The <var class="filename">data:</var> (<a href="http://www.faqs.org/rfcs/rfc2397" class="link external">&raquo;&nbsp;RFC
      2397</a>) stream wrapper is available since PHP 5.2.0.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.data-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">data://text/plain;base64,</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.data-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Restricted by <a href="#ini.allow-url-include" class="link">allow_url_include</a></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 examples" id="refsect1-wrappers.data-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="example-358">
      <p><strong>Example #1 Print data:// contents</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;prints&nbsp;"I&nbsp;love&nbsp;PHP"<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'data://text/plain;base64,SSBsb3ZlIFBIUAo='</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
   
     <div class="example" id="example-359">
      <p><strong>Example #2 Fetch the media type</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$fp&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">'data://text/plain;base64,'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$meta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_get_meta_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;prints&nbsp;"text/plain"<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$meta</span><span style="color: #007700">[</span><span style="color: #DD0000">'mediatype'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.glob" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">glob://</h1>
     <p class="refpurpose"><span class="refname">glob://</span> &mdash; <span class="dc-title">Find pathnames matching pattern</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.glob-description">
     <h3 class="title">Description</h3>
     <p class="simpara">
      The <var class="filename">glob:</var> stream wrapper is available since PHP 5.3.0.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.glob-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">glob://</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.glob-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Restricted by <a href="#ini.allow-url-include" class="link">allow_url_include</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 examples" id="refsect1-wrappers.glob-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="example-360">
      <p><strong>Example #1 Basic usage</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Loop&nbsp;over&nbsp;all&nbsp;*.php&nbsp;files&nbsp;in&nbsp;ext/spl/examples/&nbsp;directory<br />//&nbsp;and&nbsp;print&nbsp;the&nbsp;filename&nbsp;and&nbsp;its&nbsp;size<br /></span><span style="color: #0000BB">$it&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DirectoryIterator</span><span style="color: #007700">(</span><span style="color: #DD0000">"glob://ext/spl/examples/*.php"</span><span style="color: #007700">);<br />foreach(</span><span style="color: #0000BB">$it&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$f</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s:&nbsp;%.1FK\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$f</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilename</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$f</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSize</span><span style="color: #007700">()/</span><span style="color: #0000BB">1024</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
      <div class="example-contents screen">
   <div class="cdata"><pre>
   tree.php: 1.0K
   findregex.php: 0.6K
   findfile.php: 0.7K
   dba_dump.php: 0.9K
   nocvsdir.php: 1.1K
   phar_from_dir.php: 1.0K
   ini_groups.php: 0.9K
   directorytree.php: 0.9K
   dba_array.php: 1.1K
   class_tree.php: 1.8K
   </pre></div>
      </div>
     </div>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.phar" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">phar://</h1>
     <p class="refpurpose"><span class="refname">phar://</span> &mdash; <span class="dc-title">PHP Archive</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.phar-description">
     <h3 class="title">Description</h3>
     <p class="simpara">
      The <var class="filename">phar://</var> stream wrapper is available since
      PHP 5.3.0. See <a href="#phar.using.stream" class="link">Phar stream wrapper</a>
      for detailed description.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.phar-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">phar://</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.phar-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Restricted by <a href="#ini.allow-url-include" class="link">allow_url_include</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>Yes</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 seealso" id="refsect1-wrappers.phar-seealso">
     <h3 class="title">See Also</h3>
     <ul class="simplelist">
      <li class="member"><a href="#context.phar" class="xref">Phar context options</a></li>
     </ul>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.ssh2" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">ssh2://</h1>
     <p class="refpurpose"><span class="refname">ssh2://</span> &mdash; <span class="dc-title">Secure Shell 2</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.ssh2-description">
     <h3 class="title">Description</h3>
     <p class="para">
      <var class="filename">ssh2.shell://</var>
      <var class="filename">ssh2.exec://</var>
      <var class="filename">ssh2.tunnel://</var>
      <var class="filename">ssh2.sftp://</var>
      <var class="filename">ssh2.scp://</var>
      (PECL)
     </p>
   
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>This wrapper is not enabled by default</strong><br />
      <span class="simpara">
       In order to use the <var class="filename">ssh2.*://</var> wrappers you must install
       the <a href="https://pecl.php.net/package/ssh2" class="link external">&raquo;&nbsp;SSH2</a> extension
       available from <a href="https://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>.
      </span>
     </p></blockquote>
   
     <p class="simpara">
      In addition to accepting traditional URI login details, the ssh2 wrappers
      will also reuse open connections by passing the connection resource in the
      host portion of the URL.
     </p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.ssh2-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">ssh2.shell://user:pass@example.com:22/xterm</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ssh2.exec://user:pass@example.com:22/usr/local/bin/somecmd</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ssh2.tunnel://user:pass@example.com:22/192.168.0.1:14</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ssh2.sftp://user:pass@example.com:22/path/to/filename</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.ssh2-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>ssh2.shell</th>
          <th>ssh2.exec</th>
          <th>ssh2.tunnel</th>
          <th>ssh2.sftp</th>
          <th>ssh2.scp</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>No</td>
          <td>No</td>
          <td>No</td>
          <td>Yes (When supported by server)</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>Yes</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>No</td>
          <td>No</td>
          <td>No</td>
          <td>Yes</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
          <td>No</td>
          <td>No</td>
          <td>Yes</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
          <td>No</td>
          <td>No</td>
          <td>Yes</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
          <td>No</td>
          <td>No</td>
          <td>Yes</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
          <td>No</td>
          <td>No</td>
          <td>Yes</td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
   
   
     
     <p class="para">
      <table class="doctable table">
       <caption><strong>Context options</strong></caption>
       
        <thead>
         <tr>
          <th>Name</th>
          <th>Usage</th>
          <th>Default</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td><code class="literal">session</code></td>
          <td>Preconnected ssh2 resource to be reused</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">sftp</code></td>
          <td>Preallocated sftp resource to be reused</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">methods</code></td>
          <td>Key exchange, hostkey, cipher, compression, and MAC methods to use</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">callbacks</code></td>
          <td class="empty">&nbsp;</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">username</code></td>
          <td>Username to connect as</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">password</code></td>
          <td>Password to use with password authentication</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">pubkey_file</code></td>
          <td>Name of public key file to use for authentication</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">privkey_file</code></td>
          <td>Name of private key file to use for authentication</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">env</code></td>
          <td>Associate array of environment variables to set</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">term</code></td>
          <td>Terminal emulation type to request when allocating a pty</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">term_width</code></td>
          <td>Width of terminal requested when allocating a pty</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">term_height</code></td>
          <td>Height of terminal requested when allocating a pty</td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">term_units</code></td>
          <td>Units to use with term_width and term_height</td>
          <td><strong><code>SSH2_TERM_UNIT_CHARS</code></strong></td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 examples" id="refsect1-wrappers.ssh2-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="weakreference.basic-example">
      <p><strong>Example #1 Opening a stream from an active connection</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$session&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ssh2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">ssh2_auth_pubkey_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$session</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/home/username/.ssh/id_rsa.pub'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/home/username/.ssh/id_rsa'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"ssh2.tunnel://</span><span style="color: #0000BB">$session</span><span style="color: #DD0000">/remote.example.com:1234"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
     <div class="example" id="context.socket.example-bindto">
      <p><strong>Example #2 This <var class="varname">$session</var> variable must be kept available!</strong></p>
      <div class="example-contents"><p>
       In order to use the <var class="filename">ssh2.*://$session</var> wrappers you must
       keep the <var class="varname">$session</var> resource variable. The code below will not 
       have the desired effect:
      </p></div>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$session&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ssh2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">ssh2_auth_pubkey_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$session</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/home/username/.ssh/id_rsa.pub'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/home/username/.ssh/id_rsa'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$connection_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"ssh2.sftp://</span><span style="color: #0000BB">$session</span><span style="color: #DD0000">/"</span><span style="color: #007700">;<br />unset(</span><span style="color: #0000BB">$session</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection_string&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"path/to/file"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'r'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
      <div class="example-contents"><p>
       unset() closes the session, because <var class="varname">$connection_string</var> does not 
       hold a reference to the <var class="varname">$session</var> variable, just a string cast 
       derived from it. This also happens when the <span class="function"><a href="#function.unset" class="function">unset()</a></span> is implicit 
       because of leaving scope (like in a function).
      </p></div>
     </div>
   
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.rar" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">rar://</h1>
     <p class="refpurpose"><span class="refname">rar://</span> &mdash; <span class="dc-title">RAR</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.rar-description">
     <h3 class="title">Description</h3>
     <p class="para">
      The wrapper takes the url encoded path to the RAR archive (relative or absolute),
      an optional asterik (<code class="literal">*</code>), an optional number sign
      (<code class="literal">#</code>) and an optional url encoded entry name, as stored in the
      archive. Specifying an entry name requires the number sign; a leading forward
      slash in the entry name is optional.
     </p>
     
     <p class="simpara">
      This wrapper can open both files and directories. When opening directories, the
      asterisk sign forces the directory entries names to be returned unencoded. If it&#039;s
      not specified, they will be returned url encoded – the reason for this is to allow
      the wrapper to be correctly used with built-in functionality like the
      <a href="#class.recursivedirectoryiterator" class="classname">RecursiveDirectoryIterator</a> in the presence of file names that seem like
      url encoded data.
     </p>
     
     <p class="simpara">
      If the pound sign and the entry name part are not included, the root of the archive
      will be displayed. This differs  from regular directories in that the resulting
      stream will not contain information such as the modification time, as the root
      directory is not stored in an individual entry in the archive.
      The usage of the wrapper with <a href="#class.recursivedirectoryiterator" class="classname">RecursiveDirectoryIterator</a> requires
      the number sign to be included in the URL when accessing the root, so that the
      URLs of the children may be constructed correctly.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>This wrapper is not enabled by default</strong><br />
      <span class="simpara">
       In order to use the <var class="filename">rar://</var> wrapper, you must install
       the <a href="https://pecl.php.net/package/rar" class="link external">&raquo;&nbsp;rar</a> extension
       available from <a href="https://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>.
      </span>
     </p></blockquote>
     <p class="simpara">
      <var class="filename">rar://</var>
      Available since PECL rar 3.0.0
     </p>
   
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.rar-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">rar://&lt;url encoded archive name&gt;[*][#[&lt;url encoded entry name&gt;]]</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.rar-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Restricted by <a href="#ini.allow-url-include" class="link">allow_url_include</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
   
     
     <p class="para">
      <table class="doctable table">
       <caption><strong>Context options</strong></caption>
       
        <thead>
         <tr>
          <th>Name</th>
          <th>Usage</th>
          <th>Default</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td><code class="literal">open_password</code></td>
          <td>The password used to encrypt the headers of the archive,
          if any. WinRAR will encrypt all the files with the same password
          as the headers password when the later is present, so for archives
          with encrypted headers, <code class="literal">file_password</code> will be
          ignored.
          </td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">file_password</code></td>
          <td>The password used to encrypt a file, if any. If the headers
          are also encrypted, this option will be ignored in favor of
          <code class="literal">open_password</code>. The reason there are two options
          is to cover the possibility of supporting archives with different
          headers and file passwords, should those archives arise. Note that
          if the archive does not have its headers encrypted,
          <code class="literal">open_password</code> will be ignored and this option
          must be used instead.
          </td>
          <td class="empty">&nbsp;</td>
         </tr>
   
         <tr>
          <td><code class="literal">volume_callback</code></td>
          <td>A callback to determine the path of missing volumes. See
           <span class="methodname"><a href="#rararchive.open" class="methodname">RarArchive::open()</a></span> for more information.
          </td>
          <td class="empty">&nbsp;</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 examples" id="refsect1-wrappers.rar-examples">
     <h3 class="title">Examples</h3>
     <div class="example" id="context.http.example-post">
      <p><strong>Example #1 Traversing a RAR archive</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyRecDirIt&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">RecursiveDirectoryIterator&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">current</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">rawurldecode</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSubPathName</span><span style="color: #007700">())&nbsp;.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">current</span><span style="color: #007700">())?</span><span style="color: #DD0000">"&nbsp;[DIR]"</span><span style="color: #007700">:</span><span style="color: #DD0000">""</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"rar://"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">rawurlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">))&nbsp;.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'dirs_and_extra_headers.rar#'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$it&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">RecursiveTreeIterator</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">MyRecDirIt</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">));<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$it&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
       <div class="example-contents"><p>The above example will output
   something similar to:</p></div>
       <div class="example-contents screen">
   <div class="cdata"><pre>
   |-allow_everyone_ni [DIR]
   |-file1.txt
   |-file2_אּ.txt
   |-with_streams.txt
   \-אּ [DIR]
     |-אּ\%2Fempty%2E [DIR]
     | \-אּ\%2Fempty%2E\file7.txt
     |-אּ\empty [DIR]
     |-אּ\file3.txt
     |-אּ\file4_אּ.txt
     \-אּ\אּ_2 [DIR]
       |-אּ\אּ_2\file5.txt
       \-אּ\אּ_2\file6_אּ.txt
   </pre></div>
      </div>
     </div>
     <div class="example" id="context.http.example-fetch-ignore-redirect">
      <p><strong>Example #2 Opening an encrypted file (header encryption)</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$stream&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"rar://"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">rawurlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">))&nbsp;.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'encrypted_headers.rar'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'#encfile1.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'rar'&nbsp;</span><span style="color: #007700">=&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'open_password'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'samplepassword'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">));<br /></span><span style="color: #FF8000">/*&nbsp;creation&nbsp;and&nbsp;last&nbsp;access&nbsp;date&nbsp;is&nbsp;opt-in&nbsp;in&nbsp;WinRAR,&nbsp;hence&nbsp;most<br />&nbsp;*&nbsp;files&nbsp;don't&nbsp;have&nbsp;them&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">fstat</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
       <div class="example-contents"><p>The above example will output
   something similar to:</p></div>
       <div class="example-contents screen">
   <div class="cdata"><pre>
   string(26) &quot;Encrypted file 1 contents.&quot;
   Array
   (
       [0] =&gt; 0
       [1] =&gt; 0
       [2] =&gt; 33206
       [3] =&gt; 1
       [4] =&gt; 0
       [5] =&gt; 0
       [6] =&gt; 0
       [7] =&gt; 26
       [8] =&gt; 0
       [9] =&gt; 1259550052
       [10] =&gt; 0
       [11] =&gt; -1
       [12] =&gt; -1
       [dev] =&gt; 0
       [ino] =&gt; 0
       [mode] =&gt; 33206
       [nlink] =&gt; 1
       [uid] =&gt; 0
       [gid] =&gt; 0
       [rdev] =&gt; 0
       [size] =&gt; 26
       [atime] =&gt; 0
       [mtime] =&gt; 1259550052
       [ctime] =&gt; 0
       [blksize] =&gt; -1
       [blocks] =&gt; -1
   )
   </pre></div>
      </div>
     </div>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.audio" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">ogg://</h1>
     <p class="refpurpose"><span class="refname">ogg://</span> &mdash; <span class="dc-title">Audio streams</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.audio-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Files opened for reading via the <var class="filename">ogg://</var> wrapper
      are treated as compressed audio encoded using the <code class="literal">OGG/Vorbis</code> codec.
      Similarly, files opened for writing or appending via the
      <var class="filename">ogg://</var> wrapper are written as compressed audio data.
      <span class="function"><a href="#function.stream-get-meta-data" class="function">stream_get_meta_data()</a></span>, when used on an <code class="literal">OGG/Vorbis</code>
      file opened for reading will return various details about the stream
      including the <code class="parameter">vendor</code> tag, any included
      <code class="parameter">comments</code>, the number of
      <code class="parameter">channels</code>, the sampling <code class="parameter">rate</code>,
      and the encoding rate range described by:
      <code class="parameter">bitrate_lower</code>, <code class="parameter">bitrate_upper</code>,
      <code class="parameter">bitrate_nominal</code>, and <code class="parameter">bitrate_window</code>.
     </p>
   
     <p class="simpara"><var class="filename">ogg://</var> (PECL)</p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>This wrapper is not enabled by default</strong><br />
      <span class="simpara">
       In order to use the <var class="filename">ogg://</var> wrapper you must install
       the <a href="https://pecl.php.net/package/oggvorbis" class="link external">&raquo;&nbsp;OGG/Vorbis</a> extension
       available from <a href="https://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>.
      </span>
     </p></blockquote>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.audio-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">ogg://soundfile.ogg</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ogg:///path/to/soundfile.ogg</var></span></li>
      <li class="listitem"><span class="simpara"><var class="filename">ogg://http://www.example.com/path/to/soundstream.ogg</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.audio-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
     
     <p class="para">
      <table class="doctable table">
       <caption><strong>Context options</strong></caption>
       
        <thead>
         <tr>
          <th>Name</th>
          <th>Usage</th>
          <th>Default</th>
          <th>Mode</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td><code class="literal">pcm_mode</code></td>
          <td>
           PCM encoding to apply while reading, one of:
           <strong><code>OGGVORBIS_PCM_U8</code></strong>, <strong><code>OGGVORBIS_PCM_S8</code></strong>,
           <strong><code>OGGVORBIS_PCM_U16_BE</code></strong>, <strong><code>OGGVORBIS_PCM_S16_BE</code></strong>,
           <strong><code>OGGVORBIS_PCM_U16_LE</code></strong>, and <strong><code>OGGVORBIS_PCM_S16_LE</code></strong>.
           (8 vs 16 bit, signed or unsigned, big or little <code class="literal">endian</code>)
          </td>
          <td>OGGVORBIS_PCM_S16_LE</td>
          <td>Read</td>
         </tr>
   
         <tr>
          <td><code class="literal">rate</code></td>
          <td>
           Sampling rate of input data, expressed in Hz
          </td>
          <td>44100</td>
          <td>Write/Append</td>
         </tr>
   
         <tr>
          <td><code class="literal">bitrate</code></td>
          <td>
           When given as an integer, the fixed bitrate at which to encode. (16000 to 131072)
           When given as a float, the variable bitrate quality to use. (-1.0 to 1.0)
          </td>
          <td>128000</td>
          <td>Write/Append</td>
         </tr>
   
         <tr>
          <td><code class="literal">channels</code></td>
          <td>
           The number of audio channels to encode, typically 1 (Mono), or 2 (Stereo).
           May range as high as 16.
          </td>
          <td>2</td>
          <td>Write/Append</td>
         </tr>
   
         <tr>
          <td><code class="literal">comments</code></td>
          <td>
           An array of string values to encode into the track header.
          </td>
          <td class="empty">&nbsp;</td>
          <td>Write/Append</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 examples" id="refsect1-wrappers.audio-examples">
     <h3 class="title">Examples</h3>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   
   
   <div id="wrappers.expect" class="refentry"><hr />
    <div class="refnamediv">
     <h1 class="refname">expect://</h1>
     <p class="refpurpose"><span class="refname">expect://</span> &mdash; <span class="dc-title">Process Interaction Streams</span></p>
   
    </div>
   
    <div class="refsect1 description" id="refsect1-wrappers.expect-description">
     <h3 class="title">Description</h3>
     <p class="para">
      Streams opened via the <var class="filename">expect://</var> wrapper provide
      access to process&#039;es stdio, stdout and stderr via PTY.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>This wrapper is not enabled by default</strong><br />
      <span class="simpara">
       In order to use the <var class="filename">expect://</var> wrapper you must install
       the <a href="https://pecl.php.net/package/expect" class="link external">&raquo;&nbsp;Expect</a> extension
       available from <a href="https://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>.
      </span>
     </p></blockquote>
     <p class="simpara"><var class="filename">expect://</var> (PECL)</p>
    </div>
   
   
    <div class="refsect1 usage" id="refsect1-wrappers.expect-usage"> 
     <h3 class="title">Usage</h3>
     <ul class="itemizedlist">
      <li class="listitem"><span class="simpara"><var class="filename">expect://command</var></span></li>
     </ul>
    </div>
    
   
    <div class="refsect1 options" id="refsect1-wrappers.expect-options">
     <h3 class="title">Options</h3>
     <p class="para">
      <table class="doctable table">
       <caption><strong>Wrapper Summary</strong></caption>
       
        <thead>
         <tr>
          <th>Attribute</th>
          <th>Supported</th>
         </tr>
   
        </thead>
   
        <tbody class="tbody">
         <tr>
          <td>Restricted by <a href="#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Allows Reading</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Writing</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Appending</td>
          <td>Yes</td>
         </tr>
   
         <tr>
          <td>Allows Simultaneous Reading and Writing</td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.stat" class="function">stat()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.unlink" class="function">unlink()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rename" class="function">rename()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.mkdir" class="function">mkdir()</a></span></td>
          <td>No</td>
         </tr>
   
         <tr>
          <td>Supports <span class="function"><a href="#function.rmdir" class="function">rmdir()</a></span></td>
          <td>No</td>
         </tr>
   
        </tbody>
       
      </table>
   
     </p>
    </div>
    
   
    <div class="refsect1 examples" id="refsect1-wrappers.expect-examples">
     <h3 class="title">Examples</h3>
    </div>
   
   
   </div>
   <hr />
   
   
   
   
   
    
   <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="#wrappers.file">file://</a> — Accessing local filesystem</li><li><a href="#wrappers.http">http://</a> — Accessing HTTP(s) URLs</li><li><a href="#wrappers.ftp">ftp://</a> — Accessing FTP(s) URLs</li><li><a href="#wrappers.php">php://</a> — Accessing various I/O streams</li><li><a href="#wrappers.compression">zlib://</a> — Compression Streams</li><li><a href="#wrappers.data">data://</a> — Data (RFC 2397)</li><li><a href="#wrappers.glob">glob://</a> — Find pathnames matching pattern</li><li><a href="#wrappers.phar">phar://</a> — PHP Archive</li><li><a href="#wrappers.ssh2">ssh2://</a> — Secure Shell 2</li><li><a href="#wrappers.rar">rar://</a> — RAR</li><li><a href="#wrappers.audio">ogg://</a> — Audio streams</li><li><a href="#wrappers.expect">expect://</a> — Process Interaction Streams</li></ul>
   </div>
   
   <hr />
   
   
   
   
    <ul class="chunklist chunklist_book"><li><a href="#language.basic-syntax">Basic syntax</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.basic-syntax.phptags">PHP tags</a></li><li><a href="#language.basic-syntax.phpmode">Escaping from HTML</a></li><li><a href="#language.basic-syntax.instruction-separation">Instruction separation</a></li><li><a href="#language.basic-syntax.comments">Comments</a></li></ul></li><li><a href="#language.types">Types</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.types.intro">Introduction</a></li><li><a href="#language.types.boolean">Booleans</a></li><li><a href="#language.types.integer">Integers</a></li><li><a href="#language.types.float">Floating point numbers</a></li><li><a href="#language.types.string">Strings</a></li><li><a href="#language.types.array">Arrays</a></li><li><a href="#language.types.iterable">Iterables</a></li><li><a href="#language.types.object">Objects</a></li><li><a href="#language.types.resource">Resources</a></li><li><a href="#language.types.null">NULL</a></li><li><a href="#language.types.callable">Callbacks / Callables</a></li><li><a href="#language.pseudo-types">Pseudo-types and variables used in this documentation</a></li><li><a href="#language.types.type-juggling">Type Juggling</a></li></ul></li><li><a href="#language.variables">Variables</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.variables.basics">Basics</a></li><li><a href="#language.variables.predefined">Predefined Variables</a></li><li><a href="#language.variables.scope">Variable scope</a></li><li><a href="#language.variables.variable">Variable variables</a></li><li><a href="#language.variables.external">Variables From External Sources</a></li></ul></li><li><a href="#language.constants">Constants</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.constants.syntax">Syntax</a></li><li><a href="#language.constants.predefined">Magic constants</a></li></ul></li><li><a href="#language.expressions">Expressions</a></li><li><a href="#language.operators">Operators</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.operators.precedence">Operator Precedence</a></li><li><a href="#language.operators.arithmetic">Arithmetic Operators</a></li><li><a href="#language.operators.assignment">Assignment Operators</a></li><li><a href="#language.operators.bitwise">Bitwise Operators</a></li><li><a href="#language.operators.comparison">Comparison Operators</a></li><li><a href="#language.operators.errorcontrol">Error Control Operators</a></li><li><a href="#language.operators.execution">Execution Operators</a></li><li><a href="#language.operators.increment">Incrementing/Decrementing Operators</a></li><li><a href="#language.operators.logical">Logical Operators</a></li><li><a href="#language.operators.string">String Operators</a></li><li><a href="#language.operators.array">Array Operators</a></li><li><a href="#language.operators.type">Type Operators</a></li></ul></li><li><a href="#language.control-structures">Control Structures</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#control-structures.intro">Introduction</a></li><li><a href="#control-structures.if">if</a></li><li><a href="#control-structures.else">else</a></li><li><a href="#control-structures.elseif">elseif/else if</a></li><li><a href="#control-structures.alternative-syntax">Alternative syntax for control structures</a></li><li><a href="#control-structures.while">while</a></li><li><a href="#control-structures.do.while">do-while</a></li><li><a href="#control-structures.for">for</a></li><li><a href="#control-structures.foreach">foreach</a></li><li><a href="#control-structures.break">break</a></li><li><a href="#control-structures.continue">continue</a></li><li><a href="#control-structures.switch">switch</a></li><li><a href="#control-structures.declare">declare</a></li><li><a href="#function.return">return</a></li><li><a href="#function.require">require</a></li><li><a href="#function.include">include</a></li><li><a href="#function.require-once">require_once</a></li><li><a href="#function.include-once">include_once</a></li><li><a href="#control-structures.goto">goto</a></li></ul></li><li><a href="#language.functions">Functions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#functions.user-defined">User-defined functions</a></li><li><a href="#functions.arguments">Function arguments</a></li><li><a href="#functions.returning-values">Returning values</a></li><li><a href="#functions.variable-functions">Variable functions</a></li><li><a href="#functions.internal">Internal (built-in) functions</a></li><li><a href="#functions.anonymous">Anonymous functions</a></li><li><a href="#functions.arrow">Arrow Functions</a></li></ul></li><li><a href="#language.oop5">Classes and Objects</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#oop5.intro">Introduction</a></li><li><a href="#language.oop5.basic">The Basics</a></li><li><a href="#language.oop5.properties">Properties</a></li><li><a href="#language.oop5.constants">Class Constants</a></li><li><a href="#language.oop5.autoload">Autoloading Classes</a></li><li><a href="#language.oop5.decon">Constructors and Destructors</a></li><li><a href="#language.oop5.visibility">Visibility</a></li><li><a href="#language.oop5.inheritance">Object Inheritance</a></li><li><a href="#language.oop5.paamayim-nekudotayim">Scope Resolution Operator (::)</a></li><li><a href="#language.oop5.static">Static Keyword</a></li><li><a href="#language.oop5.abstract">Class Abstraction</a></li><li><a href="#language.oop5.interfaces">Object Interfaces</a></li><li><a href="#language.oop5.traits">Traits</a></li><li><a href="#language.oop5.anonymous">Anonymous classes</a></li><li><a href="#language.oop5.overloading">Overloading</a></li><li><a href="#language.oop5.iterations">Object Iteration</a></li><li><a href="#language.oop5.magic">Magic Methods</a></li><li><a href="#language.oop5.final">Final Keyword</a></li><li><a href="#language.oop5.cloning">Object Cloning</a></li><li><a href="#language.oop5.object-comparison">Comparing Objects</a></li><li><a href="#language.oop5.typehinting">Type Hinting</a></li><li><a href="#language.oop5.late-static-bindings">Late Static Bindings</a></li><li><a href="#language.oop5.references">Objects and references</a></li><li><a href="#language.oop5.serialization">Object Serialization</a></li><li><a href="#language.oop5.variance">Covariance and Contravariance</a></li><li><a href="#language.oop5.changelog">OOP Changelog</a></li></ul></li><li><a href="#language.namespaces">Namespaces</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.namespaces.rationale">Namespaces overview</a></li><li><a href="#language.namespaces.definition">Defining namespaces</a></li><li><a href="#language.namespaces.nested">Declaring sub-namespaces</a></li><li><a href="#language.namespaces.definitionmultiple">Defining multiple namespaces in the same file</a></li><li><a href="#language.namespaces.basics">Using namespaces: Basics</a></li><li><a href="#language.namespaces.dynamic">Namespaces and dynamic language features</a></li><li><a href="#language.namespaces.nsconstants">namespace keyword and __NAMESPACE__ constant</a></li><li><a href="#language.namespaces.importing">Using namespaces: Aliasing/Importing</a></li><li><a href="#language.namespaces.global">Global space</a></li><li><a href="#language.namespaces.fallback">Using namespaces: fallback to global function/constant</a></li><li><a href="#language.namespaces.rules">Name resolution rules</a></li><li><a href="#language.namespaces.faq">FAQ: things you need to know about namespaces</a></li></ul></li><li><a href="#language.errors">Errors</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.errors.basics">Basics</a></li><li><a href="#language.errors.php7">Errors in PHP 7</a></li></ul></li><li><a href="#language.exceptions">Exceptions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.exceptions.extending">Extending Exceptions</a></li></ul></li><li><a href="#language.generators">Generators</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.generators.overview">Generators overview</a></li><li><a href="#language.generators.syntax">Generator syntax</a></li><li><a href="#language.generators.comparison">Comparing generators with Iterator objects</a></li></ul></li><li><a href="#language.references">References Explained</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.references.whatare">What References Are</a></li><li><a href="#language.references.whatdo">What References Do</a></li><li><a href="#language.references.arent">What References Are Not</a></li><li><a href="#language.references.pass">Passing by Reference</a></li><li><a href="#language.references.return">Returning References</a></li><li><a href="#language.references.unset">Unsetting References</a></li><li><a href="#language.references.spot">Spotting References</a></li></ul></li><li><a href="#reserved.variables">Predefined Variables</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#language.variables.superglobals">Superglobals</a> — Superglobals are built-in variables that are always available in all scopes</li><li><a href="#reserved.variables.globals">$GLOBALS</a> — References all variables available in global scope</li><li><a href="#reserved.variables.server">$_SERVER</a> — Server and execution environment information</li><li><a href="#reserved.variables.get">$_GET</a> — HTTP GET variables</li><li><a href="#reserved.variables.post">$_POST</a> — HTTP POST variables</li><li><a href="#reserved.variables.files">$_FILES</a> — HTTP File Upload variables</li><li><a href="#reserved.variables.request">$_REQUEST</a> — HTTP Request variables</li><li><a href="#reserved.variables.session">$_SESSION</a> — Session variables</li><li><a href="#reserved.variables.environment">$_ENV</a> — Environment variables</li><li><a href="#reserved.variables.cookies">$_COOKIE</a> — HTTP Cookies</li><li><a href="#reserved.variables.phperrormsg">$php_errormsg</a> — The previous error message</li><li><a href="#reserved.variables.httprawpostdata">$HTTP_RAW_POST_DATA</a> — Raw POST data</li><li><a href="#reserved.variables.httpresponseheader">$http_response_header</a> — HTTP response headers</li><li><a href="#reserved.variables.argc">$argc</a> — The number of arguments passed to script</li><li><a href="#reserved.variables.argv">$argv</a> — Array of arguments passed to script</li></ul></li><li><a href="#reserved.exceptions">Predefined Exceptions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.exception">Exception</a></li><li><a href="#class.errorexception">ErrorException</a></li><li><a href="#class.error">Error</a></li><li><a href="#class.argumentcounterror">ArgumentCountError</a></li><li><a href="#class.arithmeticerror">ArithmeticError</a></li><li><a href="#class.assertionerror">AssertionError</a></li><li><a href="#class.divisionbyzeroerror">DivisionByZeroError</a></li><li><a href="#class.compileerror">CompileError</a></li><li><a href="#class.parseerror">ParseError</a></li><li><a href="#class.typeerror">TypeError</a></li></ul></li><li><a href="#reserved.interfaces">Predefined Interfaces and Classes</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#class.traversable">Traversable</a> — The Traversable interface</li><li><a href="#class.iterator">Iterator</a> — The Iterator interface</li><li><a href="#class.iteratoraggregate">IteratorAggregate</a> — The IteratorAggregate interface</li><li><a href="#class.throwable">Throwable</a></li><li><a href="#class.arrayaccess">ArrayAccess</a> — The ArrayAccess interface</li><li><a href="#class.serializable">Serializable</a> — The Serializable interface</li><li><a href="#class.closure">Closure</a> — The Closure class</li><li><a href="#class.generator">Generator</a> — The Generator class</li><li><a href="#class.weakreference">WeakReference</a> — The WeakReference class</li></ul></li><li><a href="#context">Context options and parameters</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#context.socket">Socket context options</a> — Socket context option listing</li><li><a href="#context.http">HTTP context options</a> — HTTP context option listing</li><li><a href="#context.ftp">FTP context options</a> — FTP context option listing</li><li><a href="#context.ssl">SSL context options</a> — SSL context option listing</li><li><a href="#context.curl">CURL context options</a> — CURL context option listing</li><li><a href="#context.phar">Phar context options</a> — Phar context option listing</li><li><a href="#context.mongodb">MongoDB context options</a> — MongoDB context option listing</li><li><a href="#context.params">Context parameters</a> — Context parameter listing</li><li><a href="#context.zip">Zip context options</a> — Zip context option listing</li></ul></li><li><a href="#wrappers">Supported Protocols and Wrappers</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#wrappers.file">file://</a> — Accessing local filesystem</li><li><a href="#wrappers.http">http://</a> — Accessing HTTP(s) URLs</li><li><a href="#wrappers.ftp">ftp://</a> — Accessing FTP(s) URLs</li><li><a href="#wrappers.php">php://</a> — Accessing various I/O streams</li><li><a href="#wrappers.compression">zlib://</a> — Compression Streams</li><li><a href="#wrappers.data">data://</a> — Data (RFC 2397)</li><li><a href="#wrappers.glob">glob://</a> — Find pathnames matching pattern</li><li><a href="#wrappers.phar">phar://</a> — PHP Archive</li><li><a href="#wrappers.ssh2">ssh2://</a> — Secure Shell 2</li><li><a href="#wrappers.rar">rar://</a> — RAR</li><li><a href="#wrappers.audio">ogg://</a> — Audio streams</li><li><a href="#wrappers.expect">expect://</a> — Process Interaction Streams</li></ul></li></ul></div>
   <hr />
   
   
    <div id="security" class="book"><hr />
     <h1 class="title">Security</h1>
     
   
   
    <div id="security.intro" class="chapter"><hr />
     <h1>Introduction</h1>
   
     <p class="simpara">
      PHP is a powerful language and the interpreter, whether included
      in a web server as a module or executed as a separate
      <acronym title="Common Gateway Interface">CGI</acronym> binary, is able to access files, execute
      commands and open network connections on the server.  These
      properties make anything run on a web server insecure by default.
      PHP is designed specifically to be a more secure language for
      writing <acronym title="Common Gateway Interface">CGI</acronym> programs than Perl or C, and with correct selection of
      compile-time and runtime configuration options, and proper coding
      practices, it can give you exactly the combination of freedom and
      security you need.
     </p>
     <p class="simpara">
      As there are many different ways of utilizing PHP, there are many
      configuration options controlling its behaviour.  A large
      selection of options guarantees you can use PHP for a lot of
      purposes, but it also means there are combinations of these
      options and server configurations that result in an insecure
      setup.
     </p>
     <p class="simpara">
      The configuration flexibility of PHP is equally rivalled by the
      code flexibility. PHP can be used to build complete server
      applications, with all the power of a shell user, or it can be used
      for simple server-side includes with little risk in a tightly
      controlled environment. How you build that environment, and how
      secure it is, is largely up to the PHP developer.
     </p>
     <p class="simpara">
      This chapter starts with some general security advice, explains
      the different configuration option combinations and the situations
      they can be safely used, and describes different considerations in
      coding for different levels of security.
     </p>
    </div>
   
   <hr />
   
   
   
   
     
   
   
     <div id="security.general" class="chapter"><hr />
      <h1>General considerations</h1>
   
      <p class="simpara">
       A completely secure system is a virtual impossibility, so an
       approach often used in the security profession is one of balancing
       risk and usability. If every variable submitted by a user required
       two forms of biometric validation (such as a retinal scan and a
       fingerprint), you would have an extremely high level of
       accountability. It would also take half an hour to fill out a fairly
       complex form, which would tend to encourage users to find ways of
       bypassing the security.
      </p>
      <p class="simpara">
       The best security is often unobtrusive enough to suit the
       requirements without the user being prevented from accomplishing
       their work, or over-burdening the code author with excessive
       complexity. Indeed, some security attacks are merely exploits of
       this kind of overly built security, which tends to erode over time.
      </p>
      <p class="simpara">
       A phrase worth remembering: A system is only as good as the weakest
       link in a chain. If all transactions are heavily logged based on
       time, location, transaction type, etc. but the user is only
       verified based on a single cookie, the validity of tying the users
       to the transaction log is severely weakened.
      </p>
      <p class="simpara">
       When testing, keep in mind that you will not be able to test all
       possibilities for even the simplest of pages. The input you
       may expect will be completely unrelated to the input given by
       a disgruntled employee, a cracker with months of time on their
       hands, or a housecat walking across the keyboard. This is why it&#039;s
       best to look at the code from a logical perspective, to discern
       where unexpected data can be introduced, and then follow how it is
       modified, reduced, or amplified.
      </p>
      <p class="simpara">
       The Internet is filled with people trying to make a name for
       themselves by breaking your code, crashing your site, posting
       inappropriate content, and otherwise making your day interesting.
       It doesn&#039;t matter if you have a small or large site, you are
       a target by simply being online, by having a server that can be
       connected to. Many cracking programs do not discern by size, they
       simply trawl massive IP blocks looking for victims. Try not to
       become one.
      </p>
     </div>
   
   <hr />
   
   
   
   
     
   
   
     <div id="security.cgi-bin" class="chapter"><hr />
      <h1>Installed as CGI binary</h1>
   <h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="#security.cgi-bin.attacks">Possible attacks</a></li><li><a href="#security.cgi-bin.default">Case 1: only public files served</a></li><li><a href="#security.cgi-bin.force-redirect">Case 2: using cgi.force_redirect</a></li><li><a href="#security.cgi-bin.doc-root">Case 3: setting doc_root or user_dir</a></li><li><a href="#security.cgi-bin.shell">Case 4: PHP parser outside of web tree</a></li></ul>
   
   
      <div id="security.cgi-bin.attacks" class="sect1"><hr />
       <h2 class="title">Possible attacks</h2>
       <p class="simpara">
        Using PHP as a <acronym title="Common Gateway Interface">CGI</acronym> binary is an option for
        setups that for some reason do not wish to integrate PHP as a
        module into server software (like Apache), or will use PHP with
        different kinds of <acronym title="Common Gateway Interface">CGI</acronym> wrappers to create safe chroot and setuid
        environments for scripts.  This setup usually involves installing
        executable PHP binary to the web server cgi-bin directory.  CERT
        advisory <a href="http://www.cert.org/advisories/CA-1996-11.html" class="link external">&raquo;&nbsp;CA-96.11</a> recommends
        against placing any interpreters into cgi-bin.  Even if the PHP
        binary can be used as a standalone interpreter, PHP is designed
        to prevent the attacks this setup makes possible:
       </p>
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          Accessing system files: <var class="filename">http://my.host/cgi-bin/php?/etc/passwd</var>
         </span>
         <span class="simpara">
          The query information in a URL after the question mark (?)  is
          passed as command line arguments to the interpreter by the CGI
          interface.  Usually interpreters open and execute the file
          specified as the first argument on the command line.
         </span>
         <span class="simpara">
          When invoked as a CGI binary, PHP refuses to interpret the
          command line arguments.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Accessing any web document on server: <var class="filename">http://my.host/cgi-bin/php/secret/doc.html</var>
         </span>
         <span class="simpara">
          The path information part of the URL after the PHP binary name,
          <var class="filename">/secret/doc.html</var> is
          conventionally used to specify the name of the file to be
          opened and interpreted by the <acronym title="Common Gateway Interface">CGI</acronym> program.
          Usually some web server configuration directives (Apache:
          Action) are used to redirect requests to documents like
          <var class="filename">http://my.host/secret/script.php</var> to the
          PHP interpreter.  With this setup, the web server first checks
          the access permissions to the directory <var class="filename">/secret</var>, and after that creates the
          redirected request <var class="filename">http://my.host/cgi-bin/php/secret/script.php</var>.
          Unfortunately, if the request is originally given in this form,
          no access checks are made by web server for file <var class="filename">/secret/script.php</var>, but only for the
          <var class="filename">/cgi-bin/php</var> file.  This way
          any user able to access <var class="filename">/cgi-bin/php</var> is able to access any
          protected document on the web server.
         </span>
         <span class="simpara">
          In PHP, runtime configuration directives <a href="#ini.cgi.force-redirect" class="link">cgi.force_redirect</a>, <a href="#ini.doc-root" class="link">doc_root</a> and <a href="#ini.user-dir" class="link">user_dir</a> can be used to prevent
          this attack, if the server document tree has any directories
          with access restrictions.  See below for full the explanation
          of the different combinations.
         </span>
        </li>
       </ul>
      </div>
   <hr />
   
   
      <div id="security.cgi-bin.default" class="sect1"><hr />
       <h2 class="title">Case 1: only public files served</h2>
   
       <p class="simpara">
        If your server does not have any content that is not restricted
        by password or ip based access control, there is no need for
        these configuration options.  If your web server does not allow
        you to do redirects, or the server does not have a way to
        communicate to the PHP binary that the request is a safely
        redirected request, you can specify the option <a href="#configure.enable-force-cgi-redirect" class="link">--enable-force-cgi-redirect</a>
        to the configure script.  You still have to make sure your PHP
        scripts do not rely on one or another way of calling the script,
        neither by directly <var class="filename">http://my.host/cgi-bin/php/dir/script.php</var>
        nor by redirection <var class="filename">http://my.host/dir/script.php</var>.
       </p>
       <p class="simpara">
        Redirection can be configured in Apache by using AddHandler and
        Action directives (see below).
       </p>
      </div>
   <hr />
   
   
      <div id="security.cgi-bin.force-redirect" class="sect1"><hr />
       <h2 class="title">Case 2: using <code class="literal">cgi.force_redirect</code></h2>
       <p class="simpara">
        The configuration directive <a href="#ini.cgi.force-redirect" class="link">cgi.force_redirect</a>
        prevents anyone from calling PHP
        directly with a URL like <var class="filename">http://my.host/cgi-bin/php/secretdir/script.php</var>.
        Instead, PHP will only parse in this mode if it has gone through
        a web server redirect rule.
       </p>
       <p class="simpara">
        Usually the redirection in the Apache configuration is done with
        the following directives:
       </p>
       <div class="example-contents">
   <div class="apache-confcode"><pre class="apache-confcode">Action php-script /cgi-bin/php
   AddHandler php-script .php</pre>
   </div>
       </div>
   
       <p class="simpara">
        This option has only been tested with the Apache web server, and
        relies on Apache to set the non-standard CGI environment variable
        <var class="envar">REDIRECT_STATUS</var> on redirected requests.  If your
        web server does not support any way of telling if the request is
        direct or redirected, you cannot use this option and you must use
        one of the other ways of running the CGI version documented
        here.
       </p>
      </div>
   <hr />
   
   
      <div id="security.cgi-bin.doc-root" class="sect1"><hr />
       <h2 class="title">Case 3: setting doc_root or user_dir</h2>
       <p class="simpara">
        To include active content, like scripts and executables, in the
        web server document directories is sometimes considered an insecure
        practice.  If, because of some configuration mistake, the scripts
        are not executed but displayed as regular HTML documents, this
        may result in leakage of intellectual property or security
        information like passwords.  Therefore many sysadmins will prefer
        setting up another directory structure for scripts that are
        accessible only through the PHP CGI, and therefore always
        interpreted and not displayed as such.
       </p>
       <p class="simpara">
        Also if the method for making sure the requests are not
        redirected, as described in the previous section, is not
        available, it is necessary to set up a script doc_root that is
        different from web document root.
       </p>
       <p class="simpara">
        You can set the PHP script document root by the configuration
        directive <a href="#ini.doc-root" class="link">doc_root</a> in the
        <a href="#configuration.file" class="link">configuration file</a>, or
        you can set the environment variable
        <var class="envar">PHP_DOCUMENT_ROOT</var>.  If it is set, the <acronym title="Common Gateway Interface">CGI</acronym>
        version of PHP will always construct the file name to open with this
        <code class="parameter">doc_root</code> and the path information in the
        request, so you can be sure no script is executed outside this
        directory (except for <code class="parameter">user_dir</code>
        below).
       </p>
       <p class="simpara">
        Another option usable here is <a href="#ini.user-dir" class="link">user_dir</a>.  When user_dir is unset,
        only thing controlling the opened file name is
        <code class="parameter">doc_root</code>.  Opening a URL like <var class="filename">http://my.host/~user/doc.php</var> does not
        result in opening a file under users home directory, but a file
        called <var class="filename">~user/doc.php</var> under
        doc_root (yes, a directory name starting with a tilde
        [<code class="literal">~</code>]).
       </p>
       <p class="simpara">
        If user_dir is set to for example <var class="filename">public_php</var>, a request like <var class="filename">http://my.host/~user/doc.php</var> will open a
        file called <var class="filename">doc.php</var> under the directory
        named <var class="filename">public_php</var> under the home
        directory of the user.  If the home of the user is <var class="filename">/home/user</var>, the file executed is
        <var class="filename">/home/user/public_php/doc.php</var>.
       </p>
       <p class="simpara">
        <code class="parameter">user_dir</code> expansion happens regardless of
        the <code class="parameter">doc_root</code> setting, so you can control
        the document root and user directory access
        separately.
       </p>
      </div>
   <hr />
   
   
      <div id="security.cgi-bin.shell" class="sect1"><hr />
       <h2 class="title">Case 4: PHP parser outside of web tree</h2>
       <p class="para">
        A very secure option is to put the PHP parser binary somewhere
        outside of the web tree of files.  In <var class="filename">/usr/local/bin</var>, for example.  The only real
        downside to this option is that you will now have to put a line
        similar to:
        <div class="informalexample">
         <div class="example-contents">
   <div class="cdata"><pre>
   #!/usr/local/bin/php
   </pre></div>
         </div>
   
        </div>
        as the first line of any file containing PHP tags.  You will also
        need to make the file executable.  That is, treat it exactly as
        you would treat any other CGI script written in Perl or sh or any
        other common scripting language which uses the
        <code class="literal">#!</code> shell-escape mechanism for launching
        itself.
       </p>
       <p class="para">
        To get PHP to handle <var class="envar">PATH_INFO</var> and
        <var class="envar">PATH_TRANSLATED</var> information correctly with this
        setup, the PHP parser should be compiled with the <a href="#configure.enable-discard-path" class="link">--enable-discard-path</a>
        configure option.
       </p>
      </div>
   <hr />
   
   
     </div>
   
   <hr />
   
   
   
   
     
   
   
     <div id="security.apache" class="chapter"><hr />
      <h1>Installed as an Apache module</h1>
   
      <p class="simpara">
       When <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> is used as an Apache module it inherits Apache&#039;s user
       permissions (typically those of the &quot;nobody&quot; user). This has several
       impacts on security and authorization. For example, if you are using
       <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> to access a database, unless that database has built-in access
       control, you will have to make the database accessible to the
       &quot;nobody&quot; user. This means a malicious script could access and modify
       the database, even without a username and password. It&#039;s entirely
       possible that a web spider could stumble across a database
       administrator&#039;s web page, and drop all of your databases. You can
       protect against this with Apache authorization, or you can design
       your own access model using LDAP, <var class="filename">.htaccess</var> files, etc. and include
       that code as part of your <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> scripts.
      </p>
      <p class="simpara">
       Often, once security is established to the point where the <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> user
       (in this case, the apache user) has very little risk attached to it,
       it is discovered that <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> is now prevented from writing any files
       to user directories. Or perhaps it has been prevented from accessing
       or changing databases. It has equally been secured from writing
       good and bad files, or entering good and bad database transactions.
      </p>
      <p class="simpara">
       A frequent security mistake made at this point is to allow apache
       root permissions, or to escalate apache&#039;s abilities in some other
       way.
      </p>
      <p class="simpara">
       Escalating the Apache user&#039;s permissions to root is extremely
       dangerous and may compromise the entire system, so sudo&#039;ing,
       chroot&#039;ing, or otherwise running as root should not be considered by
       those who are not security professionals.
      </p>
      <p class="simpara">
       There are some simpler solutions. By using
       <a href="#ini.open-basedir" class="link">open_basedir</a> you can control and restrict what
       directories are allowed to be used for <acronym title="PHP: Hypertext Preprocessor">PHP</acronym>. You can also set up
       apache-only areas, to restrict all web based activity to non-user,
       or non-system, files.
      </p>
     </div>
   
   <hr />
   
   
   
   
     
   
    <div id="security.sessions" class="chapter"><hr />
     <h1>Session Security</h1>
   
   
     <p class="para">
      It is important keeping HTTP session management secure. Session
      releated security is described in 
      <a href="#session.security" class="link">Session Security</a> section
      of <a href="#book.session" class="link">Session module</a> reference.
     </p>
   
    </div>
   
   <hr />
   
   
   
   
     
   
   
     <div id="security.filesystem" class="chapter"><hr />
      <h1>Filesystem Security</h1>
   <h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="#security.filesystem.nullbytes">Null bytes related issues</a></li></ul>
   
      <p class="simpara">
       <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> is subject to the security built into most server systems with
       respect to permissions on a file and directory basis. This allows
       you to control which files in the filesystem may be read. Care
       should be taken with any files which are world readable to ensure
       that they are safe for reading by all users who have access to that
       filesystem.
      </p>
      <p class="simpara">
       Since <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> was designed to allow user level access to the filesystem,
       it&#039;s entirely possible to write a <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> script that will allow you
       to read system files such as /etc/passwd, modify your ethernet
       connections, send massive printer jobs out, etc. This has some
       obvious implications, in that you need to ensure that the files
       that you read from and write to are the appropriate ones.
      </p>
      <p class="simpara">
       Consider the following script, where a user indicates that they&#039;d
       like to delete a file in their home directory. This assumes a
       situation where a <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> web interface is regularly used for file
       management, so the Apache user is allowed to delete files in
       the user home directories.
      </p>
      <p class="para">
       <div class="example" id="context.curl.example-post">
        <p><strong>Example #1 Poor variable checking leads to....</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;remove&nbsp;a&nbsp;file&nbsp;from&nbsp;the&nbsp;user's&nbsp;home&nbsp;directory<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'user_submitted_name'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$userfile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'user_submitted_filename'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$homedir&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/home/</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$homedir</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$userfile</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;file&nbsp;has&nbsp;been&nbsp;deleted!"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      Since the username and the filename are postable from a user form, 
      they can submit a username and a filename belonging to someone else, 
      and delete it even if they&#039;re not supposed to be allowed to do so.
      In this case, you&#039;d want to use some other form of authentication.
      Consider what could happen if the variables submitted were
      &quot;../etc/&quot; and &quot;passwd&quot;. The code would then effectively read:
       <div class="example" id="context.zip.example-password">
        <p><strong>Example #2 ... A filesystem attack</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;removes&nbsp;a&nbsp;file&nbsp;from&nbsp;anywhere&nbsp;on&nbsp;the&nbsp;hard&nbsp;drive&nbsp;that<br />//&nbsp;the&nbsp;PHP&nbsp;user&nbsp;has&nbsp;access&nbsp;to.&nbsp;If&nbsp;PHP&nbsp;has&nbsp;root&nbsp;access:<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'user_submitted_name'</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;"../etc"<br /></span><span style="color: #0000BB">$userfile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'user_submitted_filename'</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;"passwd"<br /></span><span style="color: #0000BB">$homedir&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/home/</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;"/home/../etc"<br /><br /></span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$homedir</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$userfile</span><span style="color: #DD0000">"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;"/home/../etc/passwd"<br /><br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;file&nbsp;has&nbsp;been&nbsp;deleted!"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
       There are two important measures you should take to prevent these
       issues.
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          Only allow limited permissions to the <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> web user binary.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Check all variables which are submitted.
         </span>
        </li>
       </ul>
       Here is an improved script:
       <div class="example" id="wrappers.http.example.basic">
        <p><strong>Example #3 More secure file name checking</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;removes&nbsp;a&nbsp;file&nbsp;from&nbsp;the&nbsp;hard&nbsp;drive&nbsp;that<br />//&nbsp;the&nbsp;PHP&nbsp;user&nbsp;has&nbsp;access&nbsp;to.<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'REMOTE_USER'</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;using&nbsp;an&nbsp;authentication&nbsp;mechanism<br /></span><span style="color: #0000BB">$userfile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'user_submitted_filename'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$homedir&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/home/</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$filepath&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$homedir</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$userfile</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br />if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$filepath</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$filepath</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$logstring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Deleted&nbsp;</span><span style="color: #0000BB">$filepath</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$logstring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Failed&nbsp;to&nbsp;delete&nbsp;</span><span style="color: #0000BB">$filepath</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"/home/logging/filedelete.log"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$logstring</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$logstring</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
       However, even this is not without its flaws. If your authentication
       system allowed users to create their own user logins, and a user
       chose the login &quot;../etc/&quot;, the system is once again exposed. For
       this reason, you may prefer to write a more customized check:
       <div class="example" id="example-368">
        <p><strong>Example #4 More secure file name checking</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'REMOTE_USER'</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;using&nbsp;an&nbsp;authentication&nbsp;mechanisim<br /></span><span style="color: #0000BB">$userfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'user_submitted_filename'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$homedir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/home/</span><span style="color: #0000BB">$username</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$filepath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$homedir</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$userfile</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br />if&nbsp;(!</span><span style="color: #0000BB">ctype_alnum</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">)&nbsp;||&nbsp;!</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^(?:[a-z0-9_-]|\.(?!\.))+$/iD'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$userfile</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Bad&nbsp;username/filename"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//etc...<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </p>
      <p class="para">
       Depending on your operating system, there are a wide variety of files
       which you should be concerned about, including device entries (/dev/
       or COM1), configuration files (/etc/ files and the .ini files),
       well known file storage areas (/home/, My Documents), etc. For this
       reason, it&#039;s usually easier to create a policy where you forbid
       everything except for what you explicitly allow.
      </p>
      <div id="security.filesystem.nullbytes" class="sect1"><hr />
       <h2 class="title">Null bytes related issues</h2>
       <p class="simpara">
        As <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> uses the underlying C functions for filesystem related
        operations, it may handle null bytes in a quite unexpected way.
        As null bytes denote the end of a string in C, strings containing them 
        won&#039;t be considered entirely but rather only until a null byte occurs.
   
        The following example shows a vulnerable code that demonstrates this problem:
       </p>
       <div class="example" id="example-369">
        <p><strong>Example #1 Script vulnerable to null bytes</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'file'</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;"../../etc/passwd\0"<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'/home/wwwrun/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">.</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;file_exists&nbsp;will&nbsp;return&nbsp;true&nbsp;as&nbsp;the&nbsp;file&nbsp;/home/wwwrun/../../etc/passwd&nbsp;exists<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">include&nbsp;</span><span style="color: #DD0000">'/home/wwwrun/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">.</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;the&nbsp;file&nbsp;/etc/passwd&nbsp;will&nbsp;be&nbsp;included<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
       <p class="para">
        Therefore, any tainted string that is used in a filesystem operation should always
        be validated properly. Here is a better version of the previous example:
       </p>
       <div class="example" id="example-370">
        <p><strong>Example #2 Correctly validating the input</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'file'</span><span style="color: #007700">];&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;Whitelisting&nbsp;possible&nbsp;values<br /></span><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'main'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;</span><span style="color: #DD0000">'/home/wwwrun/include/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$file</span><span style="color: #007700">.</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;default:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;</span><span style="color: #DD0000">'/home/wwwrun/include/main.php'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </div>
   <hr />
   
   
     </div>
   
   <hr />
   
   
   
   
     
   
     <div id="security.database" class="chapter"><hr />
      <h1>Database Security</h1>
   <h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="#security.database.design">Designing Databases</a></li><li><a href="#security.database.connection">Connecting to Database</a></li><li><a href="#security.database.storage">Encrypted Storage Model</a></li><li><a href="#security.database.sql-injection">SQL Injection</a></li></ul>
   
   
      <p class="simpara">
       Nowadays, databases are cardinal components of any web based application by
       enabling websites to provide varying dynamic content. Since very sensitive
       or secret information can be stored in a database, you should strongly
       consider protecting your databases.
      </p>
      <p class="simpara">
       To retrieve or to store any information you need to connect to the database,
       send a legitimate query, fetch the result, and close the connection.
       Nowadays, the commonly used query language in this interaction is the
       Structured Query Language (SQL). See how an attacker can <a href="#security.database.sql-injection" class="link">tamper with an SQL query</a>.
      </p>
      <p class="simpara">
       As you can surmise, <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> cannot protect your database by itself. The
       following sections aim to be an introduction into the very basics of how to
       access and manipulate databases within <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> scripts.
      </p>
      <p class="simpara">
       Keep in mind this simple rule: defense in depth. The more places you
       take action to increase the protection of your database, the less
       probability of an attacker succeeding in exposing or abusing any stored
       information. Good design of the database schema and the application
       deals with your greatest fears.
      </p>
   
      <div id="security.database.design" class="sect1"><hr />
       <h2 class="title">Designing Databases</h2>
        <p class="simpara">
         The first step is always to create the database, unless you want to use
         one from a third party. When a database is created, it is
         assigned to an owner, who executed the creation statement. Usually, only
         the owner (or a superuser) can do anything with the objects in that
         database, and in order to allow other users to use it, privileges must be
         granted.
        </p>
        <p class="simpara">
         Applications should never connect to the database as its owner or a
         superuser, because these users can execute any query at will, for
         example, modifying the schema (e.g. dropping tables) or deleting its
         entire content.
        </p>
        <p class="simpara">
         You may create different database users for every aspect of your
         application with very limited rights to database objects. The most
         required privileges should be granted only, and avoid that the same user
         can interact with the database in different use cases. This means that if
         intruders gain access to your database using your applications credentials,
         they can only effect as many changes as your application can.
        </p>
      </div>
   <hr />
   
   
      <div id="security.database.connection" class="sect1"><hr />
       <h2 class="title">Connecting to Database</h2>
       <p class="simpara">
        You may want to establish the connections over SSL to encrypt
        client/server communications for increased security, or you can use ssh
        to encrypt the network connection between clients and the database server.
        If either of these is used, then monitoring your traffic and gaining
        information about your database will be difficult for a would-be attacker.
       </p>
       
      </div>
   <hr />
   
   
      <div id="security.database.storage" class="sect1"><hr />
       <h2 class="title">Encrypted Storage Model</h2>
       <p class="simpara">
        SSL/SSH protects data travelling from the client to the server: SSL/SSH
        does not protect persistent data stored in a database. SSL is an
        on-the-wire protocol.
       </p>
       <p class="simpara">
        Once an attacker gains access to your database directly (bypassing the
        webserver), stored sensitive data may be exposed or misused, unless
        the information is protected by the database itself. Encrypting the data
        is a good way to mitigate this threat, but very few databases offer this
        type of data encryption.
       </p>
       <p class="simpara">
        The easiest way to work around this problem is to first create your own
        encryption package, and then use it from within your <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> scripts. <acronym title="PHP: Hypertext Preprocessor">PHP</acronym>
        can assist you in this with several extensions, such as <a href="#ref.mcrypt" class="link">Mcrypt</a> and <a href="#ref.mhash" class="link">Mhash</a>, covering a wide variety of encryption
        algorithms. The script encrypts the data before inserting it into the database, and decrypts
        it when retrieving. See the references for further examples of how
        encryption works.
       </p>
   
       <div class="sect2" id="security.database.storage.hashing">
       <h3 class="title">Hashing</h3>
        <p class="simpara">
         In the case of truly hidden data, if its raw representation is not needed
         (i.e. will not be displayed), hashing should be taken into consideration.
         The well-known example for hashing is storing the cryptographic hash of a
         password in a database, instead of the password itself.
        </p>
        <p class="simpara">
         In PHP 5.5 or newer <a href="#ref.password" class="link">password</a> functions
         provide a convenient way to hash sensitive data and work with these hashes.
         In PHP 5.3.7+ <a href="https://github.com/ircmaxell/password_compat" class="link external">&raquo;&nbsp;
         password_compat</a> library can also be used.
        </p>
        <p class="simpara">
         <span class="function"><a href="#function.password-hash" class="function">password_hash()</a></span> is used to hash a given string using the
         strongest algorithm currently available and <span class="function"><a href="#function.password-verify" class="function">password_verify()</a></span>
         checks whether the given password matches the hash stored in database.
        </p>
        <div class="example" id="example-371">
         <p><strong>Example #1 Hashing password field</strong></p>
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;storing&nbsp;password&nbsp;hash<br /></span><span style="color: #0000BB">$query&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;users(name,pwd)&nbsp;VALUES('%s','%s');"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">pg_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #0000BB">$password</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PASSWORD_DEFAULT</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pg_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;querying&nbsp;if&nbsp;user&nbsp;submitted&nbsp;the&nbsp;right&nbsp;password<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;pwd&nbsp;FROM&nbsp;users&nbsp;WHERE&nbsp;name='%s';"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">pg_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pg_fetch_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">pg_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">));<br /><br />if&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">password_verify</span><span style="color: #007700">(</span><span style="color: #0000BB">$password</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'pwd'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Welcome,&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'!'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Authentication&nbsp;failed&nbsp;for&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
        <p class="simpara">
         In older versions of PHP this can be achieved using <span class="function"><a href="#function.crypt" class="function">crypt()</a></span>
         function.
        </p>
        <div class="example" id="example-372">
         <p><strong>Example #2 Hashing password using <span class="function"><a href="#function.crypt" class="function">crypt()</a></span>s</strong></p>
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;storing&nbsp;password&nbsp;hash<br />//&nbsp;$random_chars&nbsp;retrieved&nbsp;e.g.&nbsp;using&nbsp;/dev/random<br /></span><span style="color: #0000BB">$query&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;users(name,pwd)&nbsp;VALUES('%s','%s');"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">pg_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">pg_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">crypt</span><span style="color: #007700">(</span><span style="color: #0000BB">$password</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'$2a$07$'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$random_chars&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'$'</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pg_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;querying&nbsp;if&nbsp;user&nbsp;submitted&nbsp;the&nbsp;right&nbsp;password<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;pwd&nbsp;FROM&nbsp;users&nbsp;WHERE&nbsp;name='%s';"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">pg_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pg_fetch_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">pg_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">));<br /><br />if&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">crypt</span><span style="color: #007700">(</span><span style="color: #0000BB">$password</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'pwd'</span><span style="color: #007700">])&nbsp;==&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'pwd'</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Welcome,&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'!'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Authentication&nbsp;failed&nbsp;for&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'.'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
       </div>
      </div>
   <hr />
   
   
      <div id="security.database.sql-injection" class="sect1"><hr />
       <h2 class="title">SQL Injection</h2>
       <p class="simpara">
        Many web developers are unaware of how SQL queries can be tampered with,
        and assume that an SQL query is a trusted command. It means that SQL
        queries are able to circumvent access controls, thereby bypassing standard
        authentication and authorization checks, and sometimes SQL queries even
        may allow access to host operating system level commands.
       </p>
       <p class="simpara">
        Direct SQL Command Injection is a technique where an attacker creates or
        alters existing SQL commands to expose hidden data, or to override valuable
        ones, or even to execute dangerous system level commands on the database
        host. This is accomplished by the application taking user input and
        combining it with static parameters to build an SQL query. The following
        examples are based on true stories, unfortunately.
       </p>
       <p class="para">
        Owing to the lack of input validation and connecting to the database on
        behalf of a superuser or the one who can create users, the attacker
        may create a superuser in your database.
        <div class="example" id="example-373">
         <p><strong>Example #1 
          Splitting the result set into pages ... and making superusers
          (PostgreSQL)
         </strong></p>
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$offset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$argv</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;beware,&nbsp;no&nbsp;input&nbsp;validation!<br /></span><span style="color: #0000BB">$query&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;products&nbsp;ORDER&nbsp;BY&nbsp;name&nbsp;LIMIT&nbsp;20&nbsp;OFFSET&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #DD0000">;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pg_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
         Normal users click on the &#039;next&#039;, &#039;prev&#039; links where the <var class="varname">$offset</var>
         is encoded into the <acronym title="Uniform Resource Locator">URL</acronym>. The script expects that the incoming
         <var class="varname">$offset</var> is a decimal number. However, what if someone tries to
         break in by appending a <span class="function"><a href="#function.urlencode" class="function">urlencode()</a></span>&#039;d form of the
         following to the <acronym title="Uniform Resource Locator">URL</acronym>
         <div class="informalexample">
          <div class="example-contents">
   <div class="sqlcode"><pre class="sqlcode">0;
   insert into pg_shadow(usename,usesysid,usesuper,usecatupd,passwd)
       select &#039;crack&#039;, usesysid, &#039;t&#039;,&#039;t&#039;,&#039;crack&#039;
       from pg_shadow where usename=&#039;postgres&#039;;
   --</pre>
   </div>
          </div>
   
         </div>
         If it happened, then the script would present a superuser access to him.
         Note that <code class="literal">0;</code> is to supply a valid offset to the
         original query and to terminate it.
       </p>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <p class="para">
         It is common technique to force the SQL parser to ignore the rest of the
         query written by the developer with <code class="literal">--</code> which is the
         comment sign in SQL.
        </p>
       </p></blockquote>
       <p class="para">
        A feasible way to gain passwords is to circumvent your search result pages.
        The only thing the attacker needs to do is to see if there are any submitted variables
        used in SQL statements which are not handled properly. These filters can be set
        commonly in a preceding form to customize <code class="literal">WHERE, ORDER BY,
        LIMIT</code> and <code class="literal">OFFSET</code> clauses in <code class="literal">SELECT</code>
        statements. If your database supports the <code class="literal">UNION</code> construct,
        the attacker may try to append an entire query to the original one to list
        passwords from an arbitrary table. Using encrypted password fields is 
        strongly encouraged.
        <div class="example" id="example-374">
         <p><strong>Example #2 
          Listing out articles ... and some passwords (any database server)
         </strong></p>
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$query&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name,&nbsp;inserted,&nbsp;size&nbsp;FROM&nbsp;products<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;size&nbsp;=&nbsp;'</span><span style="color: #0000BB">$size</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">odbc_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
        The static part of the query can be combined with another
        <code class="literal">SELECT</code> statement which reveals all passwords:
        <div class="informalexample">
         <div class="example-contents">
   <div class="sqlcode"><pre class="sqlcode">&#039;
   union select &#039;1&#039;, concat(uname||&#039;-&#039;||passwd) as name, &#039;1971-01-01&#039;, &#039;0&#039; from usertable;
   --</pre>
   </div>
         </div>
   
        </div>
        If this query (playing with the <code class="literal">&#039;</code> and
        <code class="literal">--</code>) were assigned to one of the variables used in
        <var class="varname">$query</var>, the query beast awakened.
       </p>
       <p class="para">
        SQL UPDATE&#039;s are also susceptible to attack. These queries are
        also threatened by chopping and appending an entirely new query to it. But
        the attacker might fiddle with the <code class="literal">SET</code> clause. In this
        case some schema information must be possessed to manipulate the query
        successfully. This can be acquired by examining the form variable names, or
        just simply brute forcing. There are not so many naming conventions for
        fields storing passwords or usernames.
        <div class="example" id="example-375">
        <p><strong>Example #3 
         From resetting a password ... to gaining more privileges (any database server)
        </strong></p>
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"UPDATE&nbsp;usertable&nbsp;SET&nbsp;pwd='</span><span style="color: #0000BB">$pwd</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;uid='</span><span style="color: #0000BB">$uid</span><span style="color: #DD0000">';"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
        But if a malicious user submits the value
        <code class="literal">&#039; or uid like&#039;%admin%</code> to <var class="varname">$uid</var> to
        change the admin&#039;s password, or simply sets <var class="varname">$pwd</var> to
        <code class="literal">hehehe&#039;, trusted=100, admin=&#039;yes</code> to gain more 
        privileges, then, the query will be twisted:
        <div class="informalexample">
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;$uid:&nbsp;'&nbsp;or&nbsp;uid&nbsp;like&nbsp;'%admin%<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"UPDATE&nbsp;usertable&nbsp;SET&nbsp;pwd='...'&nbsp;WHERE&nbsp;uid=''&nbsp;or&nbsp;uid&nbsp;like&nbsp;'%admin%';"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;$pwd:&nbsp;hehehe',&nbsp;trusted=100,&nbsp;admin='yes<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"UPDATE&nbsp;usertable&nbsp;SET&nbsp;pwd='hehehe',&nbsp;trusted=100,&nbsp;admin='yes'&nbsp;WHERE<br />...;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
       </p>
       <p class="para">
        A frightening example of how operating system level commands can be accessed
        on some database hosts.
        <div class="example" id="example-376">
        <p><strong>Example #4 Attacking the database hosts operating system (MSSQL Server)</strong></p>
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$query&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;products&nbsp;WHERE&nbsp;id&nbsp;LIKE&nbsp;'%</span><span style="color: #0000BB">$prod</span><span style="color: #DD0000">%'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mssql_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
        If attacker submits the value
        <code class="literal">a%&#039; exec master..xp_cmdshell &#039;net user test testpass /ADD&#039; --</code>
        to <var class="varname">$prod</var>, then the <var class="varname">$query</var> will be:
        <div class="informalexample">
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />$query&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;products<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;id&nbsp;LIKE&nbsp;'%a%'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exec&nbsp;master..xp_cmdshell&nbsp;'net&nbsp;user&nbsp;test&nbsp;testpass&nbsp;/ADD'&nbsp;--%'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mssql_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
        MSSQL Server executes the SQL statements in the batch including a command
        to add a new user to the local accounts database. If this application
        were running as <code class="literal">sa</code> and the MSSQLSERVER service is
        running with sufficient privileges, the attacker would now have an
        account with which to access this machine.
       </p>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <p class="para">
         Some of the examples above is tied to a specific database server. This
         does not mean that a similar attack is impossible against other products.
         Your database server may be similarly vulnerable in another manner.
        </p>
       </p></blockquote>
       <p class="para">
        <div class="mediaobject">
         
         <div class="imageobject">
          <img src="php-bigxhtml-data/images/fa7c5b5f326e3c4a6cc9db19e7edbaf0-xkcd-bobby-tables.png" alt="A worked example of the issues regarding SQL Injection" width="666" height="205" />
         </div>
        </div>
        Image courtesy of <a href="http://xkcd.com/327" class="link external">&raquo;&nbsp;xkcd</a>
       </p>
   
       <div class="sect2" id="security.database.avoiding">
        <h3 class="title">Avoidance Techniques</h3>
        <p class="simpara">
         While it remains obvious that an attacker must possess at least some
         knowledge of the database architecture in order to conduct a successful
         attack, obtaining this information is often very simple.  For example,
         if the database is part of an open source or other publicly-available
         software package with a default installation, this information is
         completely open and available.  This information may also be divulged
         by closed-source code - even if it&#039;s encoded, obfuscated, or compiled -
         and even by your very own code through the display of error messages.
         Other methods include the user of common table and column names.  For
         example, a login form that uses a &#039;users&#039; table with column names
         &#039;id&#039;, &#039;username&#039;, and &#039;password&#039;.
        </p>
        <p class="simpara">
         These attacks are mainly based on exploiting the code not being written
         with security in mind. Never trust any kind of input, especially that
         which comes from the client side, even though it comes from a select box,
         a hidden input field or a cookie. The first example shows that such a
         blameless query can cause disasters.
        </p>
   
        <ul class="itemizedlist">
         <li class="listitem">
          <span class="simpara">
           Never connect to the database as a superuser or as the database owner.
           Use always customized users with very limited privileges.
          </span>
         </li>
         <li class="listitem">
          <span class="simpara">
           Use prepared statements with bound variables. They are provided 
           <a href="#pdo.prepared-statements" class="link">by PDO</a>,
           <a href="#mysqli.quickstart.prepared-statements" class="link">by MySQLi</a>
           and by other libraries.
          </span>
         </li>
         <li class="listitem">
          <span class="simpara">
           Check if the given input has the expected data type. <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> has
           a wide range of input validating functions, from the simplest ones
           found in <a href="#ref.var" class="link">Variable Functions</a> and
           in <a href="#ref.ctype" class="link">Character Type Functions</a>
           (e.g. <span class="function"><a href="#function.is-numeric" class="function">is_numeric()</a></span>, <span class="function"><a href="#function.ctype-digit" class="function">ctype_digit()</a></span>
           respectively) and onwards to the
           <a href="#ref.pcre" class="link">Perl compatible Regular Expressions</a>
           support.
          </span>
         </li>
         <li class="listitem">
          <p class="para">
           If the application waits for numerical input, consider verifying data
           with <span class="function"><a href="#function.ctype-digit" class="function">ctype_digit()</a></span>, or silently change its type
           using <span class="function"><a href="#function.settype" class="function">settype()</a></span>, or use its numeric representation
           by <span class="function"><a href="#function.sprintf" class="function">sprintf()</a></span>.
           <div class="example" id="example-377">
            <p><strong>Example #5 A more secure way to compose a query for paging</strong></p>
            <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /><br />settype</span><span style="color: #007700">(</span><span style="color: #0000BB">$offset</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'integer'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;products&nbsp;ORDER&nbsp;BY&nbsp;name&nbsp;LIMIT&nbsp;20&nbsp;OFFSET&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #DD0000">;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;please&nbsp;note&nbsp;%d&nbsp;in&nbsp;the&nbsp;format&nbsp;string,&nbsp;using&nbsp;%s&nbsp;would&nbsp;be&nbsp;meaningless<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;products&nbsp;ORDER&nbsp;BY&nbsp;name&nbsp;LIMIT&nbsp;20&nbsp;OFFSET&nbsp;%d;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
            </div>
   
           </div>
          </p>
         </li>
         <li class="listitem">
          <span class="simpara">
           If the database layer doesn&#039;t support binding variables then
           quote each non numeric user supplied value that is passed to the
           database with the database-specific string escape function (e.g.
           <span class="function"><a href="#function.mysql-real-escape-string" class="function">mysql_real_escape_string()</a></span>,
           <span class="function"><a href="#function.sqlite-escape-string" class="function">sqlite_escape_string()</a></span>, etc.).
           Generic functions like <span class="function"><a href="#function.addslashes" class="function">addslashes()</a></span> are useful only
           in a very specific environment (e.g. MySQL in a single-byte character
           set with disabled <var class="varname">NO_BACKSLASH_ESCAPES</var>) so it is
           better to avoid them.
          </span>
         </li>
         <li class="listitem">
          <span class="simpara">
           Do not print out any database specific information, especially
           about the schema, by fair means or foul. See also <a href="#security.errors" class="link">Error Reporting</a> and <a href="#ref.errorfunc" class="link">Error Handling and Logging Functions</a>.
          </span>
         </li>
         <li class="listitem">
          <span class="simpara">
           You may use stored procedures and previously defined cursors to abstract
           data access so that users do not directly access tables or views, but
           this solution has another impacts.
          </span>
         </li>
        </ul>
   
        <p class="simpara">
         Besides these, you benefit from logging queries either within your script
         or by the database itself, if it supports logging. Obviously, the logging is unable
         to prevent any harmful attempt, but it can be helpful to trace back which
         application has been circumvented. The log is not useful by itself, but
         through the information it contains. More detail is generally better than less.
        </p>
       </div>
      </div>
   <hr />
   
     </div>
   
   <hr />
   
   
   
   
     
   
   
     <div id="security.errors" class="chapter"><hr />
      <h1>Error Reporting</h1>
   
      <p class="para">
       With PHP security, there are two sides to error reporting. One is
       beneficial to increasing security, the other is detrimental.
      </p>
      <p class="para">
       A standard attack tactic involves profiling a system by feeding
       it improper data, and checking for the kinds, and contexts, of the
       errors which are returned. This allows the system cracker to probe
       for information about the server, to determine possible weaknesses.
       For example, if an attacker had gleaned information about a page
       based on a prior form submission, they may attempt to override
       variables, or modify them:
       <div class="example" id="example-378">
        <p><strong>Example #1 Attacking Variables with a custom HTML page</strong></p>
        <div class="example-contents">
   <div class="htmlcode"><pre class="htmlcode">&lt;form method=&quot;post&quot; action=&quot;attacktarget?username=badfoo&amp;amp;password=badfoo&quot;&gt;
   &lt;input type=&quot;hidden&quot; name=&quot;username&quot; value=&quot;badfoo&quot; /&gt;
   &lt;input type=&quot;hidden&quot; name=&quot;password&quot; value=&quot;badfoo&quot; /&gt;
   &lt;/form&gt;</pre>
   </div>
        </div>
   
       </div>
      </p>
      <p class="para">
       The PHP errors which are normally returned can be quite helpful to a
       developer who is trying to debug a script, indicating such things
       as the function or file that failed, the PHP file it failed in,
       and the line number which the failure occurred in. This is all
       information that can be exploited.  It is not uncommon for a php
       developer to use <span class="function"><a href="#function.show-source" class="function">show_source()</a></span>,
       <span class="function"><a href="#function.highlight-string" class="function">highlight_string()</a></span>, or
       <span class="function"><a href="#function.highlight-file" class="function">highlight_file()</a></span> as a debugging measure, but in
       a live site, this can expose hidden variables, unchecked syntax,
       and other dangerous information. Especially dangerous is running
       code from known sources with built-in debugging handlers, or using
       common debugging techniques. If the attacker can determine what
       general technique you are using, they may try to brute-force a page,
       by sending various common debugging strings:
       <div class="example" id="example-379">
        <p><strong>Example #2 Exploiting common debugging variables</strong></p>
        <div class="example-contents">
   <div class="htmlcode"><pre class="htmlcode">&lt;form method=&quot;post&quot; action=&quot;attacktarget?errors=Y&amp;amp;showerrors=1&amp;amp;debug=1&quot;&gt;
   &lt;input type=&quot;hidden&quot; name=&quot;errors&quot; value=&quot;Y&quot; /&gt;
   &lt;input type=&quot;hidden&quot; name=&quot;showerrors&quot; value=&quot;1&quot; /&gt;
   &lt;input type=&quot;hidden&quot; name=&quot;debug&quot; value=&quot;1&quot; /&gt;
   &lt;/form&gt;</pre>
   </div>
        </div>
   
       </div>
      </p>
      <p class="para">
       Regardless of the method of error handling, the ability to probe a
       system for errors leads to providing an attacker with more
       information.
      </p>
      <p class="para">
       For example, the very style of a generic PHP error indicates a system
       is running PHP. If the attacker was looking at an .html page, and
       wanted to probe for the back-end (to look for known weaknesses in
       the system), by feeding it the wrong data they may be able to
       determine that a system was built with PHP.
      </p>
      <p class="para">
       A function error can indicate whether a system may be running a
       specific database engine, or give clues as to how a web page or
       programmed or designed. This allows for deeper investigation into
       open database ports, or to look for specific bugs or weaknesses
       in a web page. By feeding different pieces of bad data, for example,
       an attacker can determine the order of authentication in a script,
       (from the line number errors) as well as probe for exploits that
       may be exploited in different locations in the script.
      </p>
      <p class="para">
       A filesystem or general PHP error can indicate what permissions
       the web server has, as well as the structure and organization of
       files on the web server. Developer written error code can aggravate
       this problem, leading to easy exploitation of formerly &quot;hidden&quot;
       information.
      </p>
      <p class="para">
       There are three major solutions to this issue. The first is to
       scrutinize all functions, and attempt to compensate for the bulk
       of the errors. The second is to disable error reporting entirely
       on the running code. The third is to use PHP&#039;s custom error
       handling functions to create your own error handler. Depending
       on your security policy, you may find all three to be applicable
       to your situation.
      </p>
      <p class="para">
       One way of catching this issue ahead of time is to make use of
       PHP&#039;s own <span class="function"><a href="#function.error-reporting" class="function">error_reporting()</a></span>, to help you
       secure your code and find variable usage that may be dangerous.
       By testing your code, prior to deployment, with <strong><code>E_ALL</code></strong>,
       you can quickly find areas where your variables may be open to poisoning
       or modification in other ways. Once you are ready for deployment,
       you should either disable error reporting completely by setting
       <span class="function"><a href="#function.error-reporting" class="function">error_reporting()</a></span> to 0, or turn off the error
       display using the <var class="filename">php.ini</var> option <code class="literal">display_errors</code>,
       to insulate your code from probing. If you choose to do the latter,
       you should also define the path to your log file using the
       <code class="literal">error_log</code> ini directive, and turn
       <code class="literal">log_errors</code> on.
       <div class="example" id="example-380">
        <p><strong>Example #3 Finding dangerous variables with E_ALL</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$username</span><span style="color: #007700">)&nbsp;{&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Not&nbsp;initialized&nbsp;or&nbsp;checked&nbsp;before&nbsp;usage<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$good_login&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br />if&nbsp;(</span><span style="color: #0000BB">$good_login&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{&nbsp;</span><span style="color: #FF8000">//&nbsp;If&nbsp;above&nbsp;test&nbsp;fails,&nbsp;not&nbsp;initialized&nbsp;or&nbsp;checked&nbsp;before&nbsp;usage<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">readfile&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"/highly/sensitive/data/index.html"</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </p>
     </div>
   
   <hr />
   
   
   
   
     
   
   
     <div id="security.globals" class="chapter"><hr />
      <h1>Using Register Globals</h1>
   
      <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This feature has been
   <em class="emphasis">DEPRECATED</em> as of PHP 5.3.0 and <em class="emphasis">REMOVED</em>
   as of PHP 5.4.0.</p></div>
      <p class="para">
       Perhaps the most controversial change in <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> is when the default value
       for the <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> directive <a href="#ini.register-globals" class="link">
       register_globals</a> went from ON to OFF in <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> 
       <a href="https://www.php.net/releases/4_2_0.php" class="link external">&raquo;&nbsp;4.2.0</a>.  Reliance on this
       directive was quite common and many people didn&#039;t even know it existed
       and assumed it&#039;s just how <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> works.  This page will explain how one can
       write insecure code with this directive but keep in mind that the
       directive itself isn&#039;t insecure but rather it&#039;s the misuse of it.
      </p>
      <p class="para">
       When on, register_globals will inject your scripts with all
       sorts of variables, like request variables from <acronym title="Hyper Text Markup Language">HTML</acronym> forms.  This
       coupled with the fact that <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> doesn&#039;t require variable initialization
       means writing insecure code is that much easier.  It was a difficult
       decision, but the <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> community decided to disable this directive by 
       default.  When on, people use variables yet really don&#039;t know for sure
       where they come from and can only assume.  Internal variables that are
       defined in the script itself get mixed up with request data sent by
       users and disabling register_globals changes this.  Let&#039;s demonstrate
       with an example misuse of register_globals: 
      </p>
      <p class="para">
       <div class="example" id="example-381">
        <p><strong>Example #1 Example misuse with register_globals = on</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;define&nbsp;$authorized&nbsp;=&nbsp;true&nbsp;only&nbsp;if&nbsp;user&nbsp;is&nbsp;authenticated<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">authenticated_user</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$authorized&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Because&nbsp;we&nbsp;didn't&nbsp;first&nbsp;initialize&nbsp;$authorized&nbsp;as&nbsp;false,&nbsp;this&nbsp;might&nbsp;be<br />//&nbsp;defined&nbsp;through&nbsp;register_globals,&nbsp;like&nbsp;from&nbsp;GET&nbsp;auth.php?authorized=1<br />//&nbsp;So,&nbsp;anyone&nbsp;can&nbsp;be&nbsp;seen&nbsp;as&nbsp;authenticated!<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$authorized</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;</span><span style="color: #DD0000">"/highly/sensitive/data.php"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </p>
      <p class="para">
       When register_globals = on, our logic above may be compromised.  When
       off, <var class="varname">$authorized</var> can&#039;t be set via request so it&#039;ll
       be fine, although it really is generally a good programming practice to
       initialize variables first.  For example, in our example above we might
       have first done <code class="literal">$authorized = false</code>.  Doing this
       first means our above code would work with register_globals on or off as
       users by default would be unauthorized.
      </p>
      <p class="para">
       Another example is that of <a href="#ref.session" class="link">sessions</a>.
       When register_globals = on, we could also use
       <var class="varname">$username</var> in our example below but again you must
       realize that <var class="varname">$username</var> could also come from other
       means, such as GET (through the <acronym title="Uniform Resource Locator">URL</acronym>).
      </p>
      <p class="para">
       <div class="example" id="example-382">
        <p><strong>Example #2 Example use of sessions with register_globals on or off</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;We&nbsp;wouldn't&nbsp;know&nbsp;where&nbsp;$username&nbsp;came&nbsp;from&nbsp;but&nbsp;do&nbsp;know&nbsp;$_SESSION&nbsp;is<br />//&nbsp;for&nbsp;session&nbsp;data<br /></span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]))&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;&lt;b&gt;</span><span style="color: #007700">{</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]}</span><span style="color: #DD0000">&lt;/b&gt;"</span><span style="color: #007700">;<br /><br />}&nbsp;else&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;&lt;b&gt;Guest&lt;/b&gt;&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Would&nbsp;you&nbsp;like&nbsp;to&nbsp;login?"</span><span style="color: #007700">;<br /><br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </p>
      <p class="para">
       It&#039;s even possible to take preventative measures to warn when forging is
       being attempted. If you know ahead of time exactly where a variable
       should be coming from, you can check to see if the submitted data is
       coming from an inappropriate kind of submission.  While it doesn&#039;t
       guarantee that data has not been forged, it does require an attacker to
       guess the right kind of forging.  If you don&#039;t care where the request
       data comes from, you can use <var class="varname"><a href="#reserved.variables.request" class="classname">$_REQUEST</a></var> as it contains
       a mix of GET, POST and COOKIE data.  See also the manual section on
       using <a href="#language.variables.external" class="link">variables from external
       sources</a>.
      </p>
      <p class="para">
       <div class="example" id="example-383">
        <p><strong>Example #3 Detecting simple variable poisoning</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'MAGIC_COOKIE'</span><span style="color: #007700">]))&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;MAGIC_COOKIE&nbsp;comes&nbsp;from&nbsp;a&nbsp;cookie.<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Be&nbsp;sure&nbsp;to&nbsp;validate&nbsp;the&nbsp;cookie&nbsp;data!<br /><br /></span><span style="color: #007700">}&nbsp;elseif&nbsp;(isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'MAGIC_COOKIE'</span><span style="color: #007700">])&nbsp;||&nbsp;isset(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'MAGIC_COOKIE'</span><span style="color: #007700">]))&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mail</span><span style="color: #007700">(</span><span style="color: #DD0000">"admin@example.com"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Possible&nbsp;breakin&nbsp;attempt"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'REMOTE_ADDR'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Security&nbsp;violation,&nbsp;admin&nbsp;has&nbsp;been&nbsp;alerted."</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;exit;<br /><br />}&nbsp;else&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;MAGIC_COOKIE&nbsp;isn't&nbsp;set&nbsp;through&nbsp;this&nbsp;REQUEST<br /><br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </p>
      <p class="para">
       Of course, simply turning off register_globals does not mean your code
       is secure.  For every piece of data that is submitted, it should also be
       checked in other ways.  Always validate your user data and initialize
       your variables!  To check for uninitialized variables you may turn up
       <span class="function"><a href="#function.error-reporting" class="function">error_reporting()</a></span> to show
       <strong><code>E_NOTICE</code></strong> level errors.
      </p>
      <p class="para">
       For information about emulating register_globals being On or Off, see this <a href="#faq.misc.registerglobals" class="link">FAQ</a>.
      </p>
     </div>
   
   <hr />
   
   
   
   
     
   
   
   <div id="security.variables" class="chapter"><hr />
    <h1>User Submitted Data</h1>
   
    <p class="para">
     The greatest weakness in many <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> programs is not inherent in the
     language itself, but merely an issue of code not being written with
     security in mind. For this reason, you should always take the time
     to consider the implications of a given piece of code, to ascertain
     the possible damage if an unexpected variable is submitted to it.
     <div class="example" id="example-384">
      <p><strong>Example #1 Dangerous Variable Usage</strong></p>
      <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;remove&nbsp;a&nbsp;file&nbsp;from&nbsp;the&nbsp;user's&nbsp;home&nbsp;directory...&nbsp;or&nbsp;maybe<br />//&nbsp;somebody&nbsp;else's?<br /></span><span style="color: #0000BB">unlink&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$evil_var</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Write&nbsp;logging&nbsp;of&nbsp;their&nbsp;access...&nbsp;or&nbsp;maybe&nbsp;an&nbsp;/etc/passwd&nbsp;entry?<br /></span><span style="color: #0000BB">fwrite&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$evil_var</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Execute&nbsp;something&nbsp;trivial..&nbsp;or&nbsp;rm&nbsp;-rf&nbsp;*?<br /></span><span style="color: #0000BB">system&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$evil_var</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">exec&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$evil_var</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
      </div>
   
     </div>
    </p>
    <p class="para">
     You should always carefully examine your code to make sure that any
     variables being submitted from a web browser are being properly
     checked, and ask yourself the following questions:
     <ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        Will this script only affect the intended files?
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Can unusual or undesirable data be acted upon?
       </span>
      </li>
      <li class="listitem">
      <span class="simpara">
        Can this script be used in unintended ways?
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Can this be used in conjunction with other scripts in a negative
        manner?
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Will any transactions be adequately logged?
       </span>
      </li>
     </ul>
    </p>
    <p class="para">
     By adequately asking these questions while writing the script,
     rather than later, you prevent an unfortunate re-write when you
     need to increase your security. By starting out with this mindset,
     you won&#039;t guarantee the security of your system, but you can help
     improve it.
    </p>
    <p class="para">
     You may also want to consider turning off register_globals,
     magic_quotes, or other convenience settings which may confuse
     you as to the validity, source, or value of a given variable.
     Working with <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> in error_reporting(E_ALL) mode can also help warn
     you about variables being used before they are checked or
     initialized (so you can prevent unusual data from being
     operated upon).
    </p>
   </div>
   
   <hr />
   
   
   
   
     
   
     <div id="security.magicquotes" class="chapter"><hr />
      <h1>Magic Quotes</h1>
   <h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="#security.magicquotes.what">What are Magic Quotes</a></li><li><a href="#security.magicquotes.why">Why did we use Magic Quotes</a></li><li><a href="#security.magicquotes.whynot">Why not to use Magic Quotes</a></li><li><a href="#security.magicquotes.disabling">Disabling Magic Quotes</a></li></ul>
   
      <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This feature has been
   <em class="emphasis">DEPRECATED</em> as of PHP 5.3.0 and <em class="emphasis">REMOVED</em>
   as of PHP 5.4.0.</p></div>
      <p class="para">
       Magic Quotes is a process that automagically escapes incoming data to the 
       <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> script. It&#039;s preferred to code with magic quotes off and to instead
       escape the data at runtime, as needed.
      </p>
   
      <div id="security.magicquotes.what" class="sect1"><hr />
       <h2 class="title">What are Magic Quotes</h2>
       <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This feature has been
   <em class="emphasis">DEPRECATED</em> as of PHP 5.3.0 and <em class="emphasis">REMOVED</em>
   as of PHP 5.4.0.</p></div>
       <p class="para">
        When on, all <code class="literal">&#039;</code> (single-quote), <code class="literal">&quot;</code> 
        (double quote), <code class="literal">\</code> (backslash) and <code class="literal">NULL</code> 
        characters are escaped with a backslash automatically.  This is identical
        to what <span class="function"><a href="#function.addslashes" class="function">addslashes()</a></span> does.
       </p>
       <p class="para">
        There are three magic quote directives:
       </p>
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <a href="#ini.magic-quotes-gpc" class="link">magic_quotes_gpc</a>
         </span>
         <span class="simpara">
          Affects <acronym title="Hypertext Transfer Protocol">HTTP</acronym> Request data (GET, POST, and COOKIE). Cannot be set at 
          runtime, and defaults to <em class="emphasis">on</em> in <acronym title="PHP: Hypertext Preprocessor">PHP</acronym>.
         </span>
         <span class="simpara">
          See also <span class="function"><a href="#function.get-magic-quotes-gpc" class="function">get_magic_quotes_gpc()</a></span>.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <a href="#ini.magic-quotes-runtime" class="link">magic_quotes_runtime</a>
         </span>
         <span class="simpara">
          If enabled, most functions that return data from an external source, 
          including databases and text files, will have quotes escaped with a 
          backslash. Can be set at runtime, and defaults to <em class="emphasis">off</em>
          in <acronym title="PHP: Hypertext Preprocessor">PHP</acronym>.
         </span>
         <span class="simpara">
          See also <span class="function"><a href="#function.set-magic-quotes-runtime" class="function">set_magic_quotes_runtime()</a></span> and
          <span class="function"><a href="#function.get-magic-quotes-runtime" class="function">get_magic_quotes_runtime()</a></span>.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <a href="#ini.magic-quotes-sybase" class="link">magic_quotes_sybase</a>
         </span>
         <span class="simpara">
          If enabled, a single-quote is escaped with a single-quote instead of a 
          backslash.  If on, it completely overrides 
          <a href="#ini.magic-quotes-gpc" class="link">magic_quotes_gpc</a>. Having 
          both directives enabled means only single quotes are escaped as 
          <code class="literal">&#039;&#039;</code>. Double quotes, backslashes and NULL&#039;s will 
          remain untouched and unescaped.
         </span>
         <span class="simpara">
          See also <span class="function"><a href="#function.ini-get" class="function">ini_get()</a></span> for retrieving its value.
         </span>
        </li>
       </ul>
      </div>
   <hr />
   
   
      <div id="security.magicquotes.why" class="sect1"><hr />
       <h2 class="title">Why did we use Magic Quotes</h2>
       <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This feature has been
   <em class="emphasis">DEPRECATED</em> as of PHP 5.3.0 and <em class="emphasis">REMOVED</em>
   as of PHP 5.4.0.</p></div>
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          There is no reason to use magic quotes because they are no longer
          a supported part of <acronym title="PHP: Hypertext Preprocessor">PHP</acronym>. However, they did exist and did help a
          few beginners blissfully and unknowingly write better (more secure)
          code. But, when dealing with code that relies upon this behavior
          it&#039;s better to update the code instead of turning magic quotes on.
         </span>
         <span class="simpara">
          So why did this feature exist? Simple, to help prevent
          <a href="#security.database.sql-injection" class="link">SQL Injection</a>.
          Today developers are better aware of security and end up using
          database specific escaping mechanisms and/or prepared statements
          instead of relying upon features like magical quotes.
         </span>
        </li>
       </ul>
      </div>
   <hr />
   
   
      <div id="security.magicquotes.whynot" class="sect1"><hr />
       <h2 class="title">Why not to use Magic Quotes</h2>
       <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This feature has been
   <em class="emphasis">DEPRECATED</em> as of PHP 5.3.0 and <em class="emphasis">REMOVED</em>
   as of PHP 5.4.0.</p></div>
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          Portability
         </span>
         <span class="simpara">
          Assuming it to be on, or off, affects portability. Use
          <span class="function"><a href="#function.get-magic-quotes-gpc" class="function">get_magic_quotes_gpc()</a></span> to check for this, and code
          accordingly.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Performance
         </span>
         <span class="simpara">
          Because not every piece of escaped data is inserted into a 
          database, there is a performance loss for escaping all this data. 
          Simply calling on the escaping functions (like 
          <span class="function"><a href="#function.addslashes" class="function">addslashes()</a></span>) at runtime is more efficient.
         </span>
         <span class="simpara">
          Although <var class="filename">php.ini-development</var> enables these directives  
          by default, <var class="filename">php.ini-production</var> disables it.
          This recommendation is mainly due to performance reasons.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Inconvenience
         </span>
         <span class="simpara">
          Because not all data needs escaping, it&#039;s often annoying to see escaped
          data where it shouldn&#039;t be. For example, emailing from a form, and
          seeing a bunch of \&#039; within the email. To fix, this may require 
          excessive use of <span class="function"><a href="#function.stripslashes" class="function">stripslashes()</a></span>.
         </span>
        </li>
       </ul>
      </div>
   <hr />
   
   
      <div id="security.magicquotes.disabling" class="sect1"><hr />
       <h2 class="title">Disabling Magic Quotes</h2>
       <p class="para">
        The <a href="#ini.magic-quotes-gpc" class="link">magic_quotes_gpc</a>
        directive may only be disabled at the system level, and not at
        runtime. In otherwords, use of <span class="function"><a href="#function.ini-set" class="function">ini_set()</a></span> is not
        an option.
       </p>
       <p class="para">
        <div class="example" id="example-385">
         <p><strong>Example #1 Disabling magic quotes server side</strong></p>
         <div class="example-contents"><p>
          An example that sets the value of these directives to 
          <code class="literal">Off</code> in <var class="filename">php.ini</var>.  For additional details, read the 
          manual section titled <a href="#configuration.changes" class="link">How to 
          change configuration settings</a>.
         </p></div>
         <div class="example-contents screen">
   <div class="cdata"><pre>
   ; Magic quotes
   ;
   
   ; Magic quotes for incoming GET/POST/Cookie data.
   magic_quotes_gpc = Off
   
   ; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
   magic_quotes_runtime = Off
   
   ; Use Sybase-style magic quotes (escape &#039; with &#039;&#039; instead of \&#039;).
   magic_quotes_sybase = Off
   </pre></div>
         </div>
         <div class="example-contents"><p>
          If access to the server configuration is unavailable, use of
          <var class="filename">.htaccess</var> is also an option.  For example:
         </p></div>
         <div class="example-contents screen">
   <div class="cdata"><pre>
   php_flag magic_quotes_gpc Off
   </pre></div>
         </div>
        </div>
       </p>
       <p class="para">
        In the interest of writing portable code (code that works in any 
        environment), like if setting at the server level is not possible,
        here&#039;s an example to disable <a href="#ini.magic-quotes-gpc" class="link">
        magic_quotes_gpc</a> at runtime. This method is inefficient so 
        it&#039;s preferred to instead set the appropriate directives elsewhere.
       </p>
       <p class="para">
        <div class="example" id="example-386">
         <p><strong>Example #2 Disabling magic quotes at runtime</strong></p>
         <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">get_magic_quotes_gpc</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$process&nbsp;</span><span style="color: #007700">=&nbsp;array(&amp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">,&nbsp;&amp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">,&nbsp;&amp;</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">,&nbsp;&amp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(list(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$process</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$val&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$process</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$process</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">][</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">)]&nbsp;=&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$process</span><span style="color: #007700">[]&nbsp;=&nbsp;&amp;</span><span style="color: #0000BB">$process</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">][</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">)];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$process</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">][</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">)]&nbsp;=&nbsp;</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$process</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
         </div>
   
        </div>
       </p>
      </div>
   <hr />
   
   
     </div>
   
   <hr />
   
   
   
   
     
   
   
     <div id="security.hiding" class="chapter"><hr />
      <h1>Hiding PHP</h1>
   
      <p class="para">
       In general, security by obscurity is one of the weakest forms of security.
       But in some cases, every little bit of extra security is desirable.
      </p>
      <p class="para">
       A few simple techniques can help to hide <acronym title="PHP: Hypertext Preprocessor">PHP</acronym>, possibly slowing
       down an attacker who is attempting to discover weaknesses in your
       system. By setting expose_php to <code class="literal">off</code> in your 
       <var class="filename">php.ini</var> file, you reduce the amount of information available to them.
      </p>
      <p class="para">
       Another tactic is to configure web servers such as apache to
       parse different filetypes through <acronym title="PHP: Hypertext Preprocessor">PHP</acronym>, either with an <var class="filename">.htaccess</var>
       directive, or in the apache configuration file itself. You can
       then use misleading file extensions:
       <div class="example" id="example-387">
        <p><strong>Example #1 Hiding PHP as another language</strong></p>
        <div class="example-contents">
   <div class="apache-confcode"><pre class="apache-confcode"># Make PHP code look like other code types
   AddType application/x-httpd-php .asp .py .pl</pre>
   </div>
        </div>
   
       </div>
       Or obscure it completely:
       <div class="example" id="example-388">
        <p><strong>Example #2 Using unknown types for PHP extensions</strong></p>
        <div class="example-contents">
   <div class="apache-confcode"><pre class="apache-confcode"># Make PHP code look like unknown types
   AddType application/x-httpd-php .bop .foo .133t</pre>
   </div>
        </div>
   
       </div>
       Or hide it as <acronym title="Hyper Text Markup Language">HTML</acronym> code, which has a slight performance hit because
       all <acronym title="Hyper Text Markup Language">HTML</acronym> will be parsed through the <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> engine:
       <div class="example" id="example-389">
        <p><strong>Example #3 Using <acronym title="Hyper Text Markup Language">HTML</acronym> types for PHP extensions</strong></p>
        <div class="example-contents">
   <div class="apache-confcode"><pre class="apache-confcode"># Make all PHP code look like HTML
   AddType application/x-httpd-php .htm .html</pre>
   </div>
        </div>
   
       </div>
       For this to work effectively, you must rename your <acronym title="PHP: Hypertext Preprocessor">PHP</acronym> files with
       the above extensions. While it is a form of security through
       obscurity, it&#039;s a minor preventative measure with few drawbacks.
      </p>
     </div>
   
   <hr />
   
   
   
   
   
     
   
   
     <div id="security.current" class="chapter"><hr />
      <h1>Keeping Current</h1>
   
      <p class="simpara">
       PHP, like any other large system, is under constant scrutiny and
       improvement. Each new version will often include both major and
       minor changes to enhance security and repair any flaws, configuration
       mishaps, and other issues that will affect the overall security
       and stability of your system.
      </p>
      <p class="simpara">
       Like other system-level scripting languages and programs, the best
       approach is to update often, and maintain awareness of the latest
       versions and their changes.
      </p>
     </div>
   
   <hr />
   
   
   
   
   
    <ul class="chunklist chunklist_book"><li><a href="#security.intro">Introduction</a></li><li><a href="#security.general">General considerations</a></li><li><a href="#security.cgi-bin">Installed as CGI binary</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#security.cgi-bin.attacks">Possible attacks</a></li><li><a href="#security.cgi-bin.default">Case 1: only public files served</a></li><li><a href="#security.cgi-bin.force-redirect">Case 2: using cgi.force_redirect</a></li><li><a href="#security.cgi-bin.doc-root">Case 3: setting doc_root or user_dir</a></li><li><a href="#security.cgi-bin.shell">Case 4: PHP parser outside of web tree</a></li></ul></li><li><a href="#security.apache">Installed as an Apache module</a></li><li><a href="#security.sessions">Session Security</a></li><li><a href="#security.filesystem">Filesystem Security</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#security.filesystem.nullbytes">Null bytes related issues</a></li></ul></li><li><a href="#security.database">Database Security</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#security.database.design">Designing Databases</a></li><li><a href="#security.database.connection">Connecting to Database</a></li><li><a href="#security.database.storage">Encrypted Storage Model</a></li><li><a href="#security.database.sql-injection">SQL Injection</a></li></ul></li><li><a href="#security.errors">Error Reporting</a></li><li><a href="#security.globals">Using Register Globals</a></li><li><a href="#security.variables">User Submitted Data</a></li><li><a href="#security.magicquotes">Magic Quotes</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="#security.magicquotes.what">What are Magic Quotes</a></li><li><a href="#security.magicquotes.why">Why did we use Magic Quotes</a></li><li><a href="#security.magicquotes.whynot">Why not to use Magic Quotes</a></li><li><a href="#security.magicquotes.disabling">Disabling Magic Quotes</a></li></ul></li><li><a href="#security.hiding">Hiding PHP</a></li><li><a href="#security.current">Keeping Current</a></li></ul></div>
   <hr />
   
   
    <div id="features" class="book"><hr />
     <h1 class="title">Features</h1>
     
   
    <div id="features.http-auth" class="chapter"><hr />
     <h1>HTTP authentication with PHP</h1>
   
   
     <p class="simpara">
      It is possible to use the 
      <span class="function"><a href="#function.header" class="function">header()</a></span> function to send an <code class="literal">&quot;Authentication Required&quot;</code> 
      message to the client browser causing it to pop up a Username/Password 
      input window.  Once the user has filled in a username and a password, 
      the URL containing the PHP script will be called again with the 
      <a href="#reserved.variables" class="link">predefined variables</a> 
      <var class="varname">PHP_AUTH_USER</var>, <var class="varname">PHP_AUTH_PW</var>, 
      and <var class="varname">AUTH_TYPE</var> set to the user name, password and 
      authentication type respectively.  These predefined variables are found 
      in the <var class="varname"><a href="#reserved.variables.server" class="classname">$_SERVER</a></var> array. Both &quot;Basic&quot; and &quot;Digest&quot;
      (since PHP 5.1.0) authentication methods are supported. See the
      <span class="function"><a href="#function.header" class="function">header()</a></span> function for more information.
     </p>
   
     <p class="para">
      An example script fragment which would force client authentication
      on a page is as follows:
     </p>
     <p class="para">
      <div class="example" id="example-390">
       <p><strong>Example #1 Basic HTTP Authentication example</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(!isset(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_USER'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'WWW-Authenticate:&nbsp;Basic&nbsp;realm="My&nbsp;Realm"'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'HTTP/1.0&nbsp;401&nbsp;Unauthorized'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Text&nbsp;to&nbsp;send&nbsp;if&nbsp;user&nbsp;hits&nbsp;Cancel&nbsp;button'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Hello&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_USER'</span><span style="color: #007700">]}</span><span style="color: #DD0000">.&lt;/p&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;You&nbsp;entered&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_PW'</span><span style="color: #007700">]}</span><span style="color: #DD0000">&nbsp;as&nbsp;your&nbsp;password.&lt;/p&gt;"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
   
     <p class="para">
      <div class="example" id="example-391">
       <p><strong>Example #2 Digest HTTP Authentication example</strong></p>
       <div class="example-contents"><p>
        This example shows you how to implement a simple Digest HTTP
        authentication script. For more information read the <a href="http://www.faqs.org/rfcs/rfc2617" class="link external">&raquo;&nbsp;RFC 2617</a>.
       </p></div>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$realm&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Restricted&nbsp;area'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//user&nbsp;=&gt;&nbsp;password<br /></span><span style="color: #0000BB">$users&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'admin'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'mypass'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'guest'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'guest'</span><span style="color: #007700">);<br /><br /><br />if&nbsp;(empty(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_DIGEST'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'HTTP/1.1&nbsp;401&nbsp;Unauthorized'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'WWW-Authenticate:&nbsp;Digest&nbsp;realm="'</span><span style="color: #007700">.</span><span style="color: #0000BB">$realm</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'",qop="auth",nonce="'</span><span style="color: #007700">.</span><span style="color: #0000BB">uniqid</span><span style="color: #007700">().</span><span style="color: #DD0000">'",opaque="'</span><span style="color: #007700">.</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #0000BB">$realm</span><span style="color: #007700">).</span><span style="color: #DD0000">'"'</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Text&nbsp;to&nbsp;send&nbsp;if&nbsp;user&nbsp;hits&nbsp;Cancel&nbsp;button'</span><span style="color: #007700">);<br />}<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;analyze&nbsp;the&nbsp;PHP_AUTH_DIGEST&nbsp;variable<br /></span><span style="color: #007700">if&nbsp;(!(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">http_digest_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_DIGEST'</span><span style="color: #007700">]))&nbsp;||<br />&nbsp;&nbsp;&nbsp;&nbsp;!isset(</span><span style="color: #0000BB">$users</span><span style="color: #007700">[</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]]))<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Wrong&nbsp;Credentials!'</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;generate&nbsp;the&nbsp;valid&nbsp;response<br /></span><span style="color: #0000BB">$A1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">':'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$realm&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">':'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$users</span><span style="color: #007700">[</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]]);<br /></span><span style="color: #0000BB">$A2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'REQUEST_METHOD'</span><span style="color: #007700">].</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'uri'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$valid_response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #0000BB">$A1</span><span style="color: #007700">.</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'nonce'</span><span style="color: #007700">].</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'nc'</span><span style="color: #007700">].</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'cnonce'</span><span style="color: #007700">].</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'qop'</span><span style="color: #007700">].</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$A2</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'response'</span><span style="color: #007700">]&nbsp;!=&nbsp;</span><span style="color: #0000BB">$valid_response</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Wrong&nbsp;Credentials!'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;ok,&nbsp;valid&nbsp;username&nbsp;&amp;&nbsp;password<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'You&nbsp;are&nbsp;logged&nbsp;in&nbsp;as:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br /><br /><br /></span><span style="color: #FF8000">//&nbsp;function&nbsp;to&nbsp;parse&nbsp;the&nbsp;http&nbsp;auth&nbsp;header<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">http_digest_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$txt</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;protect&nbsp;against&nbsp;missing&nbsp;data<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$needed_parts&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'nonce'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'nc'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cnonce'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'qop'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'uri'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'response'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$keys&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">'|'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$needed_parts</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">'@('&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$keys&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">')=(?:([\'"])([^\2]+?)\2|([^\s,]+))@'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$txt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PREG_SET_ORDER</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$matches&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]]&nbsp;=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]&nbsp;?&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$needed_parts</span><span style="color: #007700">[</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$needed_parts&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
   
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>Compatibility Note</strong><br />
      <p class="para">
       Please be careful when coding the HTTP header lines. In order to guarantee maximum
       compatibility with all clients, the keyword &quot;Basic&quot; should be written with an
       uppercase &quot;B&quot;, the realm string must be enclosed in double (not single) quotes,
       and exactly one space should precede the <em class="emphasis">401</em> code in the 
       <em class="emphasis">HTTP/1.0 401</em> header line. Authentication parameters have
       to be comma-separated as seen in the digest example above.
      </p>
     </p></blockquote>
   
     <p class="para">
      Instead of simply printing out <var class="varname">PHP_AUTH_USER</var> 
      and <var class="varname">PHP_AUTH_PW</var>, as done in the above example, 
      you may want to check the username and password for validity.  
      Perhaps by sending a query to a database, or by looking up the 
      user in a dbm file.
     </p>
   
     <p class="para">
      Watch out for buggy Internet Explorer browsers out there.  They
      seem very picky about the order of the headers.  Sending the
      <em class="emphasis">WWW-Authenticate</em> header before the
      <code class="literal">HTTP/1.0 401</code> header seems to do the trick
      for now.
     </p>
   
     <p class="simpara">
      In order to prevent someone from writing a script which
      reveals the password for a page that was authenticated through a
      traditional external mechanism, the PHP_AUTH variables will not be 
      set if external authentication is enabled for that particular
      page and <a href="#ini.safe-mode" class="link">safe mode</a> is enabled.  Regardless, 
      <var class="varname">REMOTE_USER</var> can be used 
      to identify the externally-authenticated user.  So, you can use  
      <var class="varname"><a href="#reserved.variables.server" class="classname">$_SERVER['REMOTE_USER']</a></var>.
     </p>
   
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>Configuration Note</strong><br />
      <p class="para">
       PHP uses the presence of an <code class="literal">AuthType</code> directive
       to determine whether external authentication is in effect.
      </p>
     </p></blockquote>
   
     <p class="simpara">
      Note, however, that the above does not prevent someone who
      controls a non-authenticated URL from stealing passwords from
      authenticated URLs on the same server.
     </p>
     <p class="simpara">
      Both Netscape Navigator and Internet Explorer will clear the local browser
      window&#039;s authentication cache for the realm upon receiving a
      server response of 401. This can effectively &quot;log out&quot; a user,
      forcing them to re-enter their username and password. Some people
      use this to &quot;time out&quot; logins, or provide a &quot;log-out&quot; button.
     </p>
     <p class="para">
      <div class="example" id="example-392">
       <p><strong>Example #3 HTTP Authentication example forcing a new name/password</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">authenticate</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'WWW-Authenticate:&nbsp;Basic&nbsp;realm="Test&nbsp;Authentication&nbsp;System"'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'HTTP/1.0&nbsp;401&nbsp;Unauthorized'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"You&nbsp;must&nbsp;enter&nbsp;a&nbsp;valid&nbsp;login&nbsp;ID&nbsp;and&nbsp;password&nbsp;to&nbsp;access&nbsp;this&nbsp;resource\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br />&nbsp;<br />if&nbsp;(!isset(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_USER'</span><span style="color: #007700">])&nbsp;||<br />&nbsp;&nbsp;&nbsp;&nbsp;(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'SeenBefore'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'OldAuth'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_USER'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">authenticate</span><span style="color: #007700">();<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Welcome:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_USER'</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Old:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">'OldAuth'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;form&nbsp;action=''&nbsp;method='post'&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;input&nbsp;type='hidden'&nbsp;name='SeenBefore'&nbsp;value='1'&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;input&nbsp;type='hidden'&nbsp;name='OldAuth'&nbsp;value=\""&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_USER'</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">"\"&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;input&nbsp;type='submit'&nbsp;value='Re&nbsp;Authenticate'&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/form&gt;&lt;/p&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
     <p class="simpara">
      This behavior is not required by the <code class="literal">HTTP Basic</code>
      authentication standard, so you should never depend on this. Testing with
      <code class="literal">Lynx</code> has shown that <code class="literal">Lynx</code> does not clear
      the authentication credentials with a 401 server response, so pressing back
      and then forward again will open the resource as long as the credential
      requirements haven&#039;t changed. The user can press the
      <code class="literal">&#039;_&#039;</code> key to clear their authentication information, however.
     </p>
     <p class="simpara">
      In order to get HTTP Authentication to work using IIS server with the CGI version
      of PHP you must edit your IIS configuration &quot;<code class="literal">Directory Security</code>&quot;.
      Click on &quot;<code class="literal">Edit</code>&quot; and only check
      &quot;<code class="literal">Anonymous Access</code>&quot;, all other fields
      should be left unchecked.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <strong>IIS Note:</strong><br />
      <span class="simpara">
       For HTTP Authentication to work with IIS, the PHP directive
       <a href="#ini.cgi.rfc2616-headers" class="link">cgi.rfc2616_headers</a> must
       be set to <code class="literal">0</code> (the default value).
      </span>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       If <a href="#ini.safe-mode" class="link">safe mode</a> is enabled, the
       uid of the script is added to the <code class="literal">realm</code> part of
       the <code class="literal">WWW-Authenticate</code> header.
      </p>
     </p></blockquote>
   
    </div>
   
   <hr />
   
   
   
   
     
   
    <div id="features.cookies" class="chapter"><hr />
     <h1>Cookies</h1>
   
   
     <p class="para">
      PHP transparently supports <acronym title="Hypertext Transfer Protocol">HTTP</acronym> cookies.  Cookies are a mechanism for
      storing data in the remote browser and thus tracking or identifying return
      users.  You can set cookies using the <span class="function"><a href="#function.setcookie" class="function">setcookie()</a></span> or
      <span class="function"><a href="#function.setrawcookie" class="function">setrawcookie()</a></span>
      function.  Cookies are part of the <acronym title="Hypertext Transfer Protocol">HTTP</acronym> header, so
      <span class="function"><a href="#function.setcookie" class="function">setcookie()</a></span> must be called before any output is sent to
      the browser.  This is the same limitation that <span class="function"><a href="#function.header" class="function">header()</a></span>
      has. You can use the <a href="#ref.outcontrol" class="link">output buffering
      functions</a> to delay the script output until you have decided whether
      or not to set any cookies or send any headers.
     </p>
   
     <p class="para">
      Any cookies sent to server from the client will automatically be included into
      a <var class="varname"><a href="#reserved.variables.cookies" class="classname">$_COOKIE</a></var> auto-global
      array if <a href="#ini.variables-order" class="link">variables_order</a>
      contains &quot;C&quot;. If you wish to assign multiple values to a single
      cookie, just add <code class="literal">[]</code> to the cookie name.
     </p>
   
     <p class="para">   
      On older PHP systems (5.3 or earlier), 
      <a href="#ini.register-globals" class="link">register_globals</a> may be enabled, 
      which may cause undesirable and insecure operation. If this is enabled, cookies will 
      be registered as global variables.
     </p>
   
     <p class="para">
      For more details, including notes on browser bugs, see the
      <span class="function"><a href="#function.setcookie" class="function">setcookie()</a></span> and <span class="function"><a href="#function.setrawcookie" class="function">setrawcookie()</a></span>
      function.
     </p>
   
    </div>
   
   <hr />
   
   
   
   
     
   
    <div id="features.sessions" class="chapter"><hr />
     <h1>Sessions</h1>
   
   
     <p class="para">
      Session support in PHP consists of a way to preserve certain data across
      subsequent accesses. This enables you to build more customized applications
      and increase the appeal of your web site. All information is in the
      <a href="#book.session" class="link">Session reference</a> section.
     </p>
   
    </div>
   
   <hr />
   
   
   
   
     
   
   <div id="features.xforms" class="chapter"><hr />
    <h1>Dealing with XForms</h1>
   
    <p class="para">
     <a href="http://www.w3.org/MarkUp/Forms/" class="link external">&raquo;&nbsp;XForms</a> defines a variation on traditional
     webforms which allows them to be used on a wider variety of platforms and 
     browsers or even non-traditional media such as PDF documents.
    </p>
    <p class="para">
     The first key difference in XForms is how the form is sent to the client.
     <a href="http://www.w3.org/MarkUp/Forms/2003/xforms-for-html-authors.html" class="link external">&raquo;&nbsp;<code class="literal">XForms for HTML Authors</code></a>
     contains a detailed description of how to create XForms, for the purpose
     of this tutorial we&#039;ll only be looking at a simple example.
    </p>
    <div class="example" id="example-393">
     <p><strong>Example #1 A simple XForms search form</strong></p>
     <div class="example-contents">
   <div class="htmlcode"><pre class="htmlcode">&lt;h:html xmlns:h=&quot;http://www.w3.org/1999/xhtml&quot;
           xmlns=&quot;http://www.w3.org/2002/xforms&quot;&gt;
   &lt;h:head&gt;
    &lt;h:title&gt;Search&lt;/h:title&gt;
    &lt;model&gt;
     &lt;submission action=&quot;http://example.com/search&quot;
                 method=&quot;post&quot; id=&quot;s&quot;/&gt;
    &lt;/model&gt;
   &lt;/h:head&gt;
   &lt;h:body&gt;
    &lt;h:p&gt;
     &lt;input ref=&quot;q&quot;&gt;&lt;label&gt;Find&lt;/label&gt;&lt;/input&gt;
     &lt;submit submission=&quot;s&quot;&gt;&lt;label&gt;Go&lt;/label&gt;&lt;/submit&gt;
    &lt;/h:p&gt;
   &lt;/h:body&gt;
   &lt;/h:html&gt;</pre>
   </div>
     </div>
   
    </div>
    <p class="para">
     The above form displays a text input box (named <code class="parameter">q</code>),
     and a submit button.  When the submit button is clicked, the form will be
     sent to the page referred to by <code class="literal">action</code>.
    </p>
    <p class="para">
     Here&#039;s where it starts to look different from your web application&#039;s point
     of view.  In a normal HTML form, the data would be sent as 
     <code class="literal">application/x-www-form-urlencoded</code>, in the XForms world
     however, this information is sent as <acronym title="eXtensible Markup Language">XML</acronym> formatted data.
    </p>
    <p class="para">
     If you&#039;re choosing to work with XForms then you probably want that data as
     <acronym title="eXtensible Markup Language">XML</acronym>, in that case, look in <var class="varname"><a href="#reserved.variables.httprawpostdata" class="classname">$HTTP_RAW_POST_DATA</a></var> where
     you&#039;ll find the <acronym title="eXtensible Markup Language">XML</acronym> document generated by the browser which you can pass
     into your favorite <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> engine or document parser.
    </p>
    <p class="para">
     If you&#039;re not interested in formatting and just want your data to be loaded
     into the traditional <var class="varname"><a href="#reserved.variables.post" class="classname">$_POST</a></var> variable, you can instruct
     the client browser to send it as <code class="literal">application/x-www-form-urlencoded</code>
     by changing the <code class="parameter">method</code> attribute to
     <em class="emphasis">urlencoded-post</em>.
    </p>
    <div class="example" id="example-394">
     <p><strong>Example #2 Using an XForm to populate <var class="varname"><a href="#reserved.variables.post" class="classname">$_POST</a></var></strong></p>
     <div class="example-contents">
   <div class="htmlcode"><pre class="htmlcode">&lt;h:html xmlns:h=&quot;http://www.w3.org/1999/xhtml&quot;
           xmlns=&quot;http://www.w3.org/2002/xforms&quot;&gt;
   &lt;h:head&gt;
    &lt;h:title&gt;Search&lt;/h:title&gt;
    &lt;model&gt;
     &lt;submission action=&quot;http://example.com/search&quot;
                 method=&quot;urlencoded-post&quot; id=&quot;s&quot;/&gt;
    &lt;/model&gt;
   &lt;/h:head&gt;
   &lt;h:body&gt;
    &lt;h:p&gt;
     &lt;input ref=&quot;q&quot;&gt;&lt;label&gt;Find&lt;/label&gt;&lt;/input&gt;
     &lt;submit submission=&quot;s&quot;&gt;&lt;label&gt;Go&lt;/label&gt;&lt;/submit&gt;
    &lt;/h:p&gt;
   &lt;/h:body&gt;
   &lt;/h:html&gt;</pre>
   </div>
     </div>
   
    </div>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      As of this writing, many browsers do not support XForms.
      Check your browser version if the above examples fails.
     </span>
    </p></blockquote>
   </div>
   
   <hr />
   
   
   
   
     
   
    <div id="features.file-upload" class="chapter"><hr />
     <h1>Handling file uploads</h1>
   <h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="#features.file-upload.post-method">POST method uploads</a></li><li><a href="#features.file-upload.errors">Error Messages Explained</a></li><li><a href="#features.file-upload.common-pitfalls">Common Pitfalls</a></li><li><a href="#features.file-upload.multiple">Uploading multiple files</a></li><li><a href="#features.file-upload.put-method">PUT method support</a></li><li><a href="#features.file-upload.errors.seealso">See Also</a></li></ul>
   
   
     <div id="features.file-upload.post-method" class="sect1"><hr />
      <h2 class="title">POST method uploads</h2>
      <p class="simpara">
       This feature lets people upload both text and binary files. 
       With PHP&#039;s authentication and file manipulation functions,
       you have full control over who is allowed to upload and
       what is to be done with the file once it has been uploaded.
      </p>
      <p class="simpara">
       PHP is capable of receiving file uploads from any RFC-1867
       compliant browser.
      </p>
   
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <strong>Related Configurations Note</strong><br />
       <p class="para">
        See also the <a href="#ini.file-uploads" class="link">file_uploads</a>, 
        <a href="#ini.upload-max-filesize" class="link">upload_max_filesize</a>,
        <a href="#ini.upload-tmp-dir" class="link">upload_tmp_dir</a>,
        <a href="#ini.post-max-size" class="link">post_max_size</a> and
        <a href="#ini.max-input-time" class="link">max_input_time</a> directives 
        in <var class="filename">php.ini</var>
       </p>
      </p></blockquote>
   
      <p class="para">
       PHP also supports PUT-method file uploads as used by
       <span class="productname">Netscape Composer</span> and W3C&#039;s 
       <span class="productname">Amaya</span> clients.  See the <a href="#features.file-upload.put-method" class="link">PUT Method
       Support</a> for more details.
      </p>
   
      <p class="para">
       <div class="example" id="example-395">
        <p><strong>Example #1 File Upload Form</strong></p>
        <div class="example-contents"><p>
         A file upload screen can be built by creating a special form which
         looks something like this:
        </p></div>
        <div class="example-contents">
   <div class="htmlcode"><pre class="htmlcode">&lt;!-- The data encoding type, enctype, MUST be specified as below --&gt;
   &lt;form enctype=&quot;multipart/form-data&quot; action=&quot;__URL__&quot; method=&quot;POST&quot;&gt;
       &lt;!-- MAX_FILE_SIZE must precede the file input field --&gt;
       &lt;input type=&quot;hidden&quot; name=&quot;MAX_FILE_SIZE&quot; value=&quot;30000&quot; /&gt;
       &lt;!-- Name of input element determines name in $_FILES array --&gt;
       Send this file: &lt;input name=&quot;userfile&quot; type=&quot;file&quot; /&gt;
       &lt;input type=&quot;submit&quot; value=&quot;Send File&quot; /&gt;
   &lt;/form&gt;</pre>
   </div>
        </div>
   
        <div class="example-contents"><p>
         The <code class="literal">__URL__</code> in the above example should be replaced,
         and point to a PHP file.
        </p></div>
        <div class="example-contents"><p>
         The <code class="literal">MAX_FILE_SIZE</code> hidden field (measured in bytes) must
         precede the file input field, and its value is the maximum filesize accepted by PHP.
         This form element should always be used as it saves users the trouble of
         waiting for a big file being transferred only to find that it was too
         large and the transfer failed.  Keep in mind: fooling this setting on the
         browser side is quite easy, so never rely on files with a greater size
         being blocked by this feature. It is merely a convenience feature for
         users on the client side of the application. The PHP settings (on the server
         side) for maximum-size, however, cannot be fooled.
        </p></div>
       </div>
      </p>
   
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        Be sure your file upload form has attribute <code class="literal">enctype=&quot;multipart/form-data&quot;</code>
        otherwise the file upload will not work.
       </p>
      </p></blockquote>
   
      <p class="para">
       The global <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES</a></var> will contain all the uploaded file information.
       Its contents from the example form is as follows. Note that this assumes the use of 
       the file upload name <em class="emphasis">userfile</em>, as used in the example 
       script above. This can be any name.
       <dl>
   
        
         <dt>
   <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['name']</a></var></dt>
   
         <dd>
   
          <p class="para">
           The original name of the file on the client machine.
          </p>
         </dd>
   
        
        
         <dt>
   <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['type']</a></var></dt>
   
         <dd>
   
          <p class="para">
           The mime type of the file, if the browser provided this
           information.  An example would be
           <code class="literal">&quot;image/gif&quot;</code>. This mime type is however
           not checked on the PHP side and therefore don&#039;t take its value
           for granted.
          </p>
         </dd>
   
        
        
         <dt>
   <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['size']</a></var></dt>
   
         <dd>
   
          <p class="para">
           The size, in bytes, of the uploaded file.
          </p>
         </dd>
   
        
        
         <dt>
   <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['tmp_name']</a></var></dt>
   
         <dd>
   
          <p class="para">
           The temporary filename of the file in which the uploaded file
           was stored on the server.
          </p>
         </dd>
   
        
        
         <dt>
   <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['error']</a></var></dt>
   
         <dd>
   
          <p class="para">
           The <a href="#features.file-upload.errors" class="link">error code</a>
           associated with this file upload.
          </p>
         </dd>
   
        
       </dl>
   
      </p>
   
      <p class="para">
       Files will, by default be stored in the server&#039;s default temporary
       directory, unless another location has been given with the <a href="#ini.upload-tmp-dir" class="link">upload_tmp_dir</a> directive in
       <var class="filename">php.ini</var>. The server&#039;s default directory can
       be changed by setting the environment variable
       <var class="envar">TMPDIR</var> in the environment in which PHP runs.
       Setting it using <span class="function"><a href="#function.putenv" class="function">putenv()</a></span> from within a PHP
       script will not work. This environment variable can also be used
       to make sure that other operations are working on uploaded files,
       as well.
       <div class="example" id="example-396">
        <p><strong>Example #2 Validating file uploads</strong></p>
        <div class="example-contents"><p>
         See also the function entries for <span class="function"><a href="#function.is-uploaded-file" class="function">is_uploaded_file()</a></span> 
         and <span class="function"><a href="#function.move-uploaded-file" class="function">move_uploaded_file()</a></span> for further information. The
         following example will process the file upload that came from a form.
        </p></div>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$uploaddir&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/var/www/uploads/'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$uploadfile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$uploaddir&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'userfile'</span><span style="color: #007700">][</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]);<br /><br />echo&nbsp;</span><span style="color: #DD0000">'&lt;pre&gt;'</span><span style="color: #007700">;<br />if&nbsp;(</span><span style="color: #0000BB">move_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'userfile'</span><span style="color: #007700">][</span><span style="color: #DD0000">'tmp_name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$uploadfile</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"File&nbsp;is&nbsp;valid,&nbsp;and&nbsp;was&nbsp;successfully&nbsp;uploaded.\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Possible&nbsp;file&nbsp;upload&nbsp;attack!\n"</span><span style="color: #007700">;<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">'Here&nbsp;is&nbsp;some&nbsp;more&nbsp;debugging&nbsp;info:'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">);<br /><br />print&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </p>
      <p class="simpara">
       The PHP script which receives the uploaded file should implement
       whatever logic is necessary for determining what should be done
       with the uploaded file. You can, for example, use the
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['size']</a></var> variable
       to throw away any files that are either too small or too big.  You
       could use the
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['type']</a></var> variable
       to throw away any files that didn&#039;t match a certain type criteria, but
       use this only as first of a series of checks, because this value
       is completely under the control of the client and not checked on the PHP
       side.
       Also, you could use <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['error']</a></var> 
       and plan your logic according to the <a href="#features.file-upload.errors" class="link">error codes</a>.
       Whatever the logic, you should either delete the file from the
       temporary directory or move it elsewhere.
      </p>
      <p class="simpara">
       If no file is selected for upload in your form, PHP will return
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['size']</a></var> as 0, and
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['tmp_name']</a></var> as none.
      </p>
      <p class="simpara">
       The file will be deleted from the temporary directory at the end
       of the request if it has not been moved away or renamed.
      </p>
       <div class="example" id="example-397">
        <p><strong>Example #3 Uploading array of files</strong></p>
        <div class="example-contents"><p>
         PHP supports <a href="#faq.html.arrays" class="link">HTML array feature</a>
         even with files.
        </p></div>
        <div class="example-contents">
   <div class="htmlcode"><pre class="htmlcode">&lt;form action=&quot;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
   &lt;p&gt;Pictures:
   &lt;input type=&quot;file&quot; name=&quot;pictures[]&quot; /&gt;
   &lt;input type=&quot;file&quot; name=&quot;pictures[]&quot; /&gt;
   &lt;input type=&quot;file&quot; name=&quot;pictures[]&quot; /&gt;
   &lt;input type=&quot;submit&quot; value=&quot;Send&quot; /&gt;
   &lt;/p&gt;
   &lt;/form&gt;</pre>
   </div>
        </div>
   
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"error"</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">UPLOAD_ERR_OK</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tmp_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"tmp_name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;basename()&nbsp;may&nbsp;prevent&nbsp;filesystem&nbsp;traversal&nbsp;attacks;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;further&nbsp;validation/sanitation&nbsp;of&nbsp;the&nbsp;filename&nbsp;may&nbsp;be&nbsp;appropriate<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">move_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$tmp_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"data/</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      <p class="para">
       File upload progress bar can be implemented using <a href="#session.upload-progress" class="link">Session Upload Progress</a>.
      </p>
     </div>
   <hr />
   
   
     <div id="features.file-upload.errors" class="sect1"><hr />
      <h2 class="title">Error Messages Explained</h2>
      <p class="simpara">
       PHP returns an appropriate error code along with the 
       file array.  The error code can be found in the 
       <code class="literal">error</code> segment of the file array that is created 
       during the file upload by PHP. In other words, the error might be 
       found in <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['error']</a></var>.
      </p>
      <p class="para">
       <dl>
   
        
         <dt>
   <strong><code>UPLOAD_ERR_OK</code></strong></dt>
   
         <dd>
   
          <p class="para">
           Value: 0; There is no error, the file uploaded with success.
          </p>
         </dd>
   
        
        
         <dt>
   <strong><code>UPLOAD_ERR_INI_SIZE</code></strong></dt>
   
         <dd>
   
          <p class="para">
           Value: 1; The uploaded file exceeds the
           <a href="#ini.upload-max-filesize" class="link">upload_max_filesize</a> 
           directive in <var class="filename">php.ini</var>.
          </p>
         </dd>
   
        
        
         <dt>
   <strong><code>UPLOAD_ERR_FORM_SIZE</code></strong></dt>
   
         <dd>
   
          <p class="para">
           Value: 2; The uploaded file exceeds the <em class="emphasis">MAX_FILE_SIZE</em> 
           directive that was specified in the HTML form.
          </p>
         </dd>
   
        
        
         <dt>
   <strong><code>UPLOAD_ERR_PARTIAL</code></strong></dt>
   
         <dd>
   
          <p class="para">
           Value: 3; The uploaded file was only partially uploaded.
          </p>
         </dd>
   
        
        
         <dt>
   <strong><code>UPLOAD_ERR_NO_FILE</code></strong></dt>
   
         <dd>
   
          <p class="para">
           Value: 4; No file was uploaded.
          </p>
         </dd>
   
        
        
         <dt>
   <strong><code>UPLOAD_ERR_NO_TMP_DIR</code></strong></dt>
   
         <dd>
   
          <p class="para">
           Value: 6; Missing a temporary folder. Introduced in PHP 5.0.3.
          </p>
         </dd>
   
        
        
         <dt>
   <strong><code>UPLOAD_ERR_CANT_WRITE</code></strong></dt>
   
         <dd>
   
          <p class="para">
           Value: 7; Failed to write file to disk. Introduced in PHP 5.1.0.
          </p>
         </dd>
   
        
        
          <dt>
   <strong><code>UPLOAD_ERR_EXTENSION</code></strong></dt>
   
          <dd>
   
            <p class="para">
              Value: 8; A PHP extension stopped the file upload. PHP does not 
              provide a way to ascertain which extension caused the file upload to 
              stop; examining the list of loaded extensions with <span class="function"><a href="#function.phpinfo" class="function">phpinfo()</a></span> may help. 
              Introduced in PHP 5.2.0.
            </p>
          </dd>
   
        
       </dl>
   
      </p>
     </div>
   <hr />
   
   
     <div id="features.file-upload.common-pitfalls" class="sect1"><hr />
      <h2 class="title">Common Pitfalls</h2>
      <p class="simpara">
       The <code class="literal">MAX_FILE_SIZE</code> item cannot specify a file size 
       greater than the file size that has been set in the <a href="#ini.upload-max-filesize" class="link">upload_max_filesize</a> in
       the <var class="filename">php.ini</var> file. The default is 2 megabytes.
      </p>
      <p class="simpara">
       If a memory limit is enabled, a larger <a href="#ini.memory-limit" class="link">memory_limit</a> may be needed. Make
       sure you set <a href="#ini.memory-limit" class="link">memory_limit</a>
       large enough.
      </p>
      <p class="simpara">
       If <a href="#ini.max-execution-time" class="link">max_execution_time</a>
       is set too small, script execution may be exceeded by the value. Make
       sure you set <code class="literal">max_execution_time</code> large enough.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <span class="simpara">
        <a href="#ini.max-execution-time" class="link">max_execution_time</a> only
        affects the execution time of the script itself.  Any time spent
        on activity that happens outside the execution of the script
        such as system calls using <span class="function"><a href="#function.system" class="function">system()</a></span>, the
        <span class="function"><a href="#function.sleep" class="function">sleep()</a></span> function, database queries, time taken by
        the file upload process, etc. is not included when determining the maximum
        time that the script has been running.
       </span>
      </p></blockquote>
      <div class="warning"><strong class="warning">Warning</strong>
       <p class="simpara">
        <a href="#ini.max-input-time" class="link">max_input_time</a> sets the maximum
        time, in seconds, the script is allowed to receive input; this includes
        file uploads.  For large or multiple files, or users on slower connections,
        the default of <code class="literal">60 seconds</code> may be exceeded.
       </p>
      </div>
      <p class="simpara">
       If <a href="#ini.post-max-size" class="link">post_max_size</a> is set too
       small, large files cannot be uploaded.  Make sure you set
       <code class="literal">post_max_size</code> large enough.
      </p>
      <p class="simpara">
       As of PHP 5.2.12, the
       <a href="#ini.max-file-uploads" class="link">max_file_uploads</a> configuration
       setting controls the maximum number of files that can uploaded in one
       request. If more files are uploaded than the limit, then
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES</a></var> will stop processing files once the limit is
       reached. For example, if
       <a href="#ini.max-file-uploads" class="link">max_file_uploads</a> is set to
       <code class="literal">10</code>, then <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES</a></var> will never contain
       more than 10 items.
      </p>
      <p class="simpara">
       Not validating which file you operate on may mean that users can access
       sensitive information in other directories.
      </p>
      <p class="simpara">
       Please note that the <span class="productname">CERN httpd</span> seems to strip off everything
       starting at the first whitespace in the content-type mime header
       it gets from the client.  As long as this is the case, <span class="productname">CERN httpd</span>
       will not support the file upload feature.
      </p>
      <p class="simpara">
       Due to the large amount of directory listing styles we cannot guarantee
       that files with exotic names (like containing spaces) are handled properly.
      </p>
      <p class="simpara">
       A developer may not mix normal <code class="literal">input</code> fields and file upload fields in the same
       form variable (by using an <code class="literal">input</code> name like <code class="literal">foo[]</code>).
      </p>
     </div>
   <hr />
   
     
     <div id="features.file-upload.multiple" class="sect1"><hr />
      <h2 class="title">Uploading multiple files</h2>
      <p class="simpara">
       Multiple files can be uploaded using different
       <code class="literal">name</code> for <code class="literal">input</code>.
      </p>
      <p class="simpara">
       It is also possible to upload multiple files simultaneously and
       have the information organized automatically in arrays for you. To
       do so, you need to use the same array submission syntax in the
       HTML form as you do with multiple selects and checkboxes:
      </p>
      <p class="para">
       <div class="example" id="example-398">
        <p><strong>Example #1 Uploading multiple files</strong></p>
        <div class="example-contents">
   <div class="htmlcode"><pre class="htmlcode">&lt;form action=&quot;file-upload.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
     Send these files:&lt;br /&gt;
     &lt;input name=&quot;userfile[]&quot; type=&quot;file&quot; /&gt;&lt;br /&gt;
     &lt;input name=&quot;userfile[]&quot; type=&quot;file&quot; /&gt;&lt;br /&gt;
     &lt;input type=&quot;submit&quot; value=&quot;Send files&quot; /&gt;
   &lt;/form&gt;</pre>
   </div>
        </div>
   
       </div>
      </p>
      <p class="simpara">
       When the above form is submitted, the arrays
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']</a></var>,
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['name']</a></var>, and
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['size']</a></var> will be
       initialized.
       When
       <a href="#ini.register-globals" class="link">register_globals</a> is on, globals for uploaded
       files are also initialized. Each of these will be a numerically
       indexed array of the appropriate values for the submitted files.
      </p>
      <p class="simpara">
       For instance, assume that the filenames
       <var class="filename">/home/test/review.html</var> and
       <var class="filename">/home/test/xwp.out</var> are submitted.  In this
       case, <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['name'][0]</a></var>
       would contain the value <var class="filename">review.html</var>, and
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['name'][1]</a></var> would
       contain the value <var class="filename">xwp.out</var>. Similarly,
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['size'][0]</a></var> would
       contain <var class="filename">review.html</var>&#039;s file size, and so forth.
      </p>
      <p class="simpara">
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['name'][0]</a></var>,
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['tmp_name'][0]</a></var>,
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['size'][0]</a></var>, and
       <var class="varname"><a href="#reserved.variables.files" class="classname">$_FILES['userfile']['type'][0]</a></var> are
       also set.
      </p>
      <div class="warning"><strong class="warning">Warning</strong>
       <p class="simpara">
        As of PHP 5.2.12, the
        <a href="#ini.max-file-uploads" class="link">max_file_uploads</a>
        configuration setting acts as a limit on the number of files that can be
        uploaded in one request. You will need to ensure that your form does not
        try to upload more files in one request than this limit.
       </p>
      </div>
     </div>
   <hr />
   
   
     <div id="features.file-upload.put-method" class="sect1"><hr />
      <h2 class="title">PUT method support</h2>
      <p class="para">
       PHP provides support for the HTTP PUT method used by some clients to store
       files on a server.
       PUT requests are much simpler than a file upload using POST requests
       and they look something like this:
       <div class="informalexample">
        <div class="example-contents">
   <div class="HTTPcode"><pre class="HTTPcode">PUT /path/filename.html HTTP/1.1</pre>
   </div>
        </div>
   
       </div>
      </p>
      <p class="para">
       This would normally mean that the remote client would like to save
       the content that follows as: <var class="filename">/path/filename.html</var> in your web tree.
       It is obviously not a good idea for Apache or PHP to automatically
       let everybody overwrite any files in your web tree.  So, to handle
       such a request you have to first tell your web server that you
       want a certain PHP script to handle the request.  In Apache you do
       this with the <em class="emphasis">Script</em> directive.  It can be
       placed almost anywhere in your Apache configuration file.  A
       common place is inside a <code class="literal">&lt;Directory&gt;</code> block or perhaps inside
       a <code class="literal">&lt;VirtualHost&gt;</code> block.  A line like this would do the trick:
       <div class="informalexample">
        <div class="example-contents">
   <div class="cdata"><pre>
   Script PUT /put.php
   </pre></div>
        </div>
   
       </div>
      </p>
      <p class="simpara">
       This tells Apache to send all PUT requests for URIs that match the
       context in which you put this line to the <var class="filename">put.php</var> script. This
       assumes, of course, that you have PHP enabled for the <var class="filename">.php</var>
       extension and PHP is active. The destination resource for all PUT 
       requests to this script has to be the script itself, not a filename the
       uploaded file should have.
      </p>
      <p class="simpara">
       With PHP you would then do something like the following in
       your put.php. This would copy the contents of the uploaded file to the
       file <var class="filename">myputfile.ext</var> on the server.
       You would probably want to perform some checks and/or
       authenticate the user before performing this file copy.
      </p>
      <p class="para">
       <div class="example" id="example-399">
        <p><strong>Example #1 Saving HTTP PUT files</strong></p>
        <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;PUT&nbsp;data&nbsp;comes&nbsp;in&nbsp;on&nbsp;the&nbsp;stdin&nbsp;stream&nbsp;*/<br /></span><span style="color: #0000BB">$putdata&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"php://input"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Open&nbsp;a&nbsp;file&nbsp;for&nbsp;writing&nbsp;*/<br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"myputfile.ext"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Read&nbsp;the&nbsp;data&nbsp;1&nbsp;KB&nbsp;at&nbsp;a&nbsp;time<br />&nbsp;&nbsp;&nbsp;and&nbsp;write&nbsp;to&nbsp;the&nbsp;file&nbsp;*/<br /></span><span style="color: #007700">while&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$putdata</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">))<br />&nbsp;&nbsp;</span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Close&nbsp;the&nbsp;streams&nbsp;*/<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$putdata</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
        </div>
   
       </div>
      </p>
     </div>
   <hr />
   
   
     <div id="features.file-upload.errors.seealso" class="sect1"><hr />
     <h2 class="title">See Also</h2>
     <p class="para">
      <ul class="simplelist">
       <li class="member"><a href="#security.filesystem" class="link">Filesystem Security</a></li>
      </ul>
     </p>
    </div>
   <hr />
   
   
    </div>
   
   <hr />
   
   
   
   
     
   
    <div id="features.remote-files" class="chapter"><hr />
     <h1>Using remote files</h1>
   
   
     <p class="para">
      As long as <strong class="option unknown">allow_url_fopen</strong> is enabled in
      <var class="filename">php.ini</var>, you can use <acronym title="Hypertext Transfer Protocol">HTTP</acronym> and <acronym title="File Transfer Protocol">FTP</acronym> 
      URLs with most of the functions
      that take a filename as a parameter.  In addition, URLs can be
      used with the <span class="function"><a href="#function.include" class="function">include</a></span>,
      <span class="function"><a href="#function.include-once" class="function">include_once</a></span>, <span class="function"><a href="#function.require" class="function">require</a></span> and
      <span class="function"><a href="#function.require-once" class="function">require_once</a></span> statements (since PHP 5.2.0,
      <strong class="option unknown">allow_url_include</strong> must be enabled for these).
      See <a href="#wrappers" class="xref">Supported Protocols and Wrappers</a> for more information about the protocols
      supported by PHP.
     </p>
     <p class="para">
      For example, you can use this to open a file on a remote web server,
      parse the output for the data you want, and then use that data in a
      database query, or simply to output it in a style matching the rest
      of your website.
     </p>
     <p class="para">
      <div class="example" id="example-400">
       <p><strong>Example #1 Getting the title of a remote page</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"http://www.example.com/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Unable&nbsp;to&nbsp;open&nbsp;remote&nbsp;file.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br />while&nbsp;(!</span><span style="color: #0000BB">feof&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$line&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fgets&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1024</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;This&nbsp;only&nbsp;works&nbsp;if&nbsp;the&nbsp;title&nbsp;and&nbsp;its&nbsp;tags&nbsp;are&nbsp;on&nbsp;one&nbsp;line&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">preg_match&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"@\&lt;title\&gt;(.*)\&lt;/title\&gt;@i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$out</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>
       </div>
   
      </div>
     </p>
     <p class="para">
      You can also write to files on an FTP server (provided that you
      have connected as a user with the correct access rights). You
      can only create new files using this method; if you try to overwrite
      a file that already exists, the <span class="function"><a href="#function.fopen" class="function">fopen()</a></span> call will
      fail.
     </p>
     <p class="para">
      To connect as a user other than &#039;anonymous&#039;, you need to specify
      the username (and possibly password) within the URL, such as
      &#039;<code class="literal">ftp://user:password@ftp.example.com/path/to/file</code>&#039;.
      (You can use the same sort of syntax to access files via
      <acronym title="Hypertext Transfer Protocol">HTTP</acronym> when they require Basic authentication.)
     </p>
     <p class="para">
      <div class="example" id="example-401">
       <p><strong>Example #2 Storing data on a remote server</strong></p>
       <div class="example-contents">
   <div class="phpcode"><code><span style="color: #000000">
   <span style="color: #0000BB">&lt;?php<br />$file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"ftp://ftp.example.com/incoming/outputfile"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w"</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Unable&nbsp;to&nbsp;open&nbsp;remote&nbsp;file&nbsp;for&nbsp;writing.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #FF8000">/*&nbsp;Write&nbsp;the&nbsp;data&nbsp;here.&nbsp;*/<br /></span><span style="color: #0000BB">fwrite&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fclose&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
   </span>
   </code></div>  
       </div>
   
      </div>
     </p>
     <p class="para">
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        You might get the idea from the example above that you can use
        this technique to write to a remote log file. Unfortunately
        that would not work because the <span class="function"><a href="#function.fopen" class="function">fopen()</a></span> call will
        fail if the remote file already exists. To do distributed logging
        like that, you should take a look at <span class="function"><a href="#function.syslog" class="function">syslog()</a></span>.
       </p> 
      </p></blockquote>
     </p>
   
    </div>
   
   <hr />